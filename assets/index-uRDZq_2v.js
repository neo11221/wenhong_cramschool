function cT(r,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in r)){const d=Object.getOwnPropertyDescriptor(o,u);d&&Object.defineProperty(r,u,d.get?d:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const E of d.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&o(E)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var k0={exports:{}},kc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2;function uT(){if(j2)return kc;j2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,u,d){var E=null;if(d!==void 0&&(E=""+d),u.key!==void 0&&(E=""+u.key),"key"in u){d={};for(var T in u)T!=="key"&&(d[T]=u[T])}else d=u;return u=d.ref,{$$typeof:r,type:o,key:E,ref:u!==void 0?u:null,props:d}}return kc.Fragment=e,kc.jsx=n,kc.jsxs=n,kc}var z2;function hT(){return z2||(z2=1,k0.exports=uT()),k0.exports}var S=hT(),U0={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2;function fT(){if(H2)return gt;H2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.iterator;function k(ie){return ie===null||typeof ie!="object"?null:(ie=M&&ie[M]||ie["@@iterator"],typeof ie=="function"?ie:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,z={};function xe(ie,Ae,ke){this.props=ie,this.context=Ae,this.refs=z,this.updater=ke||X}xe.prototype.isReactComponent={},xe.prototype.setState=function(ie,Ae){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,Ae,"setState")},xe.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function ge(){}ge.prototype=xe.prototype;function Q(ie,Ae,ke){this.props=ie,this.context=Ae,this.refs=z,this.updater=ke||X}var ve=Q.prototype=new ge;ve.constructor=Q,K(ve,xe.prototype),ve.isPureReactComponent=!0;var Fe=Array.isArray;function Be(){}var F={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function V(ie,Ae,ke){var Ue=ke.ref;return{$$typeof:r,type:ie,key:Ae,ref:Ue!==void 0?Ue:null,props:ke}}function ne(ie,Ae){return V(ie.type,Ae,ie.props)}function W(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===r}function J(ie){var Ae={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(ke){return Ae[ke]})}var Y=/\/+/g;function Ze(ie,Ae){return typeof ie=="object"&&ie!==null&&ie.key!=null?J(""+ie.key):Ae.toString(36)}function fe(ie){switch(ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason;default:switch(typeof ie.status=="string"?ie.then(Be,Be):(ie.status="pending",ie.then(function(Ae){ie.status==="pending"&&(ie.status="fulfilled",ie.value=Ae)},function(Ae){ie.status==="pending"&&(ie.status="rejected",ie.reason=Ae)})),ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason}}throw ie}function me(ie,Ae,ke,Ue,tt){var Oe=typeof ie;(Oe==="undefined"||Oe==="boolean")&&(ie=null);var pt=!1;if(ie===null)pt=!0;else switch(Oe){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(ie.$$typeof){case r:case e:pt=!0;break;case C:return pt=ie._init,me(pt(ie._payload),Ae,ke,Ue,tt)}}if(pt)return tt=tt(ie),pt=Ue===""?"."+Ze(ie,0):Ue,Fe(tt)?(ke="",pt!=null&&(ke=pt.replace(Y,"$&/")+"/"),me(tt,Ae,ke,"",function(yi){return yi})):tt!=null&&(W(tt)&&(tt=ne(tt,ke+(tt.key==null||ie&&ie.key===tt.key?"":(""+tt.key).replace(Y,"$&/")+"/")+pt)),Ae.push(tt)),1;pt=0;var yt=Ue===""?".":Ue+":";if(Fe(ie))for(var Jt=0;Jt<ie.length;Jt++)Ue=ie[Jt],Oe=yt+Ze(Ue,Jt),pt+=me(Ue,Ae,ke,Oe,tt);else if(Jt=k(ie),typeof Jt=="function")for(ie=Jt.call(ie),Jt=0;!(Ue=ie.next()).done;)Ue=Ue.value,Oe=yt+Ze(Ue,Jt++),pt+=me(Ue,Ae,ke,Oe,tt);else if(Oe==="object"){if(typeof ie.then=="function")return me(fe(ie),Ae,ke,Ue,tt);throw Ae=String(ie),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return pt}function we(ie,Ae,ke){if(ie==null)return ie;var Ue=[],tt=0;return me(ie,Ue,"","",function(Oe){return Ae.call(ke,Oe,tt++)}),Ue}function qe(ie){if(ie._status===-1){var Ae=ie._result;Ae=Ae(),Ae.then(function(ke){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=ke)},function(ke){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=ke)}),ie._status===-1&&(ie._status=0,ie._result=Ae)}if(ie._status===1)return ie._result.default;throw ie._result}var ot=typeof reportError=="function"?reportError:function(ie){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ie=="object"&&ie!==null&&typeof ie.message=="string"?String(ie.message):String(ie),error:ie});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ie);return}console.error(ie)},ft={map:we,forEach:function(ie,Ae,ke){we(ie,function(){Ae.apply(this,arguments)},ke)},count:function(ie){var Ae=0;return we(ie,function(){Ae++}),Ae},toArray:function(ie){return we(ie,function(Ae){return Ae})||[]},only:function(ie){if(!W(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}};return gt.Activity=I,gt.Children=ft,gt.Component=xe,gt.Fragment=n,gt.Profiler=u,gt.PureComponent=Q,gt.StrictMode=o,gt.Suspense=b,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,gt.__COMPILER_RUNTIME={__proto__:null,c:function(ie){return F.H.useMemoCache(ie)}},gt.cache=function(ie){return function(){return ie.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(ie,Ae,ke){if(ie==null)throw Error("The argument must be a React element, but you passed "+ie+".");var Ue=K({},ie.props),tt=ie.key;if(Ae!=null)for(Oe in Ae.key!==void 0&&(tt=""+Ae.key),Ae)!G.call(Ae,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&Ae.ref===void 0||(Ue[Oe]=Ae[Oe]);var Oe=arguments.length-2;if(Oe===1)Ue.children=ke;else if(1<Oe){for(var pt=Array(Oe),yt=0;yt<Oe;yt++)pt[yt]=arguments[yt+2];Ue.children=pt}return V(ie.type,tt,Ue)},gt.createContext=function(ie){return ie={$$typeof:E,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null},ie.Provider=ie,ie.Consumer={$$typeof:d,_context:ie},ie},gt.createElement=function(ie,Ae,ke){var Ue,tt={},Oe=null;if(Ae!=null)for(Ue in Ae.key!==void 0&&(Oe=""+Ae.key),Ae)G.call(Ae,Ue)&&Ue!=="key"&&Ue!=="__self"&&Ue!=="__source"&&(tt[Ue]=Ae[Ue]);var pt=arguments.length-2;if(pt===1)tt.children=ke;else if(1<pt){for(var yt=Array(pt),Jt=0;Jt<pt;Jt++)yt[Jt]=arguments[Jt+2];tt.children=yt}if(ie&&ie.defaultProps)for(Ue in pt=ie.defaultProps,pt)tt[Ue]===void 0&&(tt[Ue]=pt[Ue]);return V(ie,Oe,tt)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(ie){return{$$typeof:T,render:ie}},gt.isValidElement=W,gt.lazy=function(ie){return{$$typeof:C,_payload:{_status:-1,_result:ie},_init:qe}},gt.memo=function(ie,Ae){return{$$typeof:_,type:ie,compare:Ae===void 0?null:Ae}},gt.startTransition=function(ie){var Ae=F.T,ke={};F.T=ke;try{var Ue=ie(),tt=F.S;tt!==null&&tt(ke,Ue),typeof Ue=="object"&&Ue!==null&&typeof Ue.then=="function"&&Ue.then(Be,ot)}catch(Oe){ot(Oe)}finally{Ae!==null&&ke.types!==null&&(Ae.types=ke.types),F.T=Ae}},gt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},gt.use=function(ie){return F.H.use(ie)},gt.useActionState=function(ie,Ae,ke){return F.H.useActionState(ie,Ae,ke)},gt.useCallback=function(ie,Ae){return F.H.useCallback(ie,Ae)},gt.useContext=function(ie){return F.H.useContext(ie)},gt.useDebugValue=function(){},gt.useDeferredValue=function(ie,Ae){return F.H.useDeferredValue(ie,Ae)},gt.useEffect=function(ie,Ae){return F.H.useEffect(ie,Ae)},gt.useEffectEvent=function(ie){return F.H.useEffectEvent(ie)},gt.useId=function(){return F.H.useId()},gt.useImperativeHandle=function(ie,Ae,ke){return F.H.useImperativeHandle(ie,Ae,ke)},gt.useInsertionEffect=function(ie,Ae){return F.H.useInsertionEffect(ie,Ae)},gt.useLayoutEffect=function(ie,Ae){return F.H.useLayoutEffect(ie,Ae)},gt.useMemo=function(ie,Ae){return F.H.useMemo(ie,Ae)},gt.useOptimistic=function(ie,Ae){return F.H.useOptimistic(ie,Ae)},gt.useReducer=function(ie,Ae,ke){return F.H.useReducer(ie,Ae,ke)},gt.useRef=function(ie){return F.H.useRef(ie)},gt.useState=function(ie){return F.H.useState(ie)},gt.useSyncExternalStore=function(ie,Ae,ke){return F.H.useSyncExternalStore(ie,Ae,ke)},gt.useTransition=function(){return F.H.useTransition()},gt.version="19.2.3",gt}var G2;function H1(){return G2||(G2=1,U0.exports=fT()),U0.exports}var se=H1();const ii=z1(se);var V0={exports:{}},Uc={},F0={exports:{}},j0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2;function dT(){return q2||(q2=1,(function(r){function e(me,we){var qe=me.length;me.push(we);e:for(;0<qe;){var ot=qe-1>>>1,ft=me[ot];if(0<u(ft,we))me[ot]=we,me[qe]=ft,qe=ot;else break e}}function n(me){return me.length===0?null:me[0]}function o(me){if(me.length===0)return null;var we=me[0],qe=me.pop();if(qe!==we){me[0]=qe;e:for(var ot=0,ft=me.length,ie=ft>>>1;ot<ie;){var Ae=2*(ot+1)-1,ke=me[Ae],Ue=Ae+1,tt=me[Ue];if(0>u(ke,qe))Ue<ft&&0>u(tt,ke)?(me[ot]=tt,me[Ue]=qe,ot=Ue):(me[ot]=ke,me[Ae]=qe,ot=Ae);else if(Ue<ft&&0>u(tt,qe))me[ot]=tt,me[Ue]=qe,ot=Ue;else break e}}return we}function u(me,we){var qe=me.sortIndex-we.sortIndex;return qe!==0?qe:me.id-we.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var E=Date,T=E.now();r.unstable_now=function(){return E.now()-T}}var b=[],_=[],C=1,I=null,M=3,k=!1,X=!1,K=!1,z=!1,xe=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ve(me){for(var we=n(_);we!==null;){if(we.callback===null)o(_);else if(we.startTime<=me)o(_),we.sortIndex=we.expirationTime,e(b,we);else break;we=n(_)}}function Fe(me){if(K=!1,ve(me),!X)if(n(b)!==null)X=!0,Be||(Be=!0,J());else{var we=n(_);we!==null&&fe(Fe,we.startTime-me)}}var Be=!1,F=-1,G=5,V=-1;function ne(){return z?!0:!(r.unstable_now()-V<G)}function W(){if(z=!1,Be){var me=r.unstable_now();V=me;var we=!0;try{e:{X=!1,K&&(K=!1,ge(F),F=-1),k=!0;var qe=M;try{t:{for(ve(me),I=n(b);I!==null&&!(I.expirationTime>me&&ne());){var ot=I.callback;if(typeof ot=="function"){I.callback=null,M=I.priorityLevel;var ft=ot(I.expirationTime<=me);if(me=r.unstable_now(),typeof ft=="function"){I.callback=ft,ve(me),we=!0;break t}I===n(b)&&o(b),ve(me)}else o(b);I=n(b)}if(I!==null)we=!0;else{var ie=n(_);ie!==null&&fe(Fe,ie.startTime-me),we=!1}}break e}finally{I=null,M=qe,k=!1}we=void 0}}finally{we?J():Be=!1}}}var J;if(typeof Q=="function")J=function(){Q(W)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Ze=Y.port2;Y.port1.onmessage=W,J=function(){Ze.postMessage(null)}}else J=function(){xe(W,0)};function fe(me,we){F=xe(function(){me(r.unstable_now())},we)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(me){me.callback=null},r.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<me?Math.floor(1e3/me):5},r.unstable_getCurrentPriorityLevel=function(){return M},r.unstable_next=function(me){switch(M){case 1:case 2:case 3:var we=3;break;default:we=M}var qe=M;M=we;try{return me()}finally{M=qe}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(me,we){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var qe=M;M=me;try{return we()}finally{M=qe}},r.unstable_scheduleCallback=function(me,we,qe){var ot=r.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?ot+qe:ot):qe=ot,me){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=qe+ft,me={id:C++,callback:we,priorityLevel:me,startTime:qe,expirationTime:ft,sortIndex:-1},qe>ot?(me.sortIndex=qe,e(_,me),n(b)===null&&me===n(_)&&(K?(ge(F),F=-1):K=!0,fe(Fe,qe-ot))):(me.sortIndex=ft,e(b,me),X||k||(X=!0,Be||(Be=!0,J()))),me},r.unstable_shouldYield=ne,r.unstable_wrapCallback=function(me){var we=M;return function(){var qe=M;M=we;try{return me.apply(this,arguments)}finally{M=qe}}}})(j0)),j0}var Y2;function gT(){return Y2||(Y2=1,F0.exports=dT()),F0.exports}var z0={exports:{}},Ji={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X2;function mT(){if(X2)return Ji;X2=1;var r=H1();function e(b){var _="https://react.dev/errors/"+b;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)_+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+b+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(b,_,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:I==null?null:""+I,children:b,containerInfo:_,implementation:C}}var E=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(b,_){if(b==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Ji.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Ji.createPortal=function(b,_){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return d(b,_,null,C)},Ji.flushSync=function(b){var _=E.T,C=o.p;try{if(E.T=null,o.p=2,b)return b()}finally{E.T=_,o.p=C,o.d.f()}},Ji.preconnect=function(b,_){typeof b=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,o.d.C(b,_))},Ji.prefetchDNS=function(b){typeof b=="string"&&o.d.D(b)},Ji.preinit=function(b,_){if(typeof b=="string"&&_&&typeof _.as=="string"){var C=_.as,I=T(C,_.crossOrigin),M=typeof _.integrity=="string"?_.integrity:void 0,k=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;C==="style"?o.d.S(b,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:I,integrity:M,fetchPriority:k}):C==="script"&&o.d.X(b,{crossOrigin:I,integrity:M,fetchPriority:k,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Ji.preinitModule=function(b,_){if(typeof b=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var C=T(_.as,_.crossOrigin);o.d.M(b,{crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&o.d.M(b)},Ji.preload=function(b,_){if(typeof b=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var C=_.as,I=T(C,_.crossOrigin);o.d.L(b,C,{crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Ji.preloadModule=function(b,_){if(typeof b=="string")if(_){var C=T(_.as,_.crossOrigin);o.d.m(b,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else o.d.m(b)},Ji.requestFormReset=function(b){o.d.r(b)},Ji.unstable_batchedUpdates=function(b,_){return b(_)},Ji.useFormState=function(b,_,C){return E.H.useFormState(b,_,C)},Ji.useFormStatus=function(){return E.H.useHostTransitionStatus()},Ji.version="19.2.3",Ji}var K2;function pT(){if(K2)return z0.exports;K2=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),z0.exports=mT(),z0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2;function xT(){if(W2)return Uc;W2=1;var r=gT(),e=H1(),n=pT();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var s=t,c=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(c=s.return),t=s.return;while(t)}return s.tag===3?c:null}function E(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function T(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function b(t){if(d(t)!==t)throw Error(o(188))}function _(t){var s=t.alternate;if(!s){if(s=d(t),s===null)throw Error(o(188));return s!==t?null:t}for(var c=t,g=s;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(g=y.return,g!==null){c=g;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return b(y),t;if(w===g)return b(y),s;w=w.sibling}throw Error(o(188))}if(c.return!==g.return)c=y,g=w;else{for(var O=!1,U=y.child;U;){if(U===c){O=!0,c=y,g=w;break}if(U===g){O=!0,g=y,c=w;break}U=U.sibling}if(!O){for(U=w.child;U;){if(U===c){O=!0,c=w,g=y;break}if(U===g){O=!0,g=w,c=y;break}U=U.sibling}if(!O)throw Error(o(189))}}if(c.alternate!==g)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:s}function C(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=C(t),s!==null)return s;t=t.sibling}return null}var I=Object.assign,M=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),xe=Symbol.for("react.profiler"),ge=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function J(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Symbol.for("react.client.reference");function Ze(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Y?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case K:return"Fragment";case xe:return"Profiler";case z:return"StrictMode";case Fe:return"Suspense";case Be:return"SuspenseList";case V:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case X:return"Portal";case Q:return t.displayName||"Context";case ge:return(t._context.displayName||"Context")+".Consumer";case ve:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F:return s=t.displayName||null,s!==null?s:Ze(t.type)||"Memo";case G:s=t._payload,t=t._init;try{return Ze(t(s))}catch{}}return null}var fe=Array.isArray,me=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe={pending:!1,data:null,method:null,action:null},ot=[],ft=-1;function ie(t){return{current:t}}function Ae(t){0>ft||(t.current=ot[ft],ot[ft]=null,ft--)}function ke(t,s){ft++,ot[ft]=t.current,t.current=s}var Ue=ie(null),tt=ie(null),Oe=ie(null),pt=ie(null);function yt(t,s){switch(ke(Oe,s),ke(tt,t),ke(Ue,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?u2(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=u2(s),t=h2(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ae(Ue),ke(Ue,t)}function Jt(){Ae(Ue),Ae(tt),Ae(Oe)}function yi(t){t.memoizedState!==null&&ke(pt,t);var s=Ue.current,c=h2(s,t.type);s!==c&&(ke(tt,t),ke(Ue,c))}function Pn(t){tt.current===t&&(Ae(Ue),Ae(tt)),pt.current===t&&(Ae(pt),Mc._currentValue=qe)}var nr,_t;function zn(t){if(nr===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);nr=s&&s[1]||"",_t=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nr+t+_t}var _i=!1;function Ri(t,s){if(!t||_i)return"";_i=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(_e){var de=_e}Reflect.construct(t,[],Se)}else{try{Se.call()}catch(_e){de=_e}t.call(Se.prototype)}}else{try{throw Error()}catch(_e){de=_e}(Se=t())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(_e){if(_e&&de&&typeof _e.stack=="string")return[_e.stack,de.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),O=w[0],U=w[1];if(O&&U){var Z=O.split(`
`),he=U.split(`
`);for(y=g=0;g<Z.length&&!Z[g].includes("DetermineComponentFrameRoot");)g++;for(;y<he.length&&!he[y].includes("DetermineComponentFrameRoot");)y++;if(g===Z.length||y===he.length)for(g=Z.length-1,y=he.length-1;1<=g&&0<=y&&Z[g]!==he[y];)y--;for(;1<=g&&0<=y;g--,y--)if(Z[g]!==he[y]){if(g!==1||y!==1)do if(g--,y--,0>y||Z[g]!==he[y]){var be=`
`+Z[g].replace(" at new "," at ");return t.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",t.displayName)),be}while(1<=g&&0<=y);break}}}finally{_i=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?zn(c):""}function Tn(t,s){switch(t.tag){case 26:case 27:case 5:return zn(t.type);case 16:return zn("Lazy");case 13:return t.child!==s&&s!==null?zn("Suspense Fallback"):zn("Suspense");case 19:return zn("SuspenseList");case 0:case 15:return Ri(t.type,!1);case 11:return Ri(t.type.render,!1);case 1:return Ri(t.type,!0);case 31:return zn("Activity");default:return""}}function Bt(t){try{var s="",c=null;do s+=Tn(t,c),c=t,t=t.return;while(t);return s}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Qe=Object.prototype.hasOwnProperty,pn=r.unstable_scheduleCallback,je=r.unstable_cancelCallback,qi=r.unstable_shouldYield,ps=r.unstable_requestPaint,xn=r.unstable_now,mr=r.unstable_getCurrentPriorityLevel,ui=r.unstable_ImmediatePriority,Yr=r.unstable_UserBlockingPriority,si=r.unstable_NormalPriority,Qn=r.unstable_LowPriority,Cs=r.unstable_IdlePriority,xs=r.log,Sa=r.unstable_setDisableYieldValue,Xt=null,De=null;function Kt(t){if(typeof xs=="function"&&Sa(t),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(Xt,t)}catch{}}var it=Math.clz32?Math.clz32:Ss,dn=Math.log,pr=Math.LN2;function Ss(t){return t>>>=0,t===0?32:31-(dn(t)/pr|0)|0}var ir=256,At=262144,on=4194304;function rr(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function sr(t,s,c){var g=t.pendingLanes;if(g===0)return 0;var y=0,w=t.suspendedLanes,O=t.pingedLanes;t=t.warmLanes;var U=g&134217727;return U!==0?(g=U&~w,g!==0?y=rr(g):(O&=U,O!==0?y=rr(O):c||(c=U&~t,c!==0&&(y=rr(c))))):(U=g&~w,U!==0?y=rr(U):O!==0?y=rr(O):c||(c=g&~t,c!==0&&(y=rr(c)))),y===0?0:s!==0&&s!==y&&(s&w)===0&&(w=y&-y,c=s&-s,w>=c||w===32&&(c&4194048)!==0)?s:y}function Nn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Gs(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hn(){var t=on;return on<<=1,(on&62914560)===0&&(on=4194304),t}function Ai(t){for(var s=[],c=0;31>c;c++)s.push(t);return s}function xr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Oi(t,s,c,g,y,w){var O=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var U=t.entanglements,Z=t.expirationTimes,he=t.hiddenUpdates;for(c=O&~c;0<c;){var be=31-it(c),Se=1<<be;U[be]=0,Z[be]=-1;var de=he[be];if(de!==null)for(he[be]=null,be=0;be<de.length;be++){var _e=de[be];_e!==null&&(_e.lane&=-536870913)}c&=~Se}g!==0&&te(t,g,0),w!==0&&y===0&&t.tag!==0&&(t.suspendedLanes|=w&~(O&~s))}function te(t,s,c){t.pendingLanes|=s,t.suspendedLanes&=~s;var g=31-it(s);t.entangledLanes|=s,t.entanglements[g]=t.entanglements[g]|1073741824|c&261930}function lt(t,s){var c=t.entangledLanes|=s;for(t=t.entanglements;c;){var g=31-it(c),y=1<<g;y&s|t[g]&s&&(t[g]|=s),c&=~y}}function kt(t,s){var c=s&-s;return c=(c&42)!==0?1:sn(c),(c&(t.suspendedLanes|s))!==0?0:c}function sn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ln(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Zn(){var t=we.p;return t!==0?t:(t=window.event,t===void 0?32:L2(t.type))}function Ve(t,s){var c=we.p;try{return we.p=t,s()}finally{we.p=c}}var hi=Math.random().toString(36).slice(2),en="__reactFiber$"+hi,Ut="__reactProps$"+hi,vn="__reactContainer$"+hi,Es="__reactEvents$"+hi,Ia="__reactListeners$"+hi,ar="__reactHandles$"+hi,il="__reactResources$"+hi,Xr="__reactMarker$"+hi;function Di(t){delete t[en],delete t[Ut],delete t[Es],delete t[Ia],delete t[ar]}function Cn(t){var s=t[en];if(s)return s;for(var c=t.parentNode;c;){if(s=c[vn]||c[en]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(t=E2(t);t!==null;){if(c=t[en])return c;t=E2(t)}return s}t=c,c=t.parentNode}return null}function Rt(t){if(t=t[en]||t[vn]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Yi(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function wi(t){var s=t[il];return s||(s=t[il]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Bn(t){t[Xr]=!0}var Ie=new Set,Ao={};function $t(t,s){Mi(t,s),Mi(t+"Capture",s)}function Mi(t,s){for(Ao[t]=s,t=0;t<s.length;t++)Ie.add(s[t])}var wo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vt={},Ot={};function Tt(t){return Qe.call(Ot,t)?!0:Qe.call(Vt,t)?!1:wo.test(t)?Ot[t]=!0:(Vt[t]=!0,!1)}function Is(t,s,c){if(Tt(s))if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+c)}}function Li(t,s,c){if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+c)}}function kn(t,s,c,g){if(g===null)t.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(s,c,""+g)}}function St(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bo(t,s,c){var g=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var y=g.get,w=g.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return y.call(this)},set:function(O){c=""+O,w.call(this,O)}}),Object.defineProperty(t,s,{enumerable:g.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function rt(t){if(!t._valueTracker){var s=Pi(t)?"checked":"value";t._valueTracker=bo(t,s,""+t[s])}}function Xi(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var c=s.getValue(),g="";return t&&(g=Pi(t)?t.checked?"true":"false":t.value),t=g,t!==c?(s.setValue(t),!0):!1}function Kr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Er=/[\n"\\]/g;function wt(t){return t.replace(Er,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Gn(t,s,c,g,y,w,O,U){t.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?t.type=O:t.removeAttribute("type"),s!=null?O==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+St(s)):t.value!==""+St(s)&&(t.value=""+St(s)):O!=="submit"&&O!=="reset"||t.removeAttribute("value"),s!=null?H(t,O,St(s)):c!=null?H(t,O,St(c)):g!=null&&t.removeAttribute("value"),y==null&&w!=null&&(t.defaultChecked=!!w),y!=null&&(t.checked=y&&typeof y!="function"&&typeof y!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?t.name=""+St(U):t.removeAttribute("name")}function ce(t,s,c,g,y,w,O,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.type=w),s!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||s!=null)){rt(t);return}c=c!=null?""+St(c):"",s=s!=null?""+St(s):c,U||s===t.value||(t.value=s),t.defaultValue=s}g=g??y,g=typeof g!="function"&&typeof g!="symbol"&&!!g,t.checked=U?t.checked:!!g,t.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(t.name=O),rt(t)}function H(t,s,c){s==="number"&&Kr(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Ye(t,s,c,g){if(t=t.options,s){s={};for(var y=0;y<c.length;y++)s["$"+c[y]]=!0;for(c=0;c<t.length;c++)y=s.hasOwnProperty("$"+t[c].value),t[c].selected!==y&&(t[c].selected=y),y&&g&&(t[c].defaultSelected=!0)}else{for(c=""+St(c),s=null,y=0;y<t.length;y++){if(t[y].value===c){t[y].selected=!0,g&&(t[y].defaultSelected=!0);return}s!==null||t[y].disabled||(s=t[y])}s!==null&&(s.selected=!0)}}function qn(t,s,c){if(s!=null&&(s=""+St(s),s!==t.value&&(t.value=s),c==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=c!=null?""+St(c):""}function ai(t,s,c,g){if(s==null){if(g!=null){if(c!=null)throw Error(o(92));if(fe(g)){if(1<g.length)throw Error(o(93));g=g[0]}c=g}c==null&&(c=""),s=c}c=St(s),t.defaultValue=c,g=t.textContent,g===c&&g!==""&&g!==null&&(t.value=g),rt(t)}function Ki(t,s){if(s){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=s;return}}t.textContent=s}var Na=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ci(t,s,c){var g=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":g?t.setProperty(s,c):typeof c!="number"||c===0||Na.has(s)?s==="float"?t.cssFloat=c:t[s]=(""+c).trim():t[s]=c+"px"}function We(t,s,c){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?t.setProperty(g,""):g==="float"?t.cssFloat="":t[g]="");for(var y in s)g=s[y],s.hasOwnProperty(y)&&c[y]!==g&&Ci(t,y,g)}else for(var w in s)s.hasOwnProperty(w)&&Ci(t,w,s[w])}function cn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var To=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rs(t){return Ns.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Wi(){}var qs=null;function yr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var An=null,Qi=null;function Zi(t){var s=Rt(t);if(s&&(t=s.stateNode)){var c=t[Ut]||null;e:switch(t=s.stateNode,s.type){case"input":if(Gn(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+wt(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var g=c[s];if(g!==t&&g.form===t.form){var y=g[Ut]||null;if(!y)throw Error(o(90));Gn(g,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<c.length;s++)g=c[s],g.form===t.form&&Xi(g)}break e;case"textarea":qn(t,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Ye(t,!!c.multiple,s,!1)}}}var Je=!1;function Os(t,s,c){if(Je)return t(s,c);Je=!0;try{var g=t(s);return g}finally{if(Je=!1,(An!==null||Qi!==null)&&(ah(),An&&(s=An,t=Qi,Qi=An=null,Zi(s),t)))for(s=0;s<t.length;s++)Zi(t[s])}}function nt(t,s){var c=t.stateNode;if(c===null)return null;var g=c[Ut]||null;if(g===null)return null;c=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,s,typeof c));return c}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ys=!1;if(un)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){Ys=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{Ys=!1}var Dr=null,Mr=null,Xs=null;function ys(){if(Xs)return Xs;var t,s=Mr,c=s.length,g,y="value"in Dr?Dr.value:Dr.textContent,w=y.length;for(t=0;t<c&&s[t]===y[t];t++);var O=c-t;for(g=1;g<=O&&s[c-g]===y[w-g];g++);return Xs=y.slice(t,1<g?1-g:void 0)}function Lr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function or(){return!0}function _r(){return!1}function Yn(t){function s(c,g,y,w,O){this._reactName=c,this._targetInst=y,this.type=g,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var U in t)t.hasOwnProperty(U)&&(c=t[U],this[U]=c?c(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?or:_r,this.isPropagationStopped=_r,this}return I(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=or)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=or)},persist:function(){},isPersistent:or}),s}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rn=Yn(lr),_s=I({},lr,{view:0,detail:0}),Ra=Yn(_s),As,Oa,Wr,Da=I({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wr&&(Wr&&t.type==="mousemove"?(As=t.screenX-Wr.screenX,Oa=t.screenY-Wr.screenY):Oa=As=0,Wr=t),As)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),Wt=Yn(Da),Ds=I({},Da,{dataTransfer:0}),Ks=Yn(Ds),Pr=I({},_s,{relatedTarget:0}),Ws=Yn(Pr),pe=I({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),dt=Yn(pe),Un=I({},lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qs=Yn(Un),vo=I({},lr,{data:0}),Qr=Yn(vo),rl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ma={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vn(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Ma[t])?!!s[t]:!1}function Zr(){return Vn}var It=I({},_s,{key:function(t){if(t.key){var s=rl[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Lr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zr,charCode:function(t){return t.type==="keypress"?Lr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zs=Yn(It),Jr=I({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dt=Yn(Jr),p=I({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zr}),N=Yn(p),D=I({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),j=Yn(D),oe=I({},Da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ye=Yn(oe),Pe=I({},lr,{newState:0,oldState:0}),ct=Yn(Pe),Fn=[9,13,27,32],qt=un&&"CompositionEvent"in window,wn=null;un&&"documentMode"in document&&(wn=document.documentMode);var cr=un&&"TextEvent"in window&&!wn,$r=un&&(!qt||wn&&8<wn&&11>=wn),Si=" ",ur=!1;function Js(t,s){switch(t){case"keyup":return Fn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function es(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var La=!1;function Ms(t,s){switch(t){case"compositionend":return es(s);case"keypress":return s.which!==32?null:(ur=!0,Si);case"textInput":return t=s.data,t===Si&&ur?null:t;default:return null}}function al(t,s){if(La)return t==="compositionend"||!qt&&Js(t,s)?(t=ys(),Xs=Mr=Dr=null,La=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $r&&s.locale!=="ko"?null:s.data;default:return null}}var Ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ic(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ar[t.type]:s==="textarea"}function Br(t,s,c,g){An?Qi?Qi.push(g):Qi=[g]:An=g,s=dh(s,"onChange"),0<s.length&&(c=new Rn("onChange","change",null,c,g),t.push({event:c,listeners:s}))}var Co=null,$s=null;function Qf(t){r2(t,0)}function So(t){var s=Yi(t);if(Xi(s))return t}function kr(t,s){if(t==="change")return s}var Tu=!1;if(un){var Io;if(un){var ea="oninput"in document;if(!ea){var Ft=document.createElement("div");Ft.setAttribute("oninput","return;"),ea=typeof Ft.oninput=="function"}Io=ea}else Io=!1;Tu=Io&&(!document.documentMode||9<document.documentMode)}function No(){Co&&(Co.detachEvent("onpropertychange",L),$s=Co=null)}function L(t){if(t.propertyName==="value"&&So($s)){var s=[];Br(s,$s,t,yr(t)),Os(Qf,s)}}function i(t,s,c){t==="focusin"?(No(),Co=s,$s=c,Co.attachEvent("onpropertychange",L)):t==="focusout"&&No()}function a(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return So($s)}function l(t,s){if(t==="click")return So(s)}function h(t,s){if(t==="input"||t==="change")return So(s)}function f(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var m=typeof Object.is=="function"?Object.is:f;function x(t,s){if(m(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var c=Object.keys(t),g=Object.keys(s);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var y=c[g];if(!Qe.call(s,y)||!m(t[y],s[y]))return!1}return!0}function A(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v(t,s){var c=A(t);t=0;for(var g;c;){if(c.nodeType===3){if(g=t+c.textContent.length,t<=s&&g>=s)return{node:c,offset:s-t};t=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=A(c)}}function R(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?R(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function P(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Kr(t.document);s instanceof t.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)t=s.contentWindow;else break;s=Kr(t.document)}return s}function B(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var q=un&&"documentMode"in document&&11>=document.documentMode,$=null,ee=null,le=null,Ee=!1;function Le(t,s,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ee||$==null||$!==Kr(g)||(g=$,"selectionStart"in g&&B(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),le&&x(le,g)||(le=g,g=dh(ee,"onSelect"),0<g.length&&(s=new Rn("onSelect","select",null,s,c),t.push({event:s,listeners:g}),s.target=$)))}function Me(t,s){var c={};return c[t.toLowerCase()]=s.toLowerCase(),c["Webkit"+t]="webkit"+s,c["Moz"+t]="moz"+s,c}var Re={animationend:Me("Animation","AnimationEnd"),animationiteration:Me("Animation","AnimationIteration"),animationstart:Me("Animation","AnimationStart"),transitionrun:Me("Transition","TransitionRun"),transitionstart:Me("Transition","TransitionStart"),transitioncancel:Me("Transition","TransitionCancel"),transitionend:Me("Transition","TransitionEnd")},vt={},ut={};un&&(ut=document.createElement("div").style,"AnimationEvent"in window||(delete Re.animationend.animation,delete Re.animationiteration.animation,delete Re.animationstart.animation),"TransitionEvent"in window||delete Re.transitionend.transition);function Jn(t){if(vt[t])return vt[t];if(!Re[t])return t;var s=Re[t],c;for(c in s)if(s.hasOwnProperty(c)&&c in ut)return vt[t]=s[c];return t}var wr=Jn("animationend"),Bi=Jn("animationiteration"),hn=Jn("animationstart"),bi=Jn("transitionrun"),hr=Jn("transitionstart"),Pa=Jn("transitioncancel"),ta=Jn("transitionend"),vu=new Map,rc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rc.push("scrollEnd");function ws(t,s){vu.set(t,s),$t(s,[t])}var Cu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ts=[],ol=0,Zf=0;function Su(){for(var t=ol,s=Zf=ol=0;s<t;){var c=ts[s];ts[s++]=null;var g=ts[s];ts[s++]=null;var y=ts[s];ts[s++]=null;var w=ts[s];if(ts[s++]=null,g!==null&&y!==null){var O=g.pending;O===null?y.next=y:(y.next=O.next,O.next=y),g.pending=y}w!==0&&Vg(c,y,w)}}function Iu(t,s,c,g){ts[ol++]=t,ts[ol++]=s,ts[ol++]=c,ts[ol++]=g,Zf|=g,t.lanes|=g,t=t.alternate,t!==null&&(t.lanes|=g)}function Jf(t,s,c,g){return Iu(t,s,c,g),Nu(t)}function Ro(t,s){return Iu(t,null,null,s),Nu(t)}function Vg(t,s,c){t.lanes|=c;var g=t.alternate;g!==null&&(g.lanes|=c);for(var y=!1,w=t.return;w!==null;)w.childLanes|=c,g=w.alternate,g!==null&&(g.childLanes|=c),w.tag===22&&(t=w.stateNode,t===null||t._visibility&1||(y=!0)),t=w,w=w.return;return t.tag===3?(w=t.stateNode,y&&s!==null&&(y=31-it(c),t=w.hiddenUpdates,g=t[y],g===null?t[y]=[s]:g.push(s),s.lane=c|536870912),w):null}function Nu(t){if(50<Cc)throw Cc=0,o0=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ll={};function Yw(t,s,c,g){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(t,s,c,g){return new Yw(t,s,c,g)}function $f(t){return t=t.prototype,!(!t||!t.isReactComponent)}function na(t,s){var c=t.alternate;return c===null?(c=Ur(t.tag,s,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=s,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,s=t.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function Fg(t,s){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,s=c.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Ru(t,s,c,g,y,w){var O=0;if(g=t,typeof t=="function")$f(t)&&(O=1);else if(typeof t=="string")O=Zb(t,c,Ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case V:return t=Ur(31,c,s,y),t.elementType=V,t.lanes=w,t;case K:return Oo(c.children,y,w,s);case z:O=8,y|=24;break;case xe:return t=Ur(12,c,s,y|2),t.elementType=xe,t.lanes=w,t;case Fe:return t=Ur(13,c,s,y),t.elementType=Fe,t.lanes=w,t;case Be:return t=Ur(19,c,s,y),t.elementType=Be,t.lanes=w,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:O=10;break e;case ge:O=9;break e;case ve:O=11;break e;case F:O=14;break e;case G:O=16,g=null;break e}O=29,c=Error(o(130,t===null?"null":typeof t,"")),g=null}return s=Ur(O,c,s,y),s.elementType=t,s.type=g,s.lanes=w,s}function Oo(t,s,c,g){return t=Ur(7,t,g,s),t.lanes=c,t}function ed(t,s,c){return t=Ur(6,t,null,s),t.lanes=c,t}function jg(t){var s=Ur(18,null,null,0);return s.stateNode=t,s}function td(t,s,c){return s=Ur(4,t.children!==null?t.children:[],t.key,s),s.lanes=c,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var zg=new WeakMap;function ns(t,s){if(typeof t=="object"&&t!==null){var c=zg.get(t);return c!==void 0?c:(s={value:t,source:s,stack:Bt(s)},zg.set(t,s),s)}return{value:t,source:s,stack:Bt(s)}}var cl=[],ul=0,Ou=null,sc=0,is=[],rs=0,Ba=null,Ls=1,Ps="";function ia(t,s){cl[ul++]=sc,cl[ul++]=Ou,Ou=t,sc=s}function Hg(t,s,c){is[rs++]=Ls,is[rs++]=Ps,is[rs++]=Ba,Ba=t;var g=Ls;t=Ps;var y=32-it(g)-1;g&=~(1<<y),c+=1;var w=32-it(s)+y;if(30<w){var O=y-y%5;w=(g&(1<<O)-1).toString(32),g>>=O,y-=O,Ls=1<<32-it(s)+y|c<<y|g,Ps=w+t}else Ls=1<<w|c<<y|g,Ps=t}function nd(t){t.return!==null&&(ia(t,1),Hg(t,1,0))}function id(t){for(;t===Ou;)Ou=cl[--ul],cl[ul]=null,sc=cl[--ul],cl[ul]=null;for(;t===Ba;)Ba=is[--rs],is[rs]=null,Ps=is[--rs],is[rs]=null,Ls=is[--rs],is[rs]=null}function Gg(t,s){is[rs++]=Ls,is[rs++]=Ps,is[rs++]=Ba,Ls=s.id,Ps=s.overflow,Ba=t}var ki=null,On=null,Yt=!1,ka=null,ss=!1,rd=Error(o(519));function Ua(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ac(ns(s,t)),rd}function qg(t){var s=t.stateNode,c=t.type,g=t.memoizedProps;switch(s[en]=t,s[Ut]=g,c){case"dialog":Lt("cancel",s),Lt("close",s);break;case"iframe":case"object":case"embed":Lt("load",s);break;case"video":case"audio":for(c=0;c<Ic.length;c++)Lt(Ic[c],s);break;case"source":Lt("error",s);break;case"img":case"image":case"link":Lt("error",s),Lt("load",s);break;case"details":Lt("toggle",s);break;case"input":Lt("invalid",s),ce(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Lt("invalid",s);break;case"textarea":Lt("invalid",s),ai(s,g.value,g.defaultValue,g.children)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||g.suppressHydrationWarning===!0||l2(s.textContent,c)?(g.popover!=null&&(Lt("beforetoggle",s),Lt("toggle",s)),g.onScroll!=null&&Lt("scroll",s),g.onScrollEnd!=null&&Lt("scrollend",s),g.onClick!=null&&(s.onclick=Wi),s=!0):s=!1,s||Ua(t,!0)}function Yg(t){for(ki=t.return;ki;)switch(ki.tag){case 5:case 31:case 13:ss=!1;return;case 27:case 3:ss=!0;return;default:ki=ki.return}}function hl(t){if(t!==ki)return!1;if(!Yt)return Yg(t),Yt=!0,!1;var s=t.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||w0(t.type,t.memoizedProps)),c=!c),c&&On&&Ua(t),Yg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));On=x2(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));On=x2(t)}else s===27?(s=On,Ja(t.type)?(t=S0,S0=null,On=t):On=s):On=ki?os(t.stateNode.nextSibling):null;return!0}function Do(){On=ki=null,Yt=!1}function sd(){var t=ka;return t!==null&&(Cr===null?Cr=t:Cr.push.apply(Cr,t),ka=null),t}function ac(t){ka===null?ka=[t]:ka.push(t)}var ad=ie(null),Mo=null,ra=null;function Va(t,s,c){ke(ad,s._currentValue),s._currentValue=c}function sa(t){t._currentValue=ad.current,Ae(ad)}function od(t,s,c){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===c)break;t=t.return}}function ld(t,s,c,g){var y=t.child;for(y!==null&&(y.return=t);y!==null;){var w=y.dependencies;if(w!==null){var O=y.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=y;for(var Z=0;Z<s.length;Z++)if(U.context===s[Z]){w.lanes|=c,U=w.alternate,U!==null&&(U.lanes|=c),od(w.return,c,t),g||(O=null);break e}w=U.next}}else if(y.tag===18){if(O=y.return,O===null)throw Error(o(341));O.lanes|=c,w=O.alternate,w!==null&&(w.lanes|=c),od(O,c,t),O=null}else O=y.child;if(O!==null)O.return=y;else for(O=y;O!==null;){if(O===t){O=null;break}if(y=O.sibling,y!==null){y.return=O.return,O=y;break}O=O.return}y=O}}function fl(t,s,c,g){t=null;for(var y=s,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var O=y.alternate;if(O===null)throw Error(o(387));if(O=O.memoizedProps,O!==null){var U=y.type;m(y.pendingProps.value,O.value)||(t!==null?t.push(U):t=[U])}}else if(y===pt.current){if(O=y.alternate,O===null)throw Error(o(387));O.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(t!==null?t.push(Mc):t=[Mc])}y=y.return}t!==null&&ld(s,t,c,g),s.flags|=262144}function Du(t){for(t=t.firstContext;t!==null;){if(!m(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Lo(t){Mo=t,ra=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ui(t){return Xg(Mo,t)}function Mu(t,s){return Mo===null&&Lo(t),Xg(t,s)}function Xg(t,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ra===null){if(t===null)throw Error(o(308));ra=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ra=ra.next=s;return c}var Xw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(c,g){t.push(g)}};this.abort=function(){s.aborted=!0,t.forEach(function(c){return c()})}},Kw=r.unstable_scheduleCallback,Ww=r.unstable_NormalPriority,fi={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cd(){return{controller:new Xw,data:new Map,refCount:0}}function oc(t){t.refCount--,t.refCount===0&&Kw(Ww,function(){t.controller.abort()})}var lc=null,ud=0,dl=0,gl=null;function Qw(t,s){if(lc===null){var c=lc=[];ud=0,dl=d0(),gl={status:"pending",value:void 0,then:function(g){c.push(g)}}}return ud++,s.then(Kg,Kg),s}function Kg(){if(--ud===0&&lc!==null){gl!==null&&(gl.status="fulfilled");var t=lc;lc=null,dl=0,gl=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function Zw(t,s){var c=[],g={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return t.then(function(){g.status="fulfilled",g.value=s;for(var y=0;y<c.length;y++)(0,c[y])(s)},function(y){for(g.status="rejected",g.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),g}var Wg=me.S;me.S=function(t,s){Dp=xn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Qw(t,s),Wg!==null&&Wg(t,s)};var Po=ie(null);function hd(){var t=Po.current;return t!==null?t:bn.pooledCache}function Lu(t,s){s===null?ke(Po,Po.current):ke(Po,s.pool)}function Qg(){var t=hd();return t===null?null:{parent:fi._currentValue,pool:t}}var ml=Error(o(460)),fd=Error(o(474)),Pu=Error(o(542)),Bu={then:function(){}};function Zg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Jg(t,s,c){switch(c=t[c],c===void 0?t.push(s):c!==s&&(s.then(Wi,Wi),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,em(t),t;default:if(typeof s.status=="string")s.then(Wi,Wi);else{if(t=bn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(g){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=g}},function(g){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,em(t),t}throw ko=s,ml}}function Bo(t){try{var s=t._init;return s(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(ko=c,ml):c}}var ko=null;function $g(){if(ko===null)throw Error(o(459));var t=ko;return ko=null,t}function em(t){if(t===ml||t===Pu)throw Error(o(483))}var pl=null,cc=0;function ku(t){var s=cc;return cc+=1,pl===null&&(pl=[]),Jg(pl,t,s)}function uc(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Uu(t,s){throw s.$$typeof===M?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function tm(t){function s(ae,re){if(t){var ue=ae.deletions;ue===null?(ae.deletions=[re],ae.flags|=16):ue.push(re)}}function c(ae,re){if(!t)return null;for(;re!==null;)s(ae,re),re=re.sibling;return null}function g(ae){for(var re=new Map;ae!==null;)ae.key!==null?re.set(ae.key,ae):re.set(ae.index,ae),ae=ae.sibling;return re}function y(ae,re){return ae=na(ae,re),ae.index=0,ae.sibling=null,ae}function w(ae,re,ue){return ae.index=ue,t?(ue=ae.alternate,ue!==null?(ue=ue.index,ue<re?(ae.flags|=67108866,re):ue):(ae.flags|=67108866,re)):(ae.flags|=1048576,re)}function O(ae){return t&&ae.alternate===null&&(ae.flags|=67108866),ae}function U(ae,re,ue,Te){return re===null||re.tag!==6?(re=ed(ue,ae.mode,Te),re.return=ae,re):(re=y(re,ue),re.return=ae,re)}function Z(ae,re,ue,Te){var $e=ue.type;return $e===K?be(ae,re,ue.props.children,Te,ue.key):re!==null&&(re.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===G&&Bo($e)===re.type)?(re=y(re,ue.props),uc(re,ue),re.return=ae,re):(re=Ru(ue.type,ue.key,ue.props,null,ae.mode,Te),uc(re,ue),re.return=ae,re)}function he(ae,re,ue,Te){return re===null||re.tag!==4||re.stateNode.containerInfo!==ue.containerInfo||re.stateNode.implementation!==ue.implementation?(re=td(ue,ae.mode,Te),re.return=ae,re):(re=y(re,ue.children||[]),re.return=ae,re)}function be(ae,re,ue,Te,$e){return re===null||re.tag!==7?(re=Oo(ue,ae.mode,Te,$e),re.return=ae,re):(re=y(re,ue),re.return=ae,re)}function Se(ae,re,ue){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=ed(""+re,ae.mode,ue),re.return=ae,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case k:return ue=Ru(re.type,re.key,re.props,null,ae.mode,ue),uc(ue,re),ue.return=ae,ue;case X:return re=td(re,ae.mode,ue),re.return=ae,re;case G:return re=Bo(re),Se(ae,re,ue)}if(fe(re)||J(re))return re=Oo(re,ae.mode,ue,null),re.return=ae,re;if(typeof re.then=="function")return Se(ae,ku(re),ue);if(re.$$typeof===Q)return Se(ae,Mu(ae,re),ue);Uu(ae,re)}return null}function de(ae,re,ue,Te){var $e=re!==null?re.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return $e!==null?null:U(ae,re,""+ue,Te);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case k:return ue.key===$e?Z(ae,re,ue,Te):null;case X:return ue.key===$e?he(ae,re,ue,Te):null;case G:return ue=Bo(ue),de(ae,re,ue,Te)}if(fe(ue)||J(ue))return $e!==null?null:be(ae,re,ue,Te,null);if(typeof ue.then=="function")return de(ae,re,ku(ue),Te);if(ue.$$typeof===Q)return de(ae,re,Mu(ae,ue),Te);Uu(ae,ue)}return null}function _e(ae,re,ue,Te,$e){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return ae=ae.get(ue)||null,U(re,ae,""+Te,$e);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case k:return ae=ae.get(Te.key===null?ue:Te.key)||null,Z(re,ae,Te,$e);case X:return ae=ae.get(Te.key===null?ue:Te.key)||null,he(re,ae,Te,$e);case G:return Te=Bo(Te),_e(ae,re,ue,Te,$e)}if(fe(Te)||J(Te))return ae=ae.get(ue)||null,be(re,ae,Te,$e,null);if(typeof Te.then=="function")return _e(ae,re,ue,ku(Te),$e);if(Te.$$typeof===Q)return _e(ae,re,ue,Mu(re,Te),$e);Uu(re,Te)}return null}function Xe(ae,re,ue,Te){for(var $e=null,nn=null,Ke=re,bt=re=0,zt=null;Ke!==null&&bt<ue.length;bt++){Ke.index>bt?(zt=Ke,Ke=null):zt=Ke.sibling;var rn=de(ae,Ke,ue[bt],Te);if(rn===null){Ke===null&&(Ke=zt);break}t&&Ke&&rn.alternate===null&&s(ae,Ke),re=w(rn,re,bt),nn===null?$e=rn:nn.sibling=rn,nn=rn,Ke=zt}if(bt===ue.length)return c(ae,Ke),Yt&&ia(ae,bt),$e;if(Ke===null){for(;bt<ue.length;bt++)Ke=Se(ae,ue[bt],Te),Ke!==null&&(re=w(Ke,re,bt),nn===null?$e=Ke:nn.sibling=Ke,nn=Ke);return Yt&&ia(ae,bt),$e}for(Ke=g(Ke);bt<ue.length;bt++)zt=_e(Ke,ae,bt,ue[bt],Te),zt!==null&&(t&&zt.alternate!==null&&Ke.delete(zt.key===null?bt:zt.key),re=w(zt,re,bt),nn===null?$e=zt:nn.sibling=zt,nn=zt);return t&&Ke.forEach(function(io){return s(ae,io)}),Yt&&ia(ae,bt),$e}function st(ae,re,ue,Te){if(ue==null)throw Error(o(151));for(var $e=null,nn=null,Ke=re,bt=re=0,zt=null,rn=ue.next();Ke!==null&&!rn.done;bt++,rn=ue.next()){Ke.index>bt?(zt=Ke,Ke=null):zt=Ke.sibling;var io=de(ae,Ke,rn.value,Te);if(io===null){Ke===null&&(Ke=zt);break}t&&Ke&&io.alternate===null&&s(ae,Ke),re=w(io,re,bt),nn===null?$e=io:nn.sibling=io,nn=io,Ke=zt}if(rn.done)return c(ae,Ke),Yt&&ia(ae,bt),$e;if(Ke===null){for(;!rn.done;bt++,rn=ue.next())rn=Se(ae,rn.value,Te),rn!==null&&(re=w(rn,re,bt),nn===null?$e=rn:nn.sibling=rn,nn=rn);return Yt&&ia(ae,bt),$e}for(Ke=g(Ke);!rn.done;bt++,rn=ue.next())rn=_e(Ke,ae,bt,rn.value,Te),rn!==null&&(t&&rn.alternate!==null&&Ke.delete(rn.key===null?bt:rn.key),re=w(rn,re,bt),nn===null?$e=rn:nn.sibling=rn,nn=rn);return t&&Ke.forEach(function(lT){return s(ae,lT)}),Yt&&ia(ae,bt),$e}function _n(ae,re,ue,Te){if(typeof ue=="object"&&ue!==null&&ue.type===K&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case k:e:{for(var $e=ue.key;re!==null;){if(re.key===$e){if($e=ue.type,$e===K){if(re.tag===7){c(ae,re.sibling),Te=y(re,ue.props.children),Te.return=ae,ae=Te;break e}}else if(re.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===G&&Bo($e)===re.type){c(ae,re.sibling),Te=y(re,ue.props),uc(Te,ue),Te.return=ae,ae=Te;break e}c(ae,re);break}else s(ae,re);re=re.sibling}ue.type===K?(Te=Oo(ue.props.children,ae.mode,Te,ue.key),Te.return=ae,ae=Te):(Te=Ru(ue.type,ue.key,ue.props,null,ae.mode,Te),uc(Te,ue),Te.return=ae,ae=Te)}return O(ae);case X:e:{for($e=ue.key;re!==null;){if(re.key===$e)if(re.tag===4&&re.stateNode.containerInfo===ue.containerInfo&&re.stateNode.implementation===ue.implementation){c(ae,re.sibling),Te=y(re,ue.children||[]),Te.return=ae,ae=Te;break e}else{c(ae,re);break}else s(ae,re);re=re.sibling}Te=td(ue,ae.mode,Te),Te.return=ae,ae=Te}return O(ae);case G:return ue=Bo(ue),_n(ae,re,ue,Te)}if(fe(ue))return Xe(ae,re,ue,Te);if(J(ue)){if($e=J(ue),typeof $e!="function")throw Error(o(150));return ue=$e.call(ue),st(ae,re,ue,Te)}if(typeof ue.then=="function")return _n(ae,re,ku(ue),Te);if(ue.$$typeof===Q)return _n(ae,re,Mu(ae,ue),Te);Uu(ae,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,re!==null&&re.tag===6?(c(ae,re.sibling),Te=y(re,ue),Te.return=ae,ae=Te):(c(ae,re),Te=ed(ue,ae.mode,Te),Te.return=ae,ae=Te),O(ae)):c(ae,re)}return function(ae,re,ue,Te){try{cc=0;var $e=_n(ae,re,ue,Te);return pl=null,$e}catch(Ke){if(Ke===ml||Ke===Pu)throw Ke;var nn=Ur(29,Ke,null,ae.mode);return nn.lanes=Te,nn.return=ae,nn}finally{}}}var Uo=tm(!0),nm=tm(!1),Fa=!1;function dd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ja(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function za(t,s,c){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,(an&2)!==0){var y=g.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),g.pending=s,s=Nu(t),Vg(t,null,c),s}return Iu(t,g,s,c),Nu(t)}function hc(t,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var g=s.lanes;g&=t.pendingLanes,c|=g,s.lanes=c,lt(t,c)}}function md(t,s){var c=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?y=w=O:w=w.next=O,c=c.next}while(c!==null);w===null?y=w=s:w=w.next=s}else y=w=s;c={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=s:t.next=s,c.lastBaseUpdate=s}var pd=!1;function fc(){if(pd){var t=gl;if(t!==null)throw t}}function dc(t,s,c,g){pd=!1;var y=t.updateQueue;Fa=!1;var w=y.firstBaseUpdate,O=y.lastBaseUpdate,U=y.shared.pending;if(U!==null){y.shared.pending=null;var Z=U,he=Z.next;Z.next=null,O===null?w=he:O.next=he,O=Z;var be=t.alternate;be!==null&&(be=be.updateQueue,U=be.lastBaseUpdate,U!==O&&(U===null?be.firstBaseUpdate=he:U.next=he,be.lastBaseUpdate=Z))}if(w!==null){var Se=y.baseState;O=0,be=he=Z=null,U=w;do{var de=U.lane&-536870913,_e=de!==U.lane;if(_e?(jt&de)===de:(g&de)===de){de!==0&&de===dl&&(pd=!0),be!==null&&(be=be.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Xe=t,st=U;de=s;var _n=c;switch(st.tag){case 1:if(Xe=st.payload,typeof Xe=="function"){Se=Xe.call(_n,Se,de);break e}Se=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=st.payload,de=typeof Xe=="function"?Xe.call(_n,Se,de):Xe,de==null)break e;Se=I({},Se,de);break e;case 2:Fa=!0}}de=U.callback,de!==null&&(t.flags|=64,_e&&(t.flags|=8192),_e=y.callbacks,_e===null?y.callbacks=[de]:_e.push(de))}else _e={lane:de,tag:U.tag,payload:U.payload,callback:U.callback,next:null},be===null?(he=be=_e,Z=Se):be=be.next=_e,O|=de;if(U=U.next,U===null){if(U=y.shared.pending,U===null)break;_e=U,U=_e.next,_e.next=null,y.lastBaseUpdate=_e,y.shared.pending=null}}while(!0);be===null&&(Z=Se),y.baseState=Z,y.firstBaseUpdate=he,y.lastBaseUpdate=be,w===null&&(y.shared.lanes=0),Xa|=O,t.lanes=O,t.memoizedState=Se}}function im(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function rm(t,s){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)im(c[t],s)}var xl=ie(null),Vu=ie(0);function sm(t,s){t=ga,ke(Vu,t),ke(xl,s),ga=t|s.baseLanes}function xd(){ke(Vu,ga),ke(xl,xl.current)}function Ed(){ga=Vu.current,Ae(xl),Ae(Vu)}var Vr=ie(null),as=null;function Ha(t){var s=t.alternate;ke(oi,oi.current&1),ke(Vr,t),as===null&&(s===null||xl.current!==null||s.memoizedState!==null)&&(as=t)}function yd(t){ke(oi,oi.current),ke(Vr,t),as===null&&(as=t)}function am(t){t.tag===22?(ke(oi,oi.current),ke(Vr,t),as===null&&(as=t)):Ga()}function Ga(){ke(oi,oi.current),ke(Vr,Vr.current)}function Fr(t){Ae(Vr),as===t&&(as=null),Ae(oi)}var oi=ie(0);function Fu(t){for(var s=t;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||v0(c)||C0(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var aa=0,xt=null,En=null,di=null,ju=!1,El=!1,Vo=!1,zu=0,gc=0,yl=null,Jw=0;function $n(){throw Error(o(321))}function _d(t,s){if(s===null)return!1;for(var c=0;c<s.length&&c<t.length;c++)if(!m(t[c],s[c]))return!1;return!0}function Ad(t,s,c,g,y,w){return aa=w,xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,me.H=t===null||t.memoizedState===null?Hm:Bd,Vo=!1,w=c(g,y),Vo=!1,El&&(w=lm(s,c,g,y)),om(t),w}function om(t){me.H=xc;var s=En!==null&&En.next!==null;if(aa=0,di=En=xt=null,ju=!1,gc=0,yl=null,s)throw Error(o(300));t===null||gi||(t=t.dependencies,t!==null&&Du(t)&&(gi=!0))}function lm(t,s,c,g){xt=t;var y=0;do{if(El&&(yl=null),gc=0,El=!1,25<=y)throw Error(o(301));if(y+=1,di=En=null,t.updateQueue!=null){var w=t.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}me.H=Gm,w=s(c,g)}while(El);return w}function $w(){var t=me.H,s=t.useState()[0];return s=typeof s.then=="function"?mc(s):s,t=t.useState()[0],(En!==null?En.memoizedState:null)!==t&&(xt.flags|=1024),s}function wd(){var t=zu!==0;return zu=0,t}function bd(t,s,c){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~c}function Td(t){if(ju){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}ju=!1}aa=0,di=En=xt=null,El=!1,gc=zu=0,yl=null}function fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?xt.memoizedState=di=t:di=di.next=t,di}function li(){if(En===null){var t=xt.alternate;t=t!==null?t.memoizedState:null}else t=En.next;var s=di===null?xt.memoizedState:di.next;if(s!==null)di=s,En=t;else{if(t===null)throw xt.alternate===null?Error(o(467)):Error(o(310));En=t,t={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},di===null?xt.memoizedState=di=t:di=di.next=t}return di}function Hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mc(t){var s=gc;return gc+=1,yl===null&&(yl=[]),t=Jg(yl,t,s),s=xt,(di===null?s.memoizedState:di.next)===null&&(s=s.alternate,me.H=s===null||s.memoizedState===null?Hm:Bd),t}function Gu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return mc(t);if(t.$$typeof===Q)return Ui(t)}throw Error(o(438,String(t)))}function vd(t){var s=null,c=xt.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var g=xt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Hu(),xt.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(t),g=0;g<t;g++)c[g]=ne;return s.index++,c}function oa(t,s){return typeof s=="function"?s(t):s}function qu(t){var s=li();return Cd(s,En,t)}function Cd(t,s,c){var g=t.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=c;var y=t.baseQueue,w=g.pending;if(w!==null){if(y!==null){var O=y.next;y.next=w.next,w.next=O}s.baseQueue=y=w,g.pending=null}if(w=t.baseState,y===null)t.memoizedState=w;else{s=y.next;var U=O=null,Z=null,he=s,be=!1;do{var Se=he.lane&-536870913;if(Se!==he.lane?(jt&Se)===Se:(aa&Se)===Se){var de=he.revertLane;if(de===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Se===dl&&(be=!0);else if((aa&de)===de){he=he.next,de===dl&&(be=!0);continue}else Se={lane:0,revertLane:he.revertLane,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(U=Z=Se,O=w):Z=Z.next=Se,xt.lanes|=de,Xa|=de;Se=he.action,Vo&&c(w,Se),w=he.hasEagerState?he.eagerState:c(w,Se)}else de={lane:Se,revertLane:he.revertLane,gesture:he.gesture,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(U=Z=de,O=w):Z=Z.next=de,xt.lanes|=Se,Xa|=Se;he=he.next}while(he!==null&&he!==s);if(Z===null?O=w:Z.next=U,!m(w,t.memoizedState)&&(gi=!0,be&&(c=gl,c!==null)))throw c;t.memoizedState=w,t.baseState=O,t.baseQueue=Z,g.lastRenderedState=w}return y===null&&(g.lanes=0),[t.memoizedState,g.dispatch]}function Sd(t){var s=li(),c=s.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var g=c.dispatch,y=c.pending,w=s.memoizedState;if(y!==null){c.pending=null;var O=y=y.next;do w=t(w,O.action),O=O.next;while(O!==y);m(w,s.memoizedState)||(gi=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),c.lastRenderedState=w}return[w,g]}function cm(t,s,c){var g=xt,y=li(),w=Yt;if(w){if(c===void 0)throw Error(o(407));c=c()}else c=s();var O=!m((En||y).memoizedState,c);if(O&&(y.memoizedState=c,gi=!0),y=y.queue,Rd(fm.bind(null,g,y,t),[t]),y.getSnapshot!==s||O||di!==null&&di.memoizedState.tag&1){if(g.flags|=2048,_l(9,{destroy:void 0},hm.bind(null,g,y,c,s),null),bn===null)throw Error(o(349));w||(aa&127)!==0||um(g,s,c)}return c}function um(t,s,c){t.flags|=16384,t={getSnapshot:s,value:c},s=xt.updateQueue,s===null?(s=Hu(),xt.updateQueue=s,s.stores=[t]):(c=s.stores,c===null?s.stores=[t]:c.push(t))}function hm(t,s,c,g){s.value=c,s.getSnapshot=g,dm(s)&&gm(t)}function fm(t,s,c){return c(function(){dm(s)&&gm(t)})}function dm(t){var s=t.getSnapshot;t=t.value;try{var c=s();return!m(t,c)}catch{return!0}}function gm(t){var s=Ro(t,2);s!==null&&Sr(s,t,2)}function Id(t){var s=fr();if(typeof t=="function"){var c=t;if(t=c(),Vo){Kt(!0);try{c()}finally{Kt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},s}function mm(t,s,c,g){return t.baseState=c,Cd(t,En,typeof g=="function"?g:oa)}function eb(t,s,c,g,y){if(Ku(t))throw Error(o(485));if(t=s.action,t!==null){var w={payload:y,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};me.T!==null?c(!0):w.isTransition=!1,g(w),c=s.pending,c===null?(w.next=s.pending=w,pm(s,w)):(w.next=c.next,s.pending=c.next=w)}}function pm(t,s){var c=s.action,g=s.payload,y=t.state;if(s.isTransition){var w=me.T,O={};me.T=O;try{var U=c(y,g),Z=me.S;Z!==null&&Z(O,U),xm(t,s,U)}catch(he){Nd(t,s,he)}finally{w!==null&&O.types!==null&&(w.types=O.types),me.T=w}}else try{w=c(y,g),xm(t,s,w)}catch(he){Nd(t,s,he)}}function xm(t,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){Em(t,s,g)},function(g){return Nd(t,s,g)}):Em(t,s,c)}function Em(t,s,c){s.status="fulfilled",s.value=c,ym(s),t.state=c,s=t.pending,s!==null&&(c=s.next,c===s?t.pending=null:(c=c.next,s.next=c,pm(t,c)))}function Nd(t,s,c){var g=t.pending;if(t.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=c,ym(s),s=s.next;while(s!==g)}t.action=null}function ym(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function _m(t,s){return s}function Am(t,s){if(Yt){var c=bn.formState;if(c!==null){e:{var g=xt;if(Yt){if(On){t:{for(var y=On,w=ss;y.nodeType!==8;){if(!w){y=null;break t}if(y=os(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){On=os(y.nextSibling),g=y.data==="F!";break e}}Ua(g)}g=!1}g&&(s=c[0])}}return c=fr(),c.memoizedState=c.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_m,lastRenderedState:s},c.queue=g,c=Fm.bind(null,xt,g),g.dispatch=c,g=Id(!1),w=Pd.bind(null,xt,!1,g.queue),g=fr(),y={state:s,dispatch:null,action:t,pending:null},g.queue=y,c=eb.bind(null,xt,y,w,c),y.dispatch=c,g.memoizedState=t,[s,c,!1]}function wm(t){var s=li();return bm(s,En,t)}function bm(t,s,c){if(s=Cd(t,s,_m)[0],t=qu(oa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=mc(s)}catch(O){throw O===ml?Pu:O}else g=s;s=li();var y=s.queue,w=y.dispatch;return c!==s.memoizedState&&(xt.flags|=2048,_l(9,{destroy:void 0},tb.bind(null,y,c),null)),[g,w,t]}function tb(t,s){t.action=s}function Tm(t){var s=li(),c=En;if(c!==null)return bm(s,c,t);li(),s=s.memoizedState,c=li();var g=c.queue.dispatch;return c.memoizedState=t,[s,g,!1]}function _l(t,s,c,g){return t={tag:t,create:c,deps:g,inst:s,next:null},s=xt.updateQueue,s===null&&(s=Hu(),xt.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=t.next=t:(g=c.next,c.next=t,t.next=g,s.lastEffect=t),t}function vm(){return li().memoizedState}function Yu(t,s,c,g){var y=fr();xt.flags|=t,y.memoizedState=_l(1|s,{destroy:void 0},c,g===void 0?null:g)}function Xu(t,s,c,g){var y=li();g=g===void 0?null:g;var w=y.memoizedState.inst;En!==null&&g!==null&&_d(g,En.memoizedState.deps)?y.memoizedState=_l(s,w,c,g):(xt.flags|=t,y.memoizedState=_l(1|s,w,c,g))}function Cm(t,s){Yu(8390656,8,t,s)}function Rd(t,s){Xu(2048,8,t,s)}function nb(t){xt.flags|=4;var s=xt.updateQueue;if(s===null)s=Hu(),xt.updateQueue=s,s.events=[t];else{var c=s.events;c===null?s.events=[t]:c.push(t)}}function Sm(t){var s=li().memoizedState;return nb({ref:s,nextImpl:t}),function(){if((an&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Im(t,s){return Xu(4,2,t,s)}function Nm(t,s){return Xu(4,4,t,s)}function Rm(t,s){if(typeof s=="function"){t=t();var c=s(t);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Om(t,s,c){c=c!=null?c.concat([t]):null,Xu(4,4,Rm.bind(null,s,t),c)}function Od(){}function Dm(t,s){var c=li();s=s===void 0?null:s;var g=c.memoizedState;return s!==null&&_d(s,g[1])?g[0]:(c.memoizedState=[t,s],t)}function Mm(t,s){var c=li();s=s===void 0?null:s;var g=c.memoizedState;if(s!==null&&_d(s,g[1]))return g[0];if(g=t(),Vo){Kt(!0);try{t()}finally{Kt(!1)}}return c.memoizedState=[g,s],g}function Dd(t,s,c){return c===void 0||(aa&1073741824)!==0&&(jt&261930)===0?t.memoizedState=s:(t.memoizedState=c,t=Lp(),xt.lanes|=t,Xa|=t,c)}function Lm(t,s,c,g){return m(c,s)?c:xl.current!==null?(t=Dd(t,c,g),m(t,s)||(gi=!0),t):(aa&42)===0||(aa&1073741824)!==0&&(jt&261930)===0?(gi=!0,t.memoizedState=c):(t=Lp(),xt.lanes|=t,Xa|=t,s)}function Pm(t,s,c,g,y){var w=we.p;we.p=w!==0&&8>w?w:8;var O=me.T,U={};me.T=U,Pd(t,!1,s,c);try{var Z=y(),he=me.S;if(he!==null&&he(U,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var be=Zw(Z,g);pc(t,s,be,Hr(t))}else pc(t,s,g,Hr(t))}catch(Se){pc(t,s,{then:function(){},status:"rejected",reason:Se},Hr())}finally{we.p=w,O!==null&&U.types!==null&&(O.types=U.types),me.T=O}}function ib(){}function Md(t,s,c,g){if(t.tag!==5)throw Error(o(476));var y=Bm(t).queue;Pm(t,y,s,qe,c===null?ib:function(){return km(t),c(g)})}function Bm(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:qe,baseState:qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:qe},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:c},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function km(t){var s=Bm(t);s.next===null&&(s=t.alternate.memoizedState),pc(t,s.next.queue,{},Hr())}function Ld(){return Ui(Mc)}function Um(){return li().memoizedState}function Vm(){return li().memoizedState}function rb(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var c=Hr();t=ja(c);var g=za(s,t,c);g!==null&&(Sr(g,s,c),hc(g,s,c)),s={cache:cd()},t.payload=s;return}s=s.return}}function sb(t,s,c){var g=Hr();c={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ku(t)?jm(s,c):(c=Jf(t,s,c,g),c!==null&&(Sr(c,t,g),zm(c,s,g)))}function Fm(t,s,c){var g=Hr();pc(t,s,c,g)}function pc(t,s,c,g){var y={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ku(t))jm(s,y);else{var w=t.alternate;if(t.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var O=s.lastRenderedState,U=w(O,c);if(y.hasEagerState=!0,y.eagerState=U,m(U,O))return Iu(t,s,y,0),bn===null&&Su(),!1}catch{}finally{}if(c=Jf(t,s,y,g),c!==null)return Sr(c,t,g),zm(c,s,g),!0}return!1}function Pd(t,s,c,g){if(g={lane:2,revertLane:d0(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Ku(t)){if(s)throw Error(o(479))}else s=Jf(t,c,g,2),s!==null&&Sr(s,t,2)}function Ku(t){var s=t.alternate;return t===xt||s!==null&&s===xt}function jm(t,s){El=ju=!0;var c=t.pending;c===null?s.next=s:(s.next=c.next,c.next=s),t.pending=s}function zm(t,s,c){if((c&4194048)!==0){var g=s.lanes;g&=t.pendingLanes,c|=g,s.lanes=c,lt(t,c)}}var xc={readContext:Ui,use:Gu,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n};xc.useEffectEvent=$n;var Hm={readContext:Ui,use:Gu,useCallback:function(t,s){return fr().memoizedState=[t,s===void 0?null:s],t},useContext:Ui,useEffect:Cm,useImperativeHandle:function(t,s,c){c=c!=null?c.concat([t]):null,Yu(4194308,4,Rm.bind(null,s,t),c)},useLayoutEffect:function(t,s){return Yu(4194308,4,t,s)},useInsertionEffect:function(t,s){Yu(4,2,t,s)},useMemo:function(t,s){var c=fr();s=s===void 0?null:s;var g=t();if(Vo){Kt(!0);try{t()}finally{Kt(!1)}}return c.memoizedState=[g,s],g},useReducer:function(t,s,c){var g=fr();if(c!==void 0){var y=c(s);if(Vo){Kt(!0);try{c(s)}finally{Kt(!1)}}}else y=s;return g.memoizedState=g.baseState=y,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:y},g.queue=t,t=t.dispatch=sb.bind(null,xt,t),[g.memoizedState,t]},useRef:function(t){var s=fr();return t={current:t},s.memoizedState=t},useState:function(t){t=Id(t);var s=t.queue,c=Fm.bind(null,xt,s);return s.dispatch=c,[t.memoizedState,c]},useDebugValue:Od,useDeferredValue:function(t,s){var c=fr();return Dd(c,t,s)},useTransition:function(){var t=Id(!1);return t=Pm.bind(null,xt,t.queue,!0,!1),fr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,c){var g=xt,y=fr();if(Yt){if(c===void 0)throw Error(o(407));c=c()}else{if(c=s(),bn===null)throw Error(o(349));(jt&127)!==0||um(g,s,c)}y.memoizedState=c;var w={value:c,getSnapshot:s};return y.queue=w,Cm(fm.bind(null,g,w,t),[t]),g.flags|=2048,_l(9,{destroy:void 0},hm.bind(null,g,w,c,s),null),c},useId:function(){var t=fr(),s=bn.identifierPrefix;if(Yt){var c=Ps,g=Ls;c=(g&~(1<<32-it(g)-1)).toString(32)+c,s="_"+s+"R_"+c,c=zu++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=Jw++,s="_"+s+"r_"+c.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Ld,useFormState:Am,useActionState:Am,useOptimistic:function(t){var s=fr();s.memoizedState=s.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Pd.bind(null,xt,!0,c),c.dispatch=s,[t,s]},useMemoCache:vd,useCacheRefresh:function(){return fr().memoizedState=rb.bind(null,xt)},useEffectEvent:function(t){var s=fr(),c={impl:t};return s.memoizedState=c,function(){if((an&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},Bd={readContext:Ui,use:Gu,useCallback:Dm,useContext:Ui,useEffect:Rd,useImperativeHandle:Om,useInsertionEffect:Im,useLayoutEffect:Nm,useMemo:Mm,useReducer:qu,useRef:vm,useState:function(){return qu(oa)},useDebugValue:Od,useDeferredValue:function(t,s){var c=li();return Lm(c,En.memoizedState,t,s)},useTransition:function(){var t=qu(oa)[0],s=li().memoizedState;return[typeof t=="boolean"?t:mc(t),s]},useSyncExternalStore:cm,useId:Um,useHostTransitionStatus:Ld,useFormState:wm,useActionState:wm,useOptimistic:function(t,s){var c=li();return mm(c,En,t,s)},useMemoCache:vd,useCacheRefresh:Vm};Bd.useEffectEvent=Sm;var Gm={readContext:Ui,use:Gu,useCallback:Dm,useContext:Ui,useEffect:Rd,useImperativeHandle:Om,useInsertionEffect:Im,useLayoutEffect:Nm,useMemo:Mm,useReducer:Sd,useRef:vm,useState:function(){return Sd(oa)},useDebugValue:Od,useDeferredValue:function(t,s){var c=li();return En===null?Dd(c,t,s):Lm(c,En.memoizedState,t,s)},useTransition:function(){var t=Sd(oa)[0],s=li().memoizedState;return[typeof t=="boolean"?t:mc(t),s]},useSyncExternalStore:cm,useId:Um,useHostTransitionStatus:Ld,useFormState:Tm,useActionState:Tm,useOptimistic:function(t,s){var c=li();return En!==null?mm(c,En,t,s):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:vd,useCacheRefresh:Vm};Gm.useEffectEvent=Sm;function kd(t,s,c,g){s=t.memoizedState,c=c(g,s),c=c==null?s:I({},s,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var Ud={enqueueSetState:function(t,s,c){t=t._reactInternals;var g=Hr(),y=ja(g);y.payload=s,c!=null&&(y.callback=c),s=za(t,y,g),s!==null&&(Sr(s,t,g),hc(s,t,g))},enqueueReplaceState:function(t,s,c){t=t._reactInternals;var g=Hr(),y=ja(g);y.tag=1,y.payload=s,c!=null&&(y.callback=c),s=za(t,y,g),s!==null&&(Sr(s,t,g),hc(s,t,g))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var c=Hr(),g=ja(c);g.tag=2,s!=null&&(g.callback=s),s=za(t,g,c),s!==null&&(Sr(s,t,c),hc(s,t,c))}};function qm(t,s,c,g,y,w,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,w,O):s.prototype&&s.prototype.isPureReactComponent?!x(c,g)||!x(y,w):!0}function Ym(t,s,c,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,g),s.state!==t&&Ud.enqueueReplaceState(s,s.state,null)}function Fo(t,s){var c=s;if("ref"in s){c={};for(var g in s)g!=="ref"&&(c[g]=s[g])}if(t=t.defaultProps){c===s&&(c=I({},c));for(var y in t)c[y]===void 0&&(c[y]=t[y])}return c}function Xm(t){Cu(t)}function Km(t){console.error(t)}function Wm(t){Cu(t)}function Wu(t,s){try{var c=t.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function Qm(t,s,c){try{var g=t.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Vd(t,s,c){return c=ja(c),c.tag=3,c.payload={element:null},c.callback=function(){Wu(t,s)},c}function Zm(t){return t=ja(t),t.tag=3,t}function Jm(t,s,c,g){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var w=g.value;t.payload=function(){return y(w)},t.callback=function(){Qm(s,c,g)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(t.callback=function(){Qm(s,c,g),typeof y!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function ab(t,s,c,g,y){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=c.alternate,s!==null&&fl(s,c,y,!0),c=Vr.current,c!==null){switch(c.tag){case 31:case 13:return as===null?oh():c.alternate===null&&ei===0&&(ei=3),c.flags&=-257,c.flags|=65536,c.lanes=y,g===Bu?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([g]):s.add(g),u0(t,g,y)),!1;case 22:return c.flags|=65536,g===Bu?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([g]):c.add(g)),u0(t,g,y)),!1}throw Error(o(435,c.tag))}return u0(t,g,y),oh(),!1}if(Yt)return s=Vr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,g!==rd&&(t=Error(o(422),{cause:g}),ac(ns(t,c)))):(g!==rd&&(s=Error(o(423),{cause:g}),ac(ns(s,c))),t=t.current.alternate,t.flags|=65536,y&=-y,t.lanes|=y,g=ns(g,c),y=Vd(t.stateNode,g,y),md(t,y),ei!==4&&(ei=2)),!1;var w=Error(o(520),{cause:g});if(w=ns(w,c),vc===null?vc=[w]:vc.push(w),ei!==4&&(ei=2),s===null)return!0;g=ns(g,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,t=y&-y,c.lanes|=t,t=Vd(c.stateNode,g,t),md(c,t),!1;case 1:if(s=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ka===null||!Ka.has(w))))return c.flags|=65536,y&=-y,c.lanes|=y,y=Zm(y),Jm(y,t,c,g),md(c,y),!1}c=c.return}while(c!==null);return!1}var Fd=Error(o(461)),gi=!1;function Vi(t,s,c,g){s.child=t===null?nm(s,null,c,g):Uo(s,t.child,c,g)}function $m(t,s,c,g,y){c=c.render;var w=s.ref;if("ref"in g){var O={};for(var U in g)U!=="ref"&&(O[U]=g[U])}else O=g;return Lo(s),g=Ad(t,s,c,O,w,y),U=wd(),t!==null&&!gi?(bd(t,s,y),la(t,s,y)):(Yt&&U&&nd(s),s.flags|=1,Vi(t,s,g,y),s.child)}function ep(t,s,c,g,y){if(t===null){var w=c.type;return typeof w=="function"&&!$f(w)&&w.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=w,tp(t,s,w,g,y)):(t=Ru(c.type,null,g,s,s.mode,y),t.ref=s.ref,t.return=s,s.child=t)}if(w=t.child,!Kd(t,y)){var O=w.memoizedProps;if(c=c.compare,c=c!==null?c:x,c(O,g)&&t.ref===s.ref)return la(t,s,y)}return s.flags|=1,t=na(w,g),t.ref=s.ref,t.return=s,s.child=t}function tp(t,s,c,g,y){if(t!==null){var w=t.memoizedProps;if(x(w,g)&&t.ref===s.ref)if(gi=!1,s.pendingProps=g=w,Kd(t,y))(t.flags&131072)!==0&&(gi=!0);else return s.lanes=t.lanes,la(t,s,y)}return jd(t,s,c,g,y)}function np(t,s,c,g){var y=g.children,w=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((s.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,t!==null){for(g=s.child=t.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;g=y&~w}else g=0,s.child=null;return ip(t,s,w,c,g)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Lu(s,w!==null?w.cachePool:null),w!==null?sm(s,w):xd(),am(s);else return g=s.lanes=536870912,ip(t,s,w!==null?w.baseLanes|c:c,c,g)}else w!==null?(Lu(s,w.cachePool),sm(s,w),Ga(),s.memoizedState=null):(t!==null&&Lu(s,null),xd(),Ga());return Vi(t,s,y,c),s.child}function Ec(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ip(t,s,c,g,y){var w=hd();return w=w===null?null:{parent:fi._currentValue,pool:w},s.memoizedState={baseLanes:c,cachePool:w},t!==null&&Lu(s,null),xd(),am(s),t!==null&&fl(t,s,g,!0),s.childLanes=y,null}function Qu(t,s){return s=Ju({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function rp(t,s,c){return Uo(s,t.child,null,c),t=Qu(s,s.pendingProps),t.flags|=2,Fr(s),s.memoizedState=null,t}function ob(t,s,c){var g=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Yt){if(g.mode==="hidden")return t=Qu(s,g),s.lanes=536870912,Ec(null,t);if(yd(s),(t=On)?(t=p2(t,ss),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ba!==null?{id:Ls,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},c=jg(t),c.return=s,s.child=c,ki=s,On=null)):t=null,t===null)throw Ua(s);return s.lanes=536870912,null}return Qu(s,g)}var w=t.memoizedState;if(w!==null){var O=w.dehydrated;if(yd(s),y)if(s.flags&256)s.flags&=-257,s=rp(t,s,c);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(gi||fl(t,s,c,!1),y=(c&t.childLanes)!==0,gi||y){if(g=bn,g!==null&&(O=kt(g,c),O!==0&&O!==w.retryLane))throw w.retryLane=O,Ro(t,O),Sr(g,t,O),Fd;oh(),s=rp(t,s,c)}else t=w.treeContext,On=os(O.nextSibling),ki=s,Yt=!0,ka=null,ss=!1,t!==null&&Gg(s,t),s=Qu(s,g),s.flags|=4096;return s}return t=na(t.child,{mode:g.mode,children:g.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Zu(t,s){var c=s.ref;if(c===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(s.flags|=4194816)}}function jd(t,s,c,g,y){return Lo(s),c=Ad(t,s,c,g,void 0,y),g=wd(),t!==null&&!gi?(bd(t,s,y),la(t,s,y)):(Yt&&g&&nd(s),s.flags|=1,Vi(t,s,c,y),s.child)}function sp(t,s,c,g,y,w){return Lo(s),s.updateQueue=null,c=lm(s,g,c,y),om(t),g=wd(),t!==null&&!gi?(bd(t,s,w),la(t,s,w)):(Yt&&g&&nd(s),s.flags|=1,Vi(t,s,c,w),s.child)}function ap(t,s,c,g,y){if(Lo(s),s.stateNode===null){var w=ll,O=c.contextType;typeof O=="object"&&O!==null&&(w=Ui(O)),w=new c(g,w),s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Ud,s.stateNode=w,w._reactInternals=s,w=s.stateNode,w.props=g,w.state=s.memoizedState,w.refs={},dd(s),O=c.contextType,w.context=typeof O=="object"&&O!==null?Ui(O):ll,w.state=s.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(kd(s,c,O,g),w.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&Ud.enqueueReplaceState(w,w.state,null),dc(s,g,w,y),fc(),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(t===null){w=s.stateNode;var U=s.memoizedProps,Z=Fo(c,U);w.props=Z;var he=w.context,be=c.contextType;O=ll,typeof be=="object"&&be!==null&&(O=Ui(be));var Se=c.getDerivedStateFromProps;be=typeof Se=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=s.pendingProps!==U,be||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||he!==O)&&Ym(s,w,g,O),Fa=!1;var de=s.memoizedState;w.state=de,dc(s,g,w,y),fc(),he=s.memoizedState,U||de!==he||Fa?(typeof Se=="function"&&(kd(s,c,Se,g),he=s.memoizedState),(Z=Fa||qm(s,c,Z,g,de,he,O))?(be||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=he),w.props=g,w.state=he,w.context=O,g=Z):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{w=s.stateNode,gd(t,s),O=s.memoizedProps,be=Fo(c,O),w.props=be,Se=s.pendingProps,de=w.context,he=c.contextType,Z=ll,typeof he=="object"&&he!==null&&(Z=Ui(he)),U=c.getDerivedStateFromProps,(he=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==Se||de!==Z)&&Ym(s,w,g,Z),Fa=!1,de=s.memoizedState,w.state=de,dc(s,g,w,y),fc();var _e=s.memoizedState;O!==Se||de!==_e||Fa||t!==null&&t.dependencies!==null&&Du(t.dependencies)?(typeof U=="function"&&(kd(s,c,U,g),_e=s.memoizedState),(be=Fa||qm(s,c,be,g,de,_e,Z)||t!==null&&t.dependencies!==null&&Du(t.dependencies))?(he||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,_e,Z),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,_e,Z)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===t.memoizedProps&&de===t.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&de===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=_e),w.props=g,w.state=_e,w.context=Z,g=be):(typeof w.componentDidUpdate!="function"||O===t.memoizedProps&&de===t.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&de===t.memoizedState||(s.flags|=1024),g=!1)}return w=g,Zu(t,s),g=(s.flags&128)!==0,w||g?(w=s.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:w.render(),s.flags|=1,t!==null&&g?(s.child=Uo(s,t.child,null,y),s.child=Uo(s,null,c,y)):Vi(t,s,c,y),s.memoizedState=w.state,t=s.child):t=la(t,s,y),t}function op(t,s,c,g){return Do(),s.flags|=256,Vi(t,s,c,g),s.child}var zd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hd(t){return{baseLanes:t,cachePool:Qg()}}function Gd(t,s,c){return t=t!==null?t.childLanes&~c:0,s&&(t|=zr),t}function lp(t,s,c){var g=s.pendingProps,y=!1,w=(s.flags&128)!==0,O;if((O=w)||(O=t!==null&&t.memoizedState===null?!1:(oi.current&2)!==0),O&&(y=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,t===null){if(Yt){if(y?Ha(s):Ga(),(t=On)?(t=p2(t,ss),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ba!==null?{id:Ls,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},c=jg(t),c.return=s,s.child=c,ki=s,On=null)):t=null,t===null)throw Ua(s);return C0(t)?s.lanes=32:s.lanes=536870912,null}var U=g.children;return g=g.fallback,y?(Ga(),y=s.mode,U=Ju({mode:"hidden",children:U},y),g=Oo(g,y,c,null),U.return=s,g.return=s,U.sibling=g,s.child=U,g=s.child,g.memoizedState=Hd(c),g.childLanes=Gd(t,O,c),s.memoizedState=zd,Ec(null,g)):(Ha(s),qd(s,U))}var Z=t.memoizedState;if(Z!==null&&(U=Z.dehydrated,U!==null)){if(w)s.flags&256?(Ha(s),s.flags&=-257,s=Yd(t,s,c)):s.memoizedState!==null?(Ga(),s.child=t.child,s.flags|=128,s=null):(Ga(),U=g.fallback,y=s.mode,g=Ju({mode:"visible",children:g.children},y),U=Oo(U,y,c,null),U.flags|=2,g.return=s,U.return=s,g.sibling=U,s.child=g,Uo(s,t.child,null,c),g=s.child,g.memoizedState=Hd(c),g.childLanes=Gd(t,O,c),s.memoizedState=zd,s=Ec(null,g));else if(Ha(s),C0(U)){if(O=U.nextSibling&&U.nextSibling.dataset,O)var he=O.dgst;O=he,g=Error(o(419)),g.stack="",g.digest=O,ac({value:g,source:null,stack:null}),s=Yd(t,s,c)}else if(gi||fl(t,s,c,!1),O=(c&t.childLanes)!==0,gi||O){if(O=bn,O!==null&&(g=kt(O,c),g!==0&&g!==Z.retryLane))throw Z.retryLane=g,Ro(t,g),Sr(O,t,g),Fd;v0(U)||oh(),s=Yd(t,s,c)}else v0(U)?(s.flags|=192,s.child=t.child,s=null):(t=Z.treeContext,On=os(U.nextSibling),ki=s,Yt=!0,ka=null,ss=!1,t!==null&&Gg(s,t),s=qd(s,g.children),s.flags|=4096);return s}return y?(Ga(),U=g.fallback,y=s.mode,Z=t.child,he=Z.sibling,g=na(Z,{mode:"hidden",children:g.children}),g.subtreeFlags=Z.subtreeFlags&65011712,he!==null?U=na(he,U):(U=Oo(U,y,c,null),U.flags|=2),U.return=s,g.return=s,g.sibling=U,s.child=g,Ec(null,g),g=s.child,U=t.child.memoizedState,U===null?U=Hd(c):(y=U.cachePool,y!==null?(Z=fi._currentValue,y=y.parent!==Z?{parent:Z,pool:Z}:y):y=Qg(),U={baseLanes:U.baseLanes|c,cachePool:y}),g.memoizedState=U,g.childLanes=Gd(t,O,c),s.memoizedState=zd,Ec(t.child,g)):(Ha(s),c=t.child,t=c.sibling,c=na(c,{mode:"visible",children:g.children}),c.return=s,c.sibling=null,t!==null&&(O=s.deletions,O===null?(s.deletions=[t],s.flags|=16):O.push(t)),s.child=c,s.memoizedState=null,c)}function qd(t,s){return s=Ju({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Ju(t,s){return t=Ur(22,t,null,s),t.lanes=0,t}function Yd(t,s,c){return Uo(s,t.child,null,c),t=qd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function cp(t,s,c){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),od(t.return,s,c)}function Xd(t,s,c,g,y,w){var O=t.memoizedState;O===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:y,treeForkCount:w}:(O.isBackwards=s,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=c,O.tailMode=y,O.treeForkCount=w)}function up(t,s,c){var g=s.pendingProps,y=g.revealOrder,w=g.tail;g=g.children;var O=oi.current,U=(O&2)!==0;if(U?(O=O&1|2,s.flags|=128):O&=1,ke(oi,O),Vi(t,s,g,c),g=Yt?sc:0,!U&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cp(t,c,s);else if(t.tag===19)cp(t,c,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(y){case"forwards":for(c=s.child,y=null;c!==null;)t=c.alternate,t!==null&&Fu(t)===null&&(y=c),c=c.sibling;c=y,c===null?(y=s.child,s.child=null):(y=c.sibling,c.sibling=null),Xd(s,!1,y,c,w,g);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=s.child,s.child=null;y!==null;){if(t=y.alternate,t!==null&&Fu(t)===null){s.child=y;break}t=y.sibling,y.sibling=c,c=y,y=t}Xd(s,!0,c,null,w,g);break;case"together":Xd(s,!1,null,null,void 0,g);break;default:s.memoizedState=null}return s.child}function la(t,s,c){if(t!==null&&(s.dependencies=t.dependencies),Xa|=s.lanes,(c&s.childLanes)===0)if(t!==null){if(fl(t,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,c=na(t,t.pendingProps),s.child=c,c.return=s;t.sibling!==null;)t=t.sibling,c=c.sibling=na(t,t.pendingProps),c.return=s;c.sibling=null}return s.child}function Kd(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Du(t)))}function lb(t,s,c){switch(s.tag){case 3:yt(s,s.stateNode.containerInfo),Va(s,fi,t.memoizedState.cache),Do();break;case 27:case 5:yi(s);break;case 4:yt(s,s.stateNode.containerInfo);break;case 10:Va(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,yd(s),null;break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(Ha(s),s.flags|=128,null):(c&s.child.childLanes)!==0?lp(t,s,c):(Ha(s),t=la(t,s,c),t!==null?t.sibling:null);Ha(s);break;case 19:var y=(t.flags&128)!==0;if(g=(c&s.childLanes)!==0,g||(fl(t,s,c,!1),g=(c&s.childLanes)!==0),y){if(g)return up(t,s,c);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ke(oi,oi.current),g)break;return null;case 22:return s.lanes=0,np(t,s,c,s.pendingProps);case 24:Va(s,fi,t.memoizedState.cache)}return la(t,s,c)}function hp(t,s,c){if(t!==null)if(t.memoizedProps!==s.pendingProps)gi=!0;else{if(!Kd(t,c)&&(s.flags&128)===0)return gi=!1,lb(t,s,c);gi=(t.flags&131072)!==0}else gi=!1,Yt&&(s.flags&1048576)!==0&&Hg(s,sc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var g=s.pendingProps;if(t=Bo(s.elementType),s.type=t,typeof t=="function")$f(t)?(g=Fo(t,g),s.tag=1,s=ap(null,s,t,g,c)):(s.tag=0,s=jd(null,s,t,g,c));else{if(t!=null){var y=t.$$typeof;if(y===ve){s.tag=11,s=$m(null,s,t,g,c);break e}else if(y===F){s.tag=14,s=ep(null,s,t,g,c);break e}}throw s=Ze(t)||t,Error(o(306,s,""))}}return s;case 0:return jd(t,s,s.type,s.pendingProps,c);case 1:return g=s.type,y=Fo(g,s.pendingProps),ap(t,s,g,y,c);case 3:e:{if(yt(s,s.stateNode.containerInfo),t===null)throw Error(o(387));g=s.pendingProps;var w=s.memoizedState;y=w.element,gd(t,s),dc(s,g,null,c);var O=s.memoizedState;if(g=O.cache,Va(s,fi,g),g!==w.cache&&ld(s,[fi],c,!0),fc(),g=O.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=op(t,s,g,c);break e}else if(g!==y){y=ns(Error(o(424)),s),ac(y),s=op(t,s,g,c);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(On=os(t.firstChild),ki=s,Yt=!0,ka=null,ss=!0,c=nm(s,null,g,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Do(),g===y){s=la(t,s,c);break e}Vi(t,s,g,c)}s=s.child}return s;case 26:return Zu(t,s),t===null?(c=w2(s.type,null,s.pendingProps,null))?s.memoizedState=c:Yt||(c=s.type,t=s.pendingProps,g=gh(Oe.current).createElement(c),g[en]=s,g[Ut]=t,Fi(g,c,t),Bn(g),s.stateNode=g):s.memoizedState=w2(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return yi(s),t===null&&Yt&&(g=s.stateNode=y2(s.type,s.pendingProps,Oe.current),ki=s,ss=!0,y=On,Ja(s.type)?(S0=y,On=os(g.firstChild)):On=y),Vi(t,s,s.pendingProps.children,c),Zu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Yt&&((y=g=On)&&(g=Ub(g,s.type,s.pendingProps,ss),g!==null?(s.stateNode=g,ki=s,On=os(g.firstChild),ss=!1,y=!0):y=!1),y||Ua(s)),yi(s),y=s.type,w=s.pendingProps,O=t!==null?t.memoizedProps:null,g=w.children,w0(y,w)?g=null:O!==null&&w0(y,O)&&(s.flags|=32),s.memoizedState!==null&&(y=Ad(t,s,$w,null,null,c),Mc._currentValue=y),Zu(t,s),Vi(t,s,g,c),s.child;case 6:return t===null&&Yt&&((t=c=On)&&(c=Vb(c,s.pendingProps,ss),c!==null?(s.stateNode=c,ki=s,On=null,t=!0):t=!1),t||Ua(s)),null;case 13:return lp(t,s,c);case 4:return yt(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=Uo(s,null,g,c):Vi(t,s,g,c),s.child;case 11:return $m(t,s,s.type,s.pendingProps,c);case 7:return Vi(t,s,s.pendingProps,c),s.child;case 8:return Vi(t,s,s.pendingProps.children,c),s.child;case 12:return Vi(t,s,s.pendingProps.children,c),s.child;case 10:return g=s.pendingProps,Va(s,s.type,g.value),Vi(t,s,g.children,c),s.child;case 9:return y=s.type._context,g=s.pendingProps.children,Lo(s),y=Ui(y),g=g(y),s.flags|=1,Vi(t,s,g,c),s.child;case 14:return ep(t,s,s.type,s.pendingProps,c);case 15:return tp(t,s,s.type,s.pendingProps,c);case 19:return up(t,s,c);case 31:return ob(t,s,c);case 22:return np(t,s,c,s.pendingProps);case 24:return Lo(s),g=Ui(fi),t===null?(y=hd(),y===null&&(y=bn,w=cd(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=c),y=w),s.memoizedState={parent:g,cache:y},dd(s),Va(s,fi,y)):((t.lanes&c)!==0&&(gd(t,s),dc(s,null,null,c),fc()),y=t.memoizedState,w=s.memoizedState,y.parent!==g?(y={parent:g,cache:g},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Va(s,fi,g)):(g=w.cache,Va(s,fi,g),g!==y.cache&&ld(s,[fi],c,!0))),Vi(t,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function ca(t){t.flags|=4}function Wd(t,s,c,g,y){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(y&335544128)===y)if(t.stateNode.complete)t.flags|=8192;else if(Up())t.flags|=8192;else throw ko=Bu,fd}else t.flags&=-16777217}function fp(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!S2(s))if(Up())t.flags|=8192;else throw ko=Bu,fd}function $u(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Hn():536870912,t.lanes|=s,Tl|=s)}function yc(t,s){if(!Yt)switch(t.tailMode){case"hidden":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function Dn(t){var s=t.alternate!==null&&t.alternate.child===t.child,c=0,g=0;if(s)for(var y=t.child;y!==null;)c|=y.lanes|y.childLanes,g|=y.subtreeFlags&65011712,g|=y.flags&65011712,y.return=t,y=y.sibling;else for(y=t.child;y!==null;)c|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=t,y=y.sibling;return t.subtreeFlags|=g,t.childLanes=c,s}function cb(t,s,c){var g=s.pendingProps;switch(id(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(s),null;case 1:return Dn(s),null;case 3:return c=s.stateNode,g=null,t!==null&&(g=t.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),sa(fi),Jt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(hl(s)?ca(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,sd())),Dn(s),null;case 26:var y=s.type,w=s.memoizedState;return t===null?(ca(s),w!==null?(Dn(s),fp(s,w)):(Dn(s),Wd(s,y,null,g,c))):w?w!==t.memoizedState?(ca(s),Dn(s),fp(s,w)):(Dn(s),s.flags&=-16777217):(t=t.memoizedProps,t!==g&&ca(s),Dn(s),Wd(s,y,t,g,c)),null;case 27:if(Pn(s),c=Oe.current,y=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==g&&ca(s);else{if(!g){if(s.stateNode===null)throw Error(o(166));return Dn(s),null}t=Ue.current,hl(s)?qg(s):(t=y2(y,g,c),s.stateNode=t,ca(s))}return Dn(s),null;case 5:if(Pn(s),y=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==g&&ca(s);else{if(!g){if(s.stateNode===null)throw Error(o(166));return Dn(s),null}if(w=Ue.current,hl(s))qg(s);else{var O=gh(Oe.current);switch(w){case 1:w=O.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:w=O.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":w=O.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":w=O.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":w=O.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?w.multiple=!0:g.size&&(w.size=g.size);break;default:w=typeof g.is=="string"?O.createElement(y,{is:g.is}):O.createElement(y)}}w[en]=s,w[Ut]=g;e:for(O=s.child;O!==null;){if(O.tag===5||O.tag===6)w.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===s)break e;for(;O.sibling===null;){if(O.return===null||O.return===s)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}s.stateNode=w;e:switch(Fi(w,y,g),y){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&ca(s)}}return Dn(s),Wd(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,c),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==g&&ca(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(o(166));if(t=Oe.current,hl(s)){if(t=s.stateNode,c=s.memoizedProps,g=null,y=ki,y!==null)switch(y.tag){case 27:case 5:g=y.memoizedProps}t[en]=s,t=!!(t.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||l2(t.nodeValue,c)),t||Ua(s,!0)}else t=gh(t).createTextNode(g),t[en]=s,s.stateNode=t}return Dn(s),null;case 31:if(c=s.memoizedState,t===null||t.memoizedState!==null){if(g=hl(s),c!==null){if(t===null){if(!g)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[en]=s}else Do(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dn(s),t=!1}else c=sd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return s.flags&256?(Fr(s),s):(Fr(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Dn(s),null;case 13:if(g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(y=hl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!y)throw Error(o(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[en]=s}else Do(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dn(s),y=!1}else y=sd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Fr(s),s):(Fr(s),null)}return Fr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=g!==null,t=t!==null&&t.memoizedState!==null,c&&(g=s.child,y=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(y=g.alternate.memoizedState.cachePool.pool),w=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==y&&(g.flags|=2048)),c!==t&&c&&(s.child.flags|=8192),$u(s,s.updateQueue),Dn(s),null);case 4:return Jt(),t===null&&x0(s.stateNode.containerInfo),Dn(s),null;case 10:return sa(s.type),Dn(s),null;case 19:if(Ae(oi),g=s.memoizedState,g===null)return Dn(s),null;if(y=(s.flags&128)!==0,w=g.rendering,w===null)if(y)yc(g,!1);else{if(ei!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(w=Fu(t),w!==null){for(s.flags|=128,yc(g,!1),t=w.updateQueue,s.updateQueue=t,$u(s,t),s.subtreeFlags=0,t=c,c=s.child;c!==null;)Fg(c,t),c=c.sibling;return ke(oi,oi.current&1|2),Yt&&ia(s,g.treeForkCount),s.child}t=t.sibling}g.tail!==null&&xn()>rh&&(s.flags|=128,y=!0,yc(g,!1),s.lanes=4194304)}else{if(!y)if(t=Fu(w),t!==null){if(s.flags|=128,y=!0,t=t.updateQueue,s.updateQueue=t,$u(s,t),yc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Yt)return Dn(s),null}else 2*xn()-g.renderingStartTime>rh&&c!==536870912&&(s.flags|=128,y=!0,yc(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(t=g.last,t!==null?t.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=xn(),t.sibling=null,c=oi.current,ke(oi,y?c&1|2:c&1),Yt&&ia(s,g.treeForkCount),t):(Dn(s),null);case 22:case 23:return Fr(s),Ed(),g=s.memoizedState!==null,t!==null?t.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(c&536870912)!==0&&(s.flags&128)===0&&(Dn(s),s.subtreeFlags&6&&(s.flags|=8192)):Dn(s),c=s.updateQueue,c!==null&&$u(s,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==c&&(s.flags|=2048),t!==null&&Ae(Po),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),sa(fi),Dn(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function ub(t,s){switch(id(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return sa(fi),Jt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Pn(s),null;case 31:if(s.memoizedState!==null){if(Fr(s),s.alternate===null)throw Error(o(340));Do()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Fr(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Do()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ae(oi),null;case 4:return Jt(),null;case 10:return sa(s.type),null;case 22:case 23:return Fr(s),Ed(),t!==null&&Ae(Po),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return sa(fi),null;case 25:return null;default:return null}}function dp(t,s){switch(id(s),s.tag){case 3:sa(fi),Jt();break;case 26:case 27:case 5:Pn(s);break;case 4:Jt();break;case 31:s.memoizedState!==null&&Fr(s);break;case 13:Fr(s);break;case 19:Ae(oi);break;case 10:sa(s.type);break;case 22:case 23:Fr(s),Ed(),t!==null&&Ae(Po);break;case 24:sa(fi)}}function _c(t,s){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var y=g.next;c=y;do{if((c.tag&t)===t){g=void 0;var w=c.create,O=c.inst;g=w(),O.destroy=g}c=c.next}while(c!==y)}}catch(U){mn(s,s.return,U)}}function qa(t,s,c){try{var g=s.updateQueue,y=g!==null?g.lastEffect:null;if(y!==null){var w=y.next;g=w;do{if((g.tag&t)===t){var O=g.inst,U=O.destroy;if(U!==void 0){O.destroy=void 0,y=s;var Z=c,he=U;try{he()}catch(be){mn(y,Z,be)}}}g=g.next}while(g!==w)}}catch(be){mn(s,s.return,be)}}function gp(t){var s=t.updateQueue;if(s!==null){var c=t.stateNode;try{rm(s,c)}catch(g){mn(t,t.return,g)}}}function mp(t,s,c){c.props=Fo(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(g){mn(t,s,g)}}function Ac(t,s){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var g=t.stateNode;break;case 30:g=t.stateNode;break;default:g=t.stateNode}typeof c=="function"?t.refCleanup=c(g):c.current=g}}catch(y){mn(t,s,y)}}function Bs(t,s){var c=t.ref,g=t.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(y){mn(t,s,y)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){mn(t,s,y)}else c.current=null}function pp(t){var s=t.type,c=t.memoizedProps,g=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(y){mn(t,t.return,y)}}function Qd(t,s,c){try{var g=t.stateNode;Db(g,t.type,c,s),g[Ut]=s}catch(y){mn(t,t.return,y)}}function xp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ja(t.type)||t.tag===4}function Zd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ja(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jd(t,s,c){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(t),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Wi));else if(g!==4&&(g===27&&Ja(t.type)&&(c=t.stateNode,s=null),t=t.child,t!==null))for(Jd(t,s,c),t=t.sibling;t!==null;)Jd(t,s,c),t=t.sibling}function eh(t,s,c){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?c.insertBefore(t,s):c.appendChild(t);else if(g!==4&&(g===27&&Ja(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(eh(t,s,c),t=t.sibling;t!==null;)eh(t,s,c),t=t.sibling}function Ep(t){var s=t.stateNode,c=t.memoizedProps;try{for(var g=t.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Fi(s,g,c),s[en]=t,s[Ut]=c}catch(w){mn(t,t.return,w)}}var ua=!1,mi=!1,$d=!1,yp=typeof WeakSet=="function"?WeakSet:Set,Ii=null;function hb(t,s){if(t=t.containerInfo,_0=Ah,t=P(t),B(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var y=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var O=0,U=-1,Z=-1,he=0,be=0,Se=t,de=null;t:for(;;){for(var _e;Se!==c||y!==0&&Se.nodeType!==3||(U=O+y),Se!==w||g!==0&&Se.nodeType!==3||(Z=O+g),Se.nodeType===3&&(O+=Se.nodeValue.length),(_e=Se.firstChild)!==null;)de=Se,Se=_e;for(;;){if(Se===t)break t;if(de===c&&++he===y&&(U=O),de===w&&++be===g&&(Z=O),(_e=Se.nextSibling)!==null)break;Se=de,de=Se.parentNode}Se=_e}c=U===-1||Z===-1?null:{start:U,end:Z}}else c=null}c=c||{start:0,end:0}}else c=null;for(A0={focusedElem:t,selectionRange:c},Ah=!1,Ii=s;Ii!==null;)if(s=Ii,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ii=t;else for(;Ii!==null;){switch(s=Ii,w=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)y=t[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&w!==null){t=void 0,c=s,y=w.memoizedProps,w=w.memoizedState,g=c.stateNode;try{var Xe=Fo(c.type,y);t=g.getSnapshotBeforeUpdate(Xe,w),g.__reactInternalSnapshotBeforeUpdate=t}catch(st){mn(c,c.return,st)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,c=t.nodeType,c===9)T0(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":T0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,Ii=t;break}Ii=s.return}}function _p(t,s,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:fa(t,c),g&4&&_c(5,c);break;case 1:if(fa(t,c),g&4)if(t=c.stateNode,s===null)try{t.componentDidMount()}catch(O){mn(c,c.return,O)}else{var y=Fo(c.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(y,s,t.__reactInternalSnapshotBeforeUpdate)}catch(O){mn(c,c.return,O)}}g&64&&gp(c),g&512&&Ac(c,c.return);break;case 3:if(fa(t,c),g&64&&(t=c.updateQueue,t!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{rm(t,s)}catch(O){mn(c,c.return,O)}}break;case 27:s===null&&g&4&&Ep(c);case 26:case 5:fa(t,c),s===null&&g&4&&pp(c),g&512&&Ac(c,c.return);break;case 12:fa(t,c);break;case 31:fa(t,c),g&4&&bp(t,c);break;case 13:fa(t,c),g&4&&Tp(t,c),g&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=_b.bind(null,c),Fb(t,c))));break;case 22:if(g=c.memoizedState!==null||ua,!g){s=s!==null&&s.memoizedState!==null||mi,y=ua;var w=mi;ua=g,(mi=s)&&!w?da(t,c,(c.subtreeFlags&8772)!==0):fa(t,c),ua=y,mi=w}break;case 30:break;default:fa(t,c)}}function Ap(t){var s=t.alternate;s!==null&&(t.alternate=null,Ap(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Di(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var jn=null,br=!1;function ha(t,s,c){for(c=c.child;c!==null;)wp(t,s,c),c=c.sibling}function wp(t,s,c){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(Xt,c)}catch{}switch(c.tag){case 26:mi||Bs(c,s),ha(t,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:mi||Bs(c,s);var g=jn,y=br;Ja(c.type)&&(jn=c.stateNode,br=!1),ha(t,s,c),Rc(c.stateNode),jn=g,br=y;break;case 5:mi||Bs(c,s);case 6:if(g=jn,y=br,jn=null,ha(t,s,c),jn=g,br=y,jn!==null)if(br)try{(jn.nodeType===9?jn.body:jn.nodeName==="HTML"?jn.ownerDocument.body:jn).removeChild(c.stateNode)}catch(w){mn(c,s,w)}else try{jn.removeChild(c.stateNode)}catch(w){mn(c,s,w)}break;case 18:jn!==null&&(br?(t=jn,g2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Dl(t)):g2(jn,c.stateNode));break;case 4:g=jn,y=br,jn=c.stateNode.containerInfo,br=!0,ha(t,s,c),jn=g,br=y;break;case 0:case 11:case 14:case 15:qa(2,c,s),mi||qa(4,c,s),ha(t,s,c);break;case 1:mi||(Bs(c,s),g=c.stateNode,typeof g.componentWillUnmount=="function"&&mp(c,s,g)),ha(t,s,c);break;case 21:ha(t,s,c);break;case 22:mi=(g=mi)||c.memoizedState!==null,ha(t,s,c),mi=g;break;default:ha(t,s,c)}}function bp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Dl(t)}catch(c){mn(s,s.return,c)}}}function Tp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Dl(t)}catch(c){mn(s,s.return,c)}}function fb(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new yp),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new yp),s;default:throw Error(o(435,t.tag))}}function th(t,s){var c=fb(t);s.forEach(function(g){if(!c.has(g)){c.add(g);var y=Ab.bind(null,t,g);g.then(y,y)}})}function Tr(t,s){var c=s.deletions;if(c!==null)for(var g=0;g<c.length;g++){var y=c[g],w=t,O=s,U=O;e:for(;U!==null;){switch(U.tag){case 27:if(Ja(U.type)){jn=U.stateNode,br=!1;break e}break;case 5:jn=U.stateNode,br=!1;break e;case 3:case 4:jn=U.stateNode.containerInfo,br=!0;break e}U=U.return}if(jn===null)throw Error(o(160));wp(w,O,y),jn=null,br=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)vp(s,t),s=s.sibling}var bs=null;function vp(t,s){var c=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tr(s,t),vr(t),g&4&&(qa(3,t,t.return),_c(3,t),qa(5,t,t.return));break;case 1:Tr(s,t),vr(t),g&512&&(mi||c===null||Bs(c,c.return)),g&64&&ua&&(t=t.updateQueue,t!==null&&(g=t.callbacks,g!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var y=bs;if(Tr(s,t),vr(t),g&512&&(mi||c===null||Bs(c,c.return)),g&4){var w=c!==null?c.memoizedState:null;if(g=t.memoizedState,c===null)if(g===null)if(t.stateNode===null){e:{g=t.type,c=t.memoizedProps,y=y.ownerDocument||y;t:switch(g){case"title":w=y.getElementsByTagName("title")[0],(!w||w[Xr]||w[en]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(g),y.head.insertBefore(w,y.querySelector("head > title"))),Fi(w,g,c),w[en]=t,Bn(w),g=w;break e;case"link":var O=v2("link","href",y).get(g+(c.href||""));if(O){for(var U=0;U<O.length;U++)if(w=O[U],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(U,1);break t}}w=y.createElement(g),Fi(w,g,c),y.head.appendChild(w);break;case"meta":if(O=v2("meta","content",y).get(g+(c.content||""))){for(U=0;U<O.length;U++)if(w=O[U],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(U,1);break t}}w=y.createElement(g),Fi(w,g,c),y.head.appendChild(w);break;default:throw Error(o(468,g))}w[en]=t,Bn(w),g=w}t.stateNode=g}else C2(y,t.type,t.stateNode);else t.stateNode=T2(y,g,t.memoizedProps);else w!==g?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,g===null?C2(y,t.type,t.stateNode):T2(y,g,t.memoizedProps)):g===null&&t.stateNode!==null&&Qd(t,t.memoizedProps,c.memoizedProps)}break;case 27:Tr(s,t),vr(t),g&512&&(mi||c===null||Bs(c,c.return)),c!==null&&g&4&&Qd(t,t.memoizedProps,c.memoizedProps);break;case 5:if(Tr(s,t),vr(t),g&512&&(mi||c===null||Bs(c,c.return)),t.flags&32){y=t.stateNode;try{Ki(y,"")}catch(Xe){mn(t,t.return,Xe)}}g&4&&t.stateNode!=null&&(y=t.memoizedProps,Qd(t,y,c!==null?c.memoizedProps:y)),g&1024&&($d=!0);break;case 6:if(Tr(s,t),vr(t),g&4){if(t.stateNode===null)throw Error(o(162));g=t.memoizedProps,c=t.stateNode;try{c.nodeValue=g}catch(Xe){mn(t,t.return,Xe)}}break;case 3:if(xh=null,y=bs,bs=mh(s.containerInfo),Tr(s,t),bs=y,vr(t),g&4&&c!==null&&c.memoizedState.isDehydrated)try{Dl(s.containerInfo)}catch(Xe){mn(t,t.return,Xe)}$d&&($d=!1,Cp(t));break;case 4:g=bs,bs=mh(t.stateNode.containerInfo),Tr(s,t),vr(t),bs=g;break;case 12:Tr(s,t),vr(t);break;case 31:Tr(s,t),vr(t),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,th(t,g)));break;case 13:Tr(s,t),vr(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(ih=xn()),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,th(t,g)));break;case 22:y=t.memoizedState!==null;var Z=c!==null&&c.memoizedState!==null,he=ua,be=mi;if(ua=he||y,mi=be||Z,Tr(s,t),mi=be,ua=he,vr(t),g&8192)e:for(s=t.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(c===null||Z||ua||mi||jo(t)),c=null,s=t;;){if(s.tag===5||s.tag===26){if(c===null){Z=c=s;try{if(w=Z.stateNode,y)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{U=Z.stateNode;var Se=Z.memoizedProps.style,de=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;U.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(Xe){mn(Z,Z.return,Xe)}}}else if(s.tag===6){if(c===null){Z=s;try{Z.stateNode.nodeValue=y?"":Z.memoizedProps}catch(Xe){mn(Z,Z.return,Xe)}}}else if(s.tag===18){if(c===null){Z=s;try{var _e=Z.stateNode;y?m2(_e,!0):m2(Z.stateNode,!1)}catch(Xe){mn(Z,Z.return,Xe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=t.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,th(t,c))));break;case 19:Tr(s,t),vr(t),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,th(t,g)));break;case 30:break;case 21:break;default:Tr(s,t),vr(t)}}function vr(t){var s=t.flags;if(s&2){try{for(var c,g=t.return;g!==null;){if(xp(g)){c=g;break}g=g.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var y=c.stateNode,w=Zd(t);eh(t,w,y);break;case 5:var O=c.stateNode;c.flags&32&&(Ki(O,""),c.flags&=-33);var U=Zd(t);eh(t,U,O);break;case 3:case 4:var Z=c.stateNode.containerInfo,he=Zd(t);Jd(t,he,Z);break;default:throw Error(o(161))}}catch(be){mn(t,t.return,be)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Cp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Cp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function fa(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)_p(t,s.alternate,s),s=s.sibling}function jo(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:qa(4,s,s.return),jo(s);break;case 1:Bs(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&mp(s,s.return,c),jo(s);break;case 27:Rc(s.stateNode);case 26:case 5:Bs(s,s.return),jo(s);break;case 22:s.memoizedState===null&&jo(s);break;case 30:jo(s);break;default:jo(s)}t=t.sibling}}function da(t,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,y=t,w=s,O=w.flags;switch(w.tag){case 0:case 11:case 15:da(y,w,c),_c(4,w);break;case 1:if(da(y,w,c),g=w,y=g.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(he){mn(g,g.return,he)}if(g=w,y=g.updateQueue,y!==null){var U=g.stateNode;try{var Z=y.shared.hiddenCallbacks;if(Z!==null)for(y.shared.hiddenCallbacks=null,y=0;y<Z.length;y++)im(Z[y],U)}catch(he){mn(g,g.return,he)}}c&&O&64&&gp(w),Ac(w,w.return);break;case 27:Ep(w);case 26:case 5:da(y,w,c),c&&g===null&&O&4&&pp(w),Ac(w,w.return);break;case 12:da(y,w,c);break;case 31:da(y,w,c),c&&O&4&&bp(y,w);break;case 13:da(y,w,c),c&&O&4&&Tp(y,w);break;case 22:w.memoizedState===null&&da(y,w,c),Ac(w,w.return);break;case 30:break;default:da(y,w,c)}s=s.sibling}}function e0(t,s){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&oc(c))}function t0(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&oc(t))}function Ts(t,s,c,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Sp(t,s,c,g),s=s.sibling}function Sp(t,s,c,g){var y=s.flags;switch(s.tag){case 0:case 11:case 15:Ts(t,s,c,g),y&2048&&_c(9,s);break;case 1:Ts(t,s,c,g);break;case 3:Ts(t,s,c,g),y&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&oc(t)));break;case 12:if(y&2048){Ts(t,s,c,g),t=s.stateNode;try{var w=s.memoizedProps,O=w.id,U=w.onPostCommit;typeof U=="function"&&U(O,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Z){mn(s,s.return,Z)}}else Ts(t,s,c,g);break;case 31:Ts(t,s,c,g);break;case 13:Ts(t,s,c,g);break;case 23:break;case 22:w=s.stateNode,O=s.alternate,s.memoizedState!==null?w._visibility&2?Ts(t,s,c,g):wc(t,s):w._visibility&2?Ts(t,s,c,g):(w._visibility|=2,Al(t,s,c,g,(s.subtreeFlags&10256)!==0||!1)),y&2048&&e0(O,s);break;case 24:Ts(t,s,c,g),y&2048&&t0(s.alternate,s);break;default:Ts(t,s,c,g)}}function Al(t,s,c,g,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var w=t,O=s,U=c,Z=g,he=O.flags;switch(O.tag){case 0:case 11:case 15:Al(w,O,U,Z,y),_c(8,O);break;case 23:break;case 22:var be=O.stateNode;O.memoizedState!==null?be._visibility&2?Al(w,O,U,Z,y):wc(w,O):(be._visibility|=2,Al(w,O,U,Z,y)),y&&he&2048&&e0(O.alternate,O);break;case 24:Al(w,O,U,Z,y),y&&he&2048&&t0(O.alternate,O);break;default:Al(w,O,U,Z,y)}s=s.sibling}}function wc(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=t,g=s,y=g.flags;switch(g.tag){case 22:wc(c,g),y&2048&&e0(g.alternate,g);break;case 24:wc(c,g),y&2048&&t0(g.alternate,g);break;default:wc(c,g)}s=s.sibling}}var bc=8192;function wl(t,s,c){if(t.subtreeFlags&bc)for(t=t.child;t!==null;)Ip(t,s,c),t=t.sibling}function Ip(t,s,c){switch(t.tag){case 26:wl(t,s,c),t.flags&bc&&t.memoizedState!==null&&Jb(c,bs,t.memoizedState,t.memoizedProps);break;case 5:wl(t,s,c);break;case 3:case 4:var g=bs;bs=mh(t.stateNode.containerInfo),wl(t,s,c),bs=g;break;case 22:t.memoizedState===null&&(g=t.alternate,g!==null&&g.memoizedState!==null?(g=bc,bc=16777216,wl(t,s,c),bc=g):wl(t,s,c));break;default:wl(t,s,c)}}function Np(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Tc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Ii=g,Op(g,t)}Np(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rp(t),t=t.sibling}function Rp(t){switch(t.tag){case 0:case 11:case 15:Tc(t),t.flags&2048&&qa(9,t,t.return);break;case 3:Tc(t);break;case 12:Tc(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,nh(t)):Tc(t);break;default:Tc(t)}}function nh(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Ii=g,Op(g,t)}Np(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:qa(8,s,s.return),nh(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,nh(s));break;default:nh(s)}t=t.sibling}}function Op(t,s){for(;Ii!==null;){var c=Ii;switch(c.tag){case 0:case 11:case 15:qa(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:oc(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,Ii=g;else e:for(c=t;Ii!==null;){g=Ii;var y=g.sibling,w=g.return;if(Ap(g),g===c){Ii=null;break e}if(y!==null){y.return=w,Ii=y;break e}Ii=w}}}var db={getCacheForType:function(t){var s=Ui(fi),c=s.data.get(t);return c===void 0&&(c=t(),s.data.set(t,c)),c},cacheSignal:function(){return Ui(fi).controller.signal}},gb=typeof WeakMap=="function"?WeakMap:Map,an=0,bn=null,Mt=null,jt=0,gn=0,jr=null,Ya=!1,bl=!1,n0=!1,ga=0,ei=0,Xa=0,zo=0,i0=0,zr=0,Tl=0,vc=null,Cr=null,r0=!1,ih=0,Dp=0,rh=1/0,sh=null,Ka=null,Ti=0,Wa=null,vl=null,ma=0,s0=0,a0=null,Mp=null,Cc=0,o0=null;function Hr(){return(an&2)!==0&&jt!==0?jt&-jt:me.T!==null?d0():Zn()}function Lp(){if(zr===0)if((jt&536870912)===0||Yt){var t=At;At<<=1,(At&3932160)===0&&(At=262144),zr=t}else zr=536870912;return t=Vr.current,t!==null&&(t.flags|=32),zr}function Sr(t,s,c){(t===bn&&(gn===2||gn===9)||t.cancelPendingCommit!==null)&&(Cl(t,0),Qa(t,jt,zr,!1)),xr(t,c),((an&2)===0||t!==bn)&&(t===bn&&((an&2)===0&&(zo|=c),ei===4&&Qa(t,jt,zr,!1)),ks(t))}function Pp(t,s,c){if((an&6)!==0)throw Error(o(327));var g=!c&&(s&127)===0&&(s&t.expiredLanes)===0||Nn(t,s),y=g?xb(t,s):c0(t,s,!0),w=g;do{if(y===0){bl&&!g&&Qa(t,s,0,!1);break}else{if(c=t.current.alternate,w&&!mb(c)){y=c0(t,s,!1),w=!1;continue}if(y===2){if(w=s,t.errorRecoveryDisabledLanes&w)var O=0;else O=t.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var U=t;y=vc;var Z=U.current.memoizedState.isDehydrated;if(Z&&(Cl(U,O).flags|=256),O=c0(U,O,!1),O!==2){if(n0&&!Z){U.errorRecoveryDisabledLanes|=w,zo|=w,y=4;break e}w=Cr,Cr=y,w!==null&&(Cr===null?Cr=w:Cr.push.apply(Cr,w))}y=O}if(w=!1,y!==2)continue}}if(y===1){Cl(t,0),Qa(t,s,0,!0);break}e:{switch(g=t,w=y,w){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Qa(g,s,zr,!Ya);break e;case 2:Cr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(y=ih+300-xn(),10<y)){if(Qa(g,s,zr,!Ya),sr(g,0,!0)!==0)break e;ma=s,g.timeoutHandle=f2(Bp.bind(null,g,c,Cr,sh,r0,s,zr,zo,Tl,Ya,w,"Throttled",-0,0),y);break e}Bp(g,c,Cr,sh,r0,s,zr,zo,Tl,Ya,w,null,-0,0)}}break}while(!0);ks(t)}function Bp(t,s,c,g,y,w,O,U,Z,he,be,Se,de,_e){if(t.timeoutHandle=-1,Se=s.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wi},Ip(s,w,Se);var Xe=(w&62914560)===w?ih-xn():(w&4194048)===w?Dp-xn():0;if(Xe=$b(Se,Xe),Xe!==null){ma=w,t.cancelPendingCommit=Xe(Gp.bind(null,t,s,w,c,g,y,O,U,Z,be,Se,null,de,_e)),Qa(t,w,O,!he);return}}Gp(t,s,w,c,g,y,O,U,Z)}function mb(t){for(var s=t;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var y=c[g],w=y.getSnapshot;y=y.value;try{if(!m(w(),y))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Qa(t,s,c,g){s&=~i0,s&=~zo,t.suspendedLanes|=s,t.pingedLanes&=~s,g&&(t.warmLanes|=s),g=t.expirationTimes;for(var y=s;0<y;){var w=31-it(y),O=1<<w;g[w]=-1,y&=~O}c!==0&&te(t,c,s)}function ah(){return(an&6)===0?(Sc(0),!1):!0}function l0(){if(Mt!==null){if(gn===0)var t=Mt.return;else t=Mt,ra=Mo=null,Td(t),pl=null,cc=0,t=Mt;for(;t!==null;)dp(t.alternate,t),t=t.return;Mt=null}}function Cl(t,s){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,Pb(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),ma=0,l0(),bn=t,Mt=c=na(t.current,null),jt=s,gn=0,jr=null,Ya=!1,bl=Nn(t,s),n0=!1,Tl=zr=i0=zo=Xa=ei=0,Cr=vc=null,r0=!1,(s&8)!==0&&(s|=s&32);var g=t.entangledLanes;if(g!==0)for(t=t.entanglements,g&=s;0<g;){var y=31-it(g),w=1<<y;s|=t[y],g&=~w}return ga=s,Su(),c}function kp(t,s){xt=null,me.H=xc,s===ml||s===Pu?(s=$g(),gn=3):s===fd?(s=$g(),gn=4):gn=s===Fd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,jr=s,Mt===null&&(ei=1,Wu(t,ns(s,t.current)))}function Up(){var t=Vr.current;return t===null?!0:(jt&4194048)===jt?as===null:(jt&62914560)===jt||(jt&536870912)!==0?t===as:!1}function Vp(){var t=me.H;return me.H=xc,t===null?xc:t}function Fp(){var t=me.A;return me.A=db,t}function oh(){ei=4,Ya||(jt&4194048)!==jt&&Vr.current!==null||(bl=!0),(Xa&134217727)===0&&(zo&134217727)===0||bn===null||Qa(bn,jt,zr,!1)}function c0(t,s,c){var g=an;an|=2;var y=Vp(),w=Fp();(bn!==t||jt!==s)&&(sh=null,Cl(t,s)),s=!1;var O=ei;e:do try{if(gn!==0&&Mt!==null){var U=Mt,Z=jr;switch(gn){case 8:l0(),O=6;break e;case 3:case 2:case 9:case 6:Vr.current===null&&(s=!0);var he=gn;if(gn=0,jr=null,Sl(t,U,Z,he),c&&bl){O=0;break e}break;default:he=gn,gn=0,jr=null,Sl(t,U,Z,he)}}pb(),O=ei;break}catch(be){kp(t,be)}while(!0);return s&&t.shellSuspendCounter++,ra=Mo=null,an=g,me.H=y,me.A=w,Mt===null&&(bn=null,jt=0,Su()),O}function pb(){for(;Mt!==null;)jp(Mt)}function xb(t,s){var c=an;an|=2;var g=Vp(),y=Fp();bn!==t||jt!==s?(sh=null,rh=xn()+500,Cl(t,s)):bl=Nn(t,s);e:do try{if(gn!==0&&Mt!==null){s=Mt;var w=jr;t:switch(gn){case 1:gn=0,jr=null,Sl(t,s,w,1);break;case 2:case 9:if(Zg(w)){gn=0,jr=null,zp(s);break}s=function(){gn!==2&&gn!==9||bn!==t||(gn=7),ks(t)},w.then(s,s);break e;case 3:gn=7;break e;case 4:gn=5;break e;case 7:Zg(w)?(gn=0,jr=null,zp(s)):(gn=0,jr=null,Sl(t,s,w,7));break;case 5:var O=null;switch(Mt.tag){case 26:O=Mt.memoizedState;case 5:case 27:var U=Mt;if(O?S2(O):U.stateNode.complete){gn=0,jr=null;var Z=U.sibling;if(Z!==null)Mt=Z;else{var he=U.return;he!==null?(Mt=he,lh(he)):Mt=null}break t}}gn=0,jr=null,Sl(t,s,w,5);break;case 6:gn=0,jr=null,Sl(t,s,w,6);break;case 8:l0(),ei=6;break e;default:throw Error(o(462))}}Eb();break}catch(be){kp(t,be)}while(!0);return ra=Mo=null,me.H=g,me.A=y,an=c,Mt!==null?0:(bn=null,jt=0,Su(),ei)}function Eb(){for(;Mt!==null&&!qi();)jp(Mt)}function jp(t){var s=hp(t.alternate,t,ga);t.memoizedProps=t.pendingProps,s===null?lh(t):Mt=s}function zp(t){var s=t,c=s.alternate;switch(s.tag){case 15:case 0:s=sp(c,s,s.pendingProps,s.type,void 0,jt);break;case 11:s=sp(c,s,s.pendingProps,s.type.render,s.ref,jt);break;case 5:Td(s);default:dp(c,s),s=Mt=Fg(s,ga),s=hp(c,s,ga)}t.memoizedProps=t.pendingProps,s===null?lh(t):Mt=s}function Sl(t,s,c,g){ra=Mo=null,Td(s),pl=null,cc=0;var y=s.return;try{if(ab(t,y,s,c,jt)){ei=1,Wu(t,ns(c,t.current)),Mt=null;return}}catch(w){if(y!==null)throw Mt=y,w;ei=1,Wu(t,ns(c,t.current)),Mt=null;return}s.flags&32768?(Yt||g===1?t=!0:bl||(jt&536870912)!==0?t=!1:(Ya=t=!0,(g===2||g===9||g===3||g===6)&&(g=Vr.current,g!==null&&g.tag===13&&(g.flags|=16384))),Hp(s,t)):lh(s)}function lh(t){var s=t;do{if((s.flags&32768)!==0){Hp(s,Ya);return}t=s.return;var c=cb(s.alternate,s,ga);if(c!==null){Mt=c;return}if(s=s.sibling,s!==null){Mt=s;return}Mt=s=t}while(s!==null);ei===0&&(ei=5)}function Hp(t,s){do{var c=ub(t.alternate,t);if(c!==null){c.flags&=32767,Mt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(t=t.sibling,t!==null)){Mt=t;return}Mt=t=c}while(t!==null);ei=6,Mt=null}function Gp(t,s,c,g,y,w,O,U,Z){t.cancelPendingCommit=null;do ch();while(Ti!==0);if((an&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(w=s.lanes|s.childLanes,w|=Zf,Oi(t,c,w,O,U,Z),t===bn&&(Mt=bn=null,jt=0),vl=s,Wa=t,ma=c,s0=w,a0=y,Mp=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,wb(si,function(){return Wp(),null})):(t.callbackNode=null,t.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=me.T,me.T=null,y=we.p,we.p=2,O=an,an|=4;try{hb(t,s,c)}finally{an=O,we.p=y,me.T=g}}Ti=1,qp(),Yp(),Xp()}}function qp(){if(Ti===1){Ti=0;var t=Wa,s=vl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=me.T,me.T=null;var g=we.p;we.p=2;var y=an;an|=4;try{vp(s,t);var w=A0,O=P(t.containerInfo),U=w.focusedElem,Z=w.selectionRange;if(O!==U&&U&&U.ownerDocument&&R(U.ownerDocument.documentElement,U)){if(Z!==null&&B(U)){var he=Z.start,be=Z.end;if(be===void 0&&(be=he),"selectionStart"in U)U.selectionStart=he,U.selectionEnd=Math.min(be,U.value.length);else{var Se=U.ownerDocument||document,de=Se&&Se.defaultView||window;if(de.getSelection){var _e=de.getSelection(),Xe=U.textContent.length,st=Math.min(Z.start,Xe),_n=Z.end===void 0?st:Math.min(Z.end,Xe);!_e.extend&&st>_n&&(O=_n,_n=st,st=O);var ae=v(U,st),re=v(U,_n);if(ae&&re&&(_e.rangeCount!==1||_e.anchorNode!==ae.node||_e.anchorOffset!==ae.offset||_e.focusNode!==re.node||_e.focusOffset!==re.offset)){var ue=Se.createRange();ue.setStart(ae.node,ae.offset),_e.removeAllRanges(),st>_n?(_e.addRange(ue),_e.extend(re.node,re.offset)):(ue.setEnd(re.node,re.offset),_e.addRange(ue))}}}}for(Se=[],_e=U;_e=_e.parentNode;)_e.nodeType===1&&Se.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Se.length;U++){var Te=Se[U];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Ah=!!_0,A0=_0=null}finally{an=y,we.p=g,me.T=c}}t.current=s,Ti=2}}function Yp(){if(Ti===2){Ti=0;var t=Wa,s=vl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=me.T,me.T=null;var g=we.p;we.p=2;var y=an;an|=4;try{_p(t,s.alternate,s)}finally{an=y,we.p=g,me.T=c}}Ti=3}}function Xp(){if(Ti===4||Ti===3){Ti=0,ps();var t=Wa,s=vl,c=ma,g=Mp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ti=5:(Ti=0,vl=Wa=null,Kp(t,t.pendingLanes));var y=t.pendingLanes;if(y===0&&(Ka=null),ln(c),s=s.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(Xt,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=me.T,y=we.p,we.p=2,me.T=null;try{for(var w=t.onRecoverableError,O=0;O<g.length;O++){var U=g[O];w(U.value,{componentStack:U.stack})}}finally{me.T=s,we.p=y}}(ma&3)!==0&&ch(),ks(t),y=t.pendingLanes,(c&261930)!==0&&(y&42)!==0?t===o0?Cc++:(Cc=0,o0=t):Cc=0,Sc(0)}}function Kp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,oc(s)))}function ch(){return qp(),Yp(),Xp(),Wp()}function Wp(){if(Ti!==5)return!1;var t=Wa,s=s0;s0=0;var c=ln(ma),g=me.T,y=we.p;try{we.p=32>c?32:c,me.T=null,c=a0,a0=null;var w=Wa,O=ma;if(Ti=0,vl=Wa=null,ma=0,(an&6)!==0)throw Error(o(331));var U=an;if(an|=4,Rp(w.current),Sp(w,w.current,O,c),an=U,Sc(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(Xt,w)}catch{}return!0}finally{we.p=y,me.T=g,Kp(t,s)}}function Qp(t,s,c){s=ns(c,s),s=Vd(t.stateNode,s,2),t=za(t,s,2),t!==null&&(xr(t,2),ks(t))}function mn(t,s,c){if(t.tag===3)Qp(t,t,c);else for(;s!==null;){if(s.tag===3){Qp(s,t,c);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ka===null||!Ka.has(g))){t=ns(c,t),c=Zm(2),g=za(s,c,2),g!==null&&(Jm(c,g,s,t),xr(g,2),ks(g));break}}s=s.return}}function u0(t,s,c){var g=t.pingCache;if(g===null){g=t.pingCache=new gb;var y=new Set;g.set(s,y)}else y=g.get(s),y===void 0&&(y=new Set,g.set(s,y));y.has(c)||(n0=!0,y.add(c),t=yb.bind(null,t,s,c),s.then(t,t))}function yb(t,s,c){var g=t.pingCache;g!==null&&g.delete(s),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,bn===t&&(jt&c)===c&&(ei===4||ei===3&&(jt&62914560)===jt&&300>xn()-ih?(an&2)===0&&Cl(t,0):i0|=c,Tl===jt&&(Tl=0)),ks(t)}function Zp(t,s){s===0&&(s=Hn()),t=Ro(t,s),t!==null&&(xr(t,s),ks(t))}function _b(t){var s=t.memoizedState,c=0;s!==null&&(c=s.retryLane),Zp(t,c)}function Ab(t,s){var c=0;switch(t.tag){case 31:case 13:var g=t.stateNode,y=t.memoizedState;y!==null&&(c=y.retryLane);break;case 19:g=t.stateNode;break;case 22:g=t.stateNode._retryCache;break;default:throw Error(o(314))}g!==null&&g.delete(s),Zp(t,c)}function wb(t,s){return pn(t,s)}var uh=null,Il=null,h0=!1,hh=!1,f0=!1,Za=0;function ks(t){t!==Il&&t.next===null&&(Il===null?uh=Il=t:Il=Il.next=t),hh=!0,h0||(h0=!0,Tb())}function Sc(t,s){if(!f0&&hh){f0=!0;do for(var c=!1,g=uh;g!==null;){if(t!==0){var y=g.pendingLanes;if(y===0)var w=0;else{var O=g.suspendedLanes,U=g.pingedLanes;w=(1<<31-it(42|t)+1)-1,w&=y&~(O&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,t2(g,w))}else w=jt,w=sr(g,g===bn?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||Nn(g,w)||(c=!0,t2(g,w));g=g.next}while(c);f0=!1}}function bb(){Jp()}function Jp(){hh=h0=!1;var t=0;Za!==0&&Lb()&&(t=Za);for(var s=xn(),c=null,g=uh;g!==null;){var y=g.next,w=$p(g,s);w===0?(g.next=null,c===null?uh=y:c.next=y,y===null&&(Il=c)):(c=g,(t!==0||(w&3)!==0)&&(hh=!0)),g=y}Ti!==0&&Ti!==5||Sc(t),Za!==0&&(Za=0)}function $p(t,s){for(var c=t.suspendedLanes,g=t.pingedLanes,y=t.expirationTimes,w=t.pendingLanes&-62914561;0<w;){var O=31-it(w),U=1<<O,Z=y[O];Z===-1?((U&c)===0||(U&g)!==0)&&(y[O]=Gs(U,s)):Z<=s&&(t.expiredLanes|=U),w&=~U}if(s=bn,c=jt,c=sr(t,t===s?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),g=t.callbackNode,c===0||t===s&&(gn===2||gn===9)||t.cancelPendingCommit!==null)return g!==null&&g!==null&&je(g),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||Nn(t,c)){if(s=c&-c,s===t.callbackPriority)return s;switch(g!==null&&je(g),ln(c)){case 2:case 8:c=Yr;break;case 32:c=si;break;case 268435456:c=Cs;break;default:c=si}return g=e2.bind(null,t),c=pn(c,g),t.callbackPriority=s,t.callbackNode=c,s}return g!==null&&g!==null&&je(g),t.callbackPriority=2,t.callbackNode=null,2}function e2(t,s){if(Ti!==0&&Ti!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(ch()&&t.callbackNode!==c)return null;var g=jt;return g=sr(t,t===bn?g:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),g===0?null:(Pp(t,g,s),$p(t,xn()),t.callbackNode!=null&&t.callbackNode===c?e2.bind(null,t):null)}function t2(t,s){if(ch())return null;Pp(t,s,!0)}function Tb(){Bb(function(){(an&6)!==0?pn(ui,bb):Jp()})}function d0(){if(Za===0){var t=dl;t===0&&(t=ir,ir<<=1,(ir&261888)===0&&(ir=256)),Za=t}return Za}function n2(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Rs(""+t)}function i2(t,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,t.id&&c.setAttribute("form",t.id),s.parentNode.insertBefore(c,s),t=new FormData(t),c.parentNode.removeChild(c),t}function vb(t,s,c,g,y){if(s==="submit"&&c&&c.stateNode===y){var w=n2((y[Ut]||null).action),O=g.submitter;O&&(s=(s=O[Ut]||null)?n2(s.formAction):O.getAttribute("formAction"),s!==null&&(w=s,O=null));var U=new Rn("action","action",null,g,y);t.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Za!==0){var Z=O?i2(y,O):new FormData(y);Md(c,{pending:!0,data:Z,method:y.method,action:w},null,Z)}}else typeof w=="function"&&(U.preventDefault(),Z=O?i2(y,O):new FormData(y),Md(c,{pending:!0,data:Z,method:y.method,action:w},w,Z))},currentTarget:y}]})}}for(var g0=0;g0<rc.length;g0++){var m0=rc[g0],Cb=m0.toLowerCase(),Sb=m0[0].toUpperCase()+m0.slice(1);ws(Cb,"on"+Sb)}ws(wr,"onAnimationEnd"),ws(Bi,"onAnimationIteration"),ws(hn,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(bi,"onTransitionRun"),ws(hr,"onTransitionStart"),ws(Pa,"onTransitionCancel"),ws(ta,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),$t("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$t("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$t("onBeforeInput",["compositionend","keypress","textInput","paste"]),$t("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$t("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$t("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ib=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function r2(t,s){s=(s&4)!==0;for(var c=0;c<t.length;c++){var g=t[c],y=g.event;g=g.listeners;e:{var w=void 0;if(s)for(var O=g.length-1;0<=O;O--){var U=g[O],Z=U.instance,he=U.currentTarget;if(U=U.listener,Z!==w&&y.isPropagationStopped())break e;w=U,y.currentTarget=he;try{w(y)}catch(be){Cu(be)}y.currentTarget=null,w=Z}else for(O=0;O<g.length;O++){if(U=g[O],Z=U.instance,he=U.currentTarget,U=U.listener,Z!==w&&y.isPropagationStopped())break e;w=U,y.currentTarget=he;try{w(y)}catch(be){Cu(be)}y.currentTarget=null,w=Z}}}}function Lt(t,s){var c=s[Es];c===void 0&&(c=s[Es]=new Set);var g=t+"__bubble";c.has(g)||(s2(s,t,2,!1),c.add(g))}function p0(t,s,c){var g=0;s&&(g|=4),s2(c,t,g,s)}var fh="_reactListening"+Math.random().toString(36).slice(2);function x0(t){if(!t[fh]){t[fh]=!0,Ie.forEach(function(c){c!=="selectionchange"&&(Ib.has(c)||p0(c,!1,t),p0(c,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[fh]||(s[fh]=!0,p0("selectionchange",!1,s))}}function s2(t,s,c,g){switch(L2(s)){case 2:var y=nT;break;case 8:y=iT;break;default:y=D0}c=y.bind(null,s,c,t),y=void 0,!Ys||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),g?y!==void 0?t.addEventListener(s,c,{capture:!0,passive:y}):t.addEventListener(s,c,!0):y!==void 0?t.addEventListener(s,c,{passive:y}):t.addEventListener(s,c,!1)}function E0(t,s,c,g,y){var w=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var U=g.stateNode.containerInfo;if(U===y)break;if(O===4)for(O=g.return;O!==null;){var Z=O.tag;if((Z===3||Z===4)&&O.stateNode.containerInfo===y)return;O=O.return}for(;U!==null;){if(O=Cn(U),O===null)return;if(Z=O.tag,Z===5||Z===6||Z===26||Z===27){g=w=O;continue e}U=U.parentNode}}g=g.return}Os(function(){var he=w,be=yr(c),Se=[];e:{var de=vu.get(t);if(de!==void 0){var _e=Rn,Xe=t;switch(t){case"keypress":if(Lr(c)===0)break e;case"keydown":case"keyup":_e=Zs;break;case"focusin":Xe="focus",_e=Ws;break;case"focusout":Xe="blur",_e=Ws;break;case"beforeblur":case"afterblur":_e=Ws;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Wt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Ks;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=N;break;case wr:case Bi:case hn:_e=dt;break;case ta:_e=j;break;case"scroll":case"scrollend":_e=Ra;break;case"wheel":_e=ye;break;case"copy":case"cut":case"paste":_e=Qs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Dt;break;case"toggle":case"beforetoggle":_e=ct}var st=(s&4)!==0,_n=!st&&(t==="scroll"||t==="scrollend"),ae=st?de!==null?de+"Capture":null:de;st=[];for(var re=he,ue;re!==null;){var Te=re;if(ue=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ue===null||ae===null||(Te=nt(re,ae),Te!=null&&st.push(Nc(re,Te,ue))),_n)break;re=re.return}0<st.length&&(de=new _e(de,Xe,null,c,be),Se.push({event:de,listeners:st}))}}if((s&7)===0){e:{if(de=t==="mouseover"||t==="pointerover",_e=t==="mouseout"||t==="pointerout",de&&c!==qs&&(Xe=c.relatedTarget||c.fromElement)&&(Cn(Xe)||Xe[vn]))break e;if((_e||de)&&(de=be.window===be?be:(de=be.ownerDocument)?de.defaultView||de.parentWindow:window,_e?(Xe=c.relatedTarget||c.toElement,_e=he,Xe=Xe?Cn(Xe):null,Xe!==null&&(_n=d(Xe),st=Xe.tag,Xe!==_n||st!==5&&st!==27&&st!==6)&&(Xe=null)):(_e=null,Xe=he),_e!==Xe)){if(st=Wt,Te="onMouseLeave",ae="onMouseEnter",re="mouse",(t==="pointerout"||t==="pointerover")&&(st=Dt,Te="onPointerLeave",ae="onPointerEnter",re="pointer"),_n=_e==null?de:Yi(_e),ue=Xe==null?de:Yi(Xe),de=new st(Te,re+"leave",_e,c,be),de.target=_n,de.relatedTarget=ue,Te=null,Cn(be)===he&&(st=new st(ae,re+"enter",Xe,c,be),st.target=ue,st.relatedTarget=_n,Te=st),_n=Te,_e&&Xe)t:{for(st=Nb,ae=_e,re=Xe,ue=0,Te=ae;Te;Te=st(Te))ue++;Te=0;for(var $e=re;$e;$e=st($e))Te++;for(;0<ue-Te;)ae=st(ae),ue--;for(;0<Te-ue;)re=st(re),Te--;for(;ue--;){if(ae===re||re!==null&&ae===re.alternate){st=ae;break t}ae=st(ae),re=st(re)}st=null}else st=null;_e!==null&&a2(Se,de,_e,st,!1),Xe!==null&&_n!==null&&a2(Se,_n,Xe,st,!0)}}e:{if(de=he?Yi(he):window,_e=de.nodeName&&de.nodeName.toLowerCase(),_e==="select"||_e==="input"&&de.type==="file")var nn=kr;else if(ic(de))if(Tu)nn=h;else{nn=a;var Ke=i}else _e=de.nodeName,!_e||_e.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?he&&cn(he.elementType)&&(nn=kr):nn=l;if(nn&&(nn=nn(t,he))){Br(Se,nn,c,be);break e}Ke&&Ke(t,de,he),t==="focusout"&&he&&de.type==="number"&&he.memoizedProps.value!=null&&H(de,"number",de.value)}switch(Ke=he?Yi(he):window,t){case"focusin":(ic(Ke)||Ke.contentEditable==="true")&&($=Ke,ee=he,le=null);break;case"focusout":le=ee=$=null;break;case"mousedown":Ee=!0;break;case"contextmenu":case"mouseup":case"dragend":Ee=!1,Le(Se,c,be);break;case"selectionchange":if(q)break;case"keydown":case"keyup":Le(Se,c,be)}var bt;if(qt)e:{switch(t){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else La?Js(t,c)&&(zt="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(zt="onCompositionStart");zt&&($r&&c.locale!=="ko"&&(La||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&La&&(bt=ys()):(Dr=be,Mr="value"in Dr?Dr.value:Dr.textContent,La=!0)),Ke=dh(he,zt),0<Ke.length&&(zt=new Qr(zt,t,null,c,be),Se.push({event:zt,listeners:Ke}),bt?zt.data=bt:(bt=es(c),bt!==null&&(zt.data=bt)))),(bt=cr?Ms(t,c):al(t,c))&&(zt=dh(he,"onBeforeInput"),0<zt.length&&(Ke=new Qr("onBeforeInput","beforeinput",null,c,be),Se.push({event:Ke,listeners:zt}),Ke.data=bt)),vb(Se,t,he,c,be)}r2(Se,s)})}function Nc(t,s,c){return{instance:t,listener:s,currentTarget:c}}function dh(t,s){for(var c=s+"Capture",g=[];t!==null;){var y=t,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=nt(t,c),y!=null&&g.unshift(Nc(t,y,w)),y=nt(t,s),y!=null&&g.push(Nc(t,y,w))),t.tag===3)return g;t=t.return}return[]}function Nb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function a2(t,s,c,g,y){for(var w=s._reactName,O=[];c!==null&&c!==g;){var U=c,Z=U.alternate,he=U.stateNode;if(U=U.tag,Z!==null&&Z===g)break;U!==5&&U!==26&&U!==27||he===null||(Z=he,y?(he=nt(c,w),he!=null&&O.unshift(Nc(c,he,Z))):y||(he=nt(c,w),he!=null&&O.push(Nc(c,he,Z)))),c=c.return}O.length!==0&&t.push({event:s,listeners:O})}var Rb=/\r\n?/g,Ob=/\u0000|\uFFFD/g;function o2(t){return(typeof t=="string"?t:""+t).replace(Rb,`
`).replace(Ob,"")}function l2(t,s){return s=o2(s),o2(t)===s}function yn(t,s,c,g,y,w){switch(c){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||Ki(t,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&Ki(t,""+g);break;case"className":Li(t,"class",g);break;case"tabIndex":Li(t,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Li(t,c,g);break;case"style":We(t,g,w);break;case"data":if(s!=="object"){Li(t,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||c!=="href")){t.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){t.removeAttribute(c);break}g=Rs(""+g),t.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(s!=="input"&&yn(t,s,"name",y.name,y,null),yn(t,s,"formEncType",y.formEncType,y,null),yn(t,s,"formMethod",y.formMethod,y,null),yn(t,s,"formTarget",y.formTarget,y,null)):(yn(t,s,"encType",y.encType,y,null),yn(t,s,"method",y.method,y,null),yn(t,s,"target",y.target,y,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){t.removeAttribute(c);break}g=Rs(""+g),t.setAttribute(c,g);break;case"onClick":g!=null&&(t.onclick=Wi);break;case"onScroll":g!=null&&Lt("scroll",t);break;case"onScrollEnd":g!=null&&Lt("scrollend",t);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(o(61));if(c=g.__html,c!=null){if(y.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":t.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){t.removeAttribute("xlink:href");break}c=Rs(""+g),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,""+g):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":g===!0?t.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,g):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?t.setAttribute(c,g):t.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?t.removeAttribute(c):t.setAttribute(c,g);break;case"popover":Lt("beforetoggle",t),Lt("toggle",t),Is(t,"popover",g);break;case"xlinkActuate":kn(t,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":kn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":kn(t,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":kn(t,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":kn(t,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":kn(t,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":kn(t,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":kn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":kn(t,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Is(t,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=To.get(c)||c,Is(t,c,g))}}function y0(t,s,c,g,y,w){switch(c){case"style":We(t,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(o(61));if(c=g.__html,c!=null){if(y.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof g=="string"?Ki(t,g):(typeof g=="number"||typeof g=="bigint")&&Ki(t,""+g);break;case"onScroll":g!=null&&Lt("scroll",t);break;case"onScrollEnd":g!=null&&Lt("scrollend",t);break;case"onClick":g!=null&&(t.onclick=Wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ao.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),s=c.slice(2,y?c.length-7:void 0),w=t[Ut]||null,w=w!=null?w[c]:null,typeof w=="function"&&t.removeEventListener(s,w,y),typeof g=="function")){typeof w!="function"&&w!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(s,g,y);break e}c in t?t[c]=g:g===!0?t.setAttribute(c,""):Is(t,c,g)}}}function Fi(t,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",t),Lt("load",t);var g=!1,y=!1,w;for(w in c)if(c.hasOwnProperty(w)){var O=c[w];if(O!=null)switch(w){case"src":g=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:yn(t,s,w,O,c,null)}}y&&yn(t,s,"srcSet",c.srcSet,c,null),g&&yn(t,s,"src",c.src,c,null);return;case"input":Lt("invalid",t);var U=w=O=y=null,Z=null,he=null;for(g in c)if(c.hasOwnProperty(g)){var be=c[g];if(be!=null)switch(g){case"name":y=be;break;case"type":O=be;break;case"checked":Z=be;break;case"defaultChecked":he=be;break;case"value":w=be;break;case"defaultValue":U=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(o(137,s));break;default:yn(t,s,g,be,c,null)}}ce(t,w,U,Z,he,O,y,!1);return;case"select":Lt("invalid",t),g=O=w=null;for(y in c)if(c.hasOwnProperty(y)&&(U=c[y],U!=null))switch(y){case"value":w=U;break;case"defaultValue":O=U;break;case"multiple":g=U;default:yn(t,s,y,U,c,null)}s=w,c=O,t.multiple=!!g,s!=null?Ye(t,!!g,s,!1):c!=null&&Ye(t,!!g,c,!0);return;case"textarea":Lt("invalid",t),w=y=g=null;for(O in c)if(c.hasOwnProperty(O)&&(U=c[O],U!=null))switch(O){case"value":g=U;break;case"defaultValue":y=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(o(91));break;default:yn(t,s,O,U,c,null)}ai(t,g,y,w);return;case"option":for(Z in c)if(c.hasOwnProperty(Z)&&(g=c[Z],g!=null))switch(Z){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:yn(t,s,Z,g,c,null)}return;case"dialog":Lt("beforetoggle",t),Lt("toggle",t),Lt("cancel",t),Lt("close",t);break;case"iframe":case"object":Lt("load",t);break;case"video":case"audio":for(g=0;g<Ic.length;g++)Lt(Ic[g],t);break;case"image":Lt("error",t),Lt("load",t);break;case"details":Lt("toggle",t);break;case"embed":case"source":case"link":Lt("error",t),Lt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in c)if(c.hasOwnProperty(he)&&(g=c[he],g!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:yn(t,s,he,g,c,null)}return;default:if(cn(s)){for(be in c)c.hasOwnProperty(be)&&(g=c[be],g!==void 0&&y0(t,s,be,g,c,void 0));return}}for(U in c)c.hasOwnProperty(U)&&(g=c[U],g!=null&&yn(t,s,U,g,c,null))}function Db(t,s,c,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,O=null,U=null,Z=null,he=null,be=null;for(_e in c){var Se=c[_e];if(c.hasOwnProperty(_e)&&Se!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":Z=Se;default:g.hasOwnProperty(_e)||yn(t,s,_e,null,g,Se)}}for(var de in g){var _e=g[de];if(Se=c[de],g.hasOwnProperty(de)&&(_e!=null||Se!=null))switch(de){case"type":w=_e;break;case"name":y=_e;break;case"checked":he=_e;break;case"defaultChecked":be=_e;break;case"value":O=_e;break;case"defaultValue":U=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(o(137,s));break;default:_e!==Se&&yn(t,s,de,_e,g,Se)}}Gn(t,O,U,Z,he,be,w,y);return;case"select":_e=O=U=de=null;for(w in c)if(Z=c[w],c.hasOwnProperty(w)&&Z!=null)switch(w){case"value":break;case"multiple":_e=Z;default:g.hasOwnProperty(w)||yn(t,s,w,null,g,Z)}for(y in g)if(w=g[y],Z=c[y],g.hasOwnProperty(y)&&(w!=null||Z!=null))switch(y){case"value":de=w;break;case"defaultValue":U=w;break;case"multiple":O=w;default:w!==Z&&yn(t,s,y,w,g,Z)}s=U,c=O,g=_e,de!=null?Ye(t,!!c,de,!1):!!g!=!!c&&(s!=null?Ye(t,!!c,s,!0):Ye(t,!!c,c?[]:"",!1));return;case"textarea":_e=de=null;for(U in c)if(y=c[U],c.hasOwnProperty(U)&&y!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:yn(t,s,U,null,g,y)}for(O in g)if(y=g[O],w=c[O],g.hasOwnProperty(O)&&(y!=null||w!=null))switch(O){case"value":de=y;break;case"defaultValue":_e=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==w&&yn(t,s,O,y,g,w)}qn(t,de,_e);return;case"option":for(var Xe in c)if(de=c[Xe],c.hasOwnProperty(Xe)&&de!=null&&!g.hasOwnProperty(Xe))switch(Xe){case"selected":t.selected=!1;break;default:yn(t,s,Xe,null,g,de)}for(Z in g)if(de=g[Z],_e=c[Z],g.hasOwnProperty(Z)&&de!==_e&&(de!=null||_e!=null))switch(Z){case"selected":t.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:yn(t,s,Z,de,g,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in c)de=c[st],c.hasOwnProperty(st)&&de!=null&&!g.hasOwnProperty(st)&&yn(t,s,st,null,g,de);for(he in g)if(de=g[he],_e=c[he],g.hasOwnProperty(he)&&de!==_e&&(de!=null||_e!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(o(137,s));break;default:yn(t,s,he,de,g,_e)}return;default:if(cn(s)){for(var _n in c)de=c[_n],c.hasOwnProperty(_n)&&de!==void 0&&!g.hasOwnProperty(_n)&&y0(t,s,_n,void 0,g,de);for(be in g)de=g[be],_e=c[be],!g.hasOwnProperty(be)||de===_e||de===void 0&&_e===void 0||y0(t,s,be,de,g,_e);return}}for(var ae in c)de=c[ae],c.hasOwnProperty(ae)&&de!=null&&!g.hasOwnProperty(ae)&&yn(t,s,ae,null,g,de);for(Se in g)de=g[Se],_e=c[Se],!g.hasOwnProperty(Se)||de===_e||de==null&&_e==null||yn(t,s,Se,de,g,_e)}function c2(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Mb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,c=performance.getEntriesByType("resource"),g=0;g<c.length;g++){var y=c[g],w=y.transferSize,O=y.initiatorType,U=y.duration;if(w&&U&&c2(O)){for(O=0,U=y.responseEnd,g+=1;g<c.length;g++){var Z=c[g],he=Z.startTime;if(he>U)break;var be=Z.transferSize,Se=Z.initiatorType;be&&c2(Se)&&(Z=Z.responseEnd,O+=be*(Z<U?1:(U-he)/(Z-he)))}if(--g,s+=8*(w+O)/(y.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var _0=null,A0=null;function gh(t){return t.nodeType===9?t:t.ownerDocument}function u2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h2(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function w0(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var b0=null;function Lb(){var t=window.event;return t&&t.type==="popstate"?t===b0?!1:(b0=t,!0):(b0=null,!1)}var f2=typeof setTimeout=="function"?setTimeout:void 0,Pb=typeof clearTimeout=="function"?clearTimeout:void 0,d2=typeof Promise=="function"?Promise:void 0,Bb=typeof queueMicrotask=="function"?queueMicrotask:typeof d2<"u"?function(t){return d2.resolve(null).then(t).catch(kb)}:f2;function kb(t){setTimeout(function(){throw t})}function Ja(t){return t==="head"}function g2(t,s){var c=s,g=0;do{var y=c.nextSibling;if(t.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(g===0){t.removeChild(y),Dl(s);return}g--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")g++;else if(c==="html")Rc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Rc(c);for(var w=c.firstChild;w;){var O=w.nextSibling,U=w.nodeName;w[Xr]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=O}}else c==="body"&&Rc(t.ownerDocument.body);c=y}while(c);Dl(s)}function m2(t,s){var c=t;t=0;do{var g=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=g}while(c)}function T0(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":T0(c),Di(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function Ub(t,s,c,g){for(;t.nodeType===1;){var y=c;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(g){if(!t[Xr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(w=t.getAttribute("rel"),w==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(w!==y.rel||t.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||t.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||t.getAttribute("title")!==(y.title==null?null:y.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(w=t.getAttribute("src"),(w!==(y.src==null?null:y.src)||t.getAttribute("type")!==(y.type==null?null:y.type)||t.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&t.getAttribute("name")===w)return t}else return t;if(t=os(t.nextSibling),t===null)break}return null}function Vb(t,s,c){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=os(t.nextSibling),t===null))return null;return t}function p2(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=os(t.nextSibling),t===null))return null;return t}function v0(t){return t.data==="$?"||t.data==="$~"}function C0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Fb(t,s){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||c.readyState!=="loading")s();else{var g=function(){s(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),t._reactRetry=g}}function os(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var S0=null;function x2(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(s===0)return os(t.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}t=t.nextSibling}return null}function E2(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return t;s--}else c!=="/$"&&c!=="/&"||s++}t=t.previousSibling}return null}function y2(t,s,c){switch(s=gh(c),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Rc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Di(t)}var ls=new Map,_2=new Set;function mh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var pa=we.d;we.d={f:jb,r:zb,D:Hb,C:Gb,L:qb,m:Yb,X:Kb,S:Xb,M:Wb};function jb(){var t=pa.f(),s=ah();return t||s}function zb(t){var s=Rt(t);s!==null&&s.tag===5&&s.type==="form"?km(s):pa.r(t)}var Nl=typeof document>"u"?null:document;function A2(t,s,c){var g=Nl;if(g&&typeof s=="string"&&s){var y=wt(s);y='link[rel="'+t+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),_2.has(y)||(_2.add(y),t={rel:t,crossOrigin:c,href:s},g.querySelector(y)===null&&(s=g.createElement("link"),Fi(s,"link",t),Bn(s),g.head.appendChild(s)))}}function Hb(t){pa.D(t),A2("dns-prefetch",t,null)}function Gb(t,s){pa.C(t,s),A2("preconnect",t,s)}function qb(t,s,c){pa.L(t,s,c);var g=Nl;if(g&&t&&s){var y='link[rel="preload"][as="'+wt(s)+'"]';s==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+wt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+wt(c.imageSizes)+'"]')):y+='[href="'+wt(t)+'"]';var w=y;switch(s){case"style":w=Rl(t);break;case"script":w=Ol(t)}ls.has(w)||(t=I({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:t,as:s},c),ls.set(w,t),g.querySelector(y)!==null||s==="style"&&g.querySelector(Oc(w))||s==="script"&&g.querySelector(Dc(w))||(s=g.createElement("link"),Fi(s,"link",t),Bn(s),g.head.appendChild(s)))}}function Yb(t,s){pa.m(t,s);var c=Nl;if(c&&t){var g=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+wt(g)+'"][href="'+wt(t)+'"]',w=y;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ol(t)}if(!ls.has(w)&&(t=I({rel:"modulepreload",href:t},s),ls.set(w,t),c.querySelector(y)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Dc(w)))return}g=c.createElement("link"),Fi(g,"link",t),Bn(g),c.head.appendChild(g)}}}function Xb(t,s,c){pa.S(t,s,c);var g=Nl;if(g&&t){var y=wi(g).hoistableStyles,w=Rl(t);s=s||"default";var O=y.get(w);if(!O){var U={loading:0,preload:null};if(O=g.querySelector(Oc(w)))U.loading=5;else{t=I({rel:"stylesheet",href:t,"data-precedence":s},c),(c=ls.get(w))&&I0(t,c);var Z=O=g.createElement("link");Bn(Z),Fi(Z,"link",t),Z._p=new Promise(function(he,be){Z.onload=he,Z.onerror=be}),Z.addEventListener("load",function(){U.loading|=1}),Z.addEventListener("error",function(){U.loading|=2}),U.loading|=4,ph(O,s,g)}O={type:"stylesheet",instance:O,count:1,state:U},y.set(w,O)}}}function Kb(t,s){pa.X(t,s);var c=Nl;if(c&&t){var g=wi(c).hoistableScripts,y=Ol(t),w=g.get(y);w||(w=c.querySelector(Dc(y)),w||(t=I({src:t,async:!0},s),(s=ls.get(y))&&N0(t,s),w=c.createElement("script"),Bn(w),Fi(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(y,w))}}function Wb(t,s){pa.M(t,s);var c=Nl;if(c&&t){var g=wi(c).hoistableScripts,y=Ol(t),w=g.get(y);w||(w=c.querySelector(Dc(y)),w||(t=I({src:t,async:!0,type:"module"},s),(s=ls.get(y))&&N0(t,s),w=c.createElement("script"),Bn(w),Fi(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(y,w))}}function w2(t,s,c,g){var y=(y=Oe.current)?mh(y):null;if(!y)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Rl(c.href),c=wi(y).hoistableStyles,g=c.get(s),g||(g={type:"style",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Rl(c.href);var w=wi(y).hoistableStyles,O=w.get(t);if(O||(y=y.ownerDocument||y,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(t,O),(w=y.querySelector(Oc(t)))&&!w._p&&(O.instance=w,O.state.loading=5),ls.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ls.set(t,c),w||Qb(y,t,c,O.state))),s&&g===null)throw Error(o(528,""));return O}if(s&&g!==null)throw Error(o(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ol(c),c=wi(y).hoistableScripts,g=c.get(s),g||(g={type:"script",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Rl(t){return'href="'+wt(t)+'"'}function Oc(t){return'link[rel="stylesheet"]['+t+"]"}function b2(t){return I({},t,{"data-precedence":t.precedence,precedence:null})}function Qb(t,s,c,g){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=t.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),Fi(s,"link",c),Bn(s),t.head.appendChild(s))}function Ol(t){return'[src="'+wt(t)+'"]'}function Dc(t){return"script[async]"+t}function T2(t,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var g=t.querySelector('style[data-href~="'+wt(c.href)+'"]');if(g)return s.instance=g,Bn(g),g;var y=I({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(t.ownerDocument||t).createElement("style"),Bn(g),Fi(g,"style",y),ph(g,c.precedence,t),s.instance=g;case"stylesheet":y=Rl(c.href);var w=t.querySelector(Oc(y));if(w)return s.state.loading|=4,s.instance=w,Bn(w),w;g=b2(c),(y=ls.get(y))&&I0(g,y),w=(t.ownerDocument||t).createElement("link"),Bn(w);var O=w;return O._p=new Promise(function(U,Z){O.onload=U,O.onerror=Z}),Fi(w,"link",g),s.state.loading|=4,ph(w,c.precedence,t),s.instance=w;case"script":return w=Ol(c.src),(y=t.querySelector(Dc(w)))?(s.instance=y,Bn(y),y):(g=c,(y=ls.get(w))&&(g=I({},c),N0(g,y)),t=t.ownerDocument||t,y=t.createElement("script"),Bn(y),Fi(y,"link",g),t.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,ph(g,c.precedence,t));return s.instance}function ph(t,s,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=g.length?g[g.length-1]:null,w=y,O=0;O<g.length;O++){var U=g[O];if(U.dataset.precedence===s)w=U;else if(w!==y)break}w?w.parentNode.insertBefore(t,w.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(t,s.firstChild))}function I0(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function N0(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var xh=null;function v2(t,s,c){if(xh===null){var g=new Map,y=xh=new Map;y.set(c,g)}else y=xh,g=y.get(c),g||(g=new Map,y.set(c,g));if(g.has(t))return g;for(g.set(t,null),c=c.getElementsByTagName(t),y=0;y<c.length;y++){var w=c[y];if(!(w[Xr]||w[en]||t==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(s)||"";O=t+O;var U=g.get(O);U?U.push(w):g.set(O,[w])}}return g}function C2(t,s,c){t=t.ownerDocument||t,t.head.insertBefore(c,s==="title"?t.querySelector("head > title"):null)}function Zb(t,s,c){if(c===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function S2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Jb(t,s,c,g){if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=Rl(g.href),w=s.querySelector(Oc(y));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Eh.bind(t),s.then(t,t)),c.state.loading|=4,c.instance=w,Bn(w);return}w=s.ownerDocument||s,g=b2(g),(y=ls.get(y))&&I0(g,y),w=w.createElement("link"),Bn(w);var O=w;O._p=new Promise(function(U,Z){O.onload=U,O.onerror=Z}),Fi(w,"link",g),c.instance=w}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=Eh.bind(t),s.addEventListener("load",c),s.addEventListener("error",c))}}var R0=0;function $b(t,s){return t.stylesheets&&t.count===0&&_h(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var g=setTimeout(function(){if(t.stylesheets&&_h(t,t.stylesheets),t.unsuspend){var w=t.unsuspend;t.unsuspend=null,w()}},6e4+s);0<t.imgBytes&&R0===0&&(R0=62500*Mb());var y=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&_h(t,t.stylesheets),t.unsuspend)){var w=t.unsuspend;t.unsuspend=null,w()}},(t.imgBytes>R0?50:800)+s);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(g),clearTimeout(y)}}:null}function Eh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_h(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var yh=null;function _h(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,yh=new Map,s.forEach(eT,t),yh=null,Eh.call(t))}function eT(t,s){if(!(s.state.loading&4)){var c=yh.get(t);if(c)var g=c.get(null);else{c=new Map,yh.set(t,c);for(var y=t.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var O=y[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),g=O)}g&&c.set(null,g)}y=s.instance,O=y.getAttribute("data-precedence"),w=c.get(O)||g,w===g&&c.set(null,y),c.set(O,y),this.count++,g=Eh.bind(this),y.addEventListener("load",g),y.addEventListener("error",g),w?w.parentNode.insertBefore(y,w.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(y,t.firstChild)),s.state.loading|=4}}var Mc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:qe,_currentValue2:qe,_threadCount:0};function tT(t,s,c,g,y,w,O,U,Z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=g,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function I2(t,s,c,g,y,w,O,U,Z,he,be,Se){return t=new tT(t,s,c,O,Z,he,be,Se,U),s=1,w===!0&&(s|=24),w=Ur(3,null,null,s),t.current=w,w.stateNode=t,s=cd(),s.refCount++,t.pooledCache=s,s.refCount++,w.memoizedState={element:g,isDehydrated:c,cache:s},dd(w),t}function N2(t){return t?(t=ll,t):ll}function R2(t,s,c,g,y,w){y=N2(y),g.context===null?g.context=y:g.pendingContext=y,g=ja(s),g.payload={element:c},w=w===void 0?null:w,w!==null&&(g.callback=w),c=za(t,g,s),c!==null&&(Sr(c,t,s),hc(c,t,s))}function O2(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<s?c:s}}function O0(t,s){O2(t,s),(t=t.alternate)&&O2(t,s)}function D2(t){if(t.tag===13||t.tag===31){var s=Ro(t,67108864);s!==null&&Sr(s,t,67108864),O0(t,67108864)}}function M2(t){if(t.tag===13||t.tag===31){var s=Hr();s=sn(s);var c=Ro(t,s);c!==null&&Sr(c,t,s),O0(t,s)}}var Ah=!0;function nT(t,s,c,g){var y=me.T;me.T=null;var w=we.p;try{we.p=2,D0(t,s,c,g)}finally{we.p=w,me.T=y}}function iT(t,s,c,g){var y=me.T;me.T=null;var w=we.p;try{we.p=8,D0(t,s,c,g)}finally{we.p=w,me.T=y}}function D0(t,s,c,g){if(Ah){var y=M0(g);if(y===null)E0(t,s,g,wh,c),P2(t,g);else if(sT(y,t,s,c,g))g.stopPropagation();else if(P2(t,g),s&4&&-1<rT.indexOf(t)){for(;y!==null;){var w=Rt(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=rr(w.pendingLanes);if(O!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;O;){var Z=1<<31-it(O);U.entanglements[1]|=Z,O&=~Z}ks(w),(an&6)===0&&(rh=xn()+500,Sc(0))}}break;case 31:case 13:U=Ro(w,2),U!==null&&Sr(U,w,2),ah(),O0(w,2)}if(w=M0(g),w===null&&E0(t,s,g,wh,c),w===y)break;y=w}y!==null&&g.stopPropagation()}else E0(t,s,g,null,c)}}function M0(t){return t=yr(t),L0(t)}var wh=null;function L0(t){if(wh=null,t=Cn(t),t!==null){var s=d(t);if(s===null)t=null;else{var c=s.tag;if(c===13){if(t=E(s),t!==null)return t;t=null}else if(c===31){if(t=T(s),t!==null)return t;t=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return wh=t,null}function L2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mr()){case ui:return 2;case Yr:return 8;case si:case Qn:return 32;case Cs:return 268435456;default:return 32}default:return 32}}var P0=!1,$a=null,eo=null,to=null,Lc=new Map,Pc=new Map,no=[],rT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P2(t,s){switch(t){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Lc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Bc(t,s,c,g,y,w){return t===null||t.nativeEvent!==w?(t={blockedOn:s,domEventName:c,eventSystemFlags:g,nativeEvent:w,targetContainers:[y]},s!==null&&(s=Rt(s),s!==null&&D2(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),t)}function sT(t,s,c,g,y){switch(s){case"focusin":return $a=Bc($a,t,s,c,g,y),!0;case"dragenter":return eo=Bc(eo,t,s,c,g,y),!0;case"mouseover":return to=Bc(to,t,s,c,g,y),!0;case"pointerover":var w=y.pointerId;return Lc.set(w,Bc(Lc.get(w)||null,t,s,c,g,y)),!0;case"gotpointercapture":return w=y.pointerId,Pc.set(w,Bc(Pc.get(w)||null,t,s,c,g,y)),!0}return!1}function B2(t){var s=Cn(t.target);if(s!==null){var c=d(s);if(c!==null){if(s=c.tag,s===13){if(s=E(c),s!==null){t.blockedOn=s,Ve(t.priority,function(){M2(c)});return}}else if(s===31){if(s=T(c),s!==null){t.blockedOn=s,Ve(t.priority,function(){M2(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var c=M0(t.nativeEvent);if(c===null){c=t.nativeEvent;var g=new c.constructor(c.type,c);qs=g,c.target.dispatchEvent(g),qs=null}else return s=Rt(c),s!==null&&D2(s),t.blockedOn=c,!1;s.shift()}return!0}function k2(t,s,c){bh(t)&&c.delete(s)}function aT(){P0=!1,$a!==null&&bh($a)&&($a=null),eo!==null&&bh(eo)&&(eo=null),to!==null&&bh(to)&&(to=null),Lc.forEach(k2),Pc.forEach(k2)}function Th(t,s){t.blockedOn===s&&(t.blockedOn=null,P0||(P0=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,aT)))}var vh=null;function U2(t){vh!==t&&(vh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){vh===t&&(vh=null);for(var s=0;s<t.length;s+=3){var c=t[s],g=t[s+1],y=t[s+2];if(typeof g!="function"){if(L0(g||c)===null)continue;break}var w=Rt(c);w!==null&&(t.splice(s,3),s-=3,Md(w,{pending:!0,data:y,method:c.method,action:g},g,y))}}))}function Dl(t){function s(Z){return Th(Z,t)}$a!==null&&Th($a,t),eo!==null&&Th(eo,t),to!==null&&Th(to,t),Lc.forEach(s),Pc.forEach(s);for(var c=0;c<no.length;c++){var g=no[c];g.blockedOn===t&&(g.blockedOn=null)}for(;0<no.length&&(c=no[0],c.blockedOn===null);)B2(c),c.blockedOn===null&&no.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var y=c[g],w=c[g+1],O=y[Ut]||null;if(typeof w=="function")O||U2(c);else if(O){var U=null;if(w&&w.hasAttribute("formAction")){if(y=w,O=w[Ut]||null)U=O.formAction;else if(L0(y)!==null)continue}else U=O.action;typeof U=="function"?c[g+1]=U:(c.splice(g,3),g-=3),U2(c)}}}function V2(){function t(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(O){return y=O})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),g||setTimeout(c,20)}function c(){if(!g&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,y=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){g=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function B0(t){this._internalRoot=t}Ch.prototype.render=B0.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var c=s.current,g=Hr();R2(c,g,t,s,null,null)},Ch.prototype.unmount=B0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;R2(t.current,2,null,t,null,null),ah(),s[vn]=null}};function Ch(t){this._internalRoot=t}Ch.prototype.unstable_scheduleHydration=function(t){if(t){var s=Zn();t={blockedOn:null,target:t,priority:s};for(var c=0;c<no.length&&s!==0&&s<no[c].priority;c++);no.splice(c,0,t),c===0&&B2(t)}};var F2=e.version;if(F2!=="19.2.3")throw Error(o(527,F2,"19.2.3"));we.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=_(s),t=t!==null?C(t):null,t=t===null?null:t.stateNode,t};var oT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:me,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{Xt=Sh.inject(oT),De=Sh}catch{}}return Uc.createRoot=function(t,s){if(!u(t))throw Error(o(299));var c=!1,g="",y=Xm,w=Km,O=Wm;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError)),s=I2(t,1,!1,null,null,c,g,null,y,w,O,V2),t[vn]=s.current,x0(t),new B0(s)},Uc.hydrateRoot=function(t,s,c){if(!u(t))throw Error(o(299));var g=!1,y="",w=Xm,O=Km,U=Wm,Z=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(U=c.onRecoverableError),c.formState!==void 0&&(Z=c.formState)),s=I2(t,1,!0,s,c??null,g,y,Z,w,O,U,V2),s.context=N2(null),c=s.current,g=Hr(),g=sn(g),y=ja(g),y.callback=null,za(c,y,g),c=g,s.current.lanes=c,xr(s,c),ks(s),t[vn]=s.current,x0(t),new Ch(s)},Uc.version="19.2.3",Uc}var Q2;function ET(){if(Q2)return V0.exports;Q2=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),V0.exports=xT(),V0.exports}var yT=ET();const _T=z1(yT);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Z2="popstate";function AT(r={}){function e(u,d){let{pathname:E="/",search:T="",hash:b=""}=$o(u.location.hash.substring(1));return!E.startsWith("/")&&!E.startsWith(".")&&(E="/"+E),s1("",{pathname:E,search:T,hash:b},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function n(u,d){let E=u.document.querySelector("base"),T="";if(E&&E.getAttribute("href")){let b=u.location.href,_=b.indexOf("#");T=_===-1?b:b.slice(0,_)}return T+"#"+(typeof d=="string"?d:nu(d))}function o(u,d){hs(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return bT(e,n,o,r)}function Kn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function hs(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wT(){return Math.random().toString(36).substring(2,10)}function J2(r,e){return{usr:r.state,key:r.key,idx:e}}function s1(r,e,n=null,o){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?$o(e):e,state:n,key:e&&e.key||o||wT()}}function nu({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function $o(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let o=r.indexOf("?");o>=0&&(e.search=r.substring(o),r=r.substring(0,o)),r&&(e.pathname=r)}return e}function bT(r,e,n,o={}){let{window:u=document.defaultView,v5Compat:d=!1}=o,E=u.history,T="POP",b=null,_=C();_==null&&(_=0,E.replaceState({...E.state,idx:_},""));function C(){return(E.state||{idx:null}).idx}function I(){T="POP";let z=C(),xe=z==null?null:z-_;_=z,b&&b({action:T,location:K.location,delta:xe})}function M(z,xe){T="PUSH";let ge=s1(K.location,z,xe);n&&n(ge,z),_=C()+1;let Q=J2(ge,_),ve=K.createHref(ge);try{E.pushState(Q,"",ve)}catch(Fe){if(Fe instanceof DOMException&&Fe.name==="DataCloneError")throw Fe;u.location.assign(ve)}d&&b&&b({action:T,location:K.location,delta:1})}function k(z,xe){T="REPLACE";let ge=s1(K.location,z,xe);n&&n(ge,z),_=C();let Q=J2(ge,_),ve=K.createHref(ge);E.replaceState(Q,"",ve),d&&b&&b({action:T,location:K.location,delta:0})}function X(z){return TT(z)}let K={get action(){return T},get location(){return r(u,E)},listen(z){if(b)throw new Error("A history only accepts one active listener");return u.addEventListener(Z2,I),b=z,()=>{u.removeEventListener(Z2,I),b=null}},createHref(z){return e(u,z)},createURL:X,encodeLocation(z){let xe=X(z);return{pathname:xe.pathname,search:xe.search,hash:xe.hash}},push:M,replace:k,go(z){return E.go(z)}};return K}function TT(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Kn(n,"No window.location.(origin|href) available to create URL");let o=typeof r=="string"?r:nu(r);return o=o.replace(/ $/,"%20"),!e&&o.startsWith("//")&&(o=n+o),new URL(o,n)}function Hy(r,e,n="/"){return vT(r,e,n,!1)}function vT(r,e,n,o){let u=typeof e=="string"?$o(e):e,d=_a(u.pathname||"/",n);if(d==null)return null;let E=Gy(r);CT(E);let T=null;for(let b=0;T==null&&b<E.length;++b){let _=kT(d);T=PT(E[b],_,o)}return T}function Gy(r,e=[],n=[],o="",u=!1){let d=(E,T,b=u,_)=>{let C={relativePath:_===void 0?E.path||"":_,caseSensitive:E.caseSensitive===!0,childrenIndex:T,route:E};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(o)&&b)return;Kn(C.relativePath.startsWith(o),`Absolute route path "${C.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(o.length)}let I=Ea([o,C.relativePath]),M=n.concat(C);E.children&&E.children.length>0&&(Kn(E.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),Gy(E.children,e,M,I,b)),!(E.path==null&&!E.index)&&e.push({path:I,score:MT(I,E.index),routesMeta:M})};return r.forEach((E,T)=>{var b;if(E.path===""||!((b=E.path)!=null&&b.includes("?")))d(E,T);else for(let _ of qy(E.path))d(E,T,!0,_)}),e}function qy(r){let e=r.split("/");if(e.length===0)return[];let[n,...o]=e,u=n.endsWith("?"),d=n.replace(/\?$/,"");if(o.length===0)return u?[d,""]:[d];let E=qy(o.join("/")),T=[];return T.push(...E.map(b=>b===""?d:[d,b].join("/"))),u&&T.push(...E),T.map(b=>r.startsWith("/")&&b===""?"/":b)}function CT(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:LT(e.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}var ST=/^:[\w-]+$/,IT=3,NT=2,RT=1,OT=10,DT=-2,$2=r=>r==="*";function MT(r,e){let n=r.split("/"),o=n.length;return n.some($2)&&(o+=DT),e&&(o+=NT),n.filter(u=>!$2(u)).reduce((u,d)=>u+(ST.test(d)?IT:d===""?RT:OT),o)}function LT(r,e){return r.length===e.length&&r.slice(0,-1).every((o,u)=>o===e[u])?r[r.length-1]-e[e.length-1]:0}function PT(r,e,n=!1){let{routesMeta:o}=r,u={},d="/",E=[];for(let T=0;T<o.length;++T){let b=o[T],_=T===o.length-1,C=d==="/"?e:e.slice(d.length)||"/",I=Qh({path:b.relativePath,caseSensitive:b.caseSensitive,end:_},C),M=b.route;if(!I&&_&&n&&!o[o.length-1].route.index&&(I=Qh({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},C)),!I)return null;Object.assign(u,I.params),E.push({params:u,pathname:Ea([d,I.pathname]),pathnameBase:jT(Ea([d,I.pathnameBase])),route:M}),I.pathnameBase!=="/"&&(d=Ea([d,I.pathnameBase]))}return E}function Qh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,o]=BT(r.path,r.caseSensitive,r.end),u=e.match(n);if(!u)return null;let d=u[0],E=d.replace(/(.)\/+$/,"$1"),T=u.slice(1);return{params:o.reduce((_,{paramName:C,isOptional:I},M)=>{if(C==="*"){let X=T[M]||"";E=d.slice(0,d.length-X.length).replace(/(.)\/+$/,"$1")}const k=T[M];return I&&!k?_[C]=void 0:_[C]=(k||"").replace(/%2F/g,"/"),_},{}),pathname:d,pathnameBase:E,pattern:r}}function BT(r,e=!1,n=!0){hs(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let o=[],u="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(E,T,b)=>(o.push({paramName:T,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(o.push({paramName:"*"}),u+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":r!==""&&r!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),o]}function kT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hs(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function _a(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,o=r.charAt(n);return o&&o!=="/"?null:r.slice(n)||"/"}var Yy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UT=r=>Yy.test(r);function VT(r,e="/"){let{pathname:n,search:o="",hash:u=""}=typeof r=="string"?$o(r):r,d;if(n)if(UT(n))d=n;else{if(n.includes("//")){let E=n;n=n.replace(/\/\/+/g,"/"),hs(!1,`Pathnames cannot have embedded double slashes - normalizing ${E} -> ${n}`)}n.startsWith("/")?d=ex(n.substring(1),"/"):d=ex(n,e)}else d=e;return{pathname:d,search:zT(o),hash:HT(u)}}function ex(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function H0(r,e,n,o){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FT(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xy(r){let e=FT(r);return e.map((n,o)=>o===e.length-1?n.pathname:n.pathnameBase)}function Ky(r,e,n,o=!1){let u;typeof r=="string"?u=$o(r):(u={...r},Kn(!u.pathname||!u.pathname.includes("?"),H0("?","pathname","search",u)),Kn(!u.pathname||!u.pathname.includes("#"),H0("#","pathname","hash",u)),Kn(!u.search||!u.search.includes("#"),H0("#","search","hash",u)));let d=r===""||u.pathname==="",E=d?"/":u.pathname,T;if(E==null)T=n;else{let I=e.length-1;if(!o&&E.startsWith("..")){let M=E.split("/");for(;M[0]==="..";)M.shift(),I-=1;u.pathname=M.join("/")}T=I>=0?e[I]:"/"}let b=VT(u,T),_=E&&E!=="/"&&E.endsWith("/"),C=(d||E===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(_||C)&&(b.pathname+="/"),b}var Ea=r=>r.join("/").replace(/\/\/+/g,"/"),jT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),zT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,HT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,GT=class{constructor(r,e,n,o=!1){this.status=r,this.statusText=e||"",this.internal=o,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function qT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function YT(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Wy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qy(r,e){let n=r;if(typeof n!="string"||!Yy.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let o=n,u=!1;if(Wy)try{let d=new URL(window.location.href),E=n.startsWith("//")?new URL(d.protocol+n):new URL(n),T=_a(E.pathname,e);E.origin===d.origin&&T!=null?n=T+E.search+E.hash:u=!0}catch{hs(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Zy=["POST","PUT","PATCH","DELETE"];new Set(Zy);var XT=["GET",...Zy];new Set(XT);var Zl=se.createContext(null);Zl.displayName="DataRouter";var vf=se.createContext(null);vf.displayName="DataRouterState";var KT=se.createContext(!1),Jy=se.createContext({isTransitioning:!1});Jy.displayName="ViewTransition";var WT=se.createContext(new Map);WT.displayName="Fetchers";var QT=se.createContext(null);QT.displayName="Await";var gs=se.createContext(null);gs.displayName="Navigation";var hu=se.createContext(null);hu.displayName="Location";var va=se.createContext({outlet:null,matches:[],isDataRoute:!1});va.displayName="Route";var G1=se.createContext(null);G1.displayName="RouteError";var $y="REACT_ROUTER_ERROR",ZT="REDIRECT",JT="ROUTE_ERROR_RESPONSE";function $T(r){if(r.startsWith(`${$y}:${ZT}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function e3(r){if(r.startsWith(`${$y}:${JT}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new GT(e.status,e.statusText,e.data)}catch{}}function t3(r,{relative:e}={}){Kn(fu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=se.useContext(gs),{hash:u,pathname:d,search:E}=du(r,{relative:e}),T=d;return n!=="/"&&(T=d==="/"?n:Ea([n,d])),o.createHref({pathname:T,search:E,hash:u})}function fu(){return se.useContext(hu)!=null}function xo(){return Kn(fu(),"useLocation() may be used only in the context of a <Router> component."),se.useContext(hu).location}var e_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function t_(r){se.useContext(gs).static||se.useLayoutEffect(r)}function n3(){let{isDataRoute:r}=se.useContext(va);return r?m3():i3()}function i3(){Kn(fu(),"useNavigate() may be used only in the context of a <Router> component.");let r=se.useContext(Zl),{basename:e,navigator:n}=se.useContext(gs),{matches:o}=se.useContext(va),{pathname:u}=xo(),d=JSON.stringify(Xy(o)),E=se.useRef(!1);return t_(()=>{E.current=!0}),se.useCallback((b,_={})=>{if(hs(E.current,e_),!E.current)return;if(typeof b=="number"){n.go(b);return}let C=Ky(b,JSON.parse(d),u,_.relative==="path");r==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Ea([e,C.pathname])),(_.replace?n.replace:n.push)(C,_.state,_)},[e,n,d,u,r])}se.createContext(null);function du(r,{relative:e}={}){let{matches:n}=se.useContext(va),{pathname:o}=xo(),u=JSON.stringify(Xy(n));return se.useMemo(()=>Ky(r,JSON.parse(u),o,e==="path"),[r,u,o,e])}function r3(r,e){return n_(r,e)}function n_(r,e,n,o,u){var ge;Kn(fu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=se.useContext(gs),{matches:E}=se.useContext(va),T=E[E.length-1],b=T?T.params:{},_=T?T.pathname:"/",C=T?T.pathnameBase:"/",I=T&&T.route;{let Q=I&&I.path||"";r_(_,!I||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let M=xo(),k;if(e){let Q=typeof e=="string"?$o(e):e;Kn(C==="/"||((ge=Q.pathname)==null?void 0:ge.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),k=Q}else k=M;let X=k.pathname||"/",K=X;if(C!=="/"){let Q=C.replace(/^\//,"").split("/");K="/"+X.replace(/^\//,"").split("/").slice(Q.length).join("/")}let z=Hy(r,{pathname:K});hs(I||z!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),hs(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let xe=c3(z&&z.map(Q=>Object.assign({},Q,{params:Object.assign({},b,Q.params),pathname:Ea([C,d.encodeLocation?d.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?C:Ea([C,d.encodeLocation?d.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),E,n,o,u);return e&&xe?se.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},xe):xe}function s3(){let r=g3(),e=qT(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},E=null;return console.error("Error handled by React Router default ErrorBoundary:",r),E=se.createElement(se.Fragment,null,se.createElement("p",null," Hey developer "),se.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",se.createElement("code",{style:d},"ErrorBoundary")," or"," ",se.createElement("code",{style:d},"errorElement")," prop on your route.")),se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),n?se.createElement("pre",{style:u},n):null,E)}var a3=se.createElement(s3,null),i_=class extends se.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const n=e3(r.digest);n&&(r=n)}let e=r!==void 0?se.createElement(va.Provider,{value:this.props.routeContext},se.createElement(G1.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?se.createElement(o3,{error:r},e):e}};i_.contextType=KT;var G0=new WeakMap;function o3({children:r,error:e}){let{basename:n}=se.useContext(gs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let o=$T(e.digest);if(o){let u=G0.get(e);if(u)throw u;let d=Qy(o.location,n);if(Wy&&!G0.get(e))if(d.isExternal||o.reloadDocument)window.location.href=d.absoluteURL||d.to;else{const E=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(d.to,{replace:o.replace}));throw G0.set(e,E),E}return se.createElement("meta",{httpEquiv:"refresh",content:`0;url=${d.absoluteURL||d.to}`})}}return r}function l3({routeContext:r,match:e,children:n}){let o=se.useContext(Zl);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),se.createElement(va.Provider,{value:r},n)}function c3(r,e=[],n=null,o=null,u=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let d=r,E=n==null?void 0:n.errors;if(E!=null){let C=d.findIndex(I=>I.route.id&&(E==null?void 0:E[I.route.id])!==void 0);Kn(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(E).join(",")}`),d=d.slice(0,Math.min(d.length,C+1))}let T=!1,b=-1;if(n)for(let C=0;C<d.length;C++){let I=d[C];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(b=C),I.route.id){let{loaderData:M,errors:k}=n,X=I.route.loader&&!M.hasOwnProperty(I.route.id)&&(!k||k[I.route.id]===void 0);if(I.route.lazy||X){T=!0,b>=0?d=d.slice(0,b+1):d=[d[0]];break}}}let _=n&&o?(C,I)=>{var M,k;o(C,{location:n.location,params:((k=(M=n.matches)==null?void 0:M[0])==null?void 0:k.params)??{},unstable_pattern:YT(n.matches),errorInfo:I})}:void 0;return d.reduceRight((C,I,M)=>{let k,X=!1,K=null,z=null;n&&(k=E&&I.route.id?E[I.route.id]:void 0,K=I.route.errorElement||a3,T&&(b<0&&M===0?(r_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),X=!0,z=null):b===M&&(X=!0,z=I.route.hydrateFallbackElement||null)));let xe=e.concat(d.slice(0,M+1)),ge=()=>{let Q;return k?Q=K:X?Q=z:I.route.Component?Q=se.createElement(I.route.Component,null):I.route.element?Q=I.route.element:Q=C,se.createElement(l3,{match:I,routeContext:{outlet:C,matches:xe,isDataRoute:n!=null},children:Q})};return n&&(I.route.ErrorBoundary||I.route.errorElement||M===0)?se.createElement(i_,{location:n.location,revalidation:n.revalidation,component:K,error:k,children:ge(),routeContext:{outlet:null,matches:xe,isDataRoute:!0},onError:_}):ge()},null)}function q1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function u3(r){let e=se.useContext(Zl);return Kn(e,q1(r)),e}function h3(r){let e=se.useContext(vf);return Kn(e,q1(r)),e}function f3(r){let e=se.useContext(va);return Kn(e,q1(r)),e}function Y1(r){let e=f3(r),n=e.matches[e.matches.length-1];return Kn(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function d3(){return Y1("useRouteId")}function g3(){var o;let r=se.useContext(G1),e=h3("useRouteError"),n=Y1("useRouteError");return r!==void 0?r:(o=e.errors)==null?void 0:o[n]}function m3(){let{router:r}=u3("useNavigate"),e=Y1("useNavigate"),n=se.useRef(!1);return t_(()=>{n.current=!0}),se.useCallback(async(u,d={})=>{hs(n.current,e_),n.current&&(typeof u=="number"?await r.navigate(u):await r.navigate(u,{fromRouteId:e,...d}))},[r,e])}var tx={};function r_(r,e,n){!e&&!tx[r]&&(tx[r]=!0,hs(!1,n))}se.memo(p3);function p3({routes:r,future:e,state:n,onError:o}){return n_(r,void 0,n,o,e)}function Ml(r){Kn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function x3({basename:r="/",children:e=null,location:n,navigationType:o="POP",navigator:u,static:d=!1,unstable_useTransitions:E}){Kn(!fu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let T=r.replace(/^\/*/,"/"),b=se.useMemo(()=>({basename:T,navigator:u,static:d,unstable_useTransitions:E,future:{}}),[T,u,d,E]);typeof n=="string"&&(n=$o(n));let{pathname:_="/",search:C="",hash:I="",state:M=null,key:k="default"}=n,X=se.useMemo(()=>{let K=_a(_,T);return K==null?null:{location:{pathname:K,search:C,hash:I,state:M,key:k},navigationType:o}},[T,_,C,I,M,k,o]);return hs(X!=null,`<Router basename="${T}"> is not able to match the URL "${_}${C}${I}" because it does not start with the basename, so the <Router> won't render anything.`),X==null?null:se.createElement(gs.Provider,{value:b},se.createElement(hu.Provider,{children:e,value:X}))}function E3({children:r,location:e}){return r3(a1(r),e)}function a1(r,e=[]){let n=[];return se.Children.forEach(r,(o,u)=>{if(!se.isValidElement(o))return;let d=[...e,u];if(o.type===se.Fragment){n.push.apply(n,a1(o.props.children,d));return}Kn(o.type===Ml,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kn(!o.props.index||!o.props.children,"An index route cannot have child routes.");let E={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(E.children=a1(o.props.children,d)),n.push(E)}),n}var Fh="get",jh="application/x-www-form-urlencoded";function Cf(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function y3(r){return Cf(r)&&r.tagName.toLowerCase()==="button"}function _3(r){return Cf(r)&&r.tagName.toLowerCase()==="form"}function A3(r){return Cf(r)&&r.tagName.toLowerCase()==="input"}function w3(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function b3(r,e){return r.button===0&&(!e||e==="_self")&&!w3(r)}var Nh=null;function T3(){if(Nh===null)try{new FormData(document.createElement("form"),0),Nh=!1}catch{Nh=!0}return Nh}var v3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function q0(r){return r!=null&&!v3.has(r)?(hs(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jh}"`),null):r}function C3(r,e){let n,o,u,d,E;if(_3(r)){let T=r.getAttribute("action");o=T?_a(T,e):null,n=r.getAttribute("method")||Fh,u=q0(r.getAttribute("enctype"))||jh,d=new FormData(r)}else if(y3(r)||A3(r)&&(r.type==="submit"||r.type==="image")){let T=r.form;if(T==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=r.getAttribute("formaction")||T.getAttribute("action");if(o=b?_a(b,e):null,n=r.getAttribute("formmethod")||T.getAttribute("method")||Fh,u=q0(r.getAttribute("formenctype"))||q0(T.getAttribute("enctype"))||jh,d=new FormData(T,r),!T3()){let{name:_,type:C,value:I}=r;if(C==="image"){let M=_?`${_}.`:"";d.append(`${M}x`,"0"),d.append(`${M}y`,"0")}else _&&d.append(_,I)}}else{if(Cf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fh,o=null,u=jh,E=r}return d&&u==="text/plain"&&(E=d,d=void 0),{action:o,method:n.toLowerCase(),encType:u,formData:d,body:E}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function X1(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function S3(r,e,n,o){let u=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${o}`:u.pathname=`${u.pathname}.${o}`:u.pathname==="/"?u.pathname=`_root.${o}`:e&&_a(u.pathname,e)==="/"?u.pathname=`${e.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function I3(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function N3(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function R3(r,e,n){let o=await Promise.all(r.map(async u=>{let d=e.routes[u.route.id];if(d){let E=await I3(d,n);return E.links?E.links():[]}return[]}));return L3(o.flat(1).filter(N3).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function nx(r,e,n,o,u,d){let E=(b,_)=>n[_]?b.route.id!==n[_].route.id:!0,T=(b,_)=>{var C;return n[_].pathname!==b.pathname||((C=n[_].route.path)==null?void 0:C.endsWith("*"))&&n[_].params["*"]!==b.params["*"]};return d==="assets"?e.filter((b,_)=>E(b,_)||T(b,_)):d==="data"?e.filter((b,_)=>{var I;let C=o.routes[b.route.id];if(!C||!C.hasLoader)return!1;if(E(b,_)||T(b,_))return!0;if(b.route.shouldRevalidate){let M=b.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((I=n[0])==null?void 0:I.params)||{},nextUrl:new URL(r,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function O3(r,e,{includeHydrateFallback:n}={}){return D3(r.map(o=>{let u=e.routes[o.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function D3(r){return[...new Set(r)]}function M3(r){let e={},n=Object.keys(r).sort();for(let o of n)e[o]=r[o];return e}function L3(r,e){let n=new Set;return new Set(e),r.reduce((o,u)=>{let d=JSON.stringify(M3(u));return n.has(d)||(n.add(d),o.push({key:d,link:u})),o},[])}function s_(){let r=se.useContext(Zl);return X1(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function P3(){let r=se.useContext(vf);return X1(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var K1=se.createContext(void 0);K1.displayName="FrameworkContext";function a_(){let r=se.useContext(K1);return X1(r,"You must render this element inside a <HydratedRouter> element"),r}function B3(r,e){let n=se.useContext(K1),[o,u]=se.useState(!1),[d,E]=se.useState(!1),{onFocus:T,onBlur:b,onMouseEnter:_,onMouseLeave:C,onTouchStart:I}=e,M=se.useRef(null);se.useEffect(()=>{if(r==="render"&&E(!0),r==="viewport"){let K=xe=>{xe.forEach(ge=>{E(ge.isIntersecting)})},z=new IntersectionObserver(K,{threshold:.5});return M.current&&z.observe(M.current),()=>{z.disconnect()}}},[r]),se.useEffect(()=>{if(o){let K=setTimeout(()=>{E(!0)},100);return()=>{clearTimeout(K)}}},[o]);let k=()=>{u(!0)},X=()=>{u(!1),E(!1)};return n?r!=="intent"?[d,M,{}]:[d,M,{onFocus:Vc(T,k),onBlur:Vc(b,X),onMouseEnter:Vc(_,k),onMouseLeave:Vc(C,X),onTouchStart:Vc(I,k)}]:[!1,M,{}]}function Vc(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function k3({page:r,...e}){let{router:n}=s_(),o=se.useMemo(()=>Hy(n.routes,r,n.basename),[n.routes,r,n.basename]);return o?se.createElement(V3,{page:r,matches:o,...e}):null}function U3(r){let{manifest:e,routeModules:n}=a_(),[o,u]=se.useState([]);return se.useEffect(()=>{let d=!1;return R3(r,e,n).then(E=>{d||u(E)}),()=>{d=!0}},[r,e,n]),o}function V3({page:r,matches:e,...n}){let o=xo(),{future:u,manifest:d,routeModules:E}=a_(),{basename:T}=s_(),{loaderData:b,matches:_}=P3(),C=se.useMemo(()=>nx(r,e,_,d,o,"data"),[r,e,_,d,o]),I=se.useMemo(()=>nx(r,e,_,d,o,"assets"),[r,e,_,d,o]),M=se.useMemo(()=>{if(r===o.pathname+o.search+o.hash)return[];let K=new Set,z=!1;if(e.forEach(ge=>{var ve;let Q=d.routes[ge.route.id];!Q||!Q.hasLoader||(!C.some(Fe=>Fe.route.id===ge.route.id)&&ge.route.id in b&&((ve=E[ge.route.id])!=null&&ve.shouldRevalidate)||Q.hasClientLoader?z=!0:K.add(ge.route.id))}),K.size===0)return[];let xe=S3(r,T,u.unstable_trailingSlashAwareDataRequests,"data");return z&&K.size>0&&xe.searchParams.set("_routes",e.filter(ge=>K.has(ge.route.id)).map(ge=>ge.route.id).join(",")),[xe.pathname+xe.search]},[T,u.unstable_trailingSlashAwareDataRequests,b,o,d,C,e,r,E]),k=se.useMemo(()=>O3(I,d),[I,d]),X=U3(I);return se.createElement(se.Fragment,null,M.map(K=>se.createElement("link",{key:K,rel:"prefetch",as:"fetch",href:K,...n})),k.map(K=>se.createElement("link",{key:K,rel:"modulepreload",href:K,...n})),X.map(({key:K,link:z})=>se.createElement("link",{key:K,nonce:n.nonce,...z})))}function F3(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var j3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{j3&&(window.__reactRouterVersion="7.12.0")}catch{}function z3({basename:r,children:e,unstable_useTransitions:n,window:o}){let u=se.useRef();u.current==null&&(u.current=AT({window:o,v5Compat:!0}));let d=u.current,[E,T]=se.useState({action:d.action,location:d.location}),b=se.useCallback(_=>{n===!1?T(_):se.startTransition(()=>T(_))},[n]);return se.useLayoutEffect(()=>d.listen(b),[d,b]),se.createElement(x3,{basename:r,children:e,location:E.location,navigationType:E.action,navigator:d,unstable_useTransitions:n})}var o_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W1=se.forwardRef(function({onClick:e,discover:n="render",prefetch:o="none",relative:u,reloadDocument:d,replace:E,state:T,target:b,to:_,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...k},X){let{basename:K,unstable_useTransitions:z}=se.useContext(gs),xe=typeof _=="string"&&o_.test(_),ge=Qy(_,K);_=ge.to;let Q=t3(_,{relative:u}),[ve,Fe,Be]=B3(o,k),F=Y3(_,{replace:E,state:T,target:b,preventScrollReset:C,relative:u,viewTransition:I,unstable_defaultShouldRevalidate:M,unstable_useTransitions:z});function G(ne){e&&e(ne),ne.defaultPrevented||F(ne)}let V=se.createElement("a",{...k,...Be,href:ge.absoluteURL||Q,onClick:ge.isExternal||d?e:G,ref:F3(X,Fe),target:b,"data-discover":!xe&&n==="render"?"true":void 0});return ve&&!xe?se.createElement(se.Fragment,null,V,se.createElement(k3,{page:Q})):V});W1.displayName="Link";var H3=se.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:o="",end:u=!1,style:d,to:E,viewTransition:T,children:b,..._},C){let I=du(E,{relative:_.relative}),M=xo(),k=se.useContext(vf),{navigator:X,basename:K}=se.useContext(gs),z=k!=null&&Z3(I)&&T===!0,xe=X.encodeLocation?X.encodeLocation(I).pathname:I.pathname,ge=M.pathname,Q=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(ge=ge.toLowerCase(),Q=Q?Q.toLowerCase():null,xe=xe.toLowerCase()),Q&&K&&(Q=_a(Q,K)||Q);const ve=xe!=="/"&&xe.endsWith("/")?xe.length-1:xe.length;let Fe=ge===xe||!u&&ge.startsWith(xe)&&ge.charAt(ve)==="/",Be=Q!=null&&(Q===xe||!u&&Q.startsWith(xe)&&Q.charAt(xe.length)==="/"),F={isActive:Fe,isPending:Be,isTransitioning:z},G=Fe?e:void 0,V;typeof o=="function"?V=o(F):V=[o,Fe?"active":null,Be?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let ne=typeof d=="function"?d(F):d;return se.createElement(W1,{..._,"aria-current":G,className:V,ref:C,style:ne,to:E,viewTransition:T},typeof b=="function"?b(F):b)});H3.displayName="NavLink";var G3=se.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:o,replace:u,state:d,method:E=Fh,action:T,onSubmit:b,relative:_,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...k},X)=>{let{unstable_useTransitions:K}=se.useContext(gs),z=W3(),xe=Q3(T,{relative:_}),ge=E.toLowerCase()==="get"?"get":"post",Q=typeof T=="string"&&o_.test(T),ve=Fe=>{if(b&&b(Fe),Fe.defaultPrevented)return;Fe.preventDefault();let Be=Fe.nativeEvent.submitter,F=(Be==null?void 0:Be.getAttribute("formmethod"))||E,G=()=>z(Be||Fe.currentTarget,{fetcherKey:e,method:F,navigate:n,replace:u,state:d,relative:_,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M});K&&n!==!1?se.startTransition(()=>G()):G()};return se.createElement("form",{ref:X,method:ge,action:xe,onSubmit:o?b:ve,...k,"data-discover":!Q&&r==="render"?"true":void 0})});G3.displayName="Form";function q3(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function l_(r){let e=se.useContext(Zl);return Kn(e,q3(r)),e}function Y3(r,{target:e,replace:n,state:o,preventScrollReset:u,relative:d,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:b}={}){let _=n3(),C=xo(),I=du(r,{relative:d});return se.useCallback(M=>{if(b3(M,e)){M.preventDefault();let k=n!==void 0?n:nu(C)===nu(I),X=()=>_(r,{replace:k,state:o,preventScrollReset:u,relative:d,viewTransition:E,unstable_defaultShouldRevalidate:T});b?se.startTransition(()=>X()):X()}},[C,_,I,n,o,e,r,u,d,E,T,b])}var X3=0,K3=()=>`__${String(++X3)}__`;function W3(){let{router:r}=l_("useSubmit"),{basename:e}=se.useContext(gs),n=d3(),o=r.fetch,u=r.navigate;return se.useCallback(async(d,E={})=>{let{action:T,method:b,encType:_,formData:C,body:I}=C3(d,e);if(E.navigate===!1){let M=E.fetcherKey||K3();await o(M,n,E.action||T,{unstable_defaultShouldRevalidate:E.unstable_defaultShouldRevalidate,preventScrollReset:E.preventScrollReset,formData:C,body:I,formMethod:E.method||b,formEncType:E.encType||_,flushSync:E.flushSync})}else await u(E.action||T,{unstable_defaultShouldRevalidate:E.unstable_defaultShouldRevalidate,preventScrollReset:E.preventScrollReset,formData:C,body:I,formMethod:E.method||b,formEncType:E.encType||_,replace:E.replace,state:E.state,fromRouteId:n,flushSync:E.flushSync,viewTransition:E.viewTransition})},[o,u,e,n])}function Q3(r,{relative:e}={}){let{basename:n}=se.useContext(gs),o=se.useContext(va);Kn(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),d={...du(r||".",{relative:e})},E=xo();if(r==null){d.search=E.search;let T=new URLSearchParams(d.search),b=T.getAll("index");if(b.some(C=>C==="")){T.delete("index"),b.filter(I=>I).forEach(I=>T.append("index",I));let C=T.toString();d.search=C?`?${C}`:""}}return(!r||r===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:Ea([n,d.pathname])),nu(d)}function Z3(r,{relative:e}={}){let n=se.useContext(Jy);Kn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=l_("useViewTransitionState"),u=du(r,{relative:e});if(!n.isTransitioning)return!1;let d=_a(n.currentLocation.pathname,o)||n.currentLocation.pathname,E=_a(n.nextLocation.pathname,o)||n.nextLocation.pathname;return Qh(u.pathname,E)!=null||Qh(u.pathname,d)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$3=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),ix=r=>{const e=$3(r);return e.charAt(0).toUpperCase()+e.slice(1)},c_=(...r)=>r.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim(),ev=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=se.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:E,...T},b)=>se.createElement("svg",{ref:b,...tv,width:e,height:e,stroke:r,strokeWidth:o?Number(n)*24/Number(e):n,className:c_("lucide",u),...!d&&!ev(T)&&{"aria-hidden":"true"},...T},[...E.map(([_,C])=>se.createElement(_,C)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=(r,e)=>{const n=se.forwardRef(({className:o,...u},d)=>se.createElement(nv,{ref:d,iconNode:e,className:c_(`lucide-${J3(ix(r))}`,`lucide-${r}`,o),...u}));return n.displayName=ix(r),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rx=Ct("calendar",iv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],sx=Ct("camera",rv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jc=Ct("check",sv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ov=Ct("chevron-right",av);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cv=Ct("circle-alert",lv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],o1=Ct("circle-check-big",uv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fv=Ct("circle-check",hv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zh=Ct("clock",dv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mv=Ct("eye",gv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],xv=Ct("flame",pv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],ax=Ct("gift",Ev);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],_v=Ct("graduation-cap",yv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],zh=Ct("heart",Av);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Jh=Ct("history",wv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Tv=Ct("layout-dashboard",bv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Cv=Ct("log-out",vv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Iv=Ct("medal",Sv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Rv=Ct("menu",Nv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],l1=Ct("package",Ov);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zc=Ct("plus",Dv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Lv=Ct("qr-code",Mv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],Bv=Ct("scan-line",Pv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Uv=Ct("search",kv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Fv=Ct("send",Vv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$h=Ct("shield-check",jv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Hv=Ct("shopping-bag",zv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],qv=Ct("shopping-cart",Gv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],c1=Ct("sparkles",Yv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Kv=Ct("star",Xv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wc=Ct("target",Wv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],Zv=Ct("thumbs-up",Qv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Y0=Ct("trash-2",Jv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],eC=Ct("trending-up",$v);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],nC=Ct("trophy",tC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],u1=Ct("user-plus",iC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sC=Ct("user",rC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],oC=Ct("users",aC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yo=Ct("x",lC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],u_=Ct("zap",cC);var us=(r=>(r.STUDENT="STUDENT",r.ADMIN="ADMIN",r.GUEST="GUEST",r))(us||{});const uC=()=>{};var ox={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=function(r){const e=[];let n=0;for(let o=0;o<r.length;o++){let u=r.charCodeAt(o);u<128?e[n++]=u:u<2048?(e[n++]=u>>6|192,e[n++]=u&63|128):(u&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(u=65536+((u&1023)<<10)+(r.charCodeAt(++o)&1023),e[n++]=u>>18|240,e[n++]=u>>12&63|128,e[n++]=u>>6&63|128,e[n++]=u&63|128):(e[n++]=u>>12|224,e[n++]=u>>6&63|128,e[n++]=u&63|128)}return e},hC=function(r){const e=[];let n=0,o=0;for(;n<r.length;){const u=r[n++];if(u<128)e[o++]=String.fromCharCode(u);else if(u>191&&u<224){const d=r[n++];e[o++]=String.fromCharCode((u&31)<<6|d&63)}else if(u>239&&u<365){const d=r[n++],E=r[n++],T=r[n++],b=((u&7)<<18|(d&63)<<12|(E&63)<<6|T&63)-65536;e[o++]=String.fromCharCode(55296+(b>>10)),e[o++]=String.fromCharCode(56320+(b&1023))}else{const d=r[n++],E=r[n++];e[o++]=String.fromCharCode((u&15)<<12|(d&63)<<6|E&63)}}return e.join("")},f_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let u=0;u<r.length;u+=3){const d=r[u],E=u+1<r.length,T=E?r[u+1]:0,b=u+2<r.length,_=b?r[u+2]:0,C=d>>2,I=(d&3)<<4|T>>4;let M=(T&15)<<2|_>>6,k=_&63;b||(k=64,E||(M=64)),o.push(n[C],n[I],n[M],n[k])}return o.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(h_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):hC(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let u=0;u<r.length;){const d=n[r.charAt(u++)],T=u<r.length?n[r.charAt(u)]:0;++u;const _=u<r.length?n[r.charAt(u)]:64;++u;const I=u<r.length?n[r.charAt(u)]:64;if(++u,d==null||T==null||_==null||I==null)throw new fC;const M=d<<2|T>>4;if(o.push(M),_!==64){const k=T<<4&240|_>>2;if(o.push(k),I!==64){const X=_<<6&192|I;o.push(X)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class fC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dC=function(r){const e=h_(r);return f_.encodeByteArray(e,!0)},ef=function(r){return dC(r).replace(/\./g,"")},gC=function(r){try{return f_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=()=>mC().__FIREBASE_DEFAULTS__,xC=()=>{if(typeof process>"u"||typeof ox>"u")return;const r=ox.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},EC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&gC(r[1]);return e&&JSON.parse(e)},Q1=()=>{try{return uC()||pC()||xC()||EC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},yC=r=>{var e,n;return(n=(e=Q1())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},_C=r=>{const e=yC(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},d_=()=>{var r;return(r=Q1())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wC(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",u=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const E={iss:`https://securetoken.google.com/${o}`,aud:o,iat:u,exp:u+3600,auth_time:u,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ef(JSON.stringify(n)),ef(JSON.stringify(E)),""].join(".")}const Qc={};function TC(){const r={prod:[],emulator:[]};for(const e of Object.keys(Qc))Qc[e]?r.emulator.push(e):r.prod.push(e);return r}function vC(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let lx=!1;function CC(r,e){if(typeof window>"u"||typeof document>"u"||!Z1(window.location.host)||Qc[r]===e||Qc[r]||lx)return;Qc[r]=e;function n(M){return`__firebase__banner__${M}`}const o="__firebase__banner",d=TC().prod.length>0;function E(){const M=document.getElementById(o);M&&M.remove()}function T(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function b(M,k){M.setAttribute("width","24"),M.setAttribute("id",k),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function _(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{lx=!0,E()},M}function C(M,k){M.setAttribute("id",k),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function I(){const M=vC(o),k=n("text"),X=document.getElementById(k)||document.createElement("span"),K=n("learnmore"),z=document.getElementById(K)||document.createElement("a"),xe=n("preprendIcon"),ge=document.getElementById(xe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const Q=M.element;T(Q),C(z,K);const ve=_();b(ge,xe),Q.append(ge,X,z,ve),document.body.appendChild(Q)}d?(X.innerText="Preview backend disconnected.",ge.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ge.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IC(){var e;const r=(e=Q1())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NC(){return!IC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RC(){try{return typeof indexedDB=="object"}catch{return!1}}function OC(){return new Promise((r,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(o);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(o),r(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var d;e(((d=u.error)==null?void 0:d.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="FirebaseError";class Jl extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=DC,Object.setPrototypeOf(this,Jl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,g_.prototype.create)}}class g_{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},u=`${this.service}/${e}`,d=this.errors[e],E=d?MC(d,o):"Error",T=`${this.serviceName}: ${E} (${u}).`;return new Jl(u,T,o)}}function MC(r,e){return r.replace(LC,(n,o)=>{const u=e[o];return u!=null?String(u):`<${o}?>`})}const LC=/\{\$([^}]+)}/g;function tf(r,e){if(r===e)return!0;const n=Object.keys(r),o=Object.keys(e);for(const u of n){if(!o.includes(u))return!1;const d=r[u],E=e[u];if(cx(d)&&cx(E)){if(!tf(d,E))return!1}else if(d!==E)return!1}for(const u of o)if(!n.includes(u))return!1;return!0}function cx(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(r){return r&&r._delegate?r._delegate:r}class iu{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new AC;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&o.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kC(e))try{this.getOrInitializeService({instanceIdentifier:Ho})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const d=this.getOrInitializeService({instanceIdentifier:u});o.resolve(d)}catch{}}}}clearInstance(e=Ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ho){return this.instances.has(e)}getOptions(e=Ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[d,E]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(d);o===T&&E.resolve(u)}return u}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),u=this.onInitCallbacks.get(o)??new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const u of o)try{u(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:BC(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Ho){return this.component?this.component.multipleInstances?e:Ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BC(r){return r===Ho?void 0:r}function kC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Zt||(Zt={}));const VC={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},FC=Zt.INFO,jC={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},zC=(r,e,...n)=>{if(e<r.logLevel)return;const o=new Date().toISOString(),u=jC[e];if(u)console[u](`[${o}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m_{constructor(e){this.name=e,this._logLevel=FC,this._logHandler=zC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}const HC=(r,e)=>e.some(n=>r instanceof n);let ux,hx;function GC(){return ux||(ux=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qC(){return hx||(hx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p_=new WeakMap,h1=new WeakMap,x_=new WeakMap,X0=new WeakMap,J1=new WeakMap;function YC(r){const e=new Promise((n,o)=>{const u=()=>{r.removeEventListener("success",d),r.removeEventListener("error",E)},d=()=>{n(so(r.result)),u()},E=()=>{o(r.error),u()};r.addEventListener("success",d),r.addEventListener("error",E)});return e.then(n=>{n instanceof IDBCursor&&p_.set(n,r)}).catch(()=>{}),J1.set(e,r),e}function XC(r){if(h1.has(r))return;const e=new Promise((n,o)=>{const u=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",E),r.removeEventListener("abort",E)},d=()=>{n(),u()},E=()=>{o(r.error||new DOMException("AbortError","AbortError")),u()};r.addEventListener("complete",d),r.addEventListener("error",E),r.addEventListener("abort",E)});h1.set(r,e)}let f1={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return h1.get(r);if(e==="objectStoreNames")return r.objectStoreNames||x_.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return so(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function KC(r){f1=r(f1)}function WC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=r.call(K0(this),e,...n);return x_.set(o,e.sort?e.sort():[e]),so(o)}:qC().includes(r)?function(...e){return r.apply(K0(this),e),so(p_.get(this))}:function(...e){return so(r.apply(K0(this),e))}}function QC(r){return typeof r=="function"?WC(r):(r instanceof IDBTransaction&&XC(r),HC(r,GC())?new Proxy(r,f1):r)}function so(r){if(r instanceof IDBRequest)return YC(r);if(X0.has(r))return X0.get(r);const e=QC(r);return e!==r&&(X0.set(r,e),J1.set(e,r)),e}const K0=r=>J1.get(r);function ZC(r,e,{blocked:n,upgrade:o,blocking:u,terminated:d}={}){const E=indexedDB.open(r,e),T=so(E);return o&&E.addEventListener("upgradeneeded",b=>{o(so(E.result),b.oldVersion,b.newVersion,so(E.transaction),b)}),n&&E.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),T.then(b=>{d&&b.addEventListener("close",()=>d()),u&&b.addEventListener("versionchange",_=>u(_.oldVersion,_.newVersion,_))}).catch(()=>{}),T}const JC=["get","getKey","getAll","getAllKeys","count"],$C=["put","add","delete","clear"],W0=new Map;function fx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(W0.get(e))return W0.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,u=$C.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(u||JC.includes(n)))return;const d=async function(E,...T){const b=this.transaction(E,u?"readwrite":"readonly");let _=b.store;return o&&(_=_.index(T.shift())),(await Promise.all([_[n](...T),u&&b.done]))[0]};return W0.set(e,d),d}KC(r=>({...r,get:(e,n,o)=>fx(e,n)||r.get(e,n,o),has:(e,n)=>!!fx(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tS(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function tS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const d1="@firebase/app",dx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new m_("@firebase/app"),nS="@firebase/app-compat",iS="@firebase/analytics-compat",rS="@firebase/analytics",sS="@firebase/app-check-compat",aS="@firebase/app-check",oS="@firebase/auth",lS="@firebase/auth-compat",cS="@firebase/database",uS="@firebase/data-connect",hS="@firebase/database-compat",fS="@firebase/functions",dS="@firebase/functions-compat",gS="@firebase/installations",mS="@firebase/installations-compat",pS="@firebase/messaging",xS="@firebase/messaging-compat",ES="@firebase/performance",yS="@firebase/performance-compat",_S="@firebase/remote-config",AS="@firebase/remote-config-compat",wS="@firebase/storage",bS="@firebase/storage-compat",TS="@firebase/firestore",vS="@firebase/ai",CS="@firebase/firestore-compat",SS="firebase",IS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="[DEFAULT]",NS={[d1]:"fire-core",[nS]:"fire-core-compat",[rS]:"fire-analytics",[iS]:"fire-analytics-compat",[aS]:"fire-app-check",[sS]:"fire-app-check-compat",[oS]:"fire-auth",[lS]:"fire-auth-compat",[cS]:"fire-rtdb",[uS]:"fire-data-connect",[hS]:"fire-rtdb-compat",[fS]:"fire-fn",[dS]:"fire-fn-compat",[gS]:"fire-iid",[mS]:"fire-iid-compat",[pS]:"fire-fcm",[xS]:"fire-fcm-compat",[ES]:"fire-perf",[yS]:"fire-perf-compat",[_S]:"fire-rc",[AS]:"fire-rc-compat",[wS]:"fire-gcs",[bS]:"fire-gcs-compat",[TS]:"fire-fst",[CS]:"fire-fst-compat",[vS]:"fire-vertex","fire-js":"fire-js",[SS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=new Map,RS=new Map,m1=new Map;function gx(r,e){try{r.container.addComponent(e)}catch(n){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function rf(r){const e=r.name;if(m1.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;m1.set(e,r);for(const n of nf.values())gx(n,r);for(const n of RS.values())gx(n,r);return!0}function OS(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function DS(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new g_("app","Firebase",MS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new iu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=IS;function E_(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const o={name:g1,automaticDataCollectionEnabled:!0,...e},u=o.name;if(typeof u!="string"||!u)throw ao.create("bad-app-name",{appName:String(u)});if(n||(n=d_()),!n)throw ao.create("no-options");const d=nf.get(u);if(d){if(tf(n,d.options)&&tf(o,d.config))return d;throw ao.create("duplicate-app",{appName:u})}const E=new UC(u);for(const b of m1.values())E.addComponent(b);const T=new LS(n,o,E);return nf.set(u,T),T}function BS(r=g1){const e=nf.get(r);if(!e&&r===g1&&d_())return E_();if(!e)throw ao.create("no-app",{appName:r});return e}function zl(r,e,n){let o=NS[r]??r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const E=[`Unable to register library "${o}" with version "${e}":`];u&&E.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&E.push("and"),d&&E.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(E.join(" "));return}rf(new iu(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firebase-heartbeat-database",US=1,ru="firebase-heartbeat-store";let Q0=null;function y_(){return Q0||(Q0=ZC(kS,US,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(r=>{throw ao.create("idb-open",{originalErrorMessage:r.message})})),Q0}async function VS(r){try{const n=(await y_()).transaction(ru),o=await n.objectStore(ru).get(__(r));return await n.done,o}catch(e){if(e instanceof Jl)Aa.warn(e.message);else{const n=ao.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Aa.warn(n.message)}}}async function mx(r,e){try{const o=(await y_()).transaction(ru,"readwrite");await o.objectStore(ru).put(e,__(r)),await o.done}catch(n){if(n instanceof Jl)Aa.warn(n.message);else{const o=ao.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Aa.warn(o.message)}}}function __(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=1024,jS=30;class zS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GS(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=px();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(E=>E.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:u}),this._heartbeatsCache.heartbeats.length>jS){const E=qS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(E,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Aa.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=px(),{heartbeatsToSend:o,unsentEntries:u}=HS(this._heartbeatsCache.heartbeats),d=ef(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(n){return Aa.warn(n),""}}}function px(){return new Date().toISOString().substring(0,10)}function HS(r,e=FS){const n=[];let o=r.slice();for(const u of r){const d=n.find(E=>E.agent===u.agent);if(d){if(d.dates.push(u.date),xx(n)>e){d.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),xx(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class GS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RC()?OC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return mx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return mx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function xx(r){return ef(JSON.stringify({version:2,heartbeats:r})).length}function qS(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let o=1;o<r.length;o++)r[o].date<n&&(n=r[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(r){rf(new iu("platform-logger",e=>new eS(e),"PRIVATE")),rf(new iu("heartbeat",e=>new zS(e),"PRIVATE")),zl(d1,dx,r),zl(d1,dx,"esm2020"),zl("fire-js","")}YS("");var Ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oo,A_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,G){function V(){}V.prototype=G.prototype,F.F=G.prototype,F.prototype=new V,F.prototype.constructor=F,F.D=function(ne,W,J){for(var Y=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)Y[Ze-2]=arguments[Ze];return G.prototype[W].apply(ne,Y)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(F,G,V){V||(V=0);const ne=Array(16);if(typeof G=="string")for(var W=0;W<16;++W)ne[W]=G.charCodeAt(V++)|G.charCodeAt(V++)<<8|G.charCodeAt(V++)<<16|G.charCodeAt(V++)<<24;else for(W=0;W<16;++W)ne[W]=G[V++]|G[V++]<<8|G[V++]<<16|G[V++]<<24;G=F.g[0],V=F.g[1],W=F.g[2];let J=F.g[3],Y;Y=G+(J^V&(W^J))+ne[0]+3614090360&4294967295,G=V+(Y<<7&4294967295|Y>>>25),Y=J+(W^G&(V^W))+ne[1]+3905402710&4294967295,J=G+(Y<<12&4294967295|Y>>>20),Y=W+(V^J&(G^V))+ne[2]+606105819&4294967295,W=J+(Y<<17&4294967295|Y>>>15),Y=V+(G^W&(J^G))+ne[3]+3250441966&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=G+(J^V&(W^J))+ne[4]+4118548399&4294967295,G=V+(Y<<7&4294967295|Y>>>25),Y=J+(W^G&(V^W))+ne[5]+1200080426&4294967295,J=G+(Y<<12&4294967295|Y>>>20),Y=W+(V^J&(G^V))+ne[6]+2821735955&4294967295,W=J+(Y<<17&4294967295|Y>>>15),Y=V+(G^W&(J^G))+ne[7]+4249261313&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=G+(J^V&(W^J))+ne[8]+1770035416&4294967295,G=V+(Y<<7&4294967295|Y>>>25),Y=J+(W^G&(V^W))+ne[9]+2336552879&4294967295,J=G+(Y<<12&4294967295|Y>>>20),Y=W+(V^J&(G^V))+ne[10]+4294925233&4294967295,W=J+(Y<<17&4294967295|Y>>>15),Y=V+(G^W&(J^G))+ne[11]+2304563134&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=G+(J^V&(W^J))+ne[12]+1804603682&4294967295,G=V+(Y<<7&4294967295|Y>>>25),Y=J+(W^G&(V^W))+ne[13]+4254626195&4294967295,J=G+(Y<<12&4294967295|Y>>>20),Y=W+(V^J&(G^V))+ne[14]+2792965006&4294967295,W=J+(Y<<17&4294967295|Y>>>15),Y=V+(G^W&(J^G))+ne[15]+1236535329&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=G+(W^J&(V^W))+ne[1]+4129170786&4294967295,G=V+(Y<<5&4294967295|Y>>>27),Y=J+(V^W&(G^V))+ne[6]+3225465664&4294967295,J=G+(Y<<9&4294967295|Y>>>23),Y=W+(G^V&(J^G))+ne[11]+643717713&4294967295,W=J+(Y<<14&4294967295|Y>>>18),Y=V+(J^G&(W^J))+ne[0]+3921069994&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=G+(W^J&(V^W))+ne[5]+3593408605&4294967295,G=V+(Y<<5&4294967295|Y>>>27),Y=J+(V^W&(G^V))+ne[10]+38016083&4294967295,J=G+(Y<<9&4294967295|Y>>>23),Y=W+(G^V&(J^G))+ne[15]+3634488961&4294967295,W=J+(Y<<14&4294967295|Y>>>18),Y=V+(J^G&(W^J))+ne[4]+3889429448&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=G+(W^J&(V^W))+ne[9]+568446438&4294967295,G=V+(Y<<5&4294967295|Y>>>27),Y=J+(V^W&(G^V))+ne[14]+3275163606&4294967295,J=G+(Y<<9&4294967295|Y>>>23),Y=W+(G^V&(J^G))+ne[3]+4107603335&4294967295,W=J+(Y<<14&4294967295|Y>>>18),Y=V+(J^G&(W^J))+ne[8]+1163531501&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=G+(W^J&(V^W))+ne[13]+2850285829&4294967295,G=V+(Y<<5&4294967295|Y>>>27),Y=J+(V^W&(G^V))+ne[2]+4243563512&4294967295,J=G+(Y<<9&4294967295|Y>>>23),Y=W+(G^V&(J^G))+ne[7]+1735328473&4294967295,W=J+(Y<<14&4294967295|Y>>>18),Y=V+(J^G&(W^J))+ne[12]+2368359562&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=G+(V^W^J)+ne[5]+4294588738&4294967295,G=V+(Y<<4&4294967295|Y>>>28),Y=J+(G^V^W)+ne[8]+2272392833&4294967295,J=G+(Y<<11&4294967295|Y>>>21),Y=W+(J^G^V)+ne[11]+1839030562&4294967295,W=J+(Y<<16&4294967295|Y>>>16),Y=V+(W^J^G)+ne[14]+4259657740&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=G+(V^W^J)+ne[1]+2763975236&4294967295,G=V+(Y<<4&4294967295|Y>>>28),Y=J+(G^V^W)+ne[4]+1272893353&4294967295,J=G+(Y<<11&4294967295|Y>>>21),Y=W+(J^G^V)+ne[7]+4139469664&4294967295,W=J+(Y<<16&4294967295|Y>>>16),Y=V+(W^J^G)+ne[10]+3200236656&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=G+(V^W^J)+ne[13]+681279174&4294967295,G=V+(Y<<4&4294967295|Y>>>28),Y=J+(G^V^W)+ne[0]+3936430074&4294967295,J=G+(Y<<11&4294967295|Y>>>21),Y=W+(J^G^V)+ne[3]+3572445317&4294967295,W=J+(Y<<16&4294967295|Y>>>16),Y=V+(W^J^G)+ne[6]+76029189&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=G+(V^W^J)+ne[9]+3654602809&4294967295,G=V+(Y<<4&4294967295|Y>>>28),Y=J+(G^V^W)+ne[12]+3873151461&4294967295,J=G+(Y<<11&4294967295|Y>>>21),Y=W+(J^G^V)+ne[15]+530742520&4294967295,W=J+(Y<<16&4294967295|Y>>>16),Y=V+(W^J^G)+ne[2]+3299628645&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=G+(W^(V|~J))+ne[0]+4096336452&4294967295,G=V+(Y<<6&4294967295|Y>>>26),Y=J+(V^(G|~W))+ne[7]+1126891415&4294967295,J=G+(Y<<10&4294967295|Y>>>22),Y=W+(G^(J|~V))+ne[14]+2878612391&4294967295,W=J+(Y<<15&4294967295|Y>>>17),Y=V+(J^(W|~G))+ne[5]+4237533241&4294967295,V=W+(Y<<21&4294967295|Y>>>11),Y=G+(W^(V|~J))+ne[12]+1700485571&4294967295,G=V+(Y<<6&4294967295|Y>>>26),Y=J+(V^(G|~W))+ne[3]+2399980690&4294967295,J=G+(Y<<10&4294967295|Y>>>22),Y=W+(G^(J|~V))+ne[10]+4293915773&4294967295,W=J+(Y<<15&4294967295|Y>>>17),Y=V+(J^(W|~G))+ne[1]+2240044497&4294967295,V=W+(Y<<21&4294967295|Y>>>11),Y=G+(W^(V|~J))+ne[8]+1873313359&4294967295,G=V+(Y<<6&4294967295|Y>>>26),Y=J+(V^(G|~W))+ne[15]+4264355552&4294967295,J=G+(Y<<10&4294967295|Y>>>22),Y=W+(G^(J|~V))+ne[6]+2734768916&4294967295,W=J+(Y<<15&4294967295|Y>>>17),Y=V+(J^(W|~G))+ne[13]+1309151649&4294967295,V=W+(Y<<21&4294967295|Y>>>11),Y=G+(W^(V|~J))+ne[4]+4149444226&4294967295,G=V+(Y<<6&4294967295|Y>>>26),Y=J+(V^(G|~W))+ne[11]+3174756917&4294967295,J=G+(Y<<10&4294967295|Y>>>22),Y=W+(G^(J|~V))+ne[2]+718787259&4294967295,W=J+(Y<<15&4294967295|Y>>>17),Y=V+(J^(W|~G))+ne[9]+3951481745&4294967295,F.g[0]=F.g[0]+G&4294967295,F.g[1]=F.g[1]+(W+(Y<<21&4294967295|Y>>>11))&4294967295,F.g[2]=F.g[2]+W&4294967295,F.g[3]=F.g[3]+J&4294967295}o.prototype.v=function(F,G){G===void 0&&(G=F.length);const V=G-this.blockSize,ne=this.C;let W=this.h,J=0;for(;J<G;){if(W==0)for(;J<=V;)u(this,F,J),J+=this.blockSize;if(typeof F=="string"){for(;J<G;)if(ne[W++]=F.charCodeAt(J++),W==this.blockSize){u(this,ne),W=0;break}}else for(;J<G;)if(ne[W++]=F[J++],W==this.blockSize){u(this,ne),W=0;break}}this.h=W,this.o+=G},o.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var G=1;G<F.length-8;++G)F[G]=0;G=this.o*8;for(var V=F.length-8;V<F.length;++V)F[V]=G&255,G/=256;for(this.v(F),F=Array(16),G=0,V=0;V<4;++V)for(let ne=0;ne<32;ne+=8)F[G++]=this.g[V]>>>ne&255;return F};function d(F,G){var V=T;return Object.prototype.hasOwnProperty.call(V,F)?V[F]:V[F]=G(F)}function E(F,G){this.h=G;const V=[];let ne=!0;for(let W=F.length-1;W>=0;W--){const J=F[W]|0;ne&&J==G||(V[W]=J,ne=!1)}this.g=V}var T={};function b(F){return-128<=F&&F<128?d(F,function(G){return new E([G|0],G<0?-1:0)}):new E([F|0],F<0?-1:0)}function _(F){if(isNaN(F)||!isFinite(F))return I;if(F<0)return z(_(-F));const G=[];let V=1;for(let ne=0;F>=V;ne++)G[ne]=F/V|0,V*=4294967296;return new E(G,0)}function C(F,G){if(F.length==0)throw Error("number format error: empty string");if(G=G||10,G<2||36<G)throw Error("radix out of range: "+G);if(F.charAt(0)=="-")return z(C(F.substring(1),G));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=_(Math.pow(G,8));let ne=I;for(let J=0;J<F.length;J+=8){var W=Math.min(8,F.length-J);const Y=parseInt(F.substring(J,J+W),G);W<8?(W=_(Math.pow(G,W)),ne=ne.j(W).add(_(Y))):(ne=ne.j(V),ne=ne.add(_(Y)))}return ne}var I=b(0),M=b(1),k=b(16777216);r=E.prototype,r.m=function(){if(K(this))return-z(this).m();let F=0,G=1;for(let V=0;V<this.g.length;V++){const ne=this.i(V);F+=(ne>=0?ne:4294967296+ne)*G,G*=4294967296}return F},r.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(X(this))return"0";if(K(this))return"-"+z(this).toString(F);const G=_(Math.pow(F,6));var V=this;let ne="";for(;;){const W=ve(V,G).g;V=xe(V,W.j(G));let J=((V.g.length>0?V.g[0]:V.h)>>>0).toString(F);if(V=W,X(V))return J+ne;for(;J.length<6;)J="0"+J;ne=J+ne}},r.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function X(F){if(F.h!=0)return!1;for(let G=0;G<F.g.length;G++)if(F.g[G]!=0)return!1;return!0}function K(F){return F.h==-1}r.l=function(F){return F=xe(this,F),K(F)?-1:X(F)?0:1};function z(F){const G=F.g.length,V=[];for(let ne=0;ne<G;ne++)V[ne]=~F.g[ne];return new E(V,~F.h).add(M)}r.abs=function(){return K(this)?z(this):this},r.add=function(F){const G=Math.max(this.g.length,F.g.length),V=[];let ne=0;for(let W=0;W<=G;W++){let J=ne+(this.i(W)&65535)+(F.i(W)&65535),Y=(J>>>16)+(this.i(W)>>>16)+(F.i(W)>>>16);ne=Y>>>16,J&=65535,Y&=65535,V[W]=Y<<16|J}return new E(V,V[V.length-1]&-2147483648?-1:0)};function xe(F,G){return F.add(z(G))}r.j=function(F){if(X(this)||X(F))return I;if(K(this))return K(F)?z(this).j(z(F)):z(z(this).j(F));if(K(F))return z(this.j(z(F)));if(this.l(k)<0&&F.l(k)<0)return _(this.m()*F.m());const G=this.g.length+F.g.length,V=[];for(var ne=0;ne<2*G;ne++)V[ne]=0;for(ne=0;ne<this.g.length;ne++)for(let W=0;W<F.g.length;W++){const J=this.i(ne)>>>16,Y=this.i(ne)&65535,Ze=F.i(W)>>>16,fe=F.i(W)&65535;V[2*ne+2*W]+=Y*fe,ge(V,2*ne+2*W),V[2*ne+2*W+1]+=J*fe,ge(V,2*ne+2*W+1),V[2*ne+2*W+1]+=Y*Ze,ge(V,2*ne+2*W+1),V[2*ne+2*W+2]+=J*Ze,ge(V,2*ne+2*W+2)}for(F=0;F<G;F++)V[F]=V[2*F+1]<<16|V[2*F];for(F=G;F<2*G;F++)V[F]=0;return new E(V,0)};function ge(F,G){for(;(F[G]&65535)!=F[G];)F[G+1]+=F[G]>>>16,F[G]&=65535,G++}function Q(F,G){this.g=F,this.h=G}function ve(F,G){if(X(G))throw Error("division by zero");if(X(F))return new Q(I,I);if(K(F))return G=ve(z(F),G),new Q(z(G.g),z(G.h));if(K(G))return G=ve(F,z(G)),new Q(z(G.g),G.h);if(F.g.length>30){if(K(F)||K(G))throw Error("slowDivide_ only works with positive integers.");for(var V=M,ne=G;ne.l(F)<=0;)V=Fe(V),ne=Fe(ne);var W=Be(V,1),J=Be(ne,1);for(ne=Be(ne,2),V=Be(V,2);!X(ne);){var Y=J.add(ne);Y.l(F)<=0&&(W=W.add(V),J=Y),ne=Be(ne,1),V=Be(V,1)}return G=xe(F,W.j(G)),new Q(W,G)}for(W=I;F.l(G)>=0;){for(V=Math.max(1,Math.floor(F.m()/G.m())),ne=Math.ceil(Math.log(V)/Math.LN2),ne=ne<=48?1:Math.pow(2,ne-48),J=_(V),Y=J.j(G);K(Y)||Y.l(F)>0;)V-=ne,J=_(V),Y=J.j(G);X(J)&&(J=M),W=W.add(J),F=xe(F,Y)}return new Q(W,F)}r.B=function(F){return ve(this,F).h},r.and=function(F){const G=Math.max(this.g.length,F.g.length),V=[];for(let ne=0;ne<G;ne++)V[ne]=this.i(ne)&F.i(ne);return new E(V,this.h&F.h)},r.or=function(F){const G=Math.max(this.g.length,F.g.length),V=[];for(let ne=0;ne<G;ne++)V[ne]=this.i(ne)|F.i(ne);return new E(V,this.h|F.h)},r.xor=function(F){const G=Math.max(this.g.length,F.g.length),V=[];for(let ne=0;ne<G;ne++)V[ne]=this.i(ne)^F.i(ne);return new E(V,this.h^F.h)};function Fe(F){const G=F.g.length+1,V=[];for(let ne=0;ne<G;ne++)V[ne]=F.i(ne)<<1|F.i(ne-1)>>>31;return new E(V,F.h)}function Be(F,G){const V=G>>5;G%=32;const ne=F.g.length-V,W=[];for(let J=0;J<ne;J++)W[J]=G>0?F.i(J+V)>>>G|F.i(J+V+1)<<32-G:F.i(J+V);return new E(W,F.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,A_=o,E.prototype.add=E.prototype.add,E.prototype.multiply=E.prototype.j,E.prototype.modulo=E.prototype.B,E.prototype.compare=E.prototype.l,E.prototype.toNumber=E.prototype.m,E.prototype.toString=E.prototype.toString,E.prototype.getBits=E.prototype.i,E.fromNumber=_,E.fromString=C,oo=E}).apply(typeof Ex<"u"?Ex:typeof self<"u"?self:typeof window<"u"?window:{});var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var w_,Hc,b_,Hh,p1,T_,v_,C_;(function(){var r,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rh=="object"&&Rh];for(var N=0;N<p.length;++N){var D=p[N];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var o=n(this);function u(p,N){if(N)e:{var D=o;p=p.split(".");for(var j=0;j<p.length-1;j++){var oe=p[j];if(!(oe in D))break e;D=D[oe]}p=p[p.length-1],j=D[p],N=N(j),N!=j&&N!=null&&e(D,p,{configurable:!0,writable:!0,value:N})}}u("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),u("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),u("Object.entries",function(p){return p||function(N){var D=[],j;for(j in N)Object.prototype.hasOwnProperty.call(N,j)&&D.push([j,N[j]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},E=this||self;function T(p){var N=typeof p;return N=="object"&&p!=null||N=="function"}function b(p,N,D){return p.call.apply(p.bind,arguments)}function _(p,N,D){return _=b,_.apply(null,arguments)}function C(p,N){var D=Array.prototype.slice.call(arguments,1);return function(){var j=D.slice();return j.push.apply(j,arguments),p.apply(this,j)}}function I(p,N){function D(){}D.prototype=N.prototype,p.Z=N.prototype,p.prototype=new D,p.prototype.constructor=p,p.Ob=function(j,oe,ye){for(var Pe=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Pe[ct-2]=arguments[ct];return N.prototype[oe].apply(j,Pe)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function k(p){const N=p.length;if(N>0){const D=Array(N);for(let j=0;j<N;j++)D[j]=p[j];return D}return[]}function X(p,N){for(let j=1;j<arguments.length;j++){const oe=arguments[j];var D=typeof oe;if(D=D!="object"?D:oe?Array.isArray(oe)?"array":D:"null",D=="array"||D=="object"&&typeof oe.length=="number"){D=p.length||0;const ye=oe.length||0;p.length=D+ye;for(let Pe=0;Pe<ye;Pe++)p[D+Pe]=oe[Pe]}else p.push(oe)}}class K{constructor(N,D){this.i=N,this.j=D,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function z(p){E.setTimeout(()=>{throw p},0)}function xe(){var p=F;let N=null;return p.g&&(N=p.g,p.g=p.g.next,p.g||(p.h=null),N.next=null),N}class ge{constructor(){this.h=this.g=null}add(N,D){const j=Q.get();j.set(N,D),this.h?this.h.next=j:this.g=j,this.h=j}}var Q=new K(()=>new ve,p=>p.reset());class ve{constructor(){this.next=this.g=this.h=null}set(N,D){this.h=N,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,Be=!1,F=new ge,G=()=>{const p=Promise.resolve(void 0);Fe=()=>{p.then(V)}};function V(){for(var p;p=xe();){try{p.h.call(p.g)}catch(D){z(D)}var N=Q;N.j(p),N.h<100&&(N.h++,p.next=N.g,N.g=p)}Be=!1}function ne(){this.u=this.u,this.C=this.C}ne.prototype.u=!1,ne.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ne.prototype[Symbol.dispose]=function(){this.dispose()},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(p,N){this.type=p,this.g=this.target=N,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!E.addEventListener||!Object.defineProperty)return!1;var p=!1,N=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};E.addEventListener("test",D,N),E.removeEventListener("test",D,N)}catch{}return p})();function Y(p){return/^[\s\xa0]*$/.test(p)}function Ze(p,N){W.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,N)}I(Ze,W),Ze.prototype.init=function(p,N){const D=this.type=p.type,j=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=N,N=p.relatedTarget,N||(D=="mouseover"?N=p.fromElement:D=="mouseout"&&(N=p.toElement)),this.relatedTarget=N,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Ze.Z.h.call(this)},Ze.prototype.h=function(){Ze.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),me=0;function we(p,N,D,j,oe){this.listener=p,this.proxy=null,this.src=N,this.type=D,this.capture=!!j,this.ha=oe,this.key=++me,this.da=this.fa=!1}function qe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ot(p,N,D){for(const j in p)N.call(D,p[j],j,p)}function ft(p,N){for(const D in p)N.call(void 0,p[D],D,p)}function ie(p){const N={};for(const D in p)N[D]=p[D];return N}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ke(p,N){let D,j;for(let oe=1;oe<arguments.length;oe++){j=arguments[oe];for(D in j)p[D]=j[D];for(let ye=0;ye<Ae.length;ye++)D=Ae[ye],Object.prototype.hasOwnProperty.call(j,D)&&(p[D]=j[D])}}function Ue(p){this.src=p,this.g={},this.h=0}Ue.prototype.add=function(p,N,D,j,oe){const ye=p.toString();p=this.g[ye],p||(p=this.g[ye]=[],this.h++);const Pe=Oe(p,N,j,oe);return Pe>-1?(N=p[Pe],D||(N.fa=!1)):(N=new we(N,this.src,ye,!!j,oe),N.fa=D,p.push(N)),N};function tt(p,N){const D=N.type;if(D in p.g){var j=p.g[D],oe=Array.prototype.indexOf.call(j,N,void 0),ye;(ye=oe>=0)&&Array.prototype.splice.call(j,oe,1),ye&&(qe(N),p.g[D].length==0&&(delete p.g[D],p.h--))}}function Oe(p,N,D,j){for(let oe=0;oe<p.length;++oe){const ye=p[oe];if(!ye.da&&ye.listener==N&&ye.capture==!!D&&ye.ha==j)return oe}return-1}var pt="closure_lm_"+(Math.random()*1e6|0),yt={};function Jt(p,N,D,j,oe){if(Array.isArray(N)){for(let ye=0;ye<N.length;ye++)Jt(p,N[ye],D,j,oe);return null}return D=Bt(D),p&&p[fe]?p.J(N,D,T(j)?!!j.capture:!1,oe):yi(p,N,D,!1,j,oe)}function yi(p,N,D,j,oe,ye){if(!N)throw Error("Invalid event type");const Pe=T(oe)?!!oe.capture:!!oe;let ct=Ri(p);if(ct||(p[pt]=ct=new Ue(p)),D=ct.add(N,D,j,Pe,ye),D.proxy)return D;if(j=Pn(),D.proxy=j,j.src=p,j.listener=D,p.addEventListener)J||(oe=Pe),oe===void 0&&(oe=!1),p.addEventListener(N.toString(),j,oe);else if(p.attachEvent)p.attachEvent(zn(N.toString()),j);else if(p.addListener&&p.removeListener)p.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Pn(){function p(D){return N.call(p.src,p.listener,D)}const N=_i;return p}function nr(p,N,D,j,oe){if(Array.isArray(N))for(var ye=0;ye<N.length;ye++)nr(p,N[ye],D,j,oe);else j=T(j)?!!j.capture:!!j,D=Bt(D),p&&p[fe]?(p=p.i,ye=String(N).toString(),ye in p.g&&(N=p.g[ye],D=Oe(N,D,j,oe),D>-1&&(qe(N[D]),Array.prototype.splice.call(N,D,1),N.length==0&&(delete p.g[ye],p.h--)))):p&&(p=Ri(p))&&(N=p.g[N.toString()],p=-1,N&&(p=Oe(N,D,j,oe)),(D=p>-1?N[p]:null)&&_t(D))}function _t(p){if(typeof p!="number"&&p&&!p.da){var N=p.src;if(N&&N[fe])tt(N.i,p);else{var D=p.type,j=p.proxy;N.removeEventListener?N.removeEventListener(D,j,p.capture):N.detachEvent?N.detachEvent(zn(D),j):N.addListener&&N.removeListener&&N.removeListener(j),(D=Ri(N))?(tt(D,p),D.h==0&&(D.src=null,N[pt]=null)):qe(p)}}}function zn(p){return p in yt?yt[p]:yt[p]="on"+p}function _i(p,N){if(p.da)p=!0;else{N=new Ze(N,this);const D=p.listener,j=p.ha||p.src;p.fa&&_t(p),p=D.call(j,N)}return p}function Ri(p){return p=p[pt],p instanceof Ue?p:null}var Tn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bt(p){return typeof p=="function"?p:(p[Tn]||(p[Tn]=function(N){return p.handleEvent(N)}),p[Tn])}function Qe(){ne.call(this),this.i=new Ue(this),this.M=this,this.G=null}I(Qe,ne),Qe.prototype[fe]=!0,Qe.prototype.removeEventListener=function(p,N,D,j){nr(this,p,N,D,j)};function pn(p,N){var D,j=p.G;if(j)for(D=[];j;j=j.G)D.push(j);if(p=p.M,j=N.type||N,typeof N=="string")N=new W(N,p);else if(N instanceof W)N.target=N.target||p;else{var oe=N;N=new W(j,p),ke(N,oe)}oe=!0;let ye,Pe;if(D)for(Pe=D.length-1;Pe>=0;Pe--)ye=N.g=D[Pe],oe=je(ye,j,!0,N)&&oe;if(ye=N.g=p,oe=je(ye,j,!0,N)&&oe,oe=je(ye,j,!1,N)&&oe,D)for(Pe=0;Pe<D.length;Pe++)ye=N.g=D[Pe],oe=je(ye,j,!1,N)&&oe}Qe.prototype.N=function(){if(Qe.Z.N.call(this),this.i){var p=this.i;for(const N in p.g){const D=p.g[N];for(let j=0;j<D.length;j++)qe(D[j]);delete p.g[N],p.h--}}this.G=null},Qe.prototype.J=function(p,N,D,j){return this.i.add(String(p),N,!1,D,j)},Qe.prototype.K=function(p,N,D,j){return this.i.add(String(p),N,!0,D,j)};function je(p,N,D,j){if(N=p.i.g[String(N)],!N)return!0;N=N.concat();let oe=!0;for(let ye=0;ye<N.length;++ye){const Pe=N[ye];if(Pe&&!Pe.da&&Pe.capture==D){const ct=Pe.listener,Fn=Pe.ha||Pe.src;Pe.fa&&tt(p.i,Pe),oe=ct.call(Fn,j)!==!1&&oe}}return oe&&!j.defaultPrevented}function qi(p,N){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=_(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:E.setTimeout(p,N||0)}function ps(p){p.g=qi(()=>{p.g=null,p.i&&(p.i=!1,ps(p))},p.l);const N=p.h;p.h=null,p.m.apply(null,N)}class xn extends ne{constructor(N,D){super(),this.m=N,this.l=D,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:ps(this)}N(){super.N(),this.g&&(E.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mr(p){ne.call(this),this.h=p,this.g={}}I(mr,ne);var ui=[];function Yr(p){ot(p.g,function(N,D){this.g.hasOwnProperty(D)&&_t(N)},p),p.g={}}mr.prototype.N=function(){mr.Z.N.call(this),Yr(this)},mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var si=E.JSON.stringify,Qn=E.JSON.parse,Cs=class{stringify(p){return E.JSON.stringify(p,void 0)}parse(p){return E.JSON.parse(p,void 0)}};function xs(){}function Sa(){}var Xt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function De(){W.call(this,"d")}I(De,W);function Kt(){W.call(this,"c")}I(Kt,W);var it={},dn=null;function pr(){return dn=dn||new Qe}it.Ia="serverreachability";function Ss(p){W.call(this,it.Ia,p)}I(Ss,W);function ir(p){const N=pr();pn(N,new Ss(N))}it.STAT_EVENT="statevent";function At(p,N){W.call(this,it.STAT_EVENT,p),this.stat=N}I(At,W);function on(p){const N=pr();pn(N,new At(N,p))}it.Ja="timingevent";function rr(p,N){W.call(this,it.Ja,p),this.size=N}I(rr,W);function sr(p,N){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return E.setTimeout(function(){p()},N)}function Nn(){this.g=!0}Nn.prototype.ua=function(){this.g=!1};function Gs(p,N,D,j,oe,ye){p.info(function(){if(p.g)if(ye){var Pe="",ct=ye.split("&");for(let qt=0;qt<ct.length;qt++){var Fn=ct[qt].split("=");if(Fn.length>1){const wn=Fn[0];Fn=Fn[1];const cr=wn.split("_");Pe=cr.length>=2&&cr[1]=="type"?Pe+(wn+"="+Fn+"&"):Pe+(wn+"=redacted&")}}}else Pe=null;else Pe=ye;return"XMLHTTP REQ ("+j+") [attempt "+oe+"]: "+N+`
`+D+`
`+Pe})}function Hn(p,N,D,j,oe,ye,Pe){p.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+oe+"]: "+N+`
`+D+`
`+ye+" "+Pe})}function Ai(p,N,D,j){p.info(function(){return"XMLHTTP TEXT ("+N+"): "+Oi(p,D)+(j?" "+j:"")})}function xr(p,N){p.info(function(){return"TIMEOUT: "+N})}Nn.prototype.info=function(){};function Oi(p,N){if(!p.g)return N;if(!N)return null;try{const ye=JSON.parse(N);if(ye){for(p=0;p<ye.length;p++)if(Array.isArray(ye[p])){var D=ye[p];if(!(D.length<2)){var j=D[1];if(Array.isArray(j)&&!(j.length<1)){var oe=j[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(let Pe=1;Pe<j.length;Pe++)j[Pe]=""}}}}return si(ye)}catch{return N}}var te={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},lt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kt;function sn(){}I(sn,xs),sn.prototype.g=function(){return new XMLHttpRequest},kt=new sn;function ln(p){return encodeURIComponent(String(p))}function Zn(p){var N=1;p=p.split(":");const D=[];for(;N>0&&p.length;)D.push(p.shift()),N--;return p.length&&D.push(p.join(":")),D}function Ve(p,N,D,j){this.j=p,this.i=N,this.l=D,this.S=j||1,this.V=new mr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hi}function hi(){this.i=null,this.g="",this.h=!1}var en={},Ut={};function vn(p,N,D){p.M=1,p.A=Xi(kn(N)),p.u=D,p.R=!0,Es(p,null)}function Es(p,N){p.F=Date.now(),Xr(p),p.B=kn(p.A);var D=p.B,j=p.S;Array.isArray(j)||(j=[String(j)]),cn(D.i,"t",j),p.C=0,D=p.j.L,p.h=new hi,p.g=Ma(p.j,D?N:null,!p.u),p.P>0&&(p.O=new xn(_(p.Y,p,p.g),p.P)),N=p.V,D=p.g,j=p.ba;var oe="readystatechange";Array.isArray(oe)||(oe&&(ui[0]=oe.toString()),oe=ui);for(let ye=0;ye<oe.length;ye++){const Pe=Jt(D,oe[ye],j||N.handleEvent,!1,N.h||N);if(!Pe)break;N.g[Pe.key]=Pe}N=p.J?ie(p.J):{},p.u?(p.v||(p.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,N)):(p.v="GET",p.g.ea(p.B,p.v,null,N)),ir(),Gs(p.i,p.v,p.B,p.l,p.S,p.u)}Ve.prototype.ba=function(p){p=p.target;const N=this.O;N&&_r(p)==3?N.j():this.Y(p)},Ve.prototype.Y=function(p){try{if(p==this.g)e:{const ct=_r(this.g),Fn=this.g.ya(),qt=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||Yn(this.g)))){this.K||ct!=4||Fn==7||(Fn==8||qt<=0?ir(3):ir(2)),Cn(this);var N=this.g.ca();this.X=N;var D=Ia(this);if(this.o=N==200,Hn(this.i,this.v,this.B,this.l,this.S,ct,N),this.o){if(this.U&&!this.L){t:{if(this.g){var j,oe=this.g;if((j=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(j)){var ye=j;break t}}ye=null}if(p=ye)Ai(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wi(this,p);else{this.o=!1,this.m=3,on(12),Yi(this),Rt(this);break e}}if(this.R){p=!0;let wn;for(;!this.K&&this.C<D.length;)if(wn=il(this,D),wn==Ut){ct==4&&(this.m=4,on(14),p=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==en){this.m=4,on(15),Ai(this.i,this.l,D,"[Invalid Chunk]"),p=!1;break}else Ai(this.i,this.l,wn,null),wi(this,wn);if(ar(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||D.length!=0||this.h.h||(this.m=1,on(16),p=!1),this.o=this.o&&p,!p)Ai(this.i,this.l,D,"[Invalid Chunked Response]"),Yi(this),Rt(this);else if(D.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),pe(Pe),Pe.P=!0,on(11))}}else Ai(this.i,this.l,D,null),wi(this,D);ct==4&&Yi(this),this.o&&!this.K&&(ct==4?Qs(this.j,this):(this.o=!1,Xr(this)))}else lr(this.g),N==400&&D.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),Yi(this),Rt(this)}}}catch{}finally{}};function Ia(p){if(!ar(p))return p.g.la();const N=Yn(p.g);if(N==="")return"";let D="";const j=N.length,oe=_r(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Yi(p),Rt(p),"";p.h.i=new E.TextDecoder}for(let ye=0;ye<j;ye++)p.h.h=!0,D+=p.h.i.decode(N[ye],{stream:!(oe&&ye==j-1)});return N.length=0,p.h.g+=D,p.C=0,p.h.g}function ar(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function il(p,N){var D=p.C,j=N.indexOf(`
`,D);return j==-1?Ut:(D=Number(N.substring(D,j)),isNaN(D)?en:(j+=1,j+D>N.length?Ut:(N=N.slice(j,j+D),p.C=j+D,N)))}Ve.prototype.cancel=function(){this.K=!0,Yi(this)};function Xr(p){p.T=Date.now()+p.H,Di(p,p.H)}function Di(p,N){if(p.D!=null)throw Error("WatchDog timer not null");p.D=sr(_(p.aa,p),N)}function Cn(p){p.D&&(E.clearTimeout(p.D),p.D=null)}Ve.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(xr(this.i,this.B),this.M!=2&&(ir(),on(17)),Yi(this),this.m=2,Rt(this)):Di(this,this.T-p)};function Rt(p){p.j.I==0||p.K||Qs(p.j,p)}function Yi(p){Cn(p);var N=p.O;N&&typeof N.dispose=="function"&&N.dispose(),p.O=null,Yr(p.V),p.g&&(N=p.g,p.g=null,N.abort(),N.dispose())}function wi(p,N){try{var D=p.j;if(D.I!=0&&(D.g==p||Mi(D.h,p))){if(!p.L&&Mi(D.h,p)&&D.I==3){try{var j=D.Ba.g.parse(N)}catch{j=null}if(Array.isArray(j)&&j.length==3){var oe=j;if(oe[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<p.F)Un(D),As(D);else break e;Ws(D),on(18)}}else D.xa=oe[1],0<D.xa-D.K&&oe[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=sr(_(D.Va,D),6e3));$t(D.h)<=1&&D.ta&&(D.ta=void 0)}else Qr(D,11)}else if((p.L||D.g==p)&&Un(D),!Y(N))for(oe=D.Ba.g.parse(N),N=0;N<oe.length;N++){let qt=oe[N];const wn=qt[0];if(!(wn<=D.K))if(D.K=wn,qt=qt[1],D.I==2)if(qt[0]=="c"){D.M=qt[1],D.ba=qt[2];const cr=qt[3];cr!=null&&(D.ka=cr,D.j.info("VER="+D.ka));const $r=qt[4];$r!=null&&(D.za=$r,D.j.info("SVER="+D.za));const Si=qt[5];Si!=null&&typeof Si=="number"&&Si>0&&(j=1.5*Si,D.O=j,D.j.info("backChannelRequestTimeoutMs_="+j)),j=D;const ur=p.g;if(ur){const Js=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Js){var ye=j.h;ye.g||Js.indexOf("spdy")==-1&&Js.indexOf("quic")==-1&&Js.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(wo(ye,ye.h),ye.h=null))}if(j.G){const es=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;es&&(j.wa=es,rt(j.J,j.G,es))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-p.F,D.j.info("Handshake RTT: "+D.T+"ms")),j=D;var Pe=p;if(j.na=sl(j,j.L?j.ba:null,j.W),Pe.L){Vt(j.h,Pe);var ct=Pe,Fn=j.O;Fn&&(ct.H=Fn),ct.D&&(Cn(ct),Xr(ct)),j.g=Pe}else Pr(j);D.i.length>0&&Wr(D)}else qt[0]!="stop"&&qt[0]!="close"||Qr(D,7);else D.I==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?Qr(D,7):Ra(D):qt[0]!="noop"&&D.l&&D.l.qa(qt),D.A=0)}}ir(4)}catch{}}var Bn=class{constructor(p,N){this.g=p,this.map=N}};function Ie(p){this.l=p||10,E.PerformanceNavigationTiming?(p=E.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(E.chrome&&E.chrome.loadTimes&&E.chrome.loadTimes()&&E.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ao(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function $t(p){return p.h?1:p.g?p.g.size:0}function Mi(p,N){return p.h?p.h==N:p.g?p.g.has(N):!1}function wo(p,N){p.g?p.g.add(N):p.h=N}function Vt(p,N){p.h&&p.h==N?p.h=null:p.g&&p.g.has(N)&&p.g.delete(N)}Ie.prototype.cancel=function(){if(this.i=Ot(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ot(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let N=p.i;for(const D of p.g.values())N=N.concat(D.G);return N}return k(p.i)}var Tt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Is(p,N){if(p){p=p.split("&");for(let D=0;D<p.length;D++){const j=p[D].indexOf("=");let oe,ye=null;j>=0?(oe=p[D].substring(0,j),ye=p[D].substring(j+1)):oe=p[D],N(oe,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function Li(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;p instanceof Li?(this.l=p.l,St(this,p.j),this.o=p.o,this.g=p.g,Pi(this,p.u),this.h=p.h,bo(this,To(p.i)),this.m=p.m):p&&(N=String(p).match(Tt))?(this.l=!1,St(this,N[1]||"",!0),this.o=Kr(N[2]||""),this.g=Kr(N[3]||"",!0),Pi(this,N[4]),this.h=Kr(N[5]||"",!0),bo(this,N[6]||"",!0),this.m=Kr(N[7]||"")):(this.l=!1,this.i=new ai(null,this.l))}Li.prototype.toString=function(){const p=[];var N=this.j;N&&p.push(Er(N,Gn,!0),":");var D=this.g;return(D||N=="file")&&(p.push("//"),(N=this.o)&&p.push(Er(N,Gn,!0),"@"),p.push(ln(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&p.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&p.push("/"),p.push(Er(D,D.charAt(0)=="/"?H:ce,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",Er(D,qn)),p.join("")},Li.prototype.resolve=function(p){const N=kn(this);let D=!!p.j;D?St(N,p.j):D=!!p.o,D?N.o=p.o:D=!!p.g,D?N.g=p.g:D=p.u!=null;var j=p.h;if(D)Pi(N,p.u);else if(D=!!p.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var oe=N.h.lastIndexOf("/");oe!=-1&&(j=N.h.slice(0,oe+1)+j)}if(oe=j,oe==".."||oe==".")j="";else if(oe.indexOf("./")!=-1||oe.indexOf("/.")!=-1){j=oe.lastIndexOf("/",0)==0,oe=oe.split("/");const ye=[];for(let Pe=0;Pe<oe.length;){const ct=oe[Pe++];ct=="."?j&&Pe==oe.length&&ye.push(""):ct==".."?((ye.length>1||ye.length==1&&ye[0]!="")&&ye.pop(),j&&Pe==oe.length&&ye.push("")):(ye.push(ct),j=!0)}j=ye.join("/")}else j=oe}return D?N.h=j:D=p.i.toString()!=="",D?bo(N,To(p.i)):D=!!p.m,D&&(N.m=p.m),N};function kn(p){return new Li(p)}function St(p,N,D){p.j=D?Kr(N,!0):N,p.j&&(p.j=p.j.replace(/:$/,""))}function Pi(p,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);p.u=N}else p.u=null}function bo(p,N,D){N instanceof ai?(p.i=N,Rs(p.i,p.l)):(D||(N=Er(N,Ye)),p.i=new ai(N,p.l))}function rt(p,N,D){p.i.set(N,D)}function Xi(p){return rt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Kr(p,N){return p?N?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Er(p,N,D){return typeof p=="string"?(p=encodeURI(p).replace(N,wt),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function wt(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Gn=/[#\/\?@]/g,ce=/[#\?:]/g,H=/[#\?]/g,Ye=/[#\?@]/g,qn=/#/g;function ai(p,N){this.h=this.g=null,this.i=p||null,this.j=!!N}function Ki(p){p.g||(p.g=new Map,p.h=0,p.i&&Is(p.i,function(N,D){p.add(decodeURIComponent(N.replace(/\+/g," ")),D)}))}r=ai.prototype,r.add=function(p,N){Ki(this),this.i=null,p=Ns(this,p);let D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(N),this.h+=1,this};function Na(p,N){Ki(p),N=Ns(p,N),p.g.has(N)&&(p.i=null,p.h-=p.g.get(N).length,p.g.delete(N))}function Ci(p,N){return Ki(p),N=Ns(p,N),p.g.has(N)}r.forEach=function(p,N){Ki(this),this.g.forEach(function(D,j){D.forEach(function(oe){p.call(N,oe,j,this)},this)},this)};function We(p,N){Ki(p);let D=[];if(typeof N=="string")Ci(p,N)&&(D=D.concat(p.g.get(Ns(p,N))));else for(p=Array.from(p.g.values()),N=0;N<p.length;N++)D=D.concat(p[N]);return D}r.set=function(p,N){return Ki(this),this.i=null,p=Ns(this,p),Ci(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[N]),this.h+=1,this},r.get=function(p,N){return p?(p=We(this,p),p.length>0?String(p[0]):N):N};function cn(p,N,D){Na(p,N),D.length>0&&(p.i=null,p.g.set(Ns(p,N),k(D)),p.h+=D.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],N=Array.from(this.g.keys());for(let j=0;j<N.length;j++){var D=N[j];const oe=ln(D);D=We(this,D);for(let ye=0;ye<D.length;ye++){let Pe=oe;D[ye]!==""&&(Pe+="="+ln(D[ye])),p.push(Pe)}}return this.i=p.join("&")};function To(p){const N=new ai;return N.i=p.i,p.g&&(N.g=new Map(p.g),N.h=p.h),N}function Ns(p,N){return N=String(N),p.j&&(N=N.toLowerCase()),N}function Rs(p,N){N&&!p.j&&(Ki(p),p.i=null,p.g.forEach(function(D,j){const oe=j.toLowerCase();j!=oe&&(Na(this,j),cn(this,oe,D))},p)),p.j=N}function Wi(p,N){const D=new Nn;if(E.Image){const j=new Image;j.onload=C(yr,D,"TestLoadImage: loaded",!0,N,j),j.onerror=C(yr,D,"TestLoadImage: error",!1,N,j),j.onabort=C(yr,D,"TestLoadImage: abort",!1,N,j),j.ontimeout=C(yr,D,"TestLoadImage: timeout",!1,N,j),E.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=p}else N(!1)}function qs(p,N){const D=new Nn,j=new AbortController,oe=setTimeout(()=>{j.abort(),yr(D,"TestPingServer: timeout",!1,N)},1e4);fetch(p,{signal:j.signal}).then(ye=>{clearTimeout(oe),ye.ok?yr(D,"TestPingServer: ok",!0,N):yr(D,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(oe),yr(D,"TestPingServer: error",!1,N)})}function yr(p,N,D,j,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),j(D)}catch{}}function An(){this.g=new Cs}function Qi(p){this.i=p.Sb||null,this.h=p.ab||!1}I(Qi,xs),Qi.prototype.g=function(){return new Zi(this.i,this.h)};function Zi(p,N){Qe.call(this),this.H=p,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(Zi,Qe),r=Zi.prototype,r.open=function(p,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=N,this.readyState=1,nt(this)},r.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(N.body=p),(this.H||E).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},r.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,nt(this)),this.g&&(this.readyState=3,nt(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof E.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Je(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Je(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}r.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var N=p.value?p.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!p.done}))&&(this.response=this.responseText+=N)}p.done?Os(this):nt(this),this.readyState==3&&Je(this)}},r.Oa=function(p){this.g&&(this.response=this.responseText=p,Os(this))},r.Na=function(p){this.g&&(this.response=p,Os(this))},r.ga=function(){this.g&&Os(this)};function Os(p){p.readyState=4,p.l=null,p.j=null,p.B=null,nt(p)}r.setRequestHeader=function(p,N){this.A.append(p,N)},r.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],N=this.h.entries();for(var D=N.next();!D.done;)D=D.value,p.push(D[0]+": "+D[1]),D=N.next();return p.join(`\r
`)};function nt(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function un(p){let N="";return ot(p,function(D,j){N+=j,N+=":",N+=D,N+=`\r
`}),N}function Ys(p,N,D){e:{for(j in D){var j=!1;break e}j=!0}j||(D=un(D),typeof p=="string"?D!=null&&ln(D):rt(p,N,D))}function tn(p){Qe.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(tn,Qe);var Dr=/^https?$/i,Mr=["POST","PUT"];r=tn.prototype,r.Fa=function(p){this.H=p},r.ea=function(p,N,D,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);N=N?N.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kt.g(),this.g.onreadystatechange=M(_(this.Ca,this));try{this.B=!0,this.g.open(N,String(p),!0),this.B=!1}catch(ye){Xs(this,ye);return}if(p=D||"",D=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var oe in j)D.set(oe,j[oe]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const ye of j.keys())D.set(ye,j.get(ye));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(D.keys()).find(ye=>ye.toLowerCase()=="content-type"),oe=E.FormData&&p instanceof E.FormData,!(Array.prototype.indexOf.call(Mr,N,void 0)>=0)||j||oe||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Pe]of D)this.g.setRequestHeader(ye,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(ye){Xs(this,ye)}};function Xs(p,N){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=N,p.o=5,ys(p),or(p)}function ys(p){p.A||(p.A=!0,pn(p,"complete"),pn(p,"error"))}r.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,pn(this,"complete"),pn(this,"abort"),or(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),or(this,!0)),tn.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Lr(this):this.Xa())},r.Xa=function(){Lr(this)};function Lr(p){if(p.h&&typeof d<"u"){if(p.v&&_r(p)==4)setTimeout(p.Ca.bind(p),0);else if(pn(p,"readystatechange"),_r(p)==4){p.h=!1;try{const ye=p.ca();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var D;if(!(D=N)){var j;if(j=ye===0){let Pe=String(p.D).match(Tt)[1]||null;!Pe&&E.self&&E.self.location&&(Pe=E.self.location.protocol.slice(0,-1)),j=!Dr.test(Pe?Pe.toLowerCase():"")}D=j}if(D)pn(p,"complete"),pn(p,"success");else{p.o=6;try{var oe=_r(p)>2?p.g.statusText:""}catch{oe=""}p.l=oe+" ["+p.ca()+"]",ys(p)}}finally{or(p)}}}}function or(p,N){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const D=p.g;p.g=null,N||pn(p,"ready");try{D.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function _r(p){return p.g?p.g.readyState:0}r.ca=function(){try{return _r(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(p){if(this.g){var N=this.g.responseText;return p&&N.indexOf(p)==0&&(N=N.substring(p.length)),Qn(N)}};function Yn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function lr(p){const N={};p=(p.g&&_r(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<p.length;j++){if(Y(p[j]))continue;var D=Zn(p[j]);const oe=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const ye=N[oe]||[];N[oe]=ye,ye.push(D)}ft(N,function(j){return j.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rn(p,N,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||N}function _s(p){this.za=0,this.i=[],this.j=new Nn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rn("baseRetryDelayMs",5e3,p),this.Za=Rn("retryDelaySeedMs",1e4,p),this.Ta=Rn("forwardChannelMaxRetries",2,p),this.va=Rn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ie(p&&p.concurrentRequestLimit),this.Ba=new An,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=_s.prototype,r.ka=8,r.I=1,r.connect=function(p,N,D,j){on(0),this.W=p,this.H=N||{},D&&j!==void 0&&(this.H.OSID=D,this.H.OAID=j),this.F=this.X,this.J=sl(this,null,this.W),Wr(this)};function Ra(p){if(Oa(p),p.I==3){var N=p.V++,D=kn(p.J);if(rt(D,"SID",p.M),rt(D,"RID",N),rt(D,"TYPE","terminate"),Ds(p,D),N=new Ve(p,p.j,N),N.M=2,N.A=Xi(kn(D)),D=!1,E.navigator&&E.navigator.sendBeacon)try{D=E.navigator.sendBeacon(N.A.toString(),"")}catch{}!D&&E.Image&&(new Image().src=N.A,D=!0),D||(N.g=Ma(N.j,null),N.g.ea(N.A)),N.F=Date.now(),Xr(N)}rl(p)}function As(p){p.g&&(pe(p),p.g.cancel(),p.g=null)}function Oa(p){As(p),p.v&&(E.clearTimeout(p.v),p.v=null),Un(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&E.clearTimeout(p.m),p.m=null)}function Wr(p){if(!Ao(p.h)&&!p.m){p.m=!0;var N=p.Ea;Fe||G(),Be||(Fe(),Be=!0),F.add(N,p),p.D=0}}function Da(p,N){return $t(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=N.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=sr(_(p.Ea,p,N),vo(p,p.D)),p.D++,!0)}r.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const oe=new Ve(this,this.j,p);let ye=this.o;if(this.U&&(ye?(ye=ie(ye),ke(ye,this.U)):ye=this.U),this.u!==null||this.R||(oe.J=ye,ye=null),this.S)e:{for(var N=0,D=0;D<this.i.length;D++){t:{var j=this.i[D];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(N+=j,N>4096){N=D;break e}if(N===4096||D===this.i.length-1){N=D+1;break e}}N=1e3}else N=1e3;N=Ks(this,oe,N),D=kn(this.J),rt(D,"RID",p),rt(D,"CVER",22),this.G&&rt(D,"X-HTTP-Session-Id",this.G),Ds(this,D),ye&&(this.R?N="headers="+ln(un(ye))+"&"+N:this.u&&Ys(D,this.u,ye)),wo(this.h,oe),this.Ra&&rt(D,"TYPE","init"),this.S?(rt(D,"$req",N),rt(D,"SID","null"),oe.U=!0,vn(oe,D,null)):vn(oe,D,N),this.I=2}}else this.I==3&&(p?Wt(this,p):this.i.length==0||Ao(this.h)||Wt(this))};function Wt(p,N){var D;N?D=N.l:D=p.V++;const j=kn(p.J);rt(j,"SID",p.M),rt(j,"RID",D),rt(j,"AID",p.K),Ds(p,j),p.u&&p.o&&Ys(j,p.u,p.o),D=new Ve(p,p.j,D,p.D+1),p.u===null&&(D.J=p.o),N&&(p.i=N.G.concat(p.i)),N=Ks(p,D,1e3),D.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),wo(p.h,D),vn(D,j,N)}function Ds(p,N){p.H&&ot(p.H,function(D,j){rt(N,j,D)}),p.l&&ot({},function(D,j){rt(N,j,D)})}function Ks(p,N,D){D=Math.min(p.i.length,D);const j=p.l?_(p.l.Ka,p.l,p):null;e:{var oe=p.i;let ct=-1;for(;;){const Fn=["count="+D];ct==-1?D>0?(ct=oe[0].g,Fn.push("ofs="+ct)):ct=0:Fn.push("ofs="+ct);let qt=!0;for(let wn=0;wn<D;wn++){var ye=oe[wn].g;const cr=oe[wn].map;if(ye-=ct,ye<0)ct=Math.max(0,oe[wn].g-100),qt=!1;else try{ye="req"+ye+"_"||"";try{var Pe=cr instanceof Map?cr:Object.entries(cr);for(const[$r,Si]of Pe){let ur=Si;T(Si)&&(ur=si(Si)),Fn.push(ye+$r+"="+encodeURIComponent(ur))}}catch($r){throw Fn.push(ye+"type="+encodeURIComponent("_badmap")),$r}}catch{j&&j(cr)}}if(qt){Pe=Fn.join("&");break e}}Pe=void 0}return p=p.i.splice(0,D),N.G=p,Pe}function Pr(p){if(!p.g&&!p.v){p.Y=1;var N=p.Da;Fe||G(),Be||(Fe(),Be=!0),F.add(N,p),p.A=0}}function Ws(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=sr(_(p.Da,p),vo(p,p.A)),p.A++,!0)}r.Da=function(){if(this.v=null,dt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=sr(_(this.Wa,this),p)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),As(this),dt(this))};function pe(p){p.B!=null&&(E.clearTimeout(p.B),p.B=null)}function dt(p){p.g=new Ve(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var N=kn(p.na);rt(N,"RID","rpc"),rt(N,"SID",p.M),rt(N,"AID",p.K),rt(N,"CI",p.F?"0":"1"),!p.F&&p.ia&&rt(N,"TO",p.ia),rt(N,"TYPE","xmlhttp"),Ds(p,N),p.u&&p.o&&Ys(N,p.u,p.o),p.O&&(p.g.H=p.O);var D=p.g;p=p.ba,D.M=1,D.A=Xi(kn(N)),D.u=null,D.R=!0,Es(D,p)}r.Va=function(){this.C!=null&&(this.C=null,As(this),Ws(this),on(19))};function Un(p){p.C!=null&&(E.clearTimeout(p.C),p.C=null)}function Qs(p,N){var D=null;if(p.g==N){Un(p),pe(p),p.g=null;var j=2}else if(Mi(p.h,N))D=N.G,Vt(p.h,N),j=1;else return;if(p.I!=0){if(N.o)if(j==1){D=N.u?N.u.length:0,N=Date.now()-N.F;var oe=p.D;j=pr(),pn(j,new rr(j,D)),Wr(p)}else Pr(p);else if(oe=N.m,oe==3||oe==0&&N.X>0||!(j==1&&Da(p,N)||j==2&&Ws(p)))switch(D&&D.length>0&&(N=p.h,N.i=N.i.concat(D)),oe){case 1:Qr(p,5);break;case 4:Qr(p,10);break;case 3:Qr(p,6);break;default:Qr(p,2)}}}function vo(p,N){let D=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(D*=2),D*N}function Qr(p,N){if(p.j.info("Error code "+N),N==2){var D=_(p.bb,p),j=p.Ua;const oe=!j;j=new Li(j||"//www.google.com/images/cleardot.gif"),E.location&&E.location.protocol=="http"||St(j,"https"),Xi(j),oe?Wi(j.toString(),D):qs(j.toString(),D)}else on(2);p.I=0,p.l&&p.l.pa(N),rl(p),Oa(p)}r.bb=function(p){p?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function rl(p){if(p.I=0,p.ja=[],p.l){const N=Ot(p.h);(N.length!=0||p.i.length!=0)&&(X(p.ja,N),X(p.ja,p.i),p.h.i.length=0,k(p.i),p.i.length=0),p.l.oa()}}function sl(p,N,D){var j=D instanceof Li?kn(D):new Li(D);if(j.g!="")N&&(j.g=N+"."+j.g),Pi(j,j.u);else{var oe=E.location;j=oe.protocol,N=N?N+"."+oe.hostname:oe.hostname,oe=+oe.port;const ye=new Li(null);j&&St(ye,j),N&&(ye.g=N),oe&&Pi(ye,oe),D&&(ye.h=D),j=ye}return D=p.G,N=p.wa,D&&N&&rt(j,D,N),rt(j,"VER",p.ka),Ds(p,j),j}function Ma(p,N,D){if(N&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=p.Aa&&!p.ma?new tn(new Qi({ab:D})):new tn(p.ma),N.Fa(p.L),N}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vn(){}r=Vn.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Zr(){}Zr.prototype.g=function(p,N){return new It(p,N)};function It(p,N){Qe.call(this),this.g=new _s(N),this.l=p,this.h=N&&N.messageUrlParams||null,p=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(p?p["X-WebChannel-Content-Type"]=N.messageContentType:p={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(p?p["X-WebChannel-Client-Profile"]=N.sa:p={"X-WebChannel-Client-Profile":N.sa}),this.g.U=p,(p=N&&N.Qb)&&!Y(p)&&(this.g.u=p),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!Y(N)&&(this.g.G=N,p=this.h,p!==null&&N in p&&(p=this.h,N in p&&delete p[N])),this.j=new Dt(this)}I(It,Qe),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){Ra(this.g)},It.prototype.o=function(p){var N=this.g;if(typeof p=="string"){var D={};D.__data__=p,p=D}else this.v&&(D={},D.__data__=si(p),p=D);N.i.push(new Bn(N.Ya++,p)),N.I==3&&Wr(N)},It.prototype.N=function(){this.g.l=null,delete this.j,Ra(this.g),delete this.g,It.Z.N.call(this)};function Zs(p){De.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var N=p.__sm__;if(N){e:{for(const D in N){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,N=N!==null&&p in N?N[p]:void 0),this.data=N}else this.data=p}I(Zs,De);function Jr(){Kt.call(this),this.status=1}I(Jr,Kt);function Dt(p){this.g=p}I(Dt,Vn),Dt.prototype.ra=function(){pn(this.g,"a")},Dt.prototype.qa=function(p){pn(this.g,new Zs(p))},Dt.prototype.pa=function(p){pn(this.g,new Jr)},Dt.prototype.oa=function(){pn(this.g,"b")},Zr.prototype.createWebChannel=Zr.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,C_=function(){return new Zr},v_=function(){return pr()},T_=it,p1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},te.NO_ERROR=0,te.TIMEOUT=8,te.HTTP_ERROR=6,Hh=te,lt.COMPLETE="complete",b_=lt,Sa.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",Qe.prototype.listen=Qe.prototype.J,Hc=Sa,tn.prototype.listenOnce=tn.prototype.K,tn.prototype.getLastError=tn.prototype.Ha,tn.prototype.getLastErrorCode=tn.prototype.ya,tn.prototype.getStatus=tn.prototype.ca,tn.prototype.getResponseJson=tn.prototype.La,tn.prototype.getResponseText=tn.prototype.la,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Fa,w_=tn}).apply(typeof Rh<"u"?Rh:typeof self<"u"?self:typeof window<"u"?window:{});const yx="@firebase/firestore",_x="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}er.UNAUTHENTICATED=new er(null),er.GOOGLE_CREDENTIALS=new er("google-credentials-uid"),er.FIRST_PARTY=new er("first-party-uid"),er.MOCK_USER=new er("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new m_("@firebase/firestore");function Ll(){return Qo.logLevel}function He(r,...e){if(Qo.logLevel<=Zt.DEBUG){const n=e.map($1);Qo.debug(`Firestore (${$l}): ${r}`,...n)}}function wa(r,...e){if(Qo.logLevel<=Zt.ERROR){const n=e.map($1);Qo.error(`Firestore (${$l}): ${r}`,...n)}}function ql(r,...e){if(Qo.logLevel<=Zt.WARN){const n=e.map($1);Qo.warn(`Firestore (${$l}): ${r}`,...n)}}function $1(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(r,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,S_(r,o,n)}function S_(r,e,n){let o=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw wa(o),new Error(o)}function fn(r,e,n,o){let u="Unexpected state";typeof n=="string"?u=n:o=n,r||S_(e,u,o)}function mt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends Jl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(er.UNAUTHENTICATED)))}shutdown(){}}class KS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class WS{constructor(e){this.t=e,this.currentUser=er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fn(this.o===void 0,42304);let o=this.i;const u=b=>this.i!==o?(o=this.i,n(b)):Promise.resolve();let d=new ya;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new ya,e.enqueueRetryable((()=>u(this.currentUser)))};const E=()=>{const b=d;e.enqueueRetryable((async()=>{await b.promise,await u(this.currentUser)}))},T=b=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),E())};this.t.onInit((b=>T(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?T(b):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new ya)}}),0),E()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(fn(typeof o.accessToken=="string",31837,{l:o}),new I_(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fn(e===null||typeof e=="string",2055,{h:e}),new er(e)}}class QS{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=er.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZS{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new QS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(er.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ax{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,DS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fn(this.o===void 0,3512);const o=d=>{d.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const E=d.token!==this.m;return this.m=d.token,He("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?n(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>o(d)))};const u=d=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>u(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?u(d):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ax(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(fn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ax(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<r;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const u=$S(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<n&&(o+=e.charAt(u[d]%62))}return o}}function Ht(r,e){return r<e?-1:r>e?1:0}function x1(r,e){const n=Math.min(r.length,e.length);for(let o=0;o<n;o++){const u=r.charAt(o),d=e.charAt(o);if(u!==d)return Z0(u)===Z0(d)?Ht(u,d):Z0(u)?1:-1}return Ht(r.length,e.length)}const e4=55296,t4=57343;function Z0(r){const e=r.charCodeAt(0);return e>=e4&&e<=t4}function Yl(r,e,n){return r.length===e.length&&r.every(((o,u)=>n(o,e[u])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="__name__";class Us{constructor(e,n,o){n===void 0?n=0:n>e.length&&at(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&at(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Us.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Us?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const d=Us.compareSegments(e.get(u),n.get(u));if(d!==0)return d}return Ht(e.length,n.length)}static compareSegments(e,n){const o=Us.isNumericId(e),u=Us.isNumericId(n);return o&&!u?-1:!o&&u?1:o&&u?Us.extractNumericId(e).compare(Us.extractNumericId(n)):x1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oo.fromString(e.substring(4,e.length-2))}}class Sn extends Us{construct(e,n,o){return new Sn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((u=>u.length>0)))}return new Sn(n)}static emptyPath(){return new Sn([])}}const n4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zi extends Us{construct(e,n,o){return new zi(e,n,o)}static isValidIdentifier(e){return n4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wx}static keyField(){return new zi([wx])}static fromServerFormat(e){const n=[];let o="",u=0;const d=()=>{if(o.length===0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let E=!1;for(;u<e.length;){const T=e[u];if(T==="\\"){if(u+1===e.length)throw new ze(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[u+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new ze(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=b,u+=2}else T==="`"?(E=!E,u++):T!=="."||E?(o+=T,u++):(d(),u++)}if(d(),E)throw new ze(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zi(n)}static emptyPath(){return new zi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.path=e}static fromPath(e){return new et(Sn.fromString(e))}static fromName(e){return new et(Sn.fromString(e).popFirst(5))}static empty(){return new et(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new Sn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(r,e,n){if(!n)throw new ze(Ce.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function i4(r,e,n,o){if(e===!0&&o===!0)throw new ze(Ce.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function bx(r){if(!et.isDocumentKey(r))throw new ze(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Tx(r){if(et.isDocumentKey(r))throw new ze(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function R_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Sf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":at(12329,{type:typeof r})}function Rr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ze(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sf(r);throw new ze(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(r,e){const n={typeString:r};return e&&(n.value=e),n}function gu(r,e){if(!R_(r))throw new ze(Ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const u=e[o].typeString,d="value"in e[o]?{value:e[o].value}:void 0;if(!(o in r)){n=`JSON missing required field: '${o}'`;break}const E=r[o];if(u&&typeof E!==u){n=`JSON field '${o}' must be a ${u}.`;break}if(d!==void 0&&E!==d.value){n=`Expected '${o}' field to equal '${d.value}'`;break}}if(n)throw new ze(Ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=-62135596800,Cx=1e6;class Ln{static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*Cx);return new Ln(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vx)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cx}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ln._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gu(e,Ln._jsonSchema))return new Ln(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ln._jsonSchemaVersion="firestore/timestamp/1.0",Ln._jsonSchema={type:Ei("string",Ln._jsonSchemaVersion),seconds:Ei("number"),nanoseconds:Ei("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Ln(0,0))}static max(){return new ht(new Ln(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function r4(r,e){const n=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,u=ht.fromTimestamp(o===1e9?new Ln(n+1,0):new Ln(n,o));return new co(u,et.empty(),e)}function s4(r){return new co(r.readTime,r.key,su)}class co{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new co(ht.min(),et.empty(),su)}static max(){return new co(ht.max(),et.empty(),su)}}function a4(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=et.comparator(r.documentKey,e.documentKey),n!==0?n:Ht(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(r){if(r.code!==Ce.FAILED_PRECONDITION||r.message!==o4)throw r;He("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ne(((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(n,d).next(o,u)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ne?n:Ne.resolve(n)}catch(n){return Ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ne.reject(n)}static resolve(e){return new Ne(((n,o)=>{n(e)}))}static reject(e){return new Ne(((n,o)=>{o(e)}))}static waitFor(e){return new Ne(((n,o)=>{let u=0,d=0,E=!1;e.forEach((T=>{++u,T.next((()=>{++d,E&&d===u&&n()}),(b=>o(b)))})),E=!0,d===u&&n()}))}static or(e){let n=Ne.resolve(!1);for(const o of e)n=n.next((u=>u?Ne.resolve(u):o()));return n}static forEach(e,n){const o=[];return e.forEach(((u,d)=>{o.push(n.call(this,u,d))})),this.waitFor(o)}static mapArray(e,n){return new Ne(((o,u)=>{const d=e.length,E=new Array(d);let T=0;for(let b=0;b<d;b++){const _=b;n(e[_]).next((C=>{E[_]=C,++T,T===d&&o(E)}),(C=>u(C)))}}))}static doWhile(e,n){return new Ne(((o,u)=>{const d=()=>{e()===!0?n().next((()=>{d()}),u):o()};d()}))}}function c4(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tc(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}If.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg=-1;function Nf(r){return r==null}function sf(r){return r===0&&1/r==-1/0}function u4(r){return typeof r=="number"&&Number.isInteger(r)&&!sf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="";function h4(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Sx(e)),e=f4(r.get(n),e);return Sx(e)}function f4(r,e){let n=e;const o=r.length;for(let u=0;u<o;u++){const d=r.charAt(u);switch(d){case"\0":n+="";break;case O_:n+="";break;default:n+=d}}return n}function Sx(r){return r+O_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Eo(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function D_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){this.comparator=e,this.root=n||ji.EMPTY}insert(e,n){return new Wn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ji.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ji.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(u===0)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}}class Oh{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=n?o(e.key,n):1,n&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ji{constructor(e,n,o,u,d){this.key=e,this.value=n,this.color=o??ji.RED,this.left=u??ji.EMPTY,this.right=d??ji.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,d){return new ji(e??this.key,n??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,n,o),null):d===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ji.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(e,u.key)===0){if(u.right.isEmpty())return ji.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ji.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ji.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw at(27949);return e+(this.isRed()?0:1)}}ji.EMPTY=null,ji.RED=!0,ji.BLACK=!1;ji.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(e,n,o,u,d){return this}insert(e,n,o){return new ji(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nx(this.data.getIterator())}getIteratorFrom(e){return new Nx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,d=o.getNext().key;if(this.comparator(u,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new vi(this.comparator);return n.data=e,n}}class Nx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.fields=e,e.sort(zi.comparator)}static empty(){return new qr([])}unionWith(e){let n=new vi(zi.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new qr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new M_("Invalid base64 string: "+d):d}})(e);return new Hi(n)}static fromUint8Array(e){const n=(function(u){let d="";for(let E=0;E<u.length;++E)d+=String.fromCharCode(u[E]);return d})(e);return new Hi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hi.EMPTY_BYTE_STRING=new Hi("");const d4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(r){if(fn(!!r,39018),typeof r=="string"){let e=0;const n=d4.exec(r);if(fn(!!n,46558,{timestamp:r}),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ci(r.seconds),nanos:ci(r.nanos)}}function ci(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ho(r){return typeof r=="string"?Hi.fromBase64String(r):Hi.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="server_timestamp",P_="__type__",B_="__previous_value__",k_="__local_write_time__";function ng(r){var n,o;return((o=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[P_])==null?void 0:o.stringValue)===L_}function Rf(r){const e=r.mapValue.fields[B_];return ng(e)?Rf(e):e}function au(r){const e=uo(r.mapValue.fields[k_].timestampValue);return new Ln(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,n,o,u,d,E,T,b,_,C){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=E,this.autoDetectLongPolling=T,this.longPollingOptions=b,this.useFetchStreams=_,this.isUsingEmulator=C}}const af="(default)";class ou{constructor(e,n){this.projectId=e,this.database=n||af}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database===af}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="__type__",m4="__max__",Dh={mapValue:{}},V_="__vector__",of="value";function fo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ng(r)?4:x4(r)?9007199254740991:p4(r)?10:11:at(28295,{value:r})}function Hs(r,e){if(r===e)return!0;const n=fo(r);if(n!==fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return au(r).isEqual(au(e));case 3:return(function(u,d){if(typeof u.timestampValue=="string"&&typeof d.timestampValue=="string"&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const E=uo(u.timestampValue),T=uo(d.timestampValue);return E.seconds===T.seconds&&E.nanos===T.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(u,d){return ho(u.bytesValue).isEqual(ho(d.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(u,d){return ci(u.geoPointValue.latitude)===ci(d.geoPointValue.latitude)&&ci(u.geoPointValue.longitude)===ci(d.geoPointValue.longitude)})(r,e);case 2:return(function(u,d){if("integerValue"in u&&"integerValue"in d)return ci(u.integerValue)===ci(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const E=ci(u.doubleValue),T=ci(d.doubleValue);return E===T?sf(E)===sf(T):isNaN(E)&&isNaN(T)}return!1})(r,e);case 9:return Yl(r.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return(function(u,d){const E=u.mapValue.fields||{},T=d.mapValue.fields||{};if(Ix(E)!==Ix(T))return!1;for(const b in E)if(E.hasOwnProperty(b)&&(T[b]===void 0||!Hs(E[b],T[b])))return!1;return!0})(r,e);default:return at(52216,{left:r})}}function lu(r,e){return(r.values||[]).find((n=>Hs(n,e)))!==void 0}function Xl(r,e){if(r===e)return 0;const n=fo(r),o=fo(e);if(n!==o)return Ht(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ht(r.booleanValue,e.booleanValue);case 2:return(function(d,E){const T=ci(d.integerValue||d.doubleValue),b=ci(E.integerValue||E.doubleValue);return T<b?-1:T>b?1:T===b?0:isNaN(T)?isNaN(b)?0:-1:1})(r,e);case 3:return Rx(r.timestampValue,e.timestampValue);case 4:return Rx(au(r),au(e));case 5:return x1(r.stringValue,e.stringValue);case 6:return(function(d,E){const T=ho(d),b=ho(E);return T.compareTo(b)})(r.bytesValue,e.bytesValue);case 7:return(function(d,E){const T=d.split("/"),b=E.split("/");for(let _=0;_<T.length&&_<b.length;_++){const C=Ht(T[_],b[_]);if(C!==0)return C}return Ht(T.length,b.length)})(r.referenceValue,e.referenceValue);case 8:return(function(d,E){const T=Ht(ci(d.latitude),ci(E.latitude));return T!==0?T:Ht(ci(d.longitude),ci(E.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ox(r.arrayValue,e.arrayValue);case 10:return(function(d,E){var M,k,X,K;const T=d.fields||{},b=E.fields||{},_=(M=T[of])==null?void 0:M.arrayValue,C=(k=b[of])==null?void 0:k.arrayValue,I=Ht(((X=_==null?void 0:_.values)==null?void 0:X.length)||0,((K=C==null?void 0:C.values)==null?void 0:K.length)||0);return I!==0?I:Ox(_,C)})(r.mapValue,e.mapValue);case 11:return(function(d,E){if(d===Dh.mapValue&&E===Dh.mapValue)return 0;if(d===Dh.mapValue)return 1;if(E===Dh.mapValue)return-1;const T=d.fields||{},b=Object.keys(T),_=E.fields||{},C=Object.keys(_);b.sort(),C.sort();for(let I=0;I<b.length&&I<C.length;++I){const M=x1(b[I],C[I]);if(M!==0)return M;const k=Xl(T[b[I]],_[C[I]]);if(k!==0)return k}return Ht(b.length,C.length)})(r.mapValue,e.mapValue);default:throw at(23264,{he:n})}}function Rx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ht(r,e);const n=uo(r),o=uo(e),u=Ht(n.seconds,o.seconds);return u!==0?u:Ht(n.nanos,o.nanos)}function Ox(r,e){const n=r.values||[],o=e.values||[];for(let u=0;u<n.length&&u<o.length;++u){const d=Xl(n[u],o[u]);if(d)return d}return Ht(n.length,o.length)}function Kl(r){return E1(r)}function E1(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const o=uo(n);return`time(${o.seconds},${o.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return ho(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return et.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let o="[",u=!0;for(const d of n.values||[])u?u=!1:o+=",",o+=E1(d);return o+"]"})(r.arrayValue):"mapValue"in r?(function(n){const o=Object.keys(n.fields||{}).sort();let u="{",d=!0;for(const E of o)d?d=!1:u+=",",u+=`${E}:${E1(n.fields[E])}`;return u+"}"})(r.mapValue):at(61005,{value:r})}function Gh(r){switch(fo(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rf(r);return e?16+Gh(e):16;case 5:return 2*r.stringValue.length;case 6:return ho(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((u,d)=>u+Gh(d)),0)})(r.arrayValue);case 10:case 11:return(function(o){let u=0;return Eo(o.fields,((d,E)=>{u+=d.length+Gh(E)})),u})(r.mapValue);default:throw at(13486,{value:r})}}function Dx(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function y1(r){return!!r&&"integerValue"in r}function ig(r){return!!r&&"arrayValue"in r}function Mx(r){return!!r&&"nullValue"in r}function Lx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function qh(r){return!!r&&"mapValue"in r}function p4(r){var n,o;return((o=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[U_])==null?void 0:o.stringValue)===V_}function Zc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Eo(r.mapValue.fields,((n,o)=>e.mapValue.fields[n]=Zc(o))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zc(r.arrayValue.values[n]);return e}return{...r}}function x4(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===m4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zc(n)}setAll(e){let n=zi.emptyPath(),o={},u=[];e.forEach(((E,T)=>{if(!n.isImmediateParentOf(T)){const b=this.getFieldsMap(n);this.applyChanges(b,o,u),o={},u=[],n=T.popLast()}E?o[T.lastSegment()]=Zc(E):u.push(T.lastSegment())}));const d=this.getFieldsMap(n);this.applyChanges(d,o,u)}delete(e){const n=this.field(e.popLast());qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];qh(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Eo(n,((u,d)=>e[u]=d));for(const u of o)delete e[u]}clone(){return new Nr(Zc(this.value))}}function F_(r){const e=[];return Eo(r.fields,((n,o)=>{const u=new zi([n]);if(qh(o)){const d=F_(o.mapValue).fields;if(d.length===0)e.push(u);else for(const E of d)e.push(u.child(E))}else e.push(u)})),new qr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n,o,u,d,E,T){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=d,this.data=E,this.documentState=T}static newInvalidDocument(e){return new tr(e,0,ht.min(),ht.min(),ht.min(),Nr.empty(),0)}static newFoundDocument(e,n,o,u){return new tr(e,1,n,ht.min(),o,u,0)}static newNoDocument(e,n){return new tr(e,2,n,ht.min(),ht.min(),Nr.empty(),0)}static newUnknownDocument(e,n){return new tr(e,3,n,ht.min(),ht.min(),Nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n){this.position=e,this.inclusive=n}}function Px(r,e,n){let o=0;for(let u=0;u<r.position.length;u++){const d=e[u],E=r.position[u];if(d.field.isKeyField()?o=et.comparator(et.fromName(E.referenceValue),n.key):o=Xl(E,n.data.field(d.field)),d.dir==="desc"&&(o*=-1),o!==0)break}return o}function Bx(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Hs(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n="asc"){this.field=e,this.dir=n}}function E4(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{}class xi extends j_{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new _4(e,n,o):n==="array-contains"?new b4(e,o):n==="in"?new T4(e,o):n==="not-in"?new v4(e,o):n==="array-contains-any"?new C4(e,o):new xi(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new A4(e,o):new w4(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xl(n,this.value)):n!==null&&fo(this.value)===fo(n)&&this.matchesComparison(Xl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends j_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vs(e,n)}matches(e){return z_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function z_(r){return r.op==="and"}function H_(r){return y4(r)&&z_(r)}function y4(r){for(const e of r.filters)if(e instanceof vs)return!1;return!0}function _1(r){if(r instanceof xi)return r.field.canonicalString()+r.op.toString()+Kl(r.value);if(H_(r))return r.filters.map((e=>_1(e))).join(",");{const e=r.filters.map((n=>_1(n))).join(",");return`${r.op}(${e})`}}function G_(r,e){return r instanceof xi?(function(o,u){return u instanceof xi&&o.op===u.op&&o.field.isEqual(u.field)&&Hs(o.value,u.value)})(r,e):r instanceof vs?(function(o,u){return u instanceof vs&&o.op===u.op&&o.filters.length===u.filters.length?o.filters.reduce(((d,E,T)=>d&&G_(E,u.filters[T])),!0):!1})(r,e):void at(19439)}function q_(r){return r instanceof xi?(function(n){return`${n.field.canonicalString()} ${n.op} ${Kl(n.value)}`})(r):r instanceof vs?(function(n){return n.op.toString()+" {"+n.getFilters().map(q_).join(" ,")+"}"})(r):"Filter"}class _4 extends xi{constructor(e,n,o){super(e,n,o),this.key=et.fromName(o.referenceValue)}matches(e){const n=et.comparator(e.key,this.key);return this.matchesComparison(n)}}class A4 extends xi{constructor(e,n){super(e,"in",n),this.keys=Y_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class w4 extends xi{constructor(e,n){super(e,"not-in",n),this.keys=Y_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Y_(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((o=>et.fromName(o.referenceValue)))}class b4 extends xi{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ig(n)&&lu(n.arrayValue,this.value)}}class T4 extends xi{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lu(this.value.arrayValue,n)}}class v4 extends xi{constructor(e,n){super(e,"not-in",n)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!lu(this.value.arrayValue,n)}}class C4 extends xi{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ig(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>lu(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n=null,o=[],u=[],d=null,E=null,T=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=E,this.endAt=T,this.Te=null}}function kx(r,e=null,n=[],o=[],u=null,d=null,E=null){return new S4(r,e,n,o,u,d,E)}function rg(r){const e=mt(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>_1(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(d){return d.field.canonicalString()+d.dir})(o))).join(","),Nf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>Kl(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>Kl(o))).join(",")),e.Te=n}return e.Te}function sg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!E4(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!G_(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Bx(r.startAt,e.startAt)&&Bx(r.endAt,e.endAt)}function A1(r){return et.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n=null,o=[],u=[],d=null,E="F",T=null,b=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=E,this.startAt=T,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function I4(r,e,n,o,u,d,E,T){return new mu(r,e,n,o,u,d,E,T)}function Of(r){return new mu(r)}function Ux(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function X_(r){return r.collectionGroup!==null}function Jc(r){const e=mt(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),n.add(d.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(E){let T=new vi(zi.comparator);return E.filters.forEach((b=>{b.getFlattenedFilters().forEach((_=>{_.isInequality()&&(T=T.add(_.field))}))})),T})(e).forEach((d=>{n.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new cf(d,o))})),n.has(zi.keyField().canonicalString())||e.Ie.push(new cf(zi.keyField(),o))}return e.Ie}function Vs(r){const e=mt(r);return e.Ee||(e.Ee=N4(e,Jc(r))),e.Ee}function N4(r,e){if(r.limitType==="F")return kx(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((u=>{const d=u.dir==="desc"?"asc":"desc";return new cf(u.field,d)}));const n=r.endAt?new lf(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new lf(r.startAt.position,r.startAt.inclusive):null;return kx(r.path,r.collectionGroup,e,r.filters,r.limit,n,o)}}function w1(r,e){const n=r.filters.concat([e]);return new mu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function b1(r,e,n){return new mu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Df(r,e){return sg(Vs(r),Vs(e))&&r.limitType===e.limitType}function K_(r){return`${rg(Vs(r))}|lt:${r.limitType}`}function Pl(r){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((u=>q_(u))).join(", ")}]`),Nf(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((u=>(function(E){return`${E.field.canonicalString()} (${E.dir})`})(u))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((u=>Kl(u))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((u=>Kl(u))).join(",")),`Target(${o})`})(Vs(r))}; limitType=${r.limitType})`}function Mf(r,e){return e.isFoundDocument()&&(function(o,u){const d=u.key.path;return o.collectionGroup!==null?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):et.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)})(r,e)&&(function(o,u){for(const d of Jc(o))if(!d.field.isKeyField()&&u.data.field(d.field)===null)return!1;return!0})(r,e)&&(function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0})(r,e)&&(function(o,u){return!(o.startAt&&!(function(E,T,b){const _=Px(E,T,b);return E.inclusive?_<=0:_<0})(o.startAt,Jc(o),u)||o.endAt&&!(function(E,T,b){const _=Px(E,T,b);return E.inclusive?_>=0:_>0})(o.endAt,Jc(o),u))})(r,e)}function R4(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function W_(r){return(e,n)=>{let o=!1;for(const u of Jc(r)){const d=O4(u,e,n);if(d!==0)return d;o=o||u.field.isKeyField()}return 0}}function O4(r,e,n){const o=r.field.isKeyField()?et.comparator(e.key,n.key):(function(d,E,T){const b=E.data.field(d),_=T.data.field(d);return b!==null&&_!==null?Xl(b,_):at(42886)})(r.field,e,n);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return at(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[u,d]of o)if(this.equalsFn(u,e))return d}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(u===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return o.length===1?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,((n,o)=>{for(const[u,d]of o)e(u,d)}))}isEmpty(){return D_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new Wn(et.comparator);function ba(){return D4}const Q_=new Wn(et.comparator);function Gc(...r){let e=Q_;for(const n of r)e=e.insert(n.key,n);return e}function Z_(r){let e=Q_;return r.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function qo(){return $c()}function J_(){return $c()}function $c(){return new el((r=>r.toString()),((r,e)=>r.isEqual(e)))}const M4=new Wn(et.comparator),L4=new vi(et.comparator);function Gt(...r){let e=L4;for(const n of r)e=e.add(n);return e}const P4=new vi(Ht);function B4(){return P4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sf(e)?"-0":e}}function $_(r){return{integerValue:""+r}}function k4(r,e){return u4(e)?$_(e):ag(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this._=void 0}}function U4(r,e,n){return r instanceof uf?(function(u,d){const E={fields:{[P_]:{stringValue:L_},[k_]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&ng(d)&&(d=Rf(d)),d&&(E.fields[B_]=d),{mapValue:E}})(n,e):r instanceof cu?tA(r,e):r instanceof uu?nA(r,e):(function(u,d){const E=eA(u,d),T=Vx(E)+Vx(u.Ae);return y1(E)&&y1(u.Ae)?$_(T):ag(u.serializer,T)})(r,e)}function V4(r,e,n){return r instanceof cu?tA(r,e):r instanceof uu?nA(r,e):n}function eA(r,e){return r instanceof hf?(function(o){return y1(o)||(function(d){return!!d&&"doubleValue"in d})(o)})(e)?e:{integerValue:0}:null}class uf extends Lf{}class cu extends Lf{constructor(e){super(),this.elements=e}}function tA(r,e){const n=iA(e);for(const o of r.elements)n.some((u=>Hs(u,o)))||n.push(o);return{arrayValue:{values:n}}}class uu extends Lf{constructor(e){super(),this.elements=e}}function nA(r,e){let n=iA(e);for(const o of r.elements)n=n.filter((u=>!Hs(u,o)));return{arrayValue:{values:n}}}class hf extends Lf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Vx(r){return ci(r.integerValue||r.doubleValue)}function iA(r){return ig(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function F4(r,e){return r.field.isEqual(e.field)&&(function(o,u){return o instanceof cu&&u instanceof cu||o instanceof uu&&u instanceof uu?Yl(o.elements,u.elements,Hs):o instanceof hf&&u instanceof hf?Hs(o.Ae,u.Ae):o instanceof uf&&u instanceof uf})(r.transform,e.transform)}class j4{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Pf{}function rA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Bf(r.key,Or.none()):new pu(r.key,r.data,Or.none());{const n=r.data,o=Nr.empty();let u=new vi(zi.comparator);for(let d of e.fields)if(!u.has(d)){let E=n.field(d);E===null&&d.length>1&&(d=d.popLast(),E=n.field(d)),E===null?o.delete(d):o.set(d,E),u=u.add(d)}return new yo(r.key,o,new qr(u.toArray()),Or.none())}}function z4(r,e,n){r instanceof pu?(function(u,d,E){const T=u.value.clone(),b=jx(u.fieldTransforms,d,E.transformResults);T.setAll(b),d.convertToFoundDocument(E.version,T).setHasCommittedMutations()})(r,e,n):r instanceof yo?(function(u,d,E){if(!Yh(u.precondition,d))return void d.convertToUnknownDocument(E.version);const T=jx(u.fieldTransforms,d,E.transformResults),b=d.data;b.setAll(sA(u)),b.setAll(T),d.convertToFoundDocument(E.version,b).setHasCommittedMutations()})(r,e,n):(function(u,d,E){d.convertToNoDocument(E.version).setHasCommittedMutations()})(0,e,n)}function eu(r,e,n,o){return r instanceof pu?(function(d,E,T,b){if(!Yh(d.precondition,E))return T;const _=d.value.clone(),C=zx(d.fieldTransforms,b,E);return _.setAll(C),E.convertToFoundDocument(E.version,_).setHasLocalMutations(),null})(r,e,n,o):r instanceof yo?(function(d,E,T,b){if(!Yh(d.precondition,E))return T;const _=zx(d.fieldTransforms,b,E),C=E.data;return C.setAll(sA(d)),C.setAll(_),E.convertToFoundDocument(E.version,C).setHasLocalMutations(),T===null?null:T.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((I=>I.field)))})(r,e,n,o):(function(d,E,T){return Yh(d.precondition,E)?(E.convertToNoDocument(E.version).setHasLocalMutations(),null):T})(r,e,n)}function H4(r,e){let n=null;for(const o of r.fieldTransforms){const u=e.data.field(o.field),d=eA(o.transform,u||null);d!=null&&(n===null&&(n=Nr.empty()),n.set(o.field,d))}return n||null}function Fx(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(o,u){return o===void 0&&u===void 0||!(!o||!u)&&Yl(o,u,((d,E)=>F4(d,E)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class pu extends Pf{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class yo extends Pf{constructor(e,n,o,u,d=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function sA(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=r.data.field(n);e.set(n,o)}})),e}function jx(r,e,n){const o=new Map;fn(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let u=0;u<n.length;u++){const d=r[u],E=d.transform,T=e.data.field(d.field);o.set(d.field,V4(E,T,n[u]))}return o}function zx(r,e,n){const o=new Map;for(const u of r){const d=u.transform,E=n.data.field(u.field);o.set(u.field,U4(d,E,e))}return o}class Bf extends Pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G4 extends Pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&z4(d,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=eu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=eu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=J_();return this.mutations.forEach((u=>{const d=e.get(u.key),E=d.overlayedDocument;let T=this.applyToLocalView(E,d.mutatedFields);T=n.has(u.key)?null:T;const b=rA(E,T);b!==null&&o.set(u.key,b),E.isValidDocument()||E.convertToNoDocument(ht.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Gt())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,((n,o)=>Fx(n,o)))&&Yl(this.baseMutations,e.baseMutations,((n,o)=>Fx(n,o)))}}class og{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){fn(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let u=(function(){return M4})();const d=e.mutations;for(let E=0;E<d.length;E++)u=u.insert(d[E].key,o[E].version);return new og(e,n,o,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi,Qt;function K4(r){switch(r){case Ce.OK:return at(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return at(15467,{code:r})}}function aA(r){if(r===void 0)return wa("GRPC error has no .code"),Ce.UNKNOWN;switch(r){case pi.OK:return Ce.OK;case pi.CANCELLED:return Ce.CANCELLED;case pi.UNKNOWN:return Ce.UNKNOWN;case pi.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case pi.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case pi.INTERNAL:return Ce.INTERNAL;case pi.UNAVAILABLE:return Ce.UNAVAILABLE;case pi.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case pi.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case pi.NOT_FOUND:return Ce.NOT_FOUND;case pi.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case pi.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case pi.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case pi.ABORTED:return Ce.ABORTED;case pi.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case pi.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case pi.DATA_LOSS:return Ce.DATA_LOSS;default:return at(39323,{code:r})}}(Qt=pi||(pi={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new oo([4294967295,4294967295],0);function Hx(r){const e=W4().encode(r),n=new A_;return n.update(e),new Uint8Array(n.digest())}function Gx(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new oo([n,o],0),new oo([u,d],0)]}class lg{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new qc(`Invalid padding: ${n}`);if(o<0)throw new qc(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new qc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=oo.fromNumber(this.ge)}ye(e,n,o){let u=e.add(n.multiply(oo.fromNumber(o)));return u.compare(Q4)===1&&(u=new oo([u.getBits(0),u.getBits(1)],0)),u.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Hx(e),[o,u]=Gx(n);for(let d=0;d<this.hashCount;d++){const E=this.ye(o,u,d);if(!this.we(E))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),E=new lg(d,u,n);return o.forEach((T=>E.insert(T))),E}insert(e){if(this.ge===0)return;const n=Hx(e),[o,u]=Gx(n);for(let d=0;d<this.hashCount;d++){const E=this.ye(o,u,d);this.Se(E)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n,o,u,d){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new kf(ht.min(),u,new Wn(Ht),ba(),Gt())}}class xu{constructor(e,n,o,u,d){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new xu(o,n,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,o,u){this.be=e,this.removedTargetIds=n,this.key=o,this.De=u}}class oA{constructor(e,n){this.targetId=e,this.Ce=n}}class lA{constructor(e,n,o=Hi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class qx{constructor(){this.ve=0,this.Fe=Yx(),this.Me=Hi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gt(),n=Gt(),o=Gt();return this.Fe.forEach(((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:at(38017,{changeType:d})}})),new xu(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=Yx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z4{constructor(e){this.Ge=e,this.ze=new Map,this.je=ba(),this.Je=Mh(),this.He=Mh(),this.Ye=new Wn(Ht)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:at(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,u)=>{this.rt(u)&&n(u)}))}st(e){const n=e.targetId,o=e.Ce.count,u=this.ot(n);if(u){const d=u.target;if(A1(d))if(o===0){const E=new et(d.path);this.et(n,E,tr.newNoDocument(E,ht.min()))}else fn(o===1,20013,{expectedCount:o});else{const E=this._t(n);if(E!==o){const T=this.ut(e),b=T?this.ct(T,e,E):1;if(b!==0){this.it(n);const _=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=n;let E,T;try{E=ho(o).toUint8Array()}catch(b){if(b instanceof M_)return ql("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{T=new lg(E,u,d)}catch(b){return ql(b instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return T.ge===0?null:T}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let u=0;return o.forEach((d=>{const E=this.Ge.ht(),T=`projects/${E.projectId}/databases/${E.database}/documents/${d.path.canonicalString()}`;e.mightContain(T)||(this.et(n,d,null),u++)})),u}Tt(e){const n=new Map;this.ze.forEach(((d,E)=>{const T=this.ot(E);if(T){if(d.current&&A1(T.target)){const b=new et(T.target.path);this.It(b).has(E)||this.Et(E,b)||this.et(E,b,tr.newNoDocument(b,e))}d.Be&&(n.set(E,d.ke()),d.qe())}}));let o=Gt();this.He.forEach(((d,E)=>{let T=!0;E.forEachWhile((b=>{const _=this.ot(b);return!_||_.purpose==="TargetPurposeLimboResolution"||(T=!1,!1)})),T&&(o=o.add(d))})),this.je.forEach(((d,E)=>E.setReadTime(e)));const u=new kf(e,n,this.Ye,this.je,o);return this.je=ba(),this.Je=Mh(),this.He=Mh(),this.Ye=new Wn(Ht),u}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const u=this.nt(e);this.Et(e,n)?u.Qe(n,1):u.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new qx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new vi(Ht),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new vi(Ht),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||He("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Mh(){return new Wn(et.comparator)}function Yx(){return new Wn(et.comparator)}const J4={asc:"ASCENDING",desc:"DESCENDING"},$4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eI={and:"AND",or:"OR"};class tI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function T1(r,e){return r.useProto3Json||Nf(e)?e:{value:e}}function ff(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function nI(r,e){return ff(r,e.toTimestamp())}function Fs(r){return fn(!!r,49232),ht.fromTimestamp((function(n){const o=uo(n);return new Ln(o.seconds,o.nanos)})(r))}function cg(r,e){return v1(r,e).canonicalString()}function v1(r,e){const n=(function(u){return new Sn(["projects",u.projectId,"databases",u.database])})(r).child("documents");return e===void 0?n:n.child(e)}function uA(r){const e=Sn.fromString(r);return fn(mA(e),10190,{key:e.toString()}),e}function C1(r,e){return cg(r.databaseId,e.path)}function J0(r,e){const n=uA(e);if(n.get(1)!==r.databaseId.projectId)throw new ze(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ze(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new et(fA(n))}function hA(r,e){return cg(r.databaseId,e)}function iI(r){const e=uA(r);return e.length===4?Sn.emptyPath():fA(e)}function S1(r){return new Sn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function fA(r){return fn(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Xx(r,e,n){return{name:C1(r,e),fields:n.value.mapValue.fields}}function rI(r,e){let n;if("targetChange"in e){e.targetChange;const o=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:at(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),u=e.targetChange.targetIds||[],d=(function(_,C){return _.useProto3Json?(fn(C===void 0||typeof C=="string",58123),Hi.fromBase64String(C||"")):(fn(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),Hi.fromUint8Array(C||new Uint8Array))})(r,e.targetChange.resumeToken),E=e.targetChange.cause,T=E&&(function(_){const C=_.code===void 0?Ce.UNKNOWN:aA(_.code);return new ze(C,_.message||"")})(E);n=new lA(o,u,d,T||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const u=J0(r,o.document.name),d=Fs(o.document.updateTime),E=o.document.createTime?Fs(o.document.createTime):ht.min(),T=new Nr({mapValue:{fields:o.document.fields}}),b=tr.newFoundDocument(u,d,E,T),_=o.targetIds||[],C=o.removedTargetIds||[];n=new Xh(_,C,b.key,b)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const u=J0(r,o.document),d=o.readTime?Fs(o.readTime):ht.min(),E=tr.newNoDocument(u,d),T=o.removedTargetIds||[];n=new Xh([],T,E.key,E)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const u=J0(r,o.document),d=o.removedTargetIds||[];n=new Xh([],d,u,null)}else{if(!("filter"in e))return at(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:u=0,unchangedNames:d}=o,E=new X4(u,d),T=o.targetId;n=new oA(T,E)}}return n}function sI(r,e){let n;if(e instanceof pu)n={update:Xx(r,e.key,e.value)};else if(e instanceof Bf)n={delete:C1(r,e.key)};else if(e instanceof yo)n={update:Xx(r,e.key,e.data),updateMask:gI(e.fieldMask)};else{if(!(e instanceof G4))return at(16599,{Vt:e.type});n={verify:C1(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(d,E){const T=E.transform;if(T instanceof uf)return{fieldPath:E.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof cu)return{fieldPath:E.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof uu)return{fieldPath:E.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof hf)return{fieldPath:E.field.canonicalString(),increment:T.Ae};throw at(20930,{transform:E.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(u,d){return d.updateTime!==void 0?{updateTime:nI(u,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:at(27497)})(r,e.precondition)),n}function aI(r,e){return r&&r.length>0?(fn(e!==void 0,14353),r.map((n=>(function(u,d){let E=u.updateTime?Fs(u.updateTime):Fs(d);return E.isEqual(ht.min())&&(E=Fs(d)),new j4(E,u.transformResults||[])})(n,e)))):[]}function oI(r,e){return{documents:[hA(r,e.path)]}}function lI(r,e){const n={structuredQuery:{}},o=e.path;let u;e.collectionGroup!==null?(u=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=hA(r,u);const d=(function(_){if(_.length!==0)return gA(vs.create(_,"and"))})(e.filters);d&&(n.structuredQuery.where=d);const E=(function(_){if(_.length!==0)return _.map((C=>(function(M){return{field:Bl(M.field),direction:hI(M.dir)}})(C)))})(e.orderBy);E&&(n.structuredQuery.orderBy=E);const T=T1(r,e.limit);return T!==null&&(n.structuredQuery.limit=T),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:u}}function cI(r){let e=iI(r.parent);const n=r.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){fn(o===1,65062);const C=n.from[0];C.allDescendants?u=C.collectionId:e=e.child(C.collectionId)}let d=[];n.where&&(d=(function(I){const M=dA(I);return M instanceof vs&&H_(M)?M.getFilters():[M]})(n.where));let E=[];n.orderBy&&(E=(function(I){return I.map((M=>(function(X){return new cf(kl(X.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(M)))})(n.orderBy));let T=null;n.limit&&(T=(function(I){let M;return M=typeof I=="object"?I.value:I,Nf(M)?null:M})(n.limit));let b=null;n.startAt&&(b=(function(I){const M=!!I.before,k=I.values||[];return new lf(k,M)})(n.startAt));let _=null;return n.endAt&&(_=(function(I){const M=!I.before,k=I.values||[];return new lf(k,M)})(n.endAt)),I4(e,u,E,d,T,"F",b,_)}function uI(r,e){const n=(function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:u})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dA(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=kl(n.unaryFilter.field);return xi.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=kl(n.unaryFilter.field);return xi.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=kl(n.unaryFilter.field);return xi.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const E=kl(n.unaryFilter.field);return xi.create(E,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}})(r):r.fieldFilter!==void 0?(function(n){return xi.create(kl(n.fieldFilter.field),(function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return vs.create(n.compositeFilter.filters.map((o=>dA(o))),(function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return at(1026)}})(n.compositeFilter.op))})(r):at(30097,{filter:r})}function hI(r){return J4[r]}function fI(r){return $4[r]}function dI(r){return eI[r]}function Bl(r){return{fieldPath:r.canonicalString()}}function kl(r){return zi.fromServerFormat(r.fieldPath)}function gA(r){return r instanceof xi?(function(n){if(n.op==="=="){if(Lx(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NAN"}};if(Mx(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lx(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NAN"}};if(Mx(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(n.field),op:fI(n.op),value:n.value}}})(r):r instanceof vs?(function(n){const o=n.getFilters().map((u=>gA(u)));return o.length===1?o[0]:{compositeFilter:{op:dI(n.op),filters:o}}})(r):at(54877,{filter:r})}function gI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function mA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n,o,u,d=ht.min(),E=ht.min(),T=Hi.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=T,this.expectedCount=b}withSequenceNumber(e){return new ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.yt=e}}function pI(r){const e=cI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?b1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.Cn=new EI}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ne.resolve()}getCollectionParents(e,n){return Ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ne.resolve()}deleteFieldIndex(e,n){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,n){return Ne.resolve()}getDocumentsMatchingTarget(e,n){return Ne.resolve(null)}getIndexType(e,n){return Ne.resolve(0)}getFieldIndexes(e,n){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,n){return Ne.resolve(co.min())}getMinOffsetFromCollectionGroup(e,n){return Ne.resolve(co.min())}updateCollectionGroup(e,n,o){return Ne.resolve()}updateIndexEntries(e,n){return Ne.resolve()}}class EI{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new vi(Sn.comparator),d=!u.has(o);return this.index[n]=u.add(o),d}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new vi(Sn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pA=41943040;class Ir{static withCacheSize(e){return new Ir(e,Ir.DEFAULT_COLLECTION_PERCENTILE,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir.DEFAULT_COLLECTION_PERCENTILE=10,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ir.DEFAULT=new Ir(pA,Ir.DEFAULT_COLLECTION_PERCENTILE,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ir.DISABLED=new Ir(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wl(0)}static cr(){return new Wl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="LruGarbageCollector",yI=1048576;function Qx([r,e],[n,o]){const u=Ht(r,n);return u===0?Ht(e,o):u}class _I{constructor(e){this.Ir=e,this.buffer=new vi(Qx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Qx(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class AI{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){He(Wx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tc(n)?He(Wx,"Ignoring IndexedDB error during garbage collection: ",n):await ec(n)}await this.Vr(3e5)}))}}class wI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return Ne.resolve(If.ce);const o=new _I(n);return this.mr.forEachTarget(e,(u=>o.Ar(u.sequenceNumber))).next((()=>this.mr.pr(e,(u=>o.Ar(u))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Kx)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,u,d,E,T,b,_;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),u=this.params.maximumSequenceNumbersToCollect):u=I,E=Date.now(),this.nthSequenceNumber(e,u)))).next((I=>(o=I,T=Date.now(),this.removeTargets(e,o,n)))).next((I=>(d=I,b=Date.now(),this.removeOrphanedDocuments(e,o)))).next((I=>(_=Date.now(),Ll()<=Zt.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${E-C}ms
	Determined least recently used ${u} in `+(T-E)+`ms
	Removed ${d} targets in `+(b-T)+`ms
	Removed ${I} documents in `+(_-b)+`ms
Total Duration: ${_-C}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:I}))))}}function bI(r,e){return new wI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.changes=new el((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Ne.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((u=>(o=u,this.remoteDocumentCache.getEntry(e,n)))).next((u=>(o!==null&&eu(o.mutation,u,qr.empty(),Ln.now()),u)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Gt()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Gt()){const u=qo();return this.populateOverlays(e,u,n).next((()=>this.computeViews(e,n,u,o).next((d=>{let E=Gc();return d.forEach(((T,b)=>{E=E.insert(T,b.overlayedDocument)})),E}))))}getOverlayedDocuments(e,n){const o=qo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Gt())))}populateOverlays(e,n,o){const u=[];return o.forEach((d=>{n.has(d)||u.push(d)})),this.documentOverlayCache.getOverlays(e,u).next((d=>{d.forEach(((E,T)=>{n.set(E,T)}))}))}computeViews(e,n,o,u){let d=ba();const E=$c(),T=(function(){return $c()})();return n.forEach(((b,_)=>{const C=o.get(_.key);u.has(_.key)&&(C===void 0||C.mutation instanceof yo)?d=d.insert(_.key,_):C!==void 0?(E.set(_.key,C.mutation.getFieldMask()),eu(C.mutation,_,C.mutation.getFieldMask(),Ln.now())):E.set(_.key,qr.empty())})),this.recalculateAndSaveOverlays(e,d).next((b=>(b.forEach(((_,C)=>E.set(_,C))),n.forEach(((_,C)=>T.set(_,new vI(C,E.get(_)??null)))),T)))}recalculateAndSaveOverlays(e,n){const o=$c();let u=new Wn(((E,T)=>E-T)),d=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((E=>{for(const T of E)T.keys().forEach((b=>{const _=n.get(b);if(_===null)return;let C=o.get(b)||qr.empty();C=T.applyToLocalView(_,C),o.set(b,C);const I=(u.get(T.batchId)||Gt()).add(b);u=u.insert(T.batchId,I)}))})).next((()=>{const E=[],T=u.getReverseIterator();for(;T.hasNext();){const b=T.getNext(),_=b.key,C=b.value,I=J_();C.forEach((M=>{if(!d.has(M)){const k=rA(n.get(M),o.get(M));k!==null&&I.set(M,k),d=d.add(M)}})),E.push(this.documentOverlayCache.saveOverlays(e,_,I))}return Ne.waitFor(E)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,u){return(function(E){return et.isDocumentKey(E.path)&&E.collectionGroup===null&&E.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u)}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next((d=>{const E=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-d.size):Ne.resolve(qo());let T=su,b=d;return E.next((_=>Ne.forEach(_,((C,I)=>(T<I.largestBatchId&&(T=I.largestBatchId),d.get(C)?Ne.resolve():this.remoteDocumentCache.getEntry(e,C).next((M=>{b=b.insert(C,M)}))))).next((()=>this.populateOverlays(e,_,d))).next((()=>this.computeViews(e,b,_,Gt()))).next((C=>({batchId:T,changes:Z_(C)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new et(n)).next((o=>{let u=Gc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const d=n.collectionGroup;let E=Gc();return this.indexManager.getCollectionParents(e,d).next((T=>Ne.forEach(T,(b=>{const _=(function(I,M){return new mu(M,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,b.child(d));return this.getDocumentsMatchingCollectionQuery(e,_,o,u).next((C=>{C.forEach(((I,M)=>{E=E.insert(I,M)}))}))})).next((()=>E))))}getDocumentsMatchingCollectionQuery(e,n,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((E=>(d=E,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,d,u)))).next((E=>{d.forEach(((b,_)=>{const C=_.getKey();E.get(C)===null&&(E=E.insert(C,tr.newInvalidDocument(C)))}));let T=Gc();return E.forEach(((b,_)=>{const C=d.get(b);C!==void 0&&eu(C.mutation,_,qr.empty(),Ln.now()),Mf(n,_)&&(T=T.insert(b,_))})),T}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ne.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(u){return{id:u.id,version:u.version,createTime:Fs(u.createTime)}})(n)),Ne.resolve()}getNamedQuery(e,n){return Ne.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(u){return{name:u.name,query:pI(u.bundledQuery),readTime:Fs(u.readTime)}})(n)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.overlays=new Wn(et.comparator),this.qr=new Map}getOverlay(e,n){return Ne.resolve(this.overlays.get(n))}getOverlays(e,n){const o=qo();return Ne.forEach(n,(u=>this.getOverlay(e,u).next((d=>{d!==null&&o.set(u,d)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((u,d)=>{this.St(e,n,d)})),Ne.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.qr.get(o);return u!==void 0&&(u.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(o)),Ne.resolve()}getOverlaysForCollection(e,n,o){const u=qo(),d=n.length+1,E=new et(n.child("")),T=this.overlays.getIteratorFrom(E);for(;T.hasNext();){const b=T.getNext().value,_=b.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===d&&b.largestBatchId>o&&u.set(b.getKey(),b)}return Ne.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let d=new Wn(((_,C)=>_-C));const E=this.overlays.getIterator();for(;E.hasNext();){const _=E.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>o){let C=d.get(_.largestBatchId);C===null&&(C=qo(),d=d.insert(_.largestBatchId,C)),C.set(_.getKey(),_)}}const T=qo(),b=d.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((_,C)=>T.set(_,C))),!(T.size()>=u)););return Ne.resolve(T)}St(e,n,o){const u=this.overlays.get(o.key);if(u!==null){const E=this.qr.get(u.largestBatchId).delete(o.key);this.qr.set(u.largestBatchId,E)}this.overlays=this.overlays.insert(o.key,new Y4(n,o));let d=this.qr.get(n);d===void 0&&(d=Gt(),this.qr.set(n,d)),this.qr.set(n,d.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.sessionToken=Hi.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.Qr=new vi(Ni.$r),this.Ur=new vi(Ni.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new Ni(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new Ni(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new et(new Sn([])),o=new Ni(n,e),u=new Ni(n,e+1),d=[];return this.Ur.forEachInRange([o,u],(E=>{this.Gr(E),d.push(E.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new et(new Sn([])),o=new Ni(n,e),u=new Ni(n,e+1);let d=Gt();return this.Ur.forEachInRange([o,u],(E=>{d=d.add(E.key)})),d}containsKey(e){const n=new Ni(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class Ni{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return et.comparator(e.key,n.key)||Ht(e.Yr,n.Yr)}static Kr(e,n){return Ht(e.Yr,n.Yr)||et.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vi(Ni.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,u){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const E=new q4(d,n,o,u);this.mutationQueue.push(E);for(const T of u)this.Zr=this.Zr.add(new Ni(T.key,d)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return Ne.resolve(E)}lookupMutationBatch(e,n){return Ne.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=this.ei(o),d=u<0?0:u;return Ne.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?tg:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ni(n,0),u=new Ni(n,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([o,u],(E=>{const T=this.Xr(E.Yr);d.push(T)})),Ne.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new vi(Ht);return n.forEach((u=>{const d=new Ni(u,0),E=new Ni(u,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,E],(T=>{o=o.add(T.Yr)}))})),Ne.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let d=o;et.isDocumentKey(d)||(d=d.child(""));const E=new Ni(new et(d),0);let T=new vi(Ht);return this.Zr.forEachWhile((b=>{const _=b.key.path;return!!o.isPrefixOf(_)&&(_.length===u&&(T=T.add(b.Yr)),!0)}),E),Ne.resolve(this.ti(T))}ti(e){const n=[];return e.forEach((o=>{const u=this.Xr(o);u!==null&&n.push(u)})),n}removeMutationBatch(e,n){fn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return Ne.forEach(n.mutations,(u=>{const d=new Ni(u.key,n.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new Ni(n,0),u=this.Zr.firstAfterOrEqual(o);return Ne.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.ri=e,this.docs=(function(){return new Wn(et.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),d=u?u.size:0,E=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:E}),this.size+=E-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Ne.resolve(o?o.document.mutableCopy():tr.newInvalidDocument(n))}getEntries(e,n){let o=ba();return n.forEach((u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():tr.newInvalidDocument(u))})),Ne.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let d=ba();const E=n.path,T=new et(E.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(T);for(;b.hasNext();){const{key:_,value:{document:C}}=b.getNext();if(!E.isPrefixOf(_.path))break;_.path.length>E.length+1||a4(s4(C),o)<=0||(u.has(C.key)||Mf(n,C))&&(d=d.insert(C.key,C.mutableCopy()))}return Ne.resolve(d)}getAllFromCollectionGroup(e,n,o,u){at(9500)}ii(e,n){return Ne.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new DI(this)}getSize(e){return Ne.resolve(this.size)}}class DI extends TI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,u)=>{u.isValidDocument()?n.push(this.Nr.addEntry(e,u)):this.Nr.removeEntry(o)})),Ne.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.persistence=e,this.si=new el((n=>rg(n)),sg),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.oi=0,this._i=new ug,this.targetCount=0,this.ai=Wl.ur()}forEachTarget(e,n){return this.si.forEach(((o,u)=>n(u))),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),Ne.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Wl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ne.resolve()}updateTargetData(e,n){return this.Pr(n),Ne.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,n,o){let u=0;const d=[];return this.si.forEach(((E,T)=>{T.sequenceNumber<=n&&o.get(T.targetId)===null&&(this.si.delete(E),d.push(this.removeMatchingKeysForTargetId(e,T.targetId)),u++)})),Ne.waitFor(d).next((()=>u))}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return Ne.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),Ne.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const u=this.persistence.referenceDelegate,d=[];return u&&n.forEach((E=>{d.push(u.markPotentiallyOrphaned(e,E))})),Ne.waitFor(d)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ne.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return Ne.resolve(o)}containsKey(e,n){return Ne.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n){this.ui={},this.overlays={},this.ci=new If(0),this.li=!1,this.li=!0,this.hi=new NI,this.referenceDelegate=e(this),this.Pi=new MI(this),this.indexManager=new xI,this.remoteDocumentCache=(function(u){return new OI(u)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new mI(n),this.Ii=new SI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new II,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new RI(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){He("MemoryPersistence","Starting transaction:",e);const u=new LI(this.ci.next());return this.referenceDelegate.Ei(),o(u).next((d=>this.referenceDelegate.di(u).next((()=>d)))).toPromise().then((d=>(u.raiseOnCommittedEvent(),d)))}Ai(e,n){return Ne.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class LI extends l4{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Ri=new ug,this.Vi=null}static mi(e){return new hg(e)}get fi(){if(this.Vi)return this.Vi;throw at(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),Ne.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),Ne.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ne.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((u=>this.fi.add(u.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((u=>{u.forEach((d=>this.fi.add(d.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,(o=>{const u=et.fromPath(o);return this.gi(e,u).next((d=>{d||n.removeEntry(u,ht.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class df{constructor(e,n){this.persistence=e,this.pi=new el((o=>h4(o.path)),((o,u)=>o.isEqual(u))),this.garbageCollector=bI(this,n)}static mi(e,n){return new df(e,n)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((u=>o+u))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return Ne.forEach(this.pi,((o,u)=>this.br(e,o,u).next((d=>d?Ne.resolve():n(u)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const u=this.persistence.getRemoteDocumentCache(),d=u.newChangeBuffer();return u.ii(e,(E=>this.br(e,E,n).next((T=>{T||(o++,d.removeEntry(E,ht.min()))})))).next((()=>d.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Ne.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gh(e.data.value)),n}br(e,n,o){return Ne.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const u=this.pi.get(n);return Ne.resolve(u!==void 0&&u>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=u}static As(e,n){let o=Gt(),u=Gt();for(const d of n.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new fg(e,n.fromCache,o,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return NC()?8:c4(SC())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,u){const d={result:null};return this.ys(e,n).next((E=>{d.result=E})).next((()=>{if(!d.result)return this.ws(e,n,u,o).next((E=>{d.result=E}))})).next((()=>{if(d.result)return;const E=new PI;return this.Ss(e,n,E).next((T=>{if(d.result=T,this.Vs)return this.bs(e,n,E,T.size)}))})).next((()=>d.result))}bs(e,n,o,u){return o.documentReadCount<this.fs?(Ll()<=Zt.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",Pl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(Ll()<=Zt.DEBUG&&He("QueryEngine","Query:",Pl(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.gs*u?(Ll()<=Zt.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",Pl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vs(n))):Ne.resolve())}ys(e,n){if(Ux(n))return Ne.resolve(null);let o=Vs(n);return this.indexManager.getIndexType(e,o).next((u=>u===0?null:(n.limit!==null&&u===1&&(n=b1(n,null,"F"),o=Vs(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((d=>{const E=Gt(...d);return this.ps.getDocuments(e,E).next((T=>this.indexManager.getMinOffset(e,o).next((b=>{const _=this.Ds(n,T);return this.Cs(n,_,E,b.readTime)?this.ys(e,b1(n,null,"F")):this.vs(e,_,n,b)}))))})))))}ws(e,n,o,u){return Ux(n)||u.isEqual(ht.min())?Ne.resolve(null):this.ps.getDocuments(e,o).next((d=>{const E=this.Ds(n,d);return this.Cs(n,E,o,u)?Ne.resolve(null):(Ll()<=Zt.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Pl(n)),this.vs(e,E,n,r4(u,su)).next((T=>T)))}))}Ds(e,n){let o=new vi(W_(e));return n.forEach(((u,d)=>{Mf(e,d)&&(o=o.add(d))})),o}Cs(e,n,o,u){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const d=e.limitType==="F"?n.last():n.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Ss(e,n,o){return Ll()<=Zt.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",Pl(n)),this.ps.getDocumentsMatchingQuery(e,n,co.min(),o)}vs(e,n,o,u){return this.ps.getDocumentsMatchingQuery(e,o,u).next((d=>(n.forEach((E=>{d=d.insert(E.key,E)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",kI=3e8;class UI{constructor(e,n,o,u){this.persistence=e,this.Fs=n,this.serializer=u,this.Ms=new Wn(Ht),this.xs=new el((d=>rg(d)),sg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function VI(r,e,n,o){return new UI(r,e,n,o)}async function EA(r,e){const n=mt(r);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next((d=>(u=d,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((d=>{const E=[],T=[];let b=Gt();for(const _ of u){E.push(_.batchId);for(const C of _.mutations)b=b.add(C.key)}for(const _ of d){T.push(_.batchId);for(const C of _.mutations)b=b.add(C.key)}return n.localDocuments.getDocuments(o,b).next((_=>({Ls:_,removedBatchIds:E,addedBatchIds:T})))}))}))}function FI(r,e){const n=mt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const u=e.batch.keys(),d=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(T,b,_,C){const I=_.batch,M=I.keys();let k=Ne.resolve();return M.forEach((X=>{k=k.next((()=>C.getEntry(b,X))).next((K=>{const z=_.docVersions.get(X);fn(z!==null,48541),K.version.compareTo(z)<0&&(I.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),C.addEntry(K)))}))})),k.next((()=>T.mutationQueue.removeMutationBatch(b,I)))})(n,o,e,d).next((()=>d.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(T){let b=Gt();for(let _=0;_<T.mutationResults.length;++_)T.mutationResults[_].transformResults.length>0&&(b=b.add(T.batch.mutations[_].key));return b})(e)))).next((()=>n.localDocuments.getDocuments(o,u)))}))}function yA(r){const e=mt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function jI(r,e){const n=mt(r),o=e.snapshotVersion;let u=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const E=n.Ns.newChangeBuffer({trackRemovals:!0});u=n.Ms;const T=[];e.targetChanges.forEach(((C,I)=>{const M=u.get(I);if(!M)return;T.push(n.Pi.removeMatchingKeys(d,C.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(d,C.addedDocuments,I))));let k=M.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(I)!==null?k=k.withResumeToken(Hi.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):C.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(C.resumeToken,o)),u=u.insert(I,k),(function(K,z,xe){return K.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=kI?!0:xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0})(M,k,C)&&T.push(n.Pi.updateTargetData(d,k))}));let b=ba(),_=Gt();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&T.push(n.persistence.referenceDelegate.updateLimboDocument(d,C))})),T.push(zI(d,E,e.documentUpdates).next((C=>{b=C.ks,_=C.qs}))),!o.isEqual(ht.min())){const C=n.Pi.getLastRemoteSnapshotVersion(d).next((I=>n.Pi.setTargetsMetadata(d,d.currentSequenceNumber,o)));T.push(C)}return Ne.waitFor(T).next((()=>E.apply(d))).next((()=>n.localDocuments.getLocalViewOfDocuments(d,b,_))).next((()=>b))})).then((d=>(n.Ms=u,d)))}function zI(r,e,n){let o=Gt(),u=Gt();return n.forEach((d=>o=o.add(d))),e.getEntries(r,o).next((d=>{let E=ba();return n.forEach(((T,b)=>{const _=d.get(T);b.isFoundDocument()!==_.isFoundDocument()&&(u=u.add(T)),b.isNoDocument()&&b.version.isEqual(ht.min())?(e.removeEntry(T,b.readTime),E=E.insert(T,b)):!_.isValidDocument()||b.version.compareTo(_.version)>0||b.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(b),E=E.insert(T,b)):He(dg,"Ignoring outdated watch update for ",T,". Current version:",_.version," Watch version:",b.version)})),{ks:E,qs:u}}))}function HI(r,e){const n=mt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=tg),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function GI(r,e){const n=mt(r);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let u;return n.Pi.getTargetData(o,e).next((d=>d?(u=d,Ne.resolve(u)):n.Pi.allocateTargetId(o).next((E=>(u=new ro(e,E,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,u).next((()=>u)))))))})).then((o=>{const u=n.Ms.get(o.targetId);return(u===null||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function I1(r,e,n){const o=mt(r),u=o.Ms.get(e),d=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",d,(E=>o.persistence.referenceDelegate.removeTarget(E,u)))}catch(E){if(!tc(E))throw E;He(dg,`Failed to update sequence numbers for target ${e}: ${E}`)}o.Ms=o.Ms.remove(e),o.xs.delete(u.target)}function Zx(r,e,n){const o=mt(r);let u=ht.min(),d=Gt();return o.persistence.runTransaction("Execute query","readwrite",(E=>(function(b,_,C){const I=mt(b),M=I.xs.get(C);return M!==void 0?Ne.resolve(I.Ms.get(M)):I.Pi.getTargetData(_,C)})(o,E,Vs(e)).next((T=>{if(T)return u=T.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(E,T.targetId).next((b=>{d=b}))})).next((()=>o.Fs.getDocumentsMatchingQuery(E,e,n?u:ht.min(),n?d:Gt()))).next((T=>(qI(o,R4(e),T),{documents:T,Qs:d})))))}function qI(r,e,n){let o=r.Os.get(e)||ht.min();n.forEach(((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)})),r.Os.set(e,o)}class Jx{constructor(){this.activeTargetIds=B4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YI{constructor(){this.Mo=new Jx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jx,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="ConnectivityMonitor";class eE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He($x,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){He($x,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh=null;function N1(){return Lh===null?Lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lh++,"0x"+Lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="RestConnection",KI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${u}`,this.Wo=this.databaseId.database===af?`project_id=${o}`:`project_id=${o}&database_id=${u}`}Go(e,n,o,u,d){const E=N1(),T=this.zo(e,n.toUriEncodedString());He($0,`Sending RPC '${e}' ${E}:`,T,o);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,u,d);const{host:_}=new URL(T),C=Z1(_);return this.Jo(e,T,b,o,C).then((I=>(He($0,`Received RPC '${e}' ${E}: `,I),I)),(I=>{throw ql($0,`RPC '${e}' ${E} failed with error: `,I,"url: ",T,"request:",o),I}))}Ho(e,n,o,u,d,E){return this.Go(e,n,o,u,d)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((u,d)=>e[d]=u)),o&&o.headers.forEach(((u,d)=>e[d]=u))}zo(e,n){const o=KI[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="WebChannelConnection";class ZI extends WI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,u,d){const E=N1();return new Promise(((T,b)=>{const _=new w_;_.setWithCredentials(!0),_.listenOnce(b_.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Hh.NO_ERROR:const I=_.getResponseJson();He($i,`XHR for RPC '${e}' ${E} received:`,JSON.stringify(I)),T(I);break;case Hh.TIMEOUT:He($i,`RPC '${e}' ${E} timed out`),b(new ze(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const M=_.getStatus();if(He($i,`RPC '${e}' ${E} failed with status:`,M,"response text:",_.getResponseText()),M>0){let k=_.getResponseJson();Array.isArray(k)&&(k=k[0]);const X=k==null?void 0:k.error;if(X&&X.status&&X.message){const K=(function(xe){const ge=xe.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(ge)>=0?ge:Ce.UNKNOWN})(X.status);b(new ze(K,X.message))}else b(new ze(Ce.UNKNOWN,"Server responded with status "+_.getStatus()))}else b(new ze(Ce.UNAVAILABLE,"Connection failed."));break;default:at(9055,{l_:e,streamId:E,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{He($i,`RPC '${e}' ${E} completed.`)}}));const C=JSON.stringify(u);He($i,`RPC '${e}' ${E} sending request:`,u),_.send(n,"POST",C,o,15)}))}T_(e,n,o){const u=N1(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=C_(),T=v_(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(b.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,n,o),b.encodeInitMessageHeaders=!0;const C=d.join("");He($i,`Creating RPC '${e}' stream ${u}: ${C}`,b);const I=E.createWebChannel(C,b);this.I_(I);let M=!1,k=!1;const X=new QI({Yo:z=>{k?He($i,`Not sending because RPC '${e}' stream ${u} is closed:`,z):(M||(He($i,`Opening RPC '${e}' stream ${u} transport.`),I.open(),M=!0),He($i,`RPC '${e}' stream ${u} sending:`,z),I.send(z))},Zo:()=>I.close()}),K=(z,xe,ge)=>{z.listen(xe,(Q=>{try{ge(Q)}catch(ve){setTimeout((()=>{throw ve}),0)}}))};return K(I,Hc.EventType.OPEN,(()=>{k||(He($i,`RPC '${e}' stream ${u} transport opened.`),X.o_())})),K(I,Hc.EventType.CLOSE,(()=>{k||(k=!0,He($i,`RPC '${e}' stream ${u} transport closed`),X.a_(),this.E_(I))})),K(I,Hc.EventType.ERROR,(z=>{k||(k=!0,ql($i,`RPC '${e}' stream ${u} transport errored. Name:`,z.name,"Message:",z.message),X.a_(new ze(Ce.UNAVAILABLE,"The operation could not be completed")))})),K(I,Hc.EventType.MESSAGE,(z=>{var xe;if(!k){const ge=z.data[0];fn(!!ge,16349);const Q=ge,ve=(Q==null?void 0:Q.error)||((xe=Q[0])==null?void 0:xe.error);if(ve){He($i,`RPC '${e}' stream ${u} received error:`,ve);const Fe=ve.status;let Be=(function(V){const ne=pi[V];if(ne!==void 0)return aA(ne)})(Fe),F=ve.message;Be===void 0&&(Be=Ce.INTERNAL,F="Unknown error status: "+Fe+" with message "+ve.message),k=!0,X.a_(new ze(Be,F)),I.close()}else He($i,`RPC '${e}' stream ${u} received:`,ge),X.u_(ge)}})),K(T,T_.STAT_EVENT,(z=>{z.stat===p1.PROXY?He($i,`RPC '${e}' stream ${u} detected buffering proxy`):z.stat===p1.NOPROXY&&He($i,`RPC '${e}' stream ${u} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function e1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(r){return new tI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n,o=1e3,u=1.5,d=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=u,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),u=Math.max(0,n-o);u>0&&He("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,u,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="PersistentStream";class AA{constructor(e,n,o,u,d,E,T,b){this.Mi=e,this.S_=o,this.b_=u,this.connection=d,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=T,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _A(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ce.RESOURCE_EXHAUSTED?(wa(n.toString()),wa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,u])=>{this.D_===n&&this.G_(o,u)}),(o=>{e((()=>{const u=new ze(Ce.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(u)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((u=>{o((()=>this.z_(u)))})),this.stream.onMessage((u=>{o((()=>++this.F_==1?this.J_(u):this.onNext(u)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return He(tE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(He(tE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JI extends AA{constructor(e,n,o,u,d,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,E),this.serializer=d}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rI(this.serializer,e),o=(function(d){if(!("targetChange"in d))return ht.min();const E=d.targetChange;return E.targetIds&&E.targetIds.length?ht.min():E.readTime?Fs(E.readTime):ht.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=S1(this.serializer),n.addTarget=(function(d,E){let T;const b=E.target;if(T=A1(b)?{documents:oI(d,b)}:{query:lI(d,b).ft},T.targetId=E.targetId,E.resumeToken.approximateByteSize()>0){T.resumeToken=cA(d,E.resumeToken);const _=T1(d,E.expectedCount);_!==null&&(T.expectedCount=_)}else if(E.snapshotVersion.compareTo(ht.min())>0){T.readTime=ff(d,E.snapshotVersion.toTimestamp());const _=T1(d,E.expectedCount);_!==null&&(T.expectedCount=_)}return T})(this.serializer,e);const o=uI(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=S1(this.serializer),n.removeTarget=e,this.q_(n)}}class $I extends AA{constructor(e,n,o,u,d,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,E),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return fn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aI(e.writeResults,e.commitTime),o=Fs(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=S1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>sI(this.serializer,o)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{}class tN extends eN{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.ia=!1}sa(){if(this.ia)throw new ze(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,E])=>this.connection.Go(e,v1(n,o),u,d,E))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ze(Ce.UNKNOWN,d.toString())}))}Ho(e,n,o,u,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([E,T])=>this.connection.Ho(e,v1(n,o),u,E,T,d))).catch((E=>{throw E.name==="FirebaseError"?(E.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),E):new ze(Ce.UNKNOWN,E.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class nN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wa(n),this.aa=!1):He("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="RemoteStore";class iN{constructor(e,n,o,u,d){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((E=>{o.enqueueAndForget((async()=>{tl(this)&&(He(Zo,"Restarting streams for network reachability change."),await(async function(b){const _=mt(b);_.Ea.add(4),await Eu(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Vf(_)})(this))}))})),this.Ra=new nN(o,u)}}async function Vf(r){if(tl(r))for(const e of r.da)await e(!0)}async function Eu(r){for(const e of r.da)await e(!1)}function wA(r,e){const n=mt(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),xg(n)?pg(n):nc(n).O_()&&mg(n,e))}function gg(r,e){const n=mt(r),o=nc(n);n.Ia.delete(e),o.O_()&&bA(n,e),n.Ia.size===0&&(o.O_()?o.L_():tl(n)&&n.Ra.set("Unknown"))}function mg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nc(r).Y_(e)}function bA(r,e){r.Va.Ue(e),nc(r).Z_(e)}function pg(r){r.Va=new Z4({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),nc(r).start(),r.Ra.ua()}function xg(r){return tl(r)&&!nc(r).x_()&&r.Ia.size>0}function tl(r){return mt(r).Ea.size===0}function TA(r){r.Va=void 0}async function rN(r){r.Ra.set("Online")}async function sN(r){r.Ia.forEach(((e,n)=>{mg(r,e)}))}async function aN(r,e){TA(r),xg(r)?(r.Ra.ha(e),pg(r)):r.Ra.set("Unknown")}async function oN(r,e,n){if(r.Ra.set("Online"),e instanceof lA&&e.state===2&&e.cause)try{await(async function(u,d){const E=d.cause;for(const T of d.targetIds)u.Ia.has(T)&&(await u.remoteSyncer.rejectListen(T,E),u.Ia.delete(T),u.Va.removeTarget(T))})(r,e)}catch(o){He(Zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await gf(r,o)}else if(e instanceof Xh?r.Va.Ze(e):e instanceof oA?r.Va.st(e):r.Va.tt(e),!n.isEqual(ht.min()))try{const o=await yA(r.localStore);n.compareTo(o)>=0&&await(function(d,E){const T=d.Va.Tt(E);return T.targetChanges.forEach(((b,_)=>{if(b.resumeToken.approximateByteSize()>0){const C=d.Ia.get(_);C&&d.Ia.set(_,C.withResumeToken(b.resumeToken,E))}})),T.targetMismatches.forEach(((b,_)=>{const C=d.Ia.get(b);if(!C)return;d.Ia.set(b,C.withResumeToken(Hi.EMPTY_BYTE_STRING,C.snapshotVersion)),bA(d,b);const I=new ro(C.target,b,_,C.sequenceNumber);mg(d,I)})),d.remoteSyncer.applyRemoteEvent(T)})(r,n)}catch(o){He(Zo,"Failed to raise snapshot:",o),await gf(r,o)}}async function gf(r,e,n){if(!tc(e))throw e;r.Ea.add(1),await Eu(r),r.Ra.set("Offline"),n||(n=()=>yA(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{He(Zo,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Vf(r)}))}function vA(r,e){return e().catch((n=>gf(r,n,e)))}async function Ff(r){const e=mt(r),n=go(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:tg;for(;lN(e);)try{const u=await HI(e.localStore,o);if(u===null){e.Ta.length===0&&n.L_();break}o=u.batchId,cN(e,u)}catch(u){await gf(e,u)}CA(e)&&SA(e)}function lN(r){return tl(r)&&r.Ta.length<10}function cN(r,e){r.Ta.push(e);const n=go(r);n.O_()&&n.X_&&n.ea(e.mutations)}function CA(r){return tl(r)&&!go(r).x_()&&r.Ta.length>0}function SA(r){go(r).start()}async function uN(r){go(r).ra()}async function hN(r){const e=go(r);for(const n of r.Ta)e.ea(n.mutations)}async function fN(r,e,n){const o=r.Ta.shift(),u=og.from(o,e,n);await vA(r,(()=>r.remoteSyncer.applySuccessfulWrite(u))),await Ff(r)}async function dN(r,e){e&&go(r).X_&&await(async function(o,u){if((function(E){return K4(E)&&E!==Ce.ABORTED})(u.code)){const d=o.Ta.shift();go(o).B_(),await vA(o,(()=>o.remoteSyncer.rejectFailedWrite(d.batchId,u))),await Ff(o)}})(r,e),CA(r)&&SA(r)}async function nE(r,e){const n=mt(r);n.asyncQueue.verifyOperationInProgress(),He(Zo,"RemoteStore received new credentials");const o=tl(n);n.Ea.add(3),await Eu(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vf(n)}async function gN(r,e){const n=mt(r);e?(n.Ea.delete(2),await Vf(n)):e||(n.Ea.add(2),await Eu(n),n.Ra.set("Unknown"))}function nc(r){return r.ma||(r.ma=(function(n,o,u){const d=mt(n);return d.sa(),new JI(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)})(r.datastore,r.asyncQueue,{Xo:rN.bind(null,r),t_:sN.bind(null,r),r_:aN.bind(null,r),H_:oN.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),xg(r)?pg(r):r.Ra.set("Unknown")):(await r.ma.stop(),TA(r))}))),r.ma}function go(r){return r.fa||(r.fa=(function(n,o,u){const d=mt(n);return d.sa(),new $I(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:uN.bind(null,r),r_:dN.bind(null,r),ta:hN.bind(null,r),na:fN.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Ff(r)):(await r.fa.stop(),r.Ta.length>0&&(He(Zo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,o,u,d){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((E=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,d){const E=Date.now()+o,T=new Eg(e,n,E,u,d);return T.start(o),T}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(r,e){if(wa("AsyncQueue",`${e}: ${r}`),tc(r))return new ze(Ce.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{static emptySet(e){return new Hl(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||et.comparator(n.key,o.key):(n,o)=>et.comparator(n.key,o.key),this.keyedMap=Gc(),this.sortedSet=new Wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Hl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.ga=new Wn(et.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):at(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class Ql{constructor(e,n,o,u,d,E,T,b,_){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=E,this.syncStateChanged=T,this.excludesMetadataChanges=b,this.hasCachedResults=_}static fromInitialDocuments(e,n,o,u,d){const E=[];return n.forEach((T=>{E.push({type:0,doc:T})})),new Ql(e,n,Hl.emptySet(n),E,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class pN{constructor(){this.queries=rE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const u=mt(n),d=u.queries;u.queries=rE(),d.forEach(((E,T)=>{for(const b of T.Sa)b.onError(o)}))})(this,new ze(Ce.ABORTED,"Firestore shutting down"))}}function rE(){return new el((r=>K_(r)),Df)}async function _g(r,e){const n=mt(r);let o=3;const u=e.query;let d=n.queries.get(u);d?!d.ba()&&e.Da()&&(o=2):(d=new mN,o=e.Da()?0:1);try{switch(o){case 0:d.wa=await n.onListen(u,!0);break;case 1:d.wa=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(E){const T=yg(E,`Initialization of query '${Pl(e.query)}' failed`);return void e.onError(T)}n.queries.set(u,d),d.Sa.push(e),e.va(n.onlineState),d.wa&&e.Fa(d.wa)&&wg(n)}async function Ag(r,e){const n=mt(r),o=e.query;let u=3;const d=n.queries.get(o);if(d){const E=d.Sa.indexOf(e);E>=0&&(d.Sa.splice(E,1),d.Sa.length===0?u=e.Da()?0:1:!d.ba()&&e.Da()&&(u=2))}switch(u){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function xN(r,e){const n=mt(r);let o=!1;for(const u of e){const d=u.query,E=n.queries.get(d);if(E){for(const T of E.Sa)T.Fa(u)&&(o=!0);E.wa=u}}o&&wg(n)}function EN(r,e,n){const o=mt(r),u=o.queries.get(e);if(u)for(const d of u.Sa)d.onError(n);o.queries.delete(e)}function wg(r){r.Ca.forEach((e=>{e.next()}))}var R1,sE;(sE=R1||(R1={})).Ma="default",sE.Cache="cache";class bg{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)u.type!==3&&o.push(u);e=new Ql(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==R1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.key=e}}class NA{constructor(e){this.key=e}}class yN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=W_(e),this.tu=new Hl(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new iE,u=n?n.tu:this.tu;let d=n?n.mutatedKeys:this.mutatedKeys,E=u,T=!1;const b=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,_=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal(((C,I)=>{const M=u.get(C),k=Mf(this.query,I)?I:null,X=!!M&&this.mutatedKeys.has(M.key),K=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let z=!1;M&&k?M.data.isEqual(k.data)?X!==K&&(o.track({type:3,doc:k}),z=!0):this.su(M,k)||(o.track({type:2,doc:k}),z=!0,(b&&this.eu(k,b)>0||_&&this.eu(k,_)<0)&&(T=!0)):!M&&k?(o.track({type:0,doc:k}),z=!0):M&&!k&&(o.track({type:1,doc:M}),z=!0,(b||_)&&(T=!0)),z&&(k?(E=E.add(k),d=K?d.add(C):d.delete(C)):(E=E.delete(C),d=d.delete(C)))})),this.query.limit!==null)for(;E.size>this.query.limit;){const C=this.query.limitType==="F"?E.last():E.first();E=E.delete(C.key),d=d.delete(C.key),o.track({type:1,doc:C})}return{tu:E,iu:o,Cs:T,mutatedKeys:d}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,u){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const E=e.iu.ya();E.sort(((C,I)=>(function(k,X){const K=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{Rt:z})}};return K(k)-K(X)})(C.type,I.type)||this.eu(C.doc,I.doc))),this.ou(o),u=u??!1;const T=n&&!u?this._u():[],b=this.Xa.size===0&&this.current&&!u?1:0,_=b!==this.Za;return this.Za=b,E.length!==0||_?{snapshot:new Ql(this.query,e.tu,d,E,e.mutatedKeys,b===0,_,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:T}:{au:T}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gt(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new NA(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new IA(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=Gt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ql.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tg="SyncEngine";class _N{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class AN{constructor(e){this.key=e,this.hu=!1}}class wN{constructor(e,n,o,u,d,E){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=E,this.Pu={},this.Tu=new el((T=>K_(T)),Df),this.Iu=new Map,this.Eu=new Set,this.du=new Wn(et.comparator),this.Au=new Map,this.Ru=new ug,this.Vu={},this.mu=new Map,this.fu=Wl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bN(r,e,n=!0){const o=PA(r);let u;const d=o.Tu.get(e);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.lu()):u=await RA(o,e,n,!0),u}async function TN(r,e){const n=PA(r);await RA(n,e,!0,!1)}async function RA(r,e,n,o){const u=await GI(r.localStore,Vs(e)),d=u.targetId,E=r.sharedClientState.addLocalQueryTarget(d,n);let T;return o&&(T=await vN(r,e,d,E==="current",u.resumeToken)),r.isPrimaryClient&&n&&wA(r.remoteStore,u),T}async function vN(r,e,n,o,u){r.pu=(I,M,k)=>(async function(K,z,xe,ge){let Q=z.view.ru(xe);Q.Cs&&(Q=await Zx(K.localStore,z.query,!1).then((({documents:F})=>z.view.ru(F,Q))));const ve=ge&&ge.targetChanges.get(z.targetId),Fe=ge&&ge.targetMismatches.get(z.targetId)!=null,Be=z.view.applyChanges(Q,K.isPrimaryClient,ve,Fe);return oE(K,z.targetId,Be.au),Be.snapshot})(r,I,M,k);const d=await Zx(r.localStore,e,!0),E=new yN(e,d.Qs),T=E.ru(d.documents),b=xu.createSynthesizedTargetChangeForCurrentChange(n,o&&r.onlineState!=="Offline",u),_=E.applyChanges(T,r.isPrimaryClient,b);oE(r,n,_.au);const C=new _N(e,n,E);return r.Tu.set(e,C),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),_.snapshot}async function CN(r,e,n){const o=mt(r),u=o.Tu.get(e),d=o.Iu.get(u.targetId);if(d.length>1)return o.Iu.set(u.targetId,d.filter((E=>!Df(E,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||await I1(o.localStore,u.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(u.targetId),n&&gg(o.remoteStore,u.targetId),O1(o,u.targetId)})).catch(ec)):(O1(o,u.targetId),await I1(o.localStore,u.targetId,!0))}async function SN(r,e){const n=mt(r),o=n.Tu.get(e),u=n.Iu.get(o.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),gg(n.remoteStore,o.targetId))}async function IN(r,e,n){const o=PN(r);try{const u=await(function(E,T){const b=mt(E),_=Ln.now(),C=T.reduce(((k,X)=>k.add(X.key)),Gt());let I,M;return b.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let X=ba(),K=Gt();return b.Ns.getEntries(k,C).next((z=>{X=z,X.forEach(((xe,ge)=>{ge.isValidDocument()||(K=K.add(xe))}))})).next((()=>b.localDocuments.getOverlayedDocuments(k,X))).next((z=>{I=z;const xe=[];for(const ge of T){const Q=H4(ge,I.get(ge.key).overlayedDocument);Q!=null&&xe.push(new yo(ge.key,Q,F_(Q.value.mapValue),Or.exists(!0)))}return b.mutationQueue.addMutationBatch(k,_,xe,T)})).next((z=>{M=z;const xe=z.applyToLocalDocumentSet(I,K);return b.documentOverlayCache.saveOverlays(k,z.batchId,xe)}))})).then((()=>({batchId:M.batchId,changes:Z_(I)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),(function(E,T,b){let _=E.Vu[E.currentUser.toKey()];_||(_=new Wn(Ht)),_=_.insert(T,b),E.Vu[E.currentUser.toKey()]=_})(o,u.batchId,n),await yu(o,u.changes),await Ff(o.remoteStore)}catch(u){const d=yg(u,"Failed to persist write");n.reject(d)}}async function OA(r,e){const n=mt(r);try{const o=await jI(n.localStore,e);e.targetChanges.forEach(((u,d)=>{const E=n.Au.get(d);E&&(fn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1,22616),u.addedDocuments.size>0?E.hu=!0:u.modifiedDocuments.size>0?fn(E.hu,14607):u.removedDocuments.size>0&&(fn(E.hu,42227),E.hu=!1))})),await yu(n,o,e)}catch(o){await ec(o)}}function aE(r,e,n){const o=mt(r);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const u=[];o.Tu.forEach(((d,E)=>{const T=E.view.va(e);T.snapshot&&u.push(T.snapshot)})),(function(E,T){const b=mt(E);b.onlineState=T;let _=!1;b.queries.forEach(((C,I)=>{for(const M of I.Sa)M.va(T)&&(_=!0)})),_&&wg(b)})(o.eventManager,e),u.length&&o.Pu.H_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function NN(r,e,n){const o=mt(r);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.Au.get(e),d=u&&u.key;if(d){let E=new Wn(et.comparator);E=E.insert(d,tr.newNoDocument(d,ht.min()));const T=Gt().add(d),b=new kf(ht.min(),new Map,new Wn(Ht),E,T);await OA(o,b),o.du=o.du.remove(d),o.Au.delete(e),vg(o)}else await I1(o.localStore,e,!1).then((()=>O1(o,e,n))).catch(ec)}async function RN(r,e){const n=mt(r),o=e.batch.batchId;try{const u=await FI(n.localStore,e);MA(n,o,null),DA(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await yu(n,u)}catch(u){await ec(u)}}async function ON(r,e,n){const o=mt(r);try{const u=await(function(E,T){const b=mt(E);return b.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let C;return b.mutationQueue.lookupMutationBatch(_,T).next((I=>(fn(I!==null,37113),C=I.keys(),b.mutationQueue.removeMutationBatch(_,I)))).next((()=>b.mutationQueue.performConsistencyCheck(_))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(_,C,T))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,C))).next((()=>b.localDocuments.getDocuments(_,C)))}))})(o.localStore,e);MA(o,e,n),DA(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await yu(o,u)}catch(u){await ec(u)}}function DA(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function MA(r,e,n){const o=mt(r);let u=o.Vu[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(n?d.reject(n):d.resolve(),u=u.remove(e)),o.Vu[o.currentUser.toKey()]=u}}function O1(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.Iu.get(e))r.Tu.delete(o),n&&r.Pu.yu(o,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((o=>{r.Ru.containsKey(o)||LA(r,o)}))}function LA(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(gg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),vg(r))}function oE(r,e,n){for(const o of n)o instanceof IA?(r.Ru.addReference(o.key,e),DN(r,o)):o instanceof NA?(He(Tg,"Document no longer in limbo: "+o.key),r.Ru.removeReference(o.key,e),r.Ru.containsKey(o.key)||LA(r,o.key)):at(19791,{wu:o})}function DN(r,e){const n=e.key,o=n.path.canonicalString();r.du.get(n)||r.Eu.has(o)||(He(Tg,"New document in limbo: "+n),r.Eu.add(o),vg(r))}function vg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new et(Sn.fromString(e)),o=r.fu.next();r.Au.set(o,new AN(n)),r.du=r.du.insert(n,o),wA(r.remoteStore,new ro(Vs(Of(n.path)),o,"TargetPurposeLimboResolution",If.ce))}}async function yu(r,e,n){const o=mt(r),u=[],d=[],E=[];o.Tu.isEmpty()||(o.Tu.forEach(((T,b)=>{E.push(o.pu(b,e,n).then((_=>{var C;if((_||n)&&o.isPrimaryClient){const I=_?!_.fromCache:(C=n==null?void 0:n.targetChanges.get(b.targetId))==null?void 0:C.current;o.sharedClientState.updateQueryState(b.targetId,I?"current":"not-current")}if(_){u.push(_);const I=fg.As(b.targetId,_);d.push(I)}})))})),await Promise.all(E),o.Pu.H_(u),await(async function(b,_){const C=mt(b);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Ne.forEach(_,(M=>Ne.forEach(M.Es,(k=>C.persistence.referenceDelegate.addReference(I,M.targetId,k))).next((()=>Ne.forEach(M.ds,(k=>C.persistence.referenceDelegate.removeReference(I,M.targetId,k)))))))))}catch(I){if(!tc(I))throw I;He(dg,"Failed to update sequence numbers: "+I)}for(const I of _){const M=I.targetId;if(!I.fromCache){const k=C.Ms.get(M),X=k.snapshotVersion,K=k.withLastLimboFreeSnapshotVersion(X);C.Ms=C.Ms.insert(M,K)}}})(o.localStore,d))}async function MN(r,e){const n=mt(r);if(!n.currentUser.isEqual(e)){He(Tg,"User change. New user:",e.toKey());const o=await EA(n.localStore,e);n.currentUser=e,(function(d,E){d.mu.forEach((T=>{T.forEach((b=>{b.reject(new ze(Ce.CANCELLED,E))}))})),d.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await yu(n,o.Ls)}}function LN(r,e){const n=mt(r),o=n.Au.get(e);if(o&&o.hu)return Gt().add(o.key);{let u=Gt();const d=n.Iu.get(e);if(!d)return u;for(const E of d){const T=n.Tu.get(E);u=u.unionWith(T.view.nu)}return u}}function PA(r){const e=mt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=OA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NN.bind(null,e),e.Pu.H_=xN.bind(null,e.eventManager),e.Pu.yu=EN.bind(null,e.eventManager),e}function PN(r){const e=mt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ON.bind(null,e),e}class mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return VI(this.persistence,new BI,e.initialUser,this.serializer)}Cu(e){return new xA(hg.mi,this.serializer)}Du(e){return new YI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mf.provider={build:()=>new mf};class BN extends mf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){fn(this.persistence.referenceDelegate instanceof df,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new AI(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ir.withCacheSize(this.cacheSizeBytes):Ir.DEFAULT;return new xA((o=>df.mi(o,n)),this.serializer)}}class D1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>aE(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=MN.bind(null,this.syncEngine),await gN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pN})()}createDatastore(e){const n=Uf(e.databaseInfo.databaseId),o=(function(d){return new ZI(d)})(e.databaseInfo);return(function(d,E,T,b){return new tN(d,E,T,b)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,u,d,E,T){return new iN(o,u,d,E,T)})(this.localStore,this.datastore,e.asyncQueue,(n=>aE(this.syncEngine,n,0)),(function(){return eE.v()?new eE:new XI})())}createSyncEngine(e,n){return(function(u,d,E,T,b,_,C){const I=new wN(u,d,E,T,b,_);return C&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(u){const d=mt(u);He(Zo,"RemoteStore shutting down."),d.Ea.add(5),await Eu(d),d.Aa.shutdown(),d.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}D1.provider={build:()=>new D1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="FirestoreClient";class kN{constructor(e,n,o,u,d){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=er.UNAUTHENTICATED,this.clientId=eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(o,(async E=>{He(mo,"Received user=",E.uid),await this.authCredentialListener(E),this.user=E})),this.appCheckCredentials.start(o,(E=>(He(mo,"Received new app check token=",E),this.appCheckCredentialListener(E,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=yg(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function t1(r,e){r.asyncQueue.verifyOperationInProgress(),He(mo,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let o=n.initialUser;r.setCredentialChangeListener((async u=>{o.isEqual(u)||(await EA(e.localStore,u),o=u)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function lE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await UN(r);He(mo,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((o=>nE(e.remoteStore,o))),r.setAppCheckTokenChangeListener(((o,u)=>nE(e.remoteStore,u))),r._onlineComponents=e}async function UN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){He(mo,"Using user provided OfflineComponentProvider");try{await t1(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(u){return u.name==="FirebaseError"?u.code===Ce.FAILED_PRECONDITION||u.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11})(n))throw n;ql("Error using user provided cache. Falling back to memory cache: "+n),await t1(r,new mf)}}else He(mo,"Using default OfflineComponentProvider"),await t1(r,new BN(void 0));return r._offlineComponents}async function BA(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(He(mo,"Using user provided OnlineComponentProvider"),await lE(r,r._uninitializedComponentsProvider._online)):(He(mo,"Using default OnlineComponentProvider"),await lE(r,new D1))),r._onlineComponents}function VN(r){return BA(r).then((e=>e.syncEngine))}async function pf(r){const e=await BA(r),n=e.eventManager;return n.onListen=bN.bind(null,e.syncEngine),n.onUnlisten=CN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SN.bind(null,e.syncEngine),n}function FN(r,e,n={}){const o=new ya;return r.asyncQueue.enqueueAndForget((async()=>(function(d,E,T,b,_){const C=new Cg({next:M=>{C.Nu(),E.enqueueAndForget((()=>Ag(d,I)));const k=M.docs.has(T);!k&&M.fromCache?_.reject(new ze(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&M.fromCache&&b&&b.source==="server"?_.reject(new ze(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),I=new bg(Of(T.path),C,{includeMetadataChanges:!0,qa:!0});return _g(d,I)})(await pf(r),r.asyncQueue,e,n,o))),o.promise}function jN(r,e,n={}){const o=new ya;return r.asyncQueue.enqueueAndForget((async()=>(function(d,E,T,b,_){const C=new Cg({next:M=>{C.Nu(),E.enqueueAndForget((()=>Ag(d,I))),M.fromCache&&b.source==="server"?_.reject(new ze(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),I=new bg(T,C,{includeMetadataChanges:!0,qa:!0});return _g(d,I)})(await pf(r),r.asyncQueue,e,n,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="firestore.googleapis.com",uE=!0;class hE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UA,this.ssl=uE}else this.host=e.host,this.ssl=e.ssl??uE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yI)throw new ze(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}i4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kA(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,u){return o.timeoutSeconds===u.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jf{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new XS;switch(o.type){case"firstParty":return new ZS(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ze(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=cE.get(n);o&&(He("ComponentProvider","Removing Datastore"),cE.delete(n),o.terminate())})(this),Promise.resolve()}}function zN(r,e,n,o={}){var _;r=Rr(r,jf);const u=Z1(e),d=r._getSettings(),E={...d,emulatorOptions:r._getEmulatorOptions()},T=`${e}:${n}`;u&&(wC(`https://${T}`),CC("Firestore",!0)),d.host!==UA&&d.host!==T&&ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...d,host:T,ssl:u,emulatorOptions:o};if(!tf(b,E)&&(r._setSettings(b),o.mockUserToken)){let C,I;if(typeof o.mockUserToken=="string")C=o.mockUserToken,I=er.MOCK_USER;else{C=bC(o.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const M=o.mockUserToken.sub||o.mockUserToken.user_id;if(!M)throw new ze(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new er(M)}r._authCredentials=new KS(new I_(C,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class ri{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ri(this.firestore,e,this._key)}toJSON(){return{type:ri._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(gu(n,ri._jsonSchema))return new ri(e,o||null,new et(Sn.fromString(n.referencePath)))}}ri._jsonSchemaVersion="firestore/documentReference/1.0",ri._jsonSchema={type:Ei("string",ri._jsonSchemaVersion),referencePath:Ei("string")};class lo extends nl{constructor(e,n,o){super(e,n,Of(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ri(this.firestore,null,new et(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function ms(r,e,...n){if(r=fs(r),N_("collection","path",e),r instanceof jf){const o=Sn.fromString(e,...n);return Tx(o),new lo(r,null,o)}{if(!(r instanceof ri||r instanceof lo))throw new ze(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Sn.fromString(e,...n));return Tx(o),new lo(r.firestore,null,o)}}function In(r,e,...n){if(r=fs(r),arguments.length===1&&(e=eg.newId()),N_("doc","path",e),r instanceof jf){const o=Sn.fromString(e,...n);return bx(o),new ri(r,null,new et(o))}{if(!(r instanceof ri||r instanceof lo))throw new ze(Ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Sn.fromString(e,...n));return bx(o),new ri(r.firestore,r instanceof lo?r.converter:null,new et(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="AsyncQueue";class dE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _A(this,"async_queue_retry"),this._c=()=>{const o=e1();o&&He(fE,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=e1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=e1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ya;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tc(e))throw e;He(fE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,wa("INTERNAL UNHANDLED ERROR: ",gE(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const u=Eg.createAndSchedule(this,e,n,o,(d=>this.hc(d)));return this.tc.push(u),u}uc(){this.nc&&at(47125,{Pc:gE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function gE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(r){return(function(n,o){if(typeof n!="object"||n===null)return!1;const u=n;for(const d of o)if(d in u&&typeof u[d]=="function")return!0;return!1})(r,["next","error","complete"])}class Ta extends jf{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new dE,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dE(e),this._firestoreClient=void 0,await e}}}function HN(r,e){const n=typeof r=="object"?r:BS(),o=typeof r=="string"?r:af,u=OS(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const d=_C("firestore");d&&zN(u,...d)}return u}function _u(r){if(r._terminated)throw new ze(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||GN(r),r._firestoreClient}function GN(r){var o,u,d;const e=r._freezeSettings(),n=(function(T,b,_,C){return new g4(T,b,_,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,kA(C.experimentalLongPollingOptions),C.useFetchStreams,C.isUsingEmulator)})(r._databaseId,((o=r._app)==null?void 0:o.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(u=e.localCache)!=null&&u._offlineComponentProvider&&((d=e.localCache)!=null&&d._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new kN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(T){const b=T==null?void 0:T._online.build();return{_offline:T==null?void 0:T._offline.build(b),_online:b}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cs(Hi.fromBase64String(e))}catch(n){throw new ze(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cs(Hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gu(e,cs._jsonSchema))return cs.fromBase64String(e.bytes)}}cs._jsonSchemaVersion="firestore/bytes/1.0",cs._jsonSchema={type:Ei("string",cs._jsonSchemaVersion),bytes:Ei("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ze(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ze(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ze(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:js._jsonSchemaVersion}}static fromJSON(e){if(gu(e,js._jsonSchema))return new js(e.latitude,e.longitude)}}js._jsonSchemaVersion="firestore/geoPoint/1.0",js._jsonSchema={type:Ei("string",js._jsonSchemaVersion),latitude:Ei("number"),longitude:Ei("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gu(e,zs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new zs(e.vectorValues);throw new ze(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zs._jsonSchemaVersion="firestore/vectorValue/1.0",zs._jsonSchema={type:Ei("string",zs._jsonSchemaVersion),vectorValues:Ei("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=/^__.*__$/;class YN{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new yo(e,this.data,this.fieldMask,n,this.fieldTransforms):new pu(e,this.data,n,this.fieldTransforms)}}class VA{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new yo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{Ac:r})}}class Ig{constructor(e,n,o,u,d,E){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=E||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var u;const n=(u=this.path)==null?void 0:u.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){var u;const n=(u=this.path)==null?void 0:u.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FA(this.Ac)&&qN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class XN{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Uf(e)}Cc(e,n,o,u=!1){return new Ig({Ac:e,methodName:n,Dc:o,path:zi.emptyPath(),fc:!1,bc:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zf(r){const e=r._freezeSettings(),n=Uf(r._databaseId);return new XN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function jA(r,e,n,o,u,d={}){const E=r.Cc(d.merge||d.mergeFields?2:0,e,n,u);Ng("Data must be an object, but it was:",E,o);const T=GA(o,E);let b,_;if(d.merge)b=new qr(E.fieldMask),_=E.fieldTransforms;else if(d.mergeFields){const C=[];for(const I of d.mergeFields){const M=M1(e,I,n);if(!E.contains(M))throw new ze(Ce.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);YA(C,M)||C.push(M)}b=new qr(C),_=E.fieldTransforms.filter((I=>b.covers(I.field)))}else b=null,_=E.fieldTransforms;return new YN(new Nr(T),b,_)}class Hf extends Sg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hf}}function zA(r,e,n,o){const u=r.Cc(1,e,n);Ng("Data must be an object, but it was:",u,o);const d=[],E=Nr.empty();Eo(o,((b,_)=>{const C=Rg(e,b,n);_=fs(_);const I=u.yc(C);if(_ instanceof Hf)d.push(C);else{const M=wu(_,I);M!=null&&(d.push(C),E.set(C,M))}}));const T=new qr(d);return new VA(E,T,u.fieldTransforms)}function HA(r,e,n,o,u,d){const E=r.Cc(1,e,n),T=[M1(e,o,n)],b=[u];if(d.length%2!=0)throw new ze(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<d.length;M+=2)T.push(M1(e,d[M])),b.push(d[M+1]);const _=[],C=Nr.empty();for(let M=T.length-1;M>=0;--M)if(!YA(_,T[M])){const k=T[M];let X=b[M];X=fs(X);const K=E.yc(k);if(X instanceof Hf)_.push(k);else{const z=wu(X,K);z!=null&&(_.push(k),C.set(k,z))}}const I=new qr(_);return new VA(C,I,E.fieldTransforms)}function KN(r,e,n,o=!1){return wu(n,r.Cc(o?4:3,e))}function wu(r,e){if(qA(r=fs(r)))return Ng("Unsupported field value:",e,r),GA(r,e);if(r instanceof Sg)return(function(o,u){if(!FA(u.Ac))throw u.Sc(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Sc(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,u){const d=[];let E=0;for(const T of o){let b=wu(T,u.wc(E));b==null&&(b={nullValue:"NULL_VALUE"}),d.push(b),E++}return{arrayValue:{values:d}}})(r,e)}return(function(o,u){if((o=fs(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return k4(u.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const d=Ln.fromDate(o);return{timestampValue:ff(u.serializer,d)}}if(o instanceof Ln){const d=new Ln(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ff(u.serializer,d)}}if(o instanceof js)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof cs)return{bytesValue:cA(u.serializer,o._byteString)};if(o instanceof ri){const d=u.databaseId,E=o.firestore._databaseId;if(!E.isEqual(d))throw u.Sc(`Document reference is for database ${E.projectId}/${E.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:cg(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof zs)return(function(E,T){return{mapValue:{fields:{[U_]:{stringValue:V_},[of]:{arrayValue:{values:E.toArray().map((_=>{if(typeof _!="number")throw T.Sc("VectorValues must only contain numeric values.");return ag(T.serializer,_)}))}}}}}})(o,u);throw u.Sc(`Unsupported field value: ${Sf(o)}`)})(r,e)}function GA(r,e){const n={};return D_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(r,((o,u)=>{const d=wu(u,e.mc(o));d!=null&&(n[o]=d)})),{mapValue:{fields:n}}}function qA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ln||r instanceof js||r instanceof cs||r instanceof ri||r instanceof Sg||r instanceof zs)}function Ng(r,e,n){if(!qA(n)||!R_(n)){const o=Sf(n);throw o==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+o)}}function M1(r,e,n){if((e=fs(e))instanceof Au)return e._internalPath;if(typeof e=="string")return Rg(r,e);throw xf("Field path arguments must be of type string or ",r,!1,void 0,n)}const WN=new RegExp("[~\\*/\\[\\]]");function Rg(r,e,n){if(e.search(WN)>=0)throw xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Au(...e.split("."))._internalPath}catch{throw xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function xf(r,e,n,o,u){const d=o&&!o.isEmpty(),E=u!==void 0;let T=`Function ${e}() called with invalid data`;n&&(T+=" (via `toFirestore()`)"),T+=". ";let b="";return(d||E)&&(b+=" (found",d&&(b+=` in field ${o}`),E&&(b+=` in document ${u}`),b+=")"),new ze(Ce.INVALID_ARGUMENT,T+r+b)}function YA(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n,o,u,d){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(KA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QN extends XA{data(){return super.data()}}function KA(r,e){return typeof e=="string"?Rg(r,e):e instanceof Au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ze(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Og{}class ZN extends Og{}function JN(r,e,...n){let o=[];e instanceof Og&&o.push(e),o=o.concat(n),(function(d){const E=d.filter((b=>b instanceof Mg)).length,T=d.filter((b=>b instanceof Dg)).length;if(E>1||E>0&&T>0)throw new ze(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const u of o)r=u._apply(r);return r}class Dg extends ZN{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Dg(e,n,o)}_apply(e){const n=this._parse(e);return QA(e._query,n),new nl(e.firestore,e.converter,w1(e._query,n))}_parse(e){const n=zf(e.firestore);return(function(d,E,T,b,_,C,I){let M;if(_.isKeyField()){if(C==="array-contains"||C==="array-contains-any")throw new ze(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if(C==="in"||C==="not-in"){xE(I,C);const X=[];for(const K of I)X.push(pE(b,d,K));M={arrayValue:{values:X}}}else M=pE(b,d,I)}else C!=="in"&&C!=="not-in"&&C!=="array-contains-any"||xE(I,C),M=KN(T,E,I,C==="in"||C==="not-in");return xi.create(_,C,M)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Mg extends Og{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mg(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:vs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(u,d){let E=u;const T=d.getFlattenedFilters();for(const b of T)QA(E,b),E=w1(E,b)})(e._query,n),new nl(e.firestore,e.converter,w1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function pE(r,e,n){if(typeof(n=fs(n))=="string"){if(n==="")throw new ze(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X_(e)&&n.indexOf("/")!==-1)throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Sn.fromString(n));if(!et.isDocumentKey(o))throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Dx(r,new et(o))}if(n instanceof ri)return Dx(r,n._key);throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(n)}.`)}function xE(r,e){if(!Array.isArray(r)||r.length===0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QA(r,e){const n=(function(u,d){for(const E of u)for(const T of E.getFlattenedFilters())if(d.indexOf(T.op)>=0)return T.op;return null})(r.filters,(function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ze(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $N{convertValue(e,n="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ci(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw at(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Eo(e,((u,d)=>{o[u]=this.convertValue(d,n)})),o}convertVectorValue(e){var o,u,d;const n=(d=(u=(o=e.fields)==null?void 0:o[of].arrayValue)==null?void 0:u.values)==null?void 0:d.map((E=>ci(E.doubleValue)));return new zs(n)}convertGeoPoint(e){return new js(ci(e.latitude),ci(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Rf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const n=uo(e);return new Ln(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Sn.fromString(e);fn(mA(o),9688,{name:e});const u=new ou(o.get(1),o.get(3)),d=new et(o.popFirst(5));return u.isEqual(n)||wa(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(r,e,n){let o;return o=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,o}class Yc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xo extends XA{constructor(e,n,o,u,d,E){super(e,n,o,u,E),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(KA("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xo._jsonSchema={type:Ei("string",Xo._jsonSchemaVersion),bundleSource:Ei("string","DocumentSnapshot"),bundleName:Ei("string"),bundle:Ei("string")};class Kh extends Xo{data(e={}){return super.data(e)}}class Ko{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Yc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Kh(this._firestore,this._userDataWriter,o.key,o,new Yc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ze(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(u,d){if(u._snapshot.oldDocs.isEmpty()){let E=0;return u._snapshot.docChanges.map((T=>{const b=new Kh(u._firestore,u._userDataWriter,T.doc.key,T.doc,new Yc(u._snapshot.mutatedKeys.has(T.doc.key),u._snapshot.fromCache),u.query.converter);return T.doc,{type:"added",doc:b,oldIndex:-1,newIndex:E++}}))}{let E=u._snapshot.oldDocs;return u._snapshot.docChanges.filter((T=>d||T.type!==3)).map((T=>{const b=new Kh(u._firestore,u._userDataWriter,T.doc.key,T.doc,new Yc(u._snapshot.mutatedKeys.has(T.doc.key),u._snapshot.fromCache),u.query.converter);let _=-1,C=-1;return T.type!==0&&(_=E.indexOf(T.doc.key),E=E.delete(T.doc.key)),T.type!==1&&(E=E.add(T.doc),C=E.indexOf(T.doc.key)),{type:e6(T.type),doc:b,oldIndex:_,newIndex:C}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=eg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],u=[];return this.docs.forEach((d=>{d._document!==null&&(n.push(d._document),o.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),u.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function e6(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(r){r=Rr(r,ri);const e=Rr(r.firestore,Ta);return FN(_u(e),r._key).then((n=>JA(e,r,n)))}Ko._jsonSchemaVersion="firestore/querySnapshot/1.0",Ko._jsonSchema={type:Ei("string",Ko._jsonSchemaVersion),bundleSource:Ei("string","QuerySnapshot"),bundleName:Ei("string"),bundle:Ei("string")};class Lg extends $N{constructor(e){super(),this.firestore=e}convertBytes(e){return new cs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ri(this.firestore,null,n)}}function Gf(r){r=Rr(r,nl);const e=Rr(r.firestore,Ta),n=_u(e),o=new Lg(e);return WA(r._query),jN(n,r._query).then((u=>new Ko(e,o,r,u)))}function Ca(r,e,n){r=Rr(r,ri);const o=Rr(r.firestore,Ta),u=ZA(r.converter,e,n);return qf(o,[jA(zf(o),"setDoc",r._key,u,r.converter!==null,n).toMutation(r._key,Or.none())])}function po(r,e,n,...o){r=Rr(r,ri);const u=Rr(r.firestore,Ta),d=zf(u);let E;return E=typeof(e=fs(e))=="string"||e instanceof Au?HA(d,"updateDoc",r._key,e,n,o):zA(d,"updateDoc",r._key,e),qf(u,[E.toMutation(r._key,Or.exists(!0))])}function bu(r){return qf(Rr(r.firestore,Ta),[new Bf(r._key,Or.none())])}function _o(r,...e){var b,_,C;r=fs(r);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||mE(e[o])||(n=e[o++]);const u={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(mE(e[o])){const I=e[o];e[o]=(b=I.next)==null?void 0:b.bind(I),e[o+1]=(_=I.error)==null?void 0:_.bind(I),e[o+2]=(C=I.complete)==null?void 0:C.bind(I)}let d,E,T;if(r instanceof ri)E=Rr(r.firestore,Ta),T=Of(r._key.path),d={next:I=>{e[o]&&e[o](JA(E,r,I))},error:e[o+1],complete:e[o+2]};else{const I=Rr(r,nl);E=Rr(I.firestore,Ta),T=I._query;const M=new Lg(E);d={next:k=>{e[o]&&e[o](new Ko(E,M,I,k))},error:e[o+1],complete:e[o+2]},WA(r._query)}return(function(M,k,X,K){const z=new Cg(K),xe=new bg(k,z,X);return M.asyncQueue.enqueueAndForget((async()=>_g(await pf(M),xe))),()=>{z.Nu(),M.asyncQueue.enqueueAndForget((async()=>Ag(await pf(M),xe)))}})(_u(E),T,u,d)}function qf(r,e){return(function(o,u){const d=new ya;return o.asyncQueue.enqueueAndForget((async()=>IN(await VN(o),u,d))),d.promise})(_u(r),e)}function JA(r,e,n){const o=n.docs.get(e._key),u=new Lg(r);return new Xo(r,u,e._key,o,new Yc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zf(e)}set(e,n,o){this._verifyNotCommitted();const u=n1(e,this._firestore),d=ZA(u.converter,n,o),E=jA(this._dataReader,"WriteBatch.set",u._key,d,u.converter!==null,o);return this._mutations.push(E.toMutation(u._key,Or.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const d=n1(e,this._firestore);let E;return E=typeof(n=fs(n))=="string"||n instanceof Au?HA(this._dataReader,"WriteBatch.update",d._key,n,o,u):zA(this._dataReader,"WriteBatch.update",d._key,n),this._mutations.push(E.toMutation(d._key,Or.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=n1(e,this._firestore);return this._mutations=this._mutations.concat(new Bf(n._key,Or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(Ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function n1(r,e){if((r=fs(r)).firestore!==e)throw new ze(Ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(r){return _u(r=Rr(r,Ta)),new t6(r,(e=>qf(r,e)))}(function(e,n=!0){(function(u){$l=u})(PS),rf(new iu("firestore",((o,{instanceIdentifier:u,options:d})=>{const E=o.getProvider("app").getImmediate(),T=new Ta(new WS(o.getProvider("auth-internal")),new JS(E,o.getProvider("app-check-internal")),(function(_,C){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ze(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(_.options.projectId,C)})(E,u),E);return d={useFetchStreams:n,...d},T._setSettings(d),T}),"PUBLIC").setMultipleInstances(!0)),zl(yx,_x,e),zl(yx,_x,"esm2020")})();var n6="firebase",i6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zl(n6,i6,"app");const r6={apiKey:"AIzaSyDYZ6VUaaDmy-AvS4D9cM3zkN0Vg4lStuk",authDomain:"workshop-36cbe.firebaseapp.com",projectId:"workshop-36cbe",storageBucket:"workshop-36cbe.firebasestorage.app",messagingSenderId:"742601440632",appId:"1:742601440632:web:48e380f7e1441494ba9c8d"},s6=E_(r6),Et=HN(s6),a6=[{id:"p1",name:"",category:"food",price:150,description:"",imageUrl:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?q=80&w=400&h=300&auto=format&fit=crop",stock:12},{id:"p2",name:"",category:"food",price:80,description:"",imageUrl:"https://images.unsplash.com/photo-1544467316-e97029d2d47b?q=80&w=400&h=300&auto=format&fit=crop",stock:45},{id:"p3",name:"",category:"electronic",price:12e3,description:"",imageUrl:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?q=80&w=400&h=300&auto=format&fit=crop",stock:1},{id:"p4",name:"",category:"ticket",price:320,description:"",imageUrl:"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=400&h=300&auto=format&fit=crop",stock:8},{id:"p5",name:"",category:"food",price:800,description:"",imageUrl:"https://images.unsplash.com/photo-1544739313-6fad02872377?q=80&w=400&h=300&auto=format&fit=crop",stock:3},{id:"p6",name:"",category:"electronic",price:2500,description:"",imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=400&h=300&auto=format&fit=crop",stock:5}],Wo=[{name:"",threshold:0,color:"bg-slate-400",icon:""},{name:"",threshold:500,color:"bg-blue-400",icon:""},{name:"",threshold:2e3,color:"bg-green-500",icon:""},{name:"",threshold:5e3,color:"bg-purple-500",icon:""},{name:"",threshold:1e4,color:"bg-orange-500",icon:""},{name:"",threshold:3e4,color:"bg-yellow-500",icon:""}],Pg={USER:"workshop_user"},Nt={STUDENTS:"students",MISSIONS:"missions",PRODUCTS:"products",WISHES:"wishes",REDEMPTIONS:"redemptions",CHALLENGE_HISTORY:"challengeHistory",POINT_REASONS:"pointReasons",MISSION_SUBMISSIONS:"missionSubmissions",PRODUCT_CATEGORIES:"productCategories"},$A=[{id:"user_zhou",name:"",points:1200,totalEarned:2500,role:us.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Zhou",password:"123",grade:"",isApproved:!0},{id:"user_hu",name:"",points:800,totalEarned:1800,role:us.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Hu",password:"123",grade:"",isApproved:!0},{id:"user_lin",name:"",points:2100,totalEarned:4200,role:us.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Lin",password:"123",grade:"",isApproved:!0}],EE={id:"user_admin",name:"",points:0,totalEarned:0,role:us.ADMIN,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isApproved:!0},yE={id:"user_guest",name:"",points:0,totalEarned:0,role:us.GUEST,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest",isApproved:!0},ew=async()=>{try{const r=await Gf(ms(Et,Nt.STUDENTS));return r.empty?(await o6(),$A):r.docs.map(e=>({...e.data(),id:e.id}))}catch(r){return console.error("Error fetching students:",r),[]}},o6=async()=>{const r=Yf(Et);$A.forEach(e=>{const n=In(Et,Nt.STUDENTS,e.id);r.set(n,e)}),await r.commit()},tw=async r=>{try{await Ca(In(Et,Nt.STUDENTS,r.id),r)}catch(e){console.error("Error saving student:",e),alert("")}},l6=async r=>{const e=Yf(Et);r.forEach(n=>{const o=In(Et,Nt.STUDENTS,n.id);e.set(o,n)}),await e.commit()},c6=async(r,e,n)=>{try{if((await ew()).some(d=>d.name===r))return!1;const u={id:`user_${Date.now()}`,name:r,password:e,grade:n,points:0,totalEarned:0,role:us.STUDENT,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${r}`,isApproved:!1};return await tw(u),!0}catch(o){return console.error("Error registering student:",o),!1}},u6=async r=>{try{const e=In(Et,Nt.STUDENTS,r);await po(e,{isApproved:!0})}catch(e){console.error("Error approving student:",e)}},h6=async r=>{try{await bu(In(Et,Nt.STUDENTS,r))}catch(e){console.error("Error deleting student:",e)}},_E=()=>{const r=localStorage.getItem(Pg.USER);return r?JSON.parse(r):null},Wh=async r=>{localStorage.setItem(Pg.USER,JSON.stringify(r)),r.role===us.STUDENT&&await tw(r)},f6=()=>{localStorage.removeItem(Pg.USER)},d6=async r=>{try{await Ca(In(Et,Nt.REDEMPTIONS,r.id),r)}catch(e){console.error("Error adding redemption:",e)}},g6=async(r,e)=>{try{const n=In(Et,Nt.REDEMPTIONS,r);await po(n,{status:e})}catch(n){console.error("Error updating redemption status:",n)}},m6=async r=>{try{const e=`cat_${Date.now()}`;await Ca(In(Et,Nt.PRODUCT_CATEGORIES,e),{id:e,name:r})}catch(e){console.error("Error adding category:",e)}},p6=async r=>{try{await bu(In(Et,Nt.PRODUCT_CATEGORIES,r))}catch(e){console.error("Error deleting category:",e)}},nw=r=>_o(ms(Et,Nt.PRODUCT_CATEGORIES),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)}),x6=[{id:"m1",title:"",description:"",points:100,type:"normal",isActive:!0,maxAttempts:1},{id:"m2",title:" 80 ",description:"",points:300,type:"challenge",isActive:!0,maxAttempts:1},{id:"m3",title:" 90 ",description:"",points:1e3,type:"hard",isActive:!0,maxAttempts:1}],E6=async()=>{const r=Yf(Et);x6.forEach(e=>{const n=In(Et,Nt.MISSIONS,e.id);r.set(n,e)}),await r.commit()},y6=async r=>{try{await Ca(In(Et,Nt.MISSIONS,r.id),r)}catch(e){console.error("Error adding mission:",e)}},_6=async r=>{try{const e=In(Et,Nt.MISSIONS,r),n=await Ef(e);if(n.exists()){const o=n.data();await po(e,{isActive:!o.isActive})}}catch(e){console.error("Error toggling mission:",e)}},A6=async()=>{try{return(await Gf(ms(Et,Nt.CHALLENGE_HISTORY))).docs.map(e=>({...e.data(),id:e.id}))}catch(r){return console.error("Error fetching challenge history:",r),[]}},w6=async r=>{try{const e=`${r.userId}_${r.missionId}_${Date.now()}`;await Ca(In(Et,Nt.CHALLENGE_HISTORY,e),r)}catch(e){console.error("Error adding challenge history:",e)}},iw=async(r,e)=>{try{const n=await A6(),o=new Date;return o.setHours(0,0,0,0),n.some(u=>u.userId===r&&u.missionId===e&&u.timestamp>=o.getTime())}catch(n){return console.error("Error checking mission completion:",n),!1}},b6=async r=>{try{if(await iw(r.userId,r.missionId)){console.warn("Mission already completed today");return}const n=new Date;if(n.setHours(0,0,0,0),(await Gf(JN(ms(Et,Nt.MISSION_SUBMISSIONS)))).docs.find(d=>{const E=d.data();return E.userId===r.userId&&E.missionId===r.missionId&&E.status==="pending"&&E.timestamp>=n.getTime()})){console.warn("Mission submission already pending today");return}await Ca(In(Et,Nt.MISSION_SUBMISSIONS,r.id),r)}catch(e){console.error("Error submitting mission:",e)}},T6=async r=>{try{const e=In(Et,Nt.MISSION_SUBMISSIONS,r),n=await Ef(e);if(n.exists()){const o=n.data();await po(e,{status:"approved"}),await w6({id:`h_${Date.now()}`,userId:o.userId,missionId:o.missionId,timestamp:Date.now()});const u=In(Et,Nt.STUDENTS,o.userId),d=await Ef(u);if(d.exists()){const E=d.data();await po(u,{points:E.points+o.points,totalEarned:E.totalEarned+o.points})}}}catch(e){console.error("Error approving mission:",e)}},v6=async r=>{try{const e=In(Et,Nt.MISSION_SUBMISSIONS,r);await po(e,{status:"rejected"})}catch(e){console.error("Error rejecting mission:",e)}},rw=r=>_o(ms(Et,Nt.MISSION_SUBMISSIONS),e=>{r(e.docs.map(n=>({...n.data(),id:n.id})))}),C6=async()=>{const r=Yf(Et);a6.forEach(e=>{const n=In(Et,Nt.PRODUCTS,e.id);r.set(n,e)}),await r.commit()},S6=async r=>{try{await Ca(In(Et,Nt.PRODUCTS,r.id),r)}catch(e){console.error("Error adding product:",e)}},sw=async(r,e)=>{try{const n=In(Et,Nt.PRODUCTS,r);await po(n,{stock:Math.max(0,e)})}catch(n){console.error("Error updating product stock:",n)}},I6=async r=>{try{await bu(In(Et,Nt.PRODUCTS,r))}catch(e){console.error("Error deleting product:",e)}},N6=async r=>{try{await Ca(In(Et,Nt.POINT_REASONS,r.id),r)}catch(e){console.error("Error adding point reason:",e)}},R6=async r=>{try{await bu(In(Et,Nt.POINT_REASONS,r))}catch(e){console.error("Error deleting point reason:",e)}},O6=r=>_o(ms(Et,Nt.POINT_REASONS),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)}),D6=async()=>{try{return(await Gf(ms(Et,Nt.WISHES))).docs.map(e=>({...e.data(),id:e.id}))}catch(r){return console.error("Error fetching wishes:",r),[]}},M6=async r=>{try{if((await D6()).find(o=>o.userId===r.userId)){alert("");return}await Ca(In(Et,Nt.WISHES,r.id),r)}catch(e){console.error("Error adding wish:",e),alert(" Firestore  (Test Mode)")}},L6=async r=>{try{await bu(In(Et,Nt.WISHES,r))}catch(e){console.error("Error deleting wish:",e)}},P6=async(r,e)=>{try{const n=In(Et,Nt.WISHES,r),o=await Ef(n);if(o.exists()){const d=o.data().likedBy||[];if(d.includes(e)){alert("");return}await po(n,{likedBy:[...d,e]})}}catch(n){console.error("Error liking wish:",n)}},B6=r=>_o(ms(Et,Nt.STUDENTS),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)},e=>{console.error("Error in subscribeToStudents:",e)}),aw=r=>_o(ms(Et,Nt.MISSIONS),e=>{e.empty&&E6().catch(console.error);const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)},e=>console.error("Error subscribing to missions:",e)),ow=r=>_o(ms(Et,Nt.PRODUCTS),e=>{e.empty&&C6().catch(console.error);const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)},e=>{console.error("Error subscribing to products:",e),alert("")}),lw=r=>_o(ms(Et,Nt.WISHES),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)},e=>console.error("Error subscribing to wishes:",e)),cw=r=>_o(ms(Et,Nt.REDEMPTIONS),e=>{const n=e.docs.map(o=>{const u=o.data();return{id:o.id,status:"pending",pointsSpent:0,productName:"",timestamp:Date.now(),userId:"unknown",qrCodeData:"",...u}});r(n)},e=>{console.error("Error subscribing to redemptions:",e)});var k6={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var AE;(function(r){r.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",r.OUTCOME_OK="OUTCOME_OK",r.OUTCOME_FAILED="OUTCOME_FAILED",r.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(AE||(AE={}));var wE;(function(r){r.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",r.PYTHON="PYTHON"})(wE||(wE={}));var bE;(function(r){r.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",r.SILENT="SILENT",r.WHEN_IDLE="WHEN_IDLE",r.INTERRUPT="INTERRUPT"})(bE||(bE={}));var TE;(function(r){r.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",r.STRING="STRING",r.NUMBER="NUMBER",r.INTEGER="INTEGER",r.BOOLEAN="BOOLEAN",r.ARRAY="ARRAY",r.OBJECT="OBJECT",r.NULL="NULL"})(TE||(TE={}));var vE;(function(r){r.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",r.SIMPLE_SEARCH="SIMPLE_SEARCH",r.ELASTIC_SEARCH="ELASTIC_SEARCH"})(vE||(vE={}));var CE;(function(r){r.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",r.NO_AUTH="NO_AUTH",r.API_KEY_AUTH="API_KEY_AUTH",r.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",r.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",r.OAUTH="OAUTH",r.OIDC_AUTH="OIDC_AUTH"})(CE||(CE={}));var SE;(function(r){r.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",r.HTTP_IN_QUERY="HTTP_IN_QUERY",r.HTTP_IN_HEADER="HTTP_IN_HEADER",r.HTTP_IN_PATH="HTTP_IN_PATH",r.HTTP_IN_BODY="HTTP_IN_BODY",r.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(SE||(SE={}));var IE;(function(r){r.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",r.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",r.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",r.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(IE||(IE={}));var NE;(function(r){r.UNSPECIFIED="UNSPECIFIED",r.BLOCKING="BLOCKING",r.NON_BLOCKING="NON_BLOCKING"})(NE||(NE={}));var RE;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(RE||(RE={}));var OE;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE",r.VALIDATED="VALIDATED"})(OE||(OE={}));var DE;(function(r){r.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH",r.MINIMAL="MINIMAL"})(DE||(DE={}));var ME;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",r.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",r.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",r.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",r.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ME||(ME={}));var LE;(function(r){r.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",r.SEVERITY="SEVERITY",r.PROBABILITY="PROBABILITY"})(LE||(LE={}));var PE;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE",r.OFF="OFF"})(PE||(PE={}));var BE;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.IMAGE_SAFETY="IMAGE_SAFETY",r.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",r.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",r.NO_IMAGE="NO_IMAGE",r.IMAGE_RECITATION="IMAGE_RECITATION",r.IMAGE_OTHER="IMAGE_OTHER"})(BE||(BE={}));var kE;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(kE||(kE={}));var UE;(function(r){r.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",r.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",r.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",r.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",r.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(UE||(UE={}));var VE;(function(r){r.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",r.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",r.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",r.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",r.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(VE||(VE={}));var FE;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.IMAGE_SAFETY="IMAGE_SAFETY",r.MODEL_ARMOR="MODEL_ARMOR",r.JAILBREAK="JAILBREAK"})(FE||(FE={}));var jE;(function(r){r.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",r.ON_DEMAND="ON_DEMAND",r.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jE||(jE={}));var zE;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.AUDIO="AUDIO"})(zE||(zE={}));var HE;(function(r){r.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",r.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",r.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",r.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(HE||(HE={}));var GE;(function(r){r.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",r.TUNING_MODE_FULL="TUNING_MODE_FULL",r.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(GE||(GE={}));var qE;(function(r){r.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",r.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",r.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",r.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",r.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",r.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",r.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(qE||(qE={}));var YE;(function(r){r.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",r.JOB_STATE_QUEUED="JOB_STATE_QUEUED",r.JOB_STATE_PENDING="JOB_STATE_PENDING",r.JOB_STATE_RUNNING="JOB_STATE_RUNNING",r.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",r.JOB_STATE_FAILED="JOB_STATE_FAILED",r.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",r.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",r.JOB_STATE_PAUSED="JOB_STATE_PAUSED",r.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",r.JOB_STATE_UPDATING="JOB_STATE_UPDATING",r.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(YE||(YE={}));var XE;(function(r){r.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",r.TUNING_TASK_I2V="TUNING_TASK_I2V",r.TUNING_TASK_T2V="TUNING_TASK_T2V",r.TUNING_TASK_R2V="TUNING_TASK_R2V"})(XE||(XE={}));var KE;(function(r){r.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",r.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",r.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",r.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",r.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(KE||(KE={}));var WE;(function(r){r.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",r.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",r.BALANCED="BALANCED",r.PRIORITIZE_COST="PRIORITIZE_COST"})(WE||(WE={}));var QE;(function(r){r.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",r.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(QE||(QE={}));var ZE;(function(r){r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(ZE||(ZE={}));var JE;(function(r){r.DONT_ALLOW="DONT_ALLOW",r.ALLOW_ADULT="ALLOW_ADULT",r.ALLOW_ALL="ALLOW_ALL"})(JE||(JE={}));var $E;(function(r){r.auto="auto",r.en="en",r.ja="ja",r.ko="ko",r.hi="hi",r.zh="zh",r.pt="pt",r.es="es"})($E||($E={}));var ey;(function(r){r.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",r.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",r.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",r.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",r.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ey||(ey={}));var ty;(function(r){r.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",r.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",r.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",r.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ty||(ty={}));var ny;(function(r){r.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",r.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",r.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",r.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ny||(ny={}));var iy;(function(r){r.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",r.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",r.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",r.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",r.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",r.EDIT_MODE_STYLE="EDIT_MODE_STYLE",r.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",r.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(iy||(iy={}));var ry;(function(r){r.FOREGROUND="FOREGROUND",r.BACKGROUND="BACKGROUND",r.PROMPT="PROMPT",r.SEMANTIC="SEMANTIC",r.INTERACTIVE="INTERACTIVE"})(ry||(ry={}));var sy;(function(r){r.ASSET="ASSET",r.STYLE="STYLE"})(sy||(sy={}));var ay;(function(r){r.INSERT="INSERT",r.REMOVE="REMOVE",r.REMOVE_STATIC="REMOVE_STATIC",r.OUTPAINT="OUTPAINT"})(ay||(ay={}));var oy;(function(r){r.OPTIMIZED="OPTIMIZED",r.LOSSLESS="LOSSLESS"})(oy||(oy={}));var ly;(function(r){r.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",r.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ly||(ly={}));var cy;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.STATE_PENDING="STATE_PENDING",r.STATE_ACTIVE="STATE_ACTIVE",r.STATE_FAILED="STATE_FAILED"})(cy||(cy={}));var uy;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.PROCESSING="PROCESSING",r.ACTIVE="ACTIVE",r.FAILED="FAILED"})(uy||(uy={}));var hy;(function(r){r.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",r.UPLOADED="UPLOADED",r.GENERATED="GENERATED",r.REGISTERED="REGISTERED"})(hy||(hy={}));var fy;(function(r){r.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.RESPONSE_REJECTED="RESPONSE_REJECTED",r.NEED_MORE_INPUT="NEED_MORE_INPUT"})(fy||(fy={}));var dy;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.VIDEO="VIDEO",r.AUDIO="AUDIO",r.DOCUMENT="DOCUMENT"})(dy||(dy={}));var gy;(function(r){r.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",r.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",r.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gy||(gy={}));var my;(function(r){r.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",r.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",r.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(my||(my={}));var py;(function(r){r.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",r.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",r.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(py||(py={}));var xy;(function(r){r.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",r.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",r.NO_INTERRUPTION="NO_INTERRUPTION"})(xy||(xy={}));var Ey;(function(r){r.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",r.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",r.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ey||(Ey={}));var yy;(function(r){r.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",r.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",r.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",r.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",r.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",r.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",r.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",r.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",r.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",r.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",r.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",r.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",r.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(yy||(yy={}));var _y;(function(r){r.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",r.QUALITY="QUALITY",r.DIVERSITY="DIVERSITY",r.VOCALIZATION="VOCALIZATION"})(_y||(_y={}));var Ay;(function(r){r.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",r.PLAY="PLAY",r.PAUSE="PAUSE",r.STOP="STOP",r.RESET_CONTEXT="RESET_CONTEXT"})(Ay||(Ay={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wy;(function(r){r.PAGED_ITEM_BATCH_JOBS="batchJobs",r.PAGED_ITEM_MODELS="models",r.PAGED_ITEM_TUNING_JOBS="tuningJobs",r.PAGED_ITEM_FILES="files",r.PAGED_ITEM_CACHED_CONTENTS="cachedContents",r.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",r.PAGED_ITEM_DOCUMENTS="documents"})(wy||(wy={}));function yf(r,e){var n={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(r);u<o.length;u++)e.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(r,o[u])&&(n[o[u]]=r[o[u]]);return n}function by(r){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&r[e],o=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xn(r){return this instanceof Xn?(this.v=r,this):new Xn(r)}function tu(r,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(r,e||[]),u,d=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),T("next"),T("throw"),T("return",E),u[Symbol.asyncIterator]=function(){return this},u;function E(k){return function(X){return Promise.resolve(X).then(k,I)}}function T(k,X){o[k]&&(u[k]=function(K){return new Promise(function(z,xe){d.push([k,K,z,xe])>1||b(k,K)})},X&&(u[k]=X(u[k])))}function b(k,X){try{_(o[k](X))}catch(K){M(d[0][3],K)}}function _(k){k.value instanceof Xn?Promise.resolve(k.value.v).then(C,I):M(d[0][2],k)}function C(k){b("next",k)}function I(k){b("throw",k)}function M(k,X){k(X),d.shift(),d.length&&b(d[0][0],d[0][1])}}function Gl(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],n;return e?e.call(r):(r=typeof by=="function"?by(r):r[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(d){n[d]=r[d]&&function(E){return new Promise(function(T,b){E=r[d](E),u(T,b,E.done,E.value)})}}function u(d,E,T,b){Promise.resolve(b).then(function(_){d({value:_,done:T})},E)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uw=function(){const{crypto:r}=globalThis;if(r!=null&&r.randomUUID)return uw=r.randomUUID.bind(r),r.randomUUID();const e=new Uint8Array(1),n=r?()=>r.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const U6=()=>uw();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L1(r){return typeof r=="object"&&r!==null&&("name"in r&&r.name==="AbortError"||"message"in r&&String(r.message).includes("FetchRequestCanceledException"))}const P1=r=>{if(r instanceof Error)return r;if(typeof r=="object"&&r!==null){try{if(Object.prototype.toString.call(r)==="[object Error]"){const e=new Error(r.message,r.cause?{cause:r.cause}:{});return r.stack&&(e.stack=r.stack),r.cause&&!e.cause&&(e.cause=r.cause),r.name&&(e.name=r.name),e}}catch{}try{return new Error(JSON.stringify(r))}catch{}}return new Error(r)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ds extends Error{}class gr extends ds{constructor(e,n,o,u){super(`${gr.makeMessage(e,n,o)}`),this.status=e,this.headers=u,this.error=n}static makeMessage(e,n,o){const u=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&u?`${e} ${u}`:e?`${e} status code (no body)`:u||"(no status code or body)"}static generate(e,n,o,u){if(!e||!u)return new Xf({message:o,cause:P1(n)});const d=n;return e===400?new fw(e,d,o,u):e===401?new dw(e,d,o,u):e===403?new gw(e,d,o,u):e===404?new mw(e,d,o,u):e===409?new pw(e,d,o,u):e===422?new xw(e,d,o,u):e===429?new Ew(e,d,o,u):e>=500?new yw(e,d,o,u):new gr(e,d,o,u)}}class B1 extends gr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Xf extends gr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class hw extends Xf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class fw extends gr{}class dw extends gr{}class gw extends gr{}class mw extends gr{}class pw extends gr{}class xw extends gr{}class Ew extends gr{}class yw extends gr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V6=/^[a-z][a-z0-9+.-]*:/i,F6=r=>V6.test(r);let k1=r=>(k1=Array.isArray,k1(r));const j6=k1;let z6=j6;const Ty=z6;function H6(r){if(!r)return!0;for(const e in r)return!1;return!0}function G6(r,e){return Object.prototype.hasOwnProperty.call(r,e)}const q6=(r,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ds(`${r} must be an integer`);if(e<0)throw new ds(`${r} must be a positive integer`);return e},Y6=r=>{try{return JSON.parse(r)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X6=r=>new Promise(e=>setTimeout(e,r));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ul="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const W6=()=>{var r,e,n,o,u;const d=K6();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":Cy(Deno.build.os),"X-Stainless-Arch":vy(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(r=Deno.version)===null||r===void 0?void 0:r.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":Cy((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":vy((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(u=globalThis.process.version)!==null&&u!==void 0?u:"unknown"};const E=Q6();return E?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${E.browser}`,"X-Stainless-Runtime-Version":E.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Q6(){if(typeof navigator>"u"||!navigator)return null;const r=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of r){const o=n.exec(navigator.userAgent);if(o){const u=o[1]||0,d=o[2]||0,E=o[3]||0;return{browser:e,version:`${u}.${d}.${E}`}}}return null}const vy=r=>r==="x32"?"x32":r==="x86_64"||r==="x64"?"x64":r==="arm"?"arm":r==="aarch64"||r==="arm64"?"arm64":r?`other:${r}`:"unknown",Cy=r=>(r=r.toLowerCase(),r.includes("ios")?"iOS":r==="android"?"Android":r==="darwin"?"MacOS":r==="win32"?"Windows":r==="freebsd"?"FreeBSD":r==="openbsd"?"OpenBSD":r==="linux"?"Linux":r?`Other:${r}`:"Unknown");let Ph;const Z6=()=>Ph??(Ph=W6());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function _w(...r){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...r)}function $6(r){let e=Symbol.asyncIterator in r?r[Symbol.asyncIterator]():r[Symbol.iterator]();return _w({start(){},async pull(n){const{done:o,value:u}=await e.next();o?n.close():n.enqueue(u)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Aw(r){if(r[Symbol.asyncIterator])return r;const e=r.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function e8(r){var e,n;if(r===null||typeof r!="object")return;if(r[Symbol.asyncIterator]){await((n=(e=r[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=r.getReader(),u=o.cancel();o.releaseLock(),await u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t8=({headers:r,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ww=()=>{var r;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((r=e==null?void 0:e.versions)===null||r===void 0?void 0:r.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function i1(r,e,n){return ww(),new File(r,e??"unknown_file",n)}function n8(r){return(typeof r=="object"&&r!==null&&("name"in r&&r.name&&String(r.name)||"url"in r&&r.url&&String(r.url)||"filename"in r&&r.filename&&String(r.filename)||"path"in r&&r.path&&String(r.path))||"").split(/[\\/]/).pop()||void 0}const i8=r=>r!=null&&typeof r=="object"&&typeof r[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bw=r=>r!=null&&typeof r=="object"&&typeof r.size=="number"&&typeof r.type=="string"&&typeof r.text=="function"&&typeof r.slice=="function"&&typeof r.arrayBuffer=="function",r8=r=>r!=null&&typeof r=="object"&&typeof r.name=="string"&&typeof r.lastModified=="number"&&bw(r),s8=r=>r!=null&&typeof r=="object"&&typeof r.url=="string"&&typeof r.blob=="function";async function a8(r,e,n){if(ww(),r=await r,r8(r))return r instanceof File?r:i1([await r.arrayBuffer()],r.name);if(s8(r)){const u=await r.blob();return e||(e=new URL(r.url).pathname.split(/[\\/]/).pop()),i1(await U1(u),e,n)}const o=await U1(r);if(e||(e=n8(r)),!(n!=null&&n.type)){const u=o.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof u=="string"&&(n=Object.assign(Object.assign({},n),{type:u}))}return i1(o,e,n)}async function U1(r){var e,n,o,u,d;let E=[];if(typeof r=="string"||ArrayBuffer.isView(r)||r instanceof ArrayBuffer)E.push(r);else if(bw(r))E.push(r instanceof Blob?r:await r.arrayBuffer());else if(i8(r))try{for(var T=!0,b=Gl(r),_;_=await b.next(),e=_.done,!e;T=!0){u=_.value,T=!1;const C=u;E.push(...await U1(C))}}catch(C){n={error:C}}finally{try{!T&&!e&&(o=b.return)&&await o.call(b)}finally{if(n)throw n.error}}else{const C=(d=r==null?void 0:r.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof r}${C?`; constructor: ${C}`:""}${o8(r)}`)}return E}function o8(r){return typeof r!="object"||r===null?"":`; props: [${Object.getOwnPropertyNames(r).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tw{constructor(e){this._client=e}}Tw._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vw(r){return r.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Sy=Object.freeze(Object.create(null)),l8=(r=vw)=>(function(n,...o){if(n.length===1)return n[0];let u=!1;const d=[],E=n.reduce((C,I,M)=>{var k,X,K;/[?#]/.test(I)&&(u=!0);const z=o[M];let xe=(u?encodeURIComponent:r)(""+z);return M!==o.length&&(z==null||typeof z=="object"&&z.toString===((K=Object.getPrototypeOf((X=Object.getPrototypeOf((k=z.hasOwnProperty)!==null&&k!==void 0?k:Sy))!==null&&X!==void 0?X:Sy))===null||K===void 0?void 0:K.toString))&&(xe=z+"",d.push({start:C.length+I.length,length:xe.length,error:`Value of type ${Object.prototype.toString.call(z).slice(8,-1)} is not a valid path parameter`})),C+I+(M===o.length?"":xe)},""),T=E.split(/[?#]/,1)[0],b=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let _;for(;(_=b.exec(T))!==null;)d.push({start:_.index,length:_[0].length,error:`Value "${_[0]}" can't be safely passed as a path parameter`});if(d.sort((C,I)=>C.start-I.start),d.length>0){let C=0;const I=d.reduce((M,k)=>{const X=" ".repeat(k.start-C),K="^".repeat(k.length);return C=k.start+k.length,M+X+K},"");throw new ds(`Path parameters result in path with invalid segments:
${d.map(M=>M.error).join(`
`)}
${E}
${I}`)}return E}),Bh=l8(vw);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cw extends Tw{create(e,n){var o;const{api_version:u=this._client.apiVersion}=e,d=yf(e,["api_version"]);if("model"in d&&"agent_config"in d)throw new ds("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new ds("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Bh`/${u}/interactions`,Object.assign(Object.assign({body:d},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:u=this._client.apiVersion}=n??{};return this._client.delete(Bh`/${u}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:u=this._client.apiVersion}=n??{};return this._client.post(Bh`/${u}/interactions/${e}/cancel`,o)}get(e,n={},o){var u;const d=n??{},{api_version:E=this._client.apiVersion}=d,T=yf(d,["api_version"]);return this._client.get(Bh`/${E}/interactions/${e}`,Object.assign(Object.assign({query:T},o),{stream:(u=n==null?void 0:n.stream)!==null&&u!==void 0?u:!1}))}}Cw._key=Object.freeze(["interactions"]);class Sw extends Cw{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c8(r){let e=0;for(const u of r)e+=u.length;const n=new Uint8Array(e);let o=0;for(const u of r)n.set(u,o),o+=u.length;return n}let kh;function Bg(r){let e;return(kh??(e=new globalThis.TextEncoder,kh=e.encode.bind(e)))(r)}let Uh;function Iy(r){let e;return(Uh??(e=new globalThis.TextDecoder,Uh=e.decode.bind(e)))(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Bg(e):e;this.buffer=c8([this.buffer,n]);const o=[];let u;for(;(u=u8(this.buffer,this.carriageReturnIndex))!=null;){if(u.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=u.index;continue}if(this.carriageReturnIndex!=null&&(u.index!==this.carriageReturnIndex+1||u.carriage)){o.push(Iy(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?u.preceding-1:u.preceding,E=Iy(this.buffer.subarray(0,d));o.push(E),this.buffer=this.buffer.subarray(u.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Kf.NEWLINE_CHARS=new Set([`
`,"\r"]);Kf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function u8(r,e){for(let u=e??0;u<r.length;u++){if(r[u]===10)return{preceding:u,index:u+1,carriage:!1};if(r[u]===13)return{preceding:u,index:u+1,carriage:!0}}return null}function h8(r){for(let o=0;o<r.length-1;o++){if(r[o]===10&&r[o+1]===10||r[o]===13&&r[o+1]===13)return o+2;if(r[o]===13&&r[o+1]===10&&o+3<r.length&&r[o+2]===13&&r[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _f={off:0,error:200,warn:300,info:400,debug:500},Ny=(r,e,n)=>{if(r){if(G6(_f,r))return r;dr(n).warn(`${e} was set to ${JSON.stringify(r)}, expected one of ${JSON.stringify(Object.keys(_f))}`)}};function Xc(){}function Vh(r,e,n){return!e||_f[r]>_f[n]?Xc:e[r].bind(e)}const f8={error:Xc,warn:Xc,info:Xc,debug:Xc};let Ry=new WeakMap;function dr(r){var e;const n=r.logger,o=(e=r.logLevel)!==null&&e!==void 0?e:"off";if(!n)return f8;const u=Ry.get(n);if(u&&u[0]===o)return u[1];const d={error:Vh("error",n,o),warn:Vh("warn",n,o),info:Vh("info",n,o),debug:Vh("debug",n,o)};return Ry.set(n,[o,d]),d}const Go=r=>(r.options&&(r.options=Object.assign({},r.options),delete r.options.headers),r.headers&&(r.headers=Object.fromEntries((r.headers instanceof Headers?[...r.headers]:Object.entries(r.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in r&&(r.retryOfRequestLogID&&(r.retryOf=r.retryOfRequestLogID),delete r.retryOfRequestLogID),r);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vl{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let u=!1;const d=o?dr(o):console;function E(){return tu(this,arguments,function*(){var b,_,C,I;if(u)throw new ds("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let M=!1;try{try{for(var k=!0,X=Gl(d8(e,n)),K;K=yield Xn(X.next()),b=K.done,!b;k=!0){I=K.value,k=!1;const z=I;if(!M)if(z.data.startsWith("[DONE]")){M=!0;continue}else try{yield yield Xn(JSON.parse(z.data))}catch(xe){throw d.error("Could not parse message into JSON:",z.data),d.error("From chunk:",z.raw),xe}}}catch(z){_={error:z}}finally{try{!k&&!b&&(C=X.return)&&(yield Xn(C.call(X)))}finally{if(_)throw _.error}}M=!0}catch(z){if(L1(z))return yield Xn(void 0);throw z}finally{M||n.abort()}})}return new Vl(E,n,o)}static fromReadableStream(e,n,o){let u=!1;function d(){return tu(this,arguments,function*(){var b,_,C,I;const M=new Kf,k=Aw(e);try{for(var X=!0,K=Gl(k),z;z=yield Xn(K.next()),b=z.done,!b;X=!0){I=z.value,X=!1;const xe=I;for(const ge of M.decode(xe))yield yield Xn(ge)}}catch(xe){_={error:xe}}finally{try{!X&&!b&&(C=K.return)&&(yield Xn(C.call(K)))}finally{if(_)throw _.error}}for(const xe of M.flush())yield yield Xn(xe)})}function E(){return tu(this,arguments,function*(){var b,_,C,I;if(u)throw new ds("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let M=!1;try{try{for(var k=!0,X=Gl(d()),K;K=yield Xn(X.next()),b=K.done,!b;k=!0){I=K.value,k=!1;const z=I;M||z&&(yield yield Xn(JSON.parse(z)))}}catch(z){_={error:z}}finally{try{!k&&!b&&(C=X.return)&&(yield Xn(C.call(X)))}finally{if(_)throw _.error}}M=!0}catch(z){if(L1(z))return yield Xn(void 0);throw z}finally{M||n.abort()}})}return new Vl(E,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),u=d=>({next:()=>{if(d.length===0){const E=o.next();e.push(E),n.push(E)}return d.shift()}});return[new Vl(()=>u(e),this.controller,this.client),new Vl(()=>u(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return _w({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:u,done:d}=await n.next();if(d)return o.close();const E=Bg(JSON.stringify(u)+`
`);o.enqueue(E)}catch(u){o.error(u)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function d8(r,e){return tu(this,arguments,function*(){var o,u,d,E;if(!r.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ds("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ds("Attempted to iterate over a response with no body");const T=new m8,b=new Kf,_=Aw(r.body);try{for(var C=!0,I=Gl(g8(_)),M;M=yield Xn(I.next()),o=M.done,!o;C=!0){E=M.value,C=!1;const k=E;for(const X of b.decode(k)){const K=T.decode(X);K&&(yield yield Xn(K))}}}catch(k){u={error:k}}finally{try{!C&&!o&&(d=I.return)&&(yield Xn(d.call(I)))}finally{if(u)throw u.error}}for(const k of b.flush()){const X=T.decode(k);X&&(yield yield Xn(X))}})}function g8(r){return tu(this,arguments,function*(){var n,o,u,d;let E=new Uint8Array;try{for(var T=!0,b=Gl(r),_;_=yield Xn(b.next()),n=_.done,!n;T=!0){d=_.value,T=!1;const C=d;if(C==null)continue;const I=C instanceof ArrayBuffer?new Uint8Array(C):typeof C=="string"?Bg(C):C;let M=new Uint8Array(E.length+I.length);M.set(E),M.set(I,E.length),E=M;let k;for(;(k=h8(E))!==-1;)yield yield Xn(E.slice(0,k)),E=E.slice(k)}}catch(C){o={error:C}}finally{try{!T&&!n&&(u=b.return)&&(yield Xn(u.call(b)))}finally{if(o)throw o.error}}E.length>0&&(yield yield Xn(E))})}class m8{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,u]=p8(e,":");return u.startsWith(" ")&&(u=u.substring(1)),n==="event"?this.event=u:n==="data"&&this.data.push(u),null}}function p8(r,e){const n=r.indexOf(e);return n!==-1?[r.substring(0,n),e,r.substring(n+e.length)]:[r,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function x8(r,e){const{response:n,requestLogID:o,retryOfRequestLogID:u,startTime:d}=e,E=await(async()=>{var T;if(e.options.stream)return dr(r).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,r):Vl.fromSSEResponse(n,e.controller,r);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const b=n.headers.get("content-type"),_=(T=b==null?void 0:b.split(";")[0])===null||T===void 0?void 0:T.trim();return(_==null?void 0:_.includes("application/json"))||(_==null?void 0:_.endsWith("+json"))?await n.json():await n.text()})();return dr(r).debug(`[${o}] response parsed`,Go({retryOfRequestLogID:u,url:n.url,status:n.status,body:E,durationMs:Date.now()-d})),E}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kg extends Promise{constructor(e,n,o=x8){super(u=>{u(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new kg(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iw=Symbol("brand.privateNullableHeaders");function*E8(r){if(!r)return;if(Iw in r){const{values:o,nulls:u}=r;yield*o.entries();for(const d of u)yield[d,null];return}let e=!1,n;r instanceof Headers?n=r.entries():Ty(r)?n=r:(e=!0,n=Object.entries(r??{}));for(let o of n){const u=o[0];if(typeof u!="string")throw new TypeError("expected header name to be a string");const d=Ty(o[1])?o[1]:[o[1]];let E=!1;for(const T of d)T!==void 0&&(e&&!E&&(E=!0,yield[u,null]),yield[u,T])}}const Fc=r=>{const e=new Headers,n=new Set;for(const o of r){const u=new Set;for(const[d,E]of E8(o)){const T=d.toLowerCase();u.has(T)||(e.delete(d),u.add(T)),E===null?(e.delete(d),n.add(T)):(e.append(d,E),n.delete(T))}}return{[Iw]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r1=r=>{var e,n,o,u,d,E;if(typeof globalThis.process<"u")return(o=(n=(e=k6)===null||e===void 0?void 0:e[r])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(E=(d=(u=globalThis.Deno.env)===null||u===void 0?void 0:u.get)===null||d===void 0?void 0:d.call(u,r))===null||E===void 0?void 0:E.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nw;class Wf{constructor(e){var n,o,u,d,E,T,b,{baseURL:_=r1("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:C=(n=r1("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:I="v1beta"}=e,M=yf(e,["baseURL","apiKey","apiVersion"]);const k=Object.assign(Object.assign({apiKey:C,apiVersion:I},M),{baseURL:_||"https://generativelanguage.googleapis.com"});this.baseURL=k.baseURL,this.timeout=(o=k.timeout)!==null&&o!==void 0?o:Wf.DEFAULT_TIMEOUT,this.logger=(u=k.logger)!==null&&u!==void 0?u:console;const X="warn";this.logLevel=X,this.logLevel=(E=(d=Ny(k.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:Ny(r1("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&E!==void 0?E:X,this.fetchOptions=k.fetchOptions,this.maxRetries=(T=k.maxRetries)!==null&&T!==void 0?T:2,this.fetch=(b=k.fetch)!==null&&b!==void 0?b:J6(),this.encoder=t8,this._options=k,this.apiKey=C,this.apiVersion=I,this.clientAdapter=k.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Fc([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Fc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Fc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new ds(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ul}`}defaultIdempotencyKey(){return`stainless-node-retry-${U6()}`}makeStatusError(e,n,o,u){return gr.generate(e,n,o,u)}buildURL(e,n,o){const u=!this.baseURLOverridden()&&o||this.baseURL,d=F6(e)?new URL(e):new URL(u+(u.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),E=this.defaultQuery();return H6(E)||(n=Object.assign(Object.assign({},E),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(d.search=this.stringifyQuery(n)),d.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(u=>Object.assign({method:e,path:n},u)))}request(e,n=null){return new kg(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var u,d,E;const T=await e,b=(u=T.maxRetries)!==null&&u!==void 0?u:this.maxRetries;n==null&&(n=b),await this.prepareOptions(T);const{req:_,url:C,timeout:I}=await this.buildRequest(T,{retryCount:b-n});await this.prepareRequest(_,{url:C,options:T});const M="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),k=o===void 0?"":`, retryOf: ${o}`,X=Date.now();if(dr(this).debug(`[${M}] sending request`,Go({retryOfRequestLogID:o,method:T.method,url:C,options:T,headers:_.headers})),!((d=T.signal)===null||d===void 0)&&d.aborted)throw new B1;const K=new AbortController,z=await this.fetchWithTimeout(C,_,I,K).catch(P1),xe=Date.now();if(z instanceof globalThis.Error){const Q=`retrying, ${n} attempts remaining`;if(!((E=T.signal)===null||E===void 0)&&E.aborted)throw new B1;const ve=L1(z)||/timed? ?out/i.test(String(z)+("cause"in z?String(z.cause):""));if(n)return dr(this).info(`[${M}] connection ${ve?"timed out":"failed"} - ${Q}`),dr(this).debug(`[${M}] connection ${ve?"timed out":"failed"} (${Q})`,Go({retryOfRequestLogID:o,url:C,durationMs:xe-X,message:z.message})),this.retryRequest(T,n,o??M);throw dr(this).info(`[${M}] connection ${ve?"timed out":"failed"} - error; no more retries left`),dr(this).debug(`[${M}] connection ${ve?"timed out":"failed"} (error; no more retries left)`,Go({retryOfRequestLogID:o,url:C,durationMs:xe-X,message:z.message})),ve?new hw:new Xf({cause:z})}const ge=`[${M}${k}] ${_.method} ${C} ${z.ok?"succeeded":"failed"} with status ${z.status} in ${xe-X}ms`;if(!z.ok){const Q=await this.shouldRetry(z);if(n&&Q){const V=`retrying, ${n} attempts remaining`;return await e8(z.body),dr(this).info(`${ge} - ${V}`),dr(this).debug(`[${M}] response error (${V})`,Go({retryOfRequestLogID:o,url:z.url,status:z.status,headers:z.headers,durationMs:xe-X})),this.retryRequest(T,n,o??M,z.headers)}const ve=Q?"error; no more retries left":"error; not retryable";dr(this).info(`${ge} - ${ve}`);const Fe=await z.text().catch(V=>P1(V).message),Be=Y6(Fe),F=Be?void 0:Fe;throw dr(this).debug(`[${M}] response error (${ve})`,Go({retryOfRequestLogID:o,url:z.url,status:z.status,headers:z.headers,message:F,durationMs:Date.now()-X})),this.makeStatusError(z.status,Be,F,z.headers)}return dr(this).info(ge),dr(this).debug(`[${M}] response start`,Go({retryOfRequestLogID:o,url:z.url,status:z.status,headers:z.headers,durationMs:xe-X})),{response:z,options:T,controller:K,requestLogID:M,retryOfRequestLogID:o,startTime:X}}async fetchWithTimeout(e,n,o,u){const d=n||{},{signal:E,method:T}=d,b=yf(d,["signal","method"]);E&&E.addEventListener("abort",()=>u.abort());const _=setTimeout(()=>u.abort(),o),C=globalThis.ReadableStream&&b.body instanceof globalThis.ReadableStream||typeof b.body=="object"&&b.body!==null&&Symbol.asyncIterator in b.body,I=Object.assign(Object.assign(Object.assign({signal:u.signal},C?{duplex:"half"}:{}),{method:"GET"}),b);T&&(I.method=T.toUpperCase());try{return await this.fetch.call(void 0,e,I)}finally{clearTimeout(_)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,u){var d;let E;const T=u==null?void 0:u.get("retry-after-ms");if(T){const _=parseFloat(T);Number.isNaN(_)||(E=_)}const b=u==null?void 0:u.get("retry-after");if(b&&!E){const _=parseFloat(b);Number.isNaN(_)?E=Date.parse(b)-Date.now():E=_*1e3}if(!(E&&0<=E&&E<60*1e3)){const _=(d=e.maxRetries)!==null&&d!==void 0?d:this.maxRetries;E=this.calculateDefaultRetryTimeoutMillis(n,_)}return await X6(E),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const d=n-e,E=Math.min(.5*Math.pow(2,d),8),T=1-Math.random()*.25;return E*T*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,u,d;const E=Object.assign({},e),{method:T,path:b,query:_,defaultBaseURL:C}=E,I=this.buildURL(b,_,C);"timeout"in E&&q6("timeout",E.timeout),E.timeout=(o=E.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:M,body:k}=this.buildBody({options:E}),X=await this.buildHeaders({options:e,method:T,bodyHeaders:M,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:T,headers:X},E.signal&&{signal:E.signal}),globalThis.ReadableStream&&k instanceof globalThis.ReadableStream&&{duplex:"half"}),k&&{body:k}),(u=this.fetchOptions)!==null&&u!==void 0?u:{}),(d=E.fetchOptions)!==null&&d!==void 0?d:{}),url:I,timeout:E.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:u}){let d={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const E=await this.authHeaders(e);let T=Fc([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(u)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Z6()),this._options.defaultHeaders,o,e.headers,E]);return this.validateHeaders(T),T.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Fc([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:$6(e)}:this.encoder({body:e,headers:o})}}Wf.DEFAULT_TIMEOUT=6e4;class Gi extends Wf{constructor(){super(...arguments),this.interactions=new Sw(this)}}Nw=Gi;Gi.GeminiNextGenAPIClient=Nw;Gi.GeminiNextGenAPIClientError=ds;Gi.APIError=gr;Gi.APIConnectionError=Xf;Gi.APIConnectionTimeoutError=hw;Gi.APIUserAbortError=B1;Gi.NotFoundError=mw;Gi.ConflictError=pw;Gi.RateLimitError=Ew;Gi.BadRequestError=fw;Gi.AuthenticationError=dw;Gi.InternalServerError=yw;Gi.PermissionDeniedError=gw;Gi.UnprocessableEntityError=xw;Gi.toFile=a8;Gi.Interactions=Sw;const y8=()=>null,_8=async(r,e)=>{try{const n=y8();if(!n)throw new Error("API Key not found");return(await n.models.generateContent({model:"gemini-2.0-flash-exp",contents:`
        
        
        - ${r.name}
        - ${e.name}
        - ${r.points}
        - ${r.totalEarned}

        30-50
        
      `})).text()||""}catch(n){return console.error("Gemini Error:",n),""}},A8=({user:r,rank:e,onUserUpdate:n})=>{const[o,u]=se.useState("..."),[d,E]=se.useState([]),[T,b]=se.useState([]),[_,C]=se.useState(null),[I,M]=se.useState(new Set),k=Wo[Wo.indexOf(e)+1]||null,X=k?Math.min(100,(r.totalEarned-e.threshold)/(k.threshold-e.threshold)*100):100;se.useEffect(()=>{(async()=>{const Q=await _8(r,e);u(Q)})();const xe=aw(async Q=>{const ve=Q.filter(Be=>Be.isActive);E(ve);const Fe=new Set;for(const Be of ve)await iw(r.id,Be.id)&&Fe.add(Be.id);M(Fe)}),ge=rw(Q=>{const ve=new Date;ve.setHours(0,0,0,0),b(Q.filter(Fe=>Fe.userId===r.id&&Fe.timestamp>=ve.getTime()))});return()=>{xe(),ge()}},[r.id,e]);const K=async z=>{if(!_){if(z.deadline&&z.deadline<Date.now()){alert("");return}C(z.id),setTimeout(async()=>{const xe={id:`sub_${Date.now()}`,userId:r.id,userName:r.name,missionId:z.id,missionTitle:z.title,points:z.points,timestamp:Date.now(),status:"pending"};await b6(xe),C(null),alert(` 
`)},1e3)}};return S.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10",children:[S.jsxs("header",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[S.jsxs("div",{children:[S.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:["",r.name,""]}),S.jsxs("p",{className:"text-slate-500 mt-1 italic max-w-xl font-medium",children:['"',o,'"']})]}),S.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl px-5 py-3 flex items-center gap-3 self-end md:self-start shadow-sm",children:[S.jsx("div",{className:"bg-amber-500 p-2 rounded-xl text-white shadow-lg shadow-amber-200",children:S.jsx(Iv,{size:20})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-[10px] text-amber-700 font-black uppercase tracking-widest",children:""}),S.jsxs("p",{className:"text-2xl font-black text-amber-900 leading-none",children:[r.totalEarned.toLocaleString()," ",S.jsx("span",{className:"text-xs font-bold opacity-60",children:"PTS"})]})]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsxs("div",{className:"md:col-span-2 bg-white rounded-[2.5rem] p-10 border border-slate-100 shadow-xl shadow-slate-200/40 relative overflow-hidden",children:[S.jsxs("div",{className:"flex items-center justify-between mb-12",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("span",{className:"text-4xl filter drop-shadow-md",children:e.icon}),S.jsx("span",{className:`text-2xl font-black px-6 py-2 rounded-2xl text-white ${e.color} shadow-xl shadow-indigo-100 border-2 border-white/20`,children:e.name})]})]}),k&&S.jsxs("div",{className:"text-right",children:[S.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),S.jsxs("div",{className:"flex items-center gap-3 justify-end group",children:[S.jsx("span",{className:"text-lg font-black text-slate-700 group-hover:text-indigo-600 transition-colors",children:k.name}),S.jsx("span",{className:"text-2xl animate-bounce",children:k.icon})]})]})]}),S.jsxs("div",{className:"relative pt-12 pb-6 px-2",children:[S.jsx("div",{className:"h-5 bg-slate-100 rounded-full w-full overflow-hidden border border-slate-200 shadow-inner p-1",children:S.jsx("div",{className:`h-full ${e.color} transition-all duration-1000 ease-out rounded-full relative overflow-hidden`,style:{width:`${X}%`},children:S.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),S.jsx("div",{className:"absolute top-0 transition-all duration-1000 ease-out",style:{left:`calc(${X}% - 30px)`},children:S.jsxs("div",{className:"relative group cursor-pointer",children:[S.jsx("div",{className:"p-1.5 bg-white rounded-full shadow-2xl border border-slate-50 transition-transform group-hover:scale-110 active:scale-95",children:S.jsx("img",{src:r.avatar,className:`w-14 h-14 rounded-full border-4 border-opacity-30 object-cover ${e.color.replace("bg-","border-")}`,alt:"me"})}),S.jsxs("div",{className:`absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1 rounded-xl text-[11px] font-black text-white shadow-xl ${e.color} whitespace-nowrap`,children:[" ",Math.round(X),"%"]})]})})]}),S.jsx("p",{className:"text-center text-xs text-slate-400 font-bold mt-8 tracking-wide",children:k?`${k.name} ${k.threshold-r.totalEarned} `:""})]}),S.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-indigo-900 rounded-[2.5rem] p-10 text-white shadow-2xl shadow-indigo-300 flex flex-col justify-center items-center text-center relative overflow-hidden",children:[S.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),S.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl"}),S.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-xl rounded-[2rem] flex items-center justify-center mb-6 border border-white/20 shadow-xl",children:S.jsx(eC,{size:40,className:"text-white drop-shadow-md"})}),S.jsx("h3",{className:"text-indigo-200 text-sm font-black mb-1 uppercase tracking-widest",children:""}),S.jsx("p",{className:"text-6xl font-black mb-4 drop-shadow-lg",children:r.points.toLocaleString()}),S.jsx("div",{className:"px-5 py-1.5 bg-indigo-500/40 backdrop-blur rounded-full text-[10px] font-black tracking-[0.2em] uppercase border border-white/10",children:"SHOPPING POWER"})]})]}),S.jsxs("section",{className:"mt-16",children:[S.jsxs("div",{className:"flex items-center justify-between mb-8",children:[S.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[S.jsx(Wc,{className:"text-indigo-500",size:28}),""]}),S.jsx("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(Kv,{size:12,className:"text-amber-500"})," "]})})]}),S.jsx("div",{className:"grid grid-cols-1 gap-6",children:d.map(z=>{const xe=I.has(z.id);return S.jsx("div",{className:`bg-white border-2 border-slate-50 p-8 rounded-[2.5rem] transition-all group relative overflow-hidden ${xe?"opacity-60 grayscale":"shadow-sm hover:shadow-xl"} ${z.id===_?"animate-pulse":""}`,children:S.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8",children:[S.jsxs("div",{className:"flex gap-8 items-start",children:[S.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-inner ${z.type==="normal"?"bg-emerald-50 text-emerald-600":z.type==="challenge"?"bg-orange-50 text-orange-600":"bg-rose-50 text-rose-600"}`,children:xe?S.jsx(o1,{size:36}):z.type==="normal"?S.jsx(Wc,{size:36}):z.type==="challenge"?S.jsx(xv,{size:36}):S.jsx(nC,{size:36})}),S.jsxs("div",{children:[S.jsx("div",{className:"flex items-center gap-3 mb-2",children:S.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${z.type==="normal"?"bg-emerald-100 text-emerald-700":z.type==="challenge"?"bg-orange-100 text-orange-700":"bg-rose-100 text-rose-700"}`,children:z.type==="normal"?"":z.type==="challenge"?"":""})}),S.jsx("h3",{className:"text-2xl font-black text-slate-800 transition-colors",children:z.title}),S.jsx("p",{className:"text-slate-500 mt-2 leading-relaxed text-lg font-medium max-w-2xl",children:z.description}),z.deadline&&S.jsxs("div",{className:`mt-3 flex items-center gap-2 text-sm font-black ${z.deadline<Date.now()?"text-rose-500":"text-amber-500"}`,children:[S.jsx(Zh,{size:16}),z.deadline<Date.now()?"":` ${new Date(z.deadline).toLocaleString()}`]})]})]}),S.jsxs("div",{className:"flex flex-col md:items-end gap-6 shrink-0",children:[S.jsxs("div",{className:"flex flex-col items-end",children:[S.jsx("span",{className:"text-xs font-bold text-slate-400 mb-1 uppercase tracking-tighter",children:""}),S.jsxs("div",{className:"flex items-baseline gap-2",children:[S.jsx("span",{className:"text-4xl font-black text-indigo-600 tracking-tighter",children:z.points}),S.jsx("span",{className:"text-sm font-bold text-slate-400",children:"PTS"})]})]}),S.jsxs("button",{onClick:()=>K(z),disabled:_!==null||xe||T.some(ge=>ge.missionId===z.id&&ge.status==="pending")||z.deadline!==void 0&&z.deadline<Date.now(),className:`px-10 py-5 rounded-2xl font-black transition-all flex items-center gap-3 shadow-xl ${xe?"bg-slate-200 text-slate-500 cursor-not-allowed shadow-none":T.some(ge=>ge.missionId===z.id&&ge.status==="pending")?"bg-amber-100 text-amber-600 cursor-not-allowed shadow-none":z.deadline!==void 0&&z.deadline<Date.now()?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":z.type==="normal"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-100":z.type==="challenge"?"bg-orange-600 hover:bg-orange-700 shadow-orange-100":"bg-rose-600 hover:bg-rose-700 shadow-rose-100"} text-white text-lg active:scale-95 disabled:active:scale-100`,children:[xe?"":T.some(ge=>ge.missionId===z.id&&ge.status==="pending")?"":z.deadline!==void 0&&z.deadline<Date.now()?"":_===z.id?"...":"",!xe&&!T.some(ge=>ge.missionId===z.id&&ge.status==="pending")&&(!z.deadline||z.deadline>=Date.now())&&S.jsx(ov,{size:20})]})]})]})},z.id)})})]})]})},w8=({user:r,onUserUpdate:e})=>{const[n,o]=se.useState(null),[u,d]=se.useState("all"),[E,T]=se.useState([]),[b,_]=se.useState([]);se.useEffect(()=>{const M=ow(X=>{T(X)}),k=nw(X=>{_(X)});return()=>{M(),k()}},[]);const C=E.filter(M=>u==="all"||M.category===u),I=async()=>{if(r.role==="GUEST"){alert("");return}if(!n||r.points<n.price||n.stock<=0)return;const M={id:`red_${Date.now()}`,userId:r.id,productId:n.id,productName:n.name,pointsSpent:n.price,timestamp:Date.now(),status:"pending",qrCodeData:`AUTH_WORKSHOP_${Date.now()}_${n.id}`},k={...r,points:r.points-n.price};await d6(M),await Wh(k),await sw(n.id,1),e(),o(null),alert("  QR Code")};return S.jsxs("div",{className:"space-y-8 pb-20",children:[S.jsxs("header",{children:[S.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),S.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),S.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.jsx("button",{onClick:()=>d("all"),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${u==="all"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:""}),b.map(M=>S.jsx("button",{onClick:()=>d(M.name),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${u===M.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:M.name},M.id))]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:C.map(M=>{const k=r.points>=M.price,X=M.stock<=0;return S.jsxs("div",{className:`bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm hover:shadow-2xl transition-all flex flex-col group ${X?"opacity-75 grayscale-[0.5]":""}`,children:[S.jsxs("div",{className:"relative h-56 overflow-hidden",children:[S.jsx("img",{src:M.imageUrl,alt:M.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),S.jsx("div",{className:"absolute top-5 left-5",children:S.jsx("span",{className:"bg-white/90 backdrop-blur text-indigo-600 text-[10px] px-3 py-1.5 rounded-full font-black tracking-widest shadow-sm",children:M.category.toUpperCase()})}),X&&S.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:S.jsx("span",{className:"text-white font-black text-2xl rotate-12 border-4 border-white px-4 py-1",children:"SOLD OUT"})})]}),S.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[S.jsx("div",{className:"flex justify-between items-start mb-2",children:S.jsx("h3",{className:"font-black text-xl text-slate-800 leading-tight",children:M.name})}),S.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 leading-relaxed",children:M.description}),S.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-400 text-xs font-bold",children:[S.jsx(l1,{size:14}),S.jsxs("span",{children:["",S.jsxs("span",{className:M.stock<=5?"text-red-500":"text-slate-600",children:[M.stock," "]})]})]}),S.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[S.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[S.jsx("span",{className:"text-2xl font-black",children:M.price.toLocaleString()}),S.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:"pts"})]}),S.jsx("button",{onClick:()=>o(M),disabled:!k||X,className:`px-6 py-3 rounded-2xl font-black text-sm transition-all shadow-md ${X?"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none":k?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-indigo-200 active:scale-95":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none"}`,children:X?"":""})]})]})]},M.id)})}),n&&S.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:S.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-md w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[S.jsxs("div",{className:"flex justify-between items-start mb-8",children:[S.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl text-indigo-600",children:S.jsx(qv,{size:28})}),S.jsx("button",{onClick:()=>o(null),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:S.jsx(Yo,{size:24})})]}),S.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:""}),S.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:[" ",S.jsxs("span",{className:"font-black text-indigo-600",children:[n.price," "]}),"  ",S.jsxs("span",{className:"font-black text-slate-800",children:["",n.name,""]})," "]}),S.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-6 mb-8 border border-slate-100",children:[S.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[S.jsx("span",{className:"text-slate-500 font-medium",children:""}),S.jsx("span",{className:"font-bold text-slate-800",children:r.points.toLocaleString()})]}),S.jsxs("div",{className:"flex justify-between text-sm mb-5",children:[S.jsx("span",{className:"text-slate-500 font-medium",children:""}),S.jsxs("span",{className:"font-bold text-red-500",children:["-",n.price.toLocaleString()]})]}),S.jsxs("div",{className:"border-t border-slate-200 pt-5 flex justify-between",children:[S.jsx("span",{className:"font-black text-slate-700 text-lg",children:""}),S.jsx("span",{className:"font-black text-indigo-600 text-2xl",children:(r.points-n.price).toLocaleString()})]})]}),S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("button",{onClick:I,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[S.jsx(jc,{size:24}),""]}),S.jsx("button",{onClick:()=>o(null),className:"w-full bg-white border border-slate-200 text-slate-600 font-black py-4 rounded-[1.25rem] hover:bg-slate-50 transition-all",children:""})]})]})})]})};var b8=Object.defineProperty,Af=Object.getOwnPropertySymbols,Rw=Object.prototype.hasOwnProperty,Ow=Object.prototype.propertyIsEnumerable,Oy=(r,e,n)=>e in r?b8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,V1=(r,e)=>{for(var n in e||(e={}))Rw.call(e,n)&&Oy(r,n,e[n]);if(Af)for(var n of Af(e))Ow.call(e,n)&&Oy(r,n,e[n]);return r},F1=(r,e)=>{var n={};for(var o in r)Rw.call(r,o)&&e.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&Af)for(var o of Af(r))e.indexOf(o)<0&&Ow.call(r,o)&&(n[o]=r[o]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Jo;(r=>{const e=class Pt{constructor(b,_,C,I){if(this.version=b,this.errorCorrectionLevel=_,this.modules=[],this.isFunction=[],b<Pt.MIN_VERSION||b>Pt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=b*4+17;let M=[];for(let X=0;X<this.size;X++)M.push(!1);for(let X=0;X<this.size;X++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(C);if(this.drawCodewords(k),I==-1){let X=1e9;for(let K=0;K<8;K++){this.applyMask(K),this.drawFormatBits(K);const z=this.getPenaltyScore();z<X&&(I=K,X=z),this.applyMask(K)}}u(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(b,_){const C=r.QrSegment.makeSegments(b);return Pt.encodeSegments(C,_)}static encodeBinary(b,_){const C=r.QrSegment.makeBytes(b);return Pt.encodeSegments([C],_)}static encodeSegments(b,_,C=1,I=40,M=-1,k=!0){if(!(Pt.MIN_VERSION<=C&&C<=I&&I<=Pt.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let X,K;for(X=C;;X++){const Q=Pt.getNumDataCodewords(X,_)*8,ve=E.getTotalBits(b,X);if(ve<=Q){K=ve;break}if(X>=I)throw new RangeError("Data too long")}for(const Q of[Pt.Ecc.MEDIUM,Pt.Ecc.QUARTILE,Pt.Ecc.HIGH])k&&K<=Pt.getNumDataCodewords(X,Q)*8&&(_=Q);let z=[];for(const Q of b){n(Q.mode.modeBits,4,z),n(Q.numChars,Q.mode.numCharCountBits(X),z);for(const ve of Q.getData())z.push(ve)}u(z.length==K);const xe=Pt.getNumDataCodewords(X,_)*8;u(z.length<=xe),n(0,Math.min(4,xe-z.length),z),n(0,(8-z.length%8)%8,z),u(z.length%8==0);for(let Q=236;z.length<xe;Q^=253)n(Q,8,z);let ge=[];for(;ge.length*8<z.length;)ge.push(0);return z.forEach((Q,ve)=>ge[ve>>>3]|=Q<<7-(ve&7)),new Pt(X,_,ge,M)}getModule(b,_){return 0<=b&&b<this.size&&0<=_&&_<this.size&&this.modules[_][b]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const b=this.getAlignmentPatternPositions(),_=b.length;for(let C=0;C<_;C++)for(let I=0;I<_;I++)C==0&&I==0||C==0&&I==_-1||C==_-1&&I==0||this.drawAlignmentPattern(b[C],b[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(b){const _=this.errorCorrectionLevel.formatBits<<3|b;let C=_;for(let M=0;M<10;M++)C=C<<1^(C>>>9)*1335;const I=(_<<10|C)^21522;u(I>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,o(I,M));this.setFunctionModule(8,7,o(I,6)),this.setFunctionModule(8,8,o(I,7)),this.setFunctionModule(7,8,o(I,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,o(I,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,o(I,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,o(I,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let b=this.version;for(let C=0;C<12;C++)b=b<<1^(b>>>11)*7973;const _=this.version<<12|b;u(_>>>18==0);for(let C=0;C<18;C++){const I=o(_,C),M=this.size-11+C%3,k=Math.floor(C/3);this.setFunctionModule(M,k,I),this.setFunctionModule(k,M,I)}}drawFinderPattern(b,_){for(let C=-4;C<=4;C++)for(let I=-4;I<=4;I++){const M=Math.max(Math.abs(I),Math.abs(C)),k=b+I,X=_+C;0<=k&&k<this.size&&0<=X&&X<this.size&&this.setFunctionModule(k,X,M!=2&&M!=4)}}drawAlignmentPattern(b,_){for(let C=-2;C<=2;C++)for(let I=-2;I<=2;I++)this.setFunctionModule(b+I,_+C,Math.max(Math.abs(I),Math.abs(C))!=1)}setFunctionModule(b,_,C){this.modules[_][b]=C,this.isFunction[_][b]=!0}addEccAndInterleave(b){const _=this.version,C=this.errorCorrectionLevel;if(b.length!=Pt.getNumDataCodewords(_,C))throw new RangeError("Invalid argument");const I=Pt.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][_],M=Pt.ECC_CODEWORDS_PER_BLOCK[C.ordinal][_],k=Math.floor(Pt.getNumRawDataModules(_)/8),X=I-k%I,K=Math.floor(k/I);let z=[];const xe=Pt.reedSolomonComputeDivisor(M);for(let Q=0,ve=0;Q<I;Q++){let Fe=b.slice(ve,ve+K-M+(Q<X?0:1));ve+=Fe.length;const Be=Pt.reedSolomonComputeRemainder(Fe,xe);Q<X&&Fe.push(0),z.push(Fe.concat(Be))}let ge=[];for(let Q=0;Q<z[0].length;Q++)z.forEach((ve,Fe)=>{(Q!=K-M||Fe>=X)&&ge.push(ve[Q])});return u(ge.length==k),ge}drawCodewords(b){if(b.length!=Math.floor(Pt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let _=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let I=0;I<this.size;I++)for(let M=0;M<2;M++){const k=C-M,K=(C+1&2)==0?this.size-1-I:I;!this.isFunction[K][k]&&_<b.length*8&&(this.modules[K][k]=o(b[_>>>3],7-(_&7)),_++)}}u(_==b.length*8)}applyMask(b){if(b<0||b>7)throw new RangeError("Mask value out of range");for(let _=0;_<this.size;_++)for(let C=0;C<this.size;C++){let I;switch(b){case 0:I=(C+_)%2==0;break;case 1:I=_%2==0;break;case 2:I=C%3==0;break;case 3:I=(C+_)%3==0;break;case 4:I=(Math.floor(C/3)+Math.floor(_/2))%2==0;break;case 5:I=C*_%2+C*_%3==0;break;case 6:I=(C*_%2+C*_%3)%2==0;break;case 7:I=((C+_)%2+C*_%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[_][C]&&I&&(this.modules[_][C]=!this.modules[_][C])}}getPenaltyScore(){let b=0;for(let M=0;M<this.size;M++){let k=!1,X=0,K=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[M][z]==k?(X++,X==5?b+=Pt.PENALTY_N1:X>5&&b++):(this.finderPenaltyAddHistory(X,K),k||(b+=this.finderPenaltyCountPatterns(K)*Pt.PENALTY_N3),k=this.modules[M][z],X=1);b+=this.finderPenaltyTerminateAndCount(k,X,K)*Pt.PENALTY_N3}for(let M=0;M<this.size;M++){let k=!1,X=0,K=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[z][M]==k?(X++,X==5?b+=Pt.PENALTY_N1:X>5&&b++):(this.finderPenaltyAddHistory(X,K),k||(b+=this.finderPenaltyCountPatterns(K)*Pt.PENALTY_N3),k=this.modules[z][M],X=1);b+=this.finderPenaltyTerminateAndCount(k,X,K)*Pt.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let k=0;k<this.size-1;k++){const X=this.modules[M][k];X==this.modules[M][k+1]&&X==this.modules[M+1][k]&&X==this.modules[M+1][k+1]&&(b+=Pt.PENALTY_N2)}let _=0;for(const M of this.modules)_=M.reduce((k,X)=>k+(X?1:0),_);const C=this.size*this.size,I=Math.ceil(Math.abs(_*20-C*10)/C)-1;return u(0<=I&&I<=9),b+=I*Pt.PENALTY_N4,u(0<=b&&b<=2568888),b}getAlignmentPatternPositions(){if(this.version==1)return[];{const b=Math.floor(this.version/7)+2,_=this.version==32?26:Math.ceil((this.version*4+4)/(b*2-2))*2;let C=[6];for(let I=this.size-7;C.length<b;I-=_)C.splice(1,0,I);return C}}static getNumRawDataModules(b){if(b<Pt.MIN_VERSION||b>Pt.MAX_VERSION)throw new RangeError("Version number out of range");let _=(16*b+128)*b+64;if(b>=2){const C=Math.floor(b/7)+2;_-=(25*C-10)*C-55,b>=7&&(_-=36)}return u(208<=_&&_<=29648),_}static getNumDataCodewords(b,_){return Math.floor(Pt.getNumRawDataModules(b)/8)-Pt.ECC_CODEWORDS_PER_BLOCK[_.ordinal][b]*Pt.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][b]}static reedSolomonComputeDivisor(b){if(b<1||b>255)throw new RangeError("Degree out of range");let _=[];for(let I=0;I<b-1;I++)_.push(0);_.push(1);let C=1;for(let I=0;I<b;I++){for(let M=0;M<_.length;M++)_[M]=Pt.reedSolomonMultiply(_[M],C),M+1<_.length&&(_[M]^=_[M+1]);C=Pt.reedSolomonMultiply(C,2)}return _}static reedSolomonComputeRemainder(b,_){let C=_.map(I=>0);for(const I of b){const M=I^C.shift();C.push(0),_.forEach((k,X)=>C[X]^=Pt.reedSolomonMultiply(k,M))}return C}static reedSolomonMultiply(b,_){if(b>>>8||_>>>8)throw new RangeError("Byte out of range");let C=0;for(let I=7;I>=0;I--)C=C<<1^(C>>>7)*285,C^=(_>>>I&1)*b;return u(C>>>8==0),C}finderPenaltyCountPatterns(b){const _=b[1];u(_<=this.size*3);const C=_>0&&b[2]==_&&b[3]==_*3&&b[4]==_&&b[5]==_;return(C&&b[0]>=_*4&&b[6]>=_?1:0)+(C&&b[6]>=_*4&&b[0]>=_?1:0)}finderPenaltyTerminateAndCount(b,_,C){return b&&(this.finderPenaltyAddHistory(_,C),_=0),_+=this.size,this.finderPenaltyAddHistory(_,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(b,_){_[0]==0&&(b+=this.size),_.pop(),_.unshift(b)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=e;function n(T,b,_){if(b<0||b>31||T>>>b)throw new RangeError("Value out of range");for(let C=b-1;C>=0;C--)_.push(T>>>C&1)}function o(T,b){return(T>>>b&1)!=0}function u(T){if(!T)throw new Error("Assertion error")}const d=class ti{constructor(b,_,C){if(this.mode=b,this.numChars=_,this.bitData=C,_<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(b){let _=[];for(const C of b)n(C,8,_);return new ti(ti.Mode.BYTE,b.length,_)}static makeNumeric(b){if(!ti.isNumeric(b))throw new RangeError("String contains non-numeric characters");let _=[];for(let C=0;C<b.length;){const I=Math.min(b.length-C,3);n(parseInt(b.substring(C,C+I),10),I*3+1,_),C+=I}return new ti(ti.Mode.NUMERIC,b.length,_)}static makeAlphanumeric(b){if(!ti.isAlphanumeric(b))throw new RangeError("String contains unencodable characters in alphanumeric mode");let _=[],C;for(C=0;C+2<=b.length;C+=2){let I=ti.ALPHANUMERIC_CHARSET.indexOf(b.charAt(C))*45;I+=ti.ALPHANUMERIC_CHARSET.indexOf(b.charAt(C+1)),n(I,11,_)}return C<b.length&&n(ti.ALPHANUMERIC_CHARSET.indexOf(b.charAt(C)),6,_),new ti(ti.Mode.ALPHANUMERIC,b.length,_)}static makeSegments(b){return b==""?[]:ti.isNumeric(b)?[ti.makeNumeric(b)]:ti.isAlphanumeric(b)?[ti.makeAlphanumeric(b)]:[ti.makeBytes(ti.toUtf8ByteArray(b))]}static makeEci(b){let _=[];if(b<0)throw new RangeError("ECI assignment value out of range");if(b<128)n(b,8,_);else if(b<16384)n(2,2,_),n(b,14,_);else if(b<1e6)n(6,3,_),n(b,21,_);else throw new RangeError("ECI assignment value out of range");return new ti(ti.Mode.ECI,0,_)}static isNumeric(b){return ti.NUMERIC_REGEX.test(b)}static isAlphanumeric(b){return ti.ALPHANUMERIC_REGEX.test(b)}getData(){return this.bitData.slice()}static getTotalBits(b,_){let C=0;for(const I of b){const M=I.mode.numCharCountBits(_);if(I.numChars>=1<<M)return 1/0;C+=4+M+I.bitData.length}return C}static toUtf8ByteArray(b){b=encodeURI(b);let _=[];for(let C=0;C<b.length;C++)b.charAt(C)!="%"?_.push(b.charCodeAt(C)):(_.push(parseInt(b.substring(C+1,C+3),16)),C+=2);return _}};d.NUMERIC_REGEX=/^[0-9]*$/,d.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,d.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let E=d;r.QrSegment=d})(Jo||(Jo={}));(r=>{(e=>{const n=class{constructor(u,d){this.ordinal=u,this.formatBits=d}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(r.QrCode||(r.QrCode={}))})(Jo||(Jo={}));(r=>{(e=>{const n=class{constructor(u,d){this.modeBits=u,this.numBitsCharCount=d}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(r.QrSegment||(r.QrSegment={}))})(Jo||(Jo={}));var Fl=Jo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var T8={L:Fl.QrCode.Ecc.LOW,M:Fl.QrCode.Ecc.MEDIUM,Q:Fl.QrCode.Ecc.QUARTILE,H:Fl.QrCode.Ecc.HIGH},Dw=128,Mw="L",Lw="#FFFFFF",Pw="#000000",Bw=!1,kw=1,v8=4,C8=0,S8=.1;function Uw(r,e=0){const n=[];return r.forEach(function(o,u){let d=null;o.forEach(function(E,T){if(!E&&d!==null){n.push(`M${d+e} ${u+e}h${T-d}v1H${d+e}z`),d=null;return}if(T===o.length-1){if(!E)return;d===null?n.push(`M${T+e},${u+e} h1v1H${T+e}z`):n.push(`M${d+e},${u+e} h${T+1-d}v1H${d+e}z`);return}E&&d===null&&(d=T)})}),n.join("")}function Vw(r,e){return r.slice().map((n,o)=>o<e.y||o>=e.y+e.h?n:n.map((u,d)=>d<e.x||d>=e.x+e.w?u:!1))}function I8(r,e,n,o){if(o==null)return null;const u=r.length+n*2,d=Math.floor(e*S8),E=u/e,T=(o.width||d)*E,b=(o.height||d)*E,_=o.x==null?r.length/2-T/2:o.x*E,C=o.y==null?r.length/2-b/2:o.y*E,I=o.opacity==null?1:o.opacity;let M=null;if(o.excavate){let X=Math.floor(_),K=Math.floor(C),z=Math.ceil(T+_-X),xe=Math.ceil(b+C-K);M={x:X,y:K,w:z,h:xe}}const k=o.crossOrigin;return{x:_,y:C,h:b,w:T,excavation:M,opacity:I,crossOrigin:k}}function N8(r,e){return e!=null?Math.max(Math.floor(e),0):r?v8:C8}function Fw({value:r,level:e,minVersion:n,includeMargin:o,marginSize:u,imageSettings:d,size:E,boostLevel:T}){let b=ii.useMemo(()=>{const X=(Array.isArray(r)?r:[r]).reduce((K,z)=>(K.push(...Fl.QrSegment.makeSegments(z)),K),[]);return Fl.QrCode.encodeSegments(X,T8[e],n,void 0,void 0,T)},[r,e,n,T]);const{cells:_,margin:C,numCells:I,calculatedImageSettings:M}=ii.useMemo(()=>{let k=b.getModules();const X=N8(o,u),K=k.length+X*2,z=I8(k,E,X,d);return{cells:k,margin:X,numCells:K,calculatedImageSettings:z}},[b,E,d,o,u]);return{qrcode:b,margin:C,cells:_,numCells:I,calculatedImageSettings:M}}var R8=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),O8=ii.forwardRef(function(e,n){const o=e,{value:u,size:d=Dw,level:E=Mw,bgColor:T=Lw,fgColor:b=Pw,includeMargin:_=Bw,minVersion:C=kw,boostLevel:I,marginSize:M,imageSettings:k}=o,K=F1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:z}=K,xe=F1(K,["style"]),ge=k==null?void 0:k.src,Q=ii.useRef(null),ve=ii.useRef(null),Fe=ii.useCallback(Ze=>{Q.current=Ze,typeof n=="function"?n(Ze):n&&(n.current=Ze)},[n]),[Be,F]=ii.useState(!1),{margin:G,cells:V,numCells:ne,calculatedImageSettings:W}=Fw({value:u,level:E,minVersion:C,boostLevel:I,includeMargin:_,marginSize:M,imageSettings:k,size:d});ii.useEffect(()=>{if(Q.current!=null){const Ze=Q.current,fe=Ze.getContext("2d");if(!fe)return;let me=V;const we=ve.current,qe=W!=null&&we!==null&&we.complete&&we.naturalHeight!==0&&we.naturalWidth!==0;qe&&W.excavation!=null&&(me=Vw(V,W.excavation));const ot=window.devicePixelRatio||1;Ze.height=Ze.width=d*ot;const ft=d/ne*ot;fe.scale(ft,ft),fe.fillStyle=T,fe.fillRect(0,0,ne,ne),fe.fillStyle=b,R8?fe.fill(new Path2D(Uw(me,G))):V.forEach(function(ie,Ae){ie.forEach(function(ke,Ue){ke&&fe.fillRect(Ue+G,Ae+G,1,1)})}),W&&(fe.globalAlpha=W.opacity),qe&&fe.drawImage(we,W.x+G,W.y+G,W.w,W.h)}}),ii.useEffect(()=>{F(!1)},[ge]);const J=V1({height:d,width:d},z);let Y=null;return ge!=null&&(Y=ii.createElement("img",{src:ge,key:ge,style:{display:"none"},onLoad:()=>{F(!0)},ref:ve,crossOrigin:W==null?void 0:W.crossOrigin})),ii.createElement(ii.Fragment,null,ii.createElement("canvas",V1({style:J,height:d,width:d,ref:Fe,role:"img"},xe)),Y)});O8.displayName="QRCodeCanvas";var jw=ii.forwardRef(function(e,n){const o=e,{value:u,size:d=Dw,level:E=Mw,bgColor:T=Lw,fgColor:b=Pw,includeMargin:_=Bw,minVersion:C=kw,boostLevel:I,title:M,marginSize:k,imageSettings:X}=o,K=F1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:z,cells:xe,numCells:ge,calculatedImageSettings:Q}=Fw({value:u,level:E,minVersion:C,boostLevel:I,includeMargin:_,marginSize:k,imageSettings:X,size:d});let ve=xe,Fe=null;X!=null&&Q!=null&&(Q.excavation!=null&&(ve=Vw(xe,Q.excavation)),Fe=ii.createElement("image",{href:X.src,height:Q.h,width:Q.w,x:Q.x+z,y:Q.y+z,preserveAspectRatio:"none",opacity:Q.opacity,crossOrigin:Q.crossOrigin}));const Be=Uw(ve,z);return ii.createElement("svg",V1({height:d,width:d,viewBox:`0 0 ${ge} ${ge}`,ref:n,role:"img"},K),!!M&&ii.createElement("title",null,M),ii.createElement("path",{fill:T,d:`M0,0 h${ge}v${ge}H0z`,shapeRendering:"crispEdges"}),ii.createElement("path",{fill:b,d:Be,shapeRendering:"crispEdges"}),Fe)});jw.displayName="QRCodeSVG";const D8=({user:r})=>{const[e,n]=se.useState([]),[o,u]=se.useState(null),[d,E]=se.useState(()=>{const _=new Date;return`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}`});se.useEffect(()=>{const _=cw(C=>{n(C.filter(I=>I.userId===r.id))});return()=>_()},[r.id]);const T=_=>new Date(_).toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=e.filter(_=>{const C=new Date(_.timestamp);return`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`===d});return S.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[S.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),S.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),S.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl border border-slate-100 shadow-sm",children:[S.jsx(rx,{size:18,className:"text-indigo-600 ml-2"}),S.jsx("input",{type:"month",value:d,onChange:_=>E(_.target.value),className:"border-none bg-transparent font-bold text-slate-600 outline-none p-1"})]})]}),b.length===0?S.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-dashed border-slate-200",children:[S.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:S.jsx(Jh,{size:40})}),S.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),S.jsx("p",{className:"text-slate-400 mt-2",children:""})]}):S.jsx("div",{className:"space-y-4",children:b.map(_=>S.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 shadow-sm hover:shadow-md transition-shadow",children:[S.jsxs("div",{className:"flex gap-4",children:[S.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${_.status==="completed"?"bg-green-50 text-green-600":_.status==="pending"?"bg-indigo-50 text-indigo-600":"bg-red-50 text-red-600"}`,children:_.status==="completed"?S.jsx(fv,{size:24}):_.status==="pending"?S.jsx(Zh,{size:24}):S.jsx(cv,{size:24})}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:_.productName||""}),S.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mt-1",children:[S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(rx,{size:12})," ",T(_.timestamp||Date.now())]}),S.jsxs("span",{className:"font-bold text-indigo-600",children:["-",_.pointsSpent||0," "]})]})]})]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold ${_.status==="completed"?"bg-green-100 text-green-700":_.status==="pending"?"bg-indigo-100 text-indigo-700":"bg-red-100 text-red-700"}`,children:_.status==="completed"?"":_.status==="pending"?"":""}),_.status==="pending"&&S.jsxs("button",{onClick:()=>u(_),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg shadow-indigo-100",children:[S.jsx(Lv,{size:18}),""]})]})]},_.id))}),o&&S.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:S.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200 text-center",children:[S.jsx("div",{className:"flex justify-end mb-4 -mt-4 -mr-4",children:S.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600 p-2",children:S.jsx(Yo,{size:28})})}),S.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),S.jsx("p",{className:"text-slate-500 mb-8 text-sm",children:""}),S.jsx("div",{className:"aspect-square bg-white border-8 border-indigo-50 rounded-3xl flex items-center justify-center mb-8 shadow-inner overflow-hidden p-6",children:S.jsx(jw,{value:o.qrCodeData,size:256,level:"H",includeMargin:!1,className:"w-full h-full"})}),S.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl text-slate-400 font-mono text-xs mb-8 tracking-widest uppercase",children:o.qrCodeData}),S.jsx("p",{className:"font-bold text-slate-800 mb-1",children:o.productName}),S.jsxs("p",{className:"text-xs text-slate-400",children:["ID: ",o.id]})]})})]})};var Ge;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ge||(Ge={}));var Dy=new Map([[Ge.QR_CODE,"QR_CODE"],[Ge.AZTEC,"AZTEC"],[Ge.CODABAR,"CODABAR"],[Ge.CODE_39,"CODE_39"],[Ge.CODE_93,"CODE_93"],[Ge.CODE_128,"CODE_128"],[Ge.DATA_MATRIX,"DATA_MATRIX"],[Ge.MAXICODE,"MAXICODE"],[Ge.ITF,"ITF"],[Ge.EAN_13,"EAN_13"],[Ge.EAN_8,"EAN_8"],[Ge.PDF_417,"PDF_417"],[Ge.RSS_14,"RSS_14"],[Ge.RSS_EXPANDED,"RSS_EXPANDED"],[Ge.UPC_A,"UPC_A"],[Ge.UPC_E,"UPC_E"],[Ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),My;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(My||(My={}));function M8(r){return Object.values(Ge).includes(r)}var wf;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(wf||(wf={}));var L8=(function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[wf.SCAN_TYPE_CAMERA,wf.SCAN_TYPE_FILE],r})(),zw=(function(){function r(e,n){this.format=e,this.formatName=n}return r.prototype.toString=function(){return this.formatName},r.create=function(e){if(!Dy.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new r(e,Dy.get(e))},r})(),Ly=(function(){function r(){}return r.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},r.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},r})(),j1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(j1||(j1={}));var P8=(function(){function r(){}return r.createFrom=function(e){return{errorMessage:e,type:j1.UNKWOWN_ERROR}},r})(),B8=(function(){function r(e){this.verbose=e}return r.prototype.log=function(e){this.verbose&&console.log(e)},r.prototype.warn=function(e){this.verbose&&console.warn(e)},r.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},r.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},r})();function xa(r){return typeof r>"u"||r===null}var jl=(function(){function r(){}return r.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},r.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r})(),Hw=(function(){function r(){}return r.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(u),E=Object.keys(e),T=0,b=E;T<b.length;T++){var _=b[T];if(d.has(_))return n.logError("".concat(_," is not supported videoConstaints."),!0),!1}return!0},r})(),Kc={exports:{}},k8=Kc.exports,Py;function U8(){return Py||(Py=1,(function(r,e){(function(n,o){o(e)})(k8,(function(n){function o(L){return L==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,i){L.__proto__=i}||function(L,i){for(var a in i)i.hasOwnProperty(a)&&(L[a]=i[a])};function d(L,i){u(L,i);function a(){this.constructor=L}L.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}function E(L,i){var a=Object.setPrototypeOf;a?a(L,i):L.__proto__=i}function T(L,i){i===void 0&&(i=L.constructor);var a=Error.captureStackTrace;a&&a(L,i)}var b=(function(L){d(i,L);function i(a){var l=this.constructor,h=L.call(this,a)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),E(h,l.prototype),T(h),h}return i})(Error);class _ extends b{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}_.kind="Exception";class C extends _{}C.kind="ArgumentException";class I extends _{}I.kind="IllegalArgumentException";class M{constructor(i){if(this.binarizer=i,i===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,a){return this.binarizer.getBlackRow(i,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,a,l,h){const f=this.binarizer.getLuminanceSource().crop(i,a,l,h);return new M(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends _{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class X{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class K{static arraycopy(i,a,l,h,f){for(;f--;)l[h++]=i[a++]}static currentTimeMillis(){return Date.now()}}class z extends _{}z.kind="IndexOutOfBoundsException";class xe extends z{constructor(i=void 0,a=void 0){super(a),this.index=i,this.message=a}}xe.kind="ArrayIndexOutOfBoundsException";class ge{static fill(i,a){for(let l=0,h=i.length;l<h;l++)i[l]=a}static fillWithin(i,a,l,h){ge.rangeCheck(i.length,a,l);for(let f=a;f<l;f++)i[f]=h}static rangeCheck(i,a,l){if(a>l)throw new I("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new xe(a);if(l>i)throw new xe(l)}static asList(...i){return i}static create(i,a,l){return Array.from({length:i}).map(f=>Array.from({length:a}).fill(l))}static createInt32Array(i,a,l){return Array.from({length:i}).map(f=>Int32Array.from({length:a}).fill(l))}static equals(i,a){if(!i||!a||!i.length||!a.length||i.length!==a.length)return!1;for(let l=0,h=i.length;l<h;l++)if(i[l]!==a[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let a=1;for(const l of i)a=31*a+l;return a}static fillUint8Array(i,a){for(let l=0;l!==i.length;l++)i[l]=a}static copyOf(i,a){return i.slice(0,a)}static copyOfUint8Array(i,a){if(i.length<=a){const l=new Uint8Array(a);return l.set(i),l}return i.slice(0,a)}static copyOfRange(i,a,l){const h=l-a,f=new Int32Array(h);return K.arraycopy(i,a,f,0,h),f}static binarySearch(i,a,l){l===void 0&&(l=ge.numberComparator);let h=0,f=i.length-1;for(;h<=f;){const m=f+h>>1,x=l(a,i[m]);if(x>0)h=m+1;else if(x<0)f=m-1;else return m}return-h-1}static numberComparator(i,a){return i-a}}class Q{static numberOfTrailingZeros(i){let a;if(i===0)return 32;let l=31;return a=i<<16,a!==0&&(l-=16,i=a),a=i<<8,a!==0&&(l-=8,i=a),a=i<<4,a!==0&&(l-=4,i=a),a=i<<2,a!==0&&(l-=2,i=a),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let a=1;return i>>>16||(a+=16,i<<=16),i>>>24||(a+=8,i<<=8),i>>>28||(a+=4,i<<=4),i>>>30||(a+=2,i<<=2),a-=i>>>31,a}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,a){return Math.trunc(i/a)}static parseInt(i,a=void 0){return parseInt(i,a)}}Q.MIN_VALUE_32_BITS=-2147483648,Q.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ve{constructor(i,a){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,a==null?this.bits=ve.makeArray(i):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const a=ve.makeArray(i);K.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const a=this.size;if(i>=a)return a;const l=this.bits;let h=Math.floor(i/32),f=l[h];f&=~((1<<(i&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=l[h]}const x=h*32+Q.numberOfTrailingZeros(f);return x>a?a:x}getNextUnset(i){const a=this.size;if(i>=a)return a;const l=this.bits;let h=Math.floor(i/32),f=~l[h];f&=~((1<<(i&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=~l[h]}const x=h*32+Q.numberOfTrailingZeros(f);return x>a?a:x}setBulk(i,a){this.bits[Math.floor(i/32)]=a}setRange(i,a){if(a<i||i<0||a>this.size)throw new I;if(a===i)return;a--;const l=Math.floor(i/32),h=Math.floor(a/32),f=this.bits;for(let m=l;m<=h;m++){const x=m>l?0:i&31,v=(2<<(m<h?31:a&31))-(1<<x);f[m]|=v}}clear(){const i=this.bits.length,a=this.bits;for(let l=0;l<i;l++)a[l]=0}isRange(i,a,l){if(a<i||i<0||a>this.size)throw new I;if(a===i)return!0;a--;const h=Math.floor(i/32),f=Math.floor(a/32),m=this.bits;for(let x=h;x<=f;x++){const A=x>h?0:i&31,R=(2<<(x<f?31:a&31))-(1<<A)&4294967295;if((m[x]&R)!==(l?R:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,a){if(a<0||a>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const a=i.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new I("Sizes don't match");const a=this.bits;for(let l=0,h=a.length;l<h;l++)a[l]^=i.bits[l]}toBytes(i,a,l,h){for(let f=0;f<h;f++){let m=0;for(let x=0;x<8;x++)this.get(i)&&(m|=1<<7-x),i++;a[l+f]=m}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,h=this.bits;for(let f=0;f<l;f++){let m=h[f];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,i[a-f]=m}if(this.size!==l*32){const f=l*32-this.size;let m=i[0]>>>f;for(let x=1;x<l;x++){const A=i[x];m|=A<<32-f,i[x-1]=m,m=A>>>f}i[l-1]=m}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof ve))return!1;const a=i;return this.size===a.size&&ge.equals(this.bits,a.bits)}hashCode(){return 31*this.size+ge.hashCode(this.bits)}toString(){let i="";for(let a=0,l=this.size;a<l;a++)(a&7)===0&&(i+=" "),i+=this.get(a)?"X":".";return i}clone(){return new ve(this.size,this.bits.slice())}}var Fe;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Fe||(Fe={}));var Be=Fe;class F extends _{static getFormatInstance(){return new F}}F.kind="FormatException";var G;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})(G||(G={}));class V{constructor(i,a,l,...h){this.valueIdentifier=i,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=h,V.VALUE_IDENTIFIER_TO_ECI.set(i,this),V.NAME_TO_ECI.set(l,this);const f=this.values;for(let m=0,x=f.length;m!==x;m++){const A=f[m];V.VALUES_TO_ECI.set(A,this)}for(const m of h)V.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new F("incorect value");const a=V.VALUES_TO_ECI.get(i);if(a===void 0)throw new F("incorect value");return a}static getCharacterSetECIByName(i){const a=V.NAME_TO_ECI.get(i);if(a===void 0)throw new F("incorect value");return a}equals(i){if(!(i instanceof V))return!1;const a=i;return this.getName()===a.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(G.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(G.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(G.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(G.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(G.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(G.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(G.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(G.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(G.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(G.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(G.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(G.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(G.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(G.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(G.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(G.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(G.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(G.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(G.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(G.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(G.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(G.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(G.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(G.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(G.Big5,28,"Big5"),V.GB18030=new V(G.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(G.EUC_KR,30,"EUC_KR","EUC-KR");class ne extends _{}ne.kind="UnsupportedOperationException";class W{static decode(i,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!W.isBrowser()&&i==="ISO-8859-1"}static encode(i,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof V?i:V.getCharacterSetECIByName(i)}static decodeFallback(i,a){const l=this.encodingCharacterSet(a);if(W.isDecodeFallbackSupported(l)){let h="";for(let f=0,m=i.length;f<m;f++){let x=i[f].toString(16);x.length<2&&(x="0"+x),h+="%"+x}return decodeURIComponent(h)}if(l.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new ne(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(V.UTF8)||i.equals(V.ISO8859_1)||i.equals(V.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),h=[];for(let f=0;f<l.length;f++)h.push(l[f].charCodeAt(0));return new Uint8Array(h)}}class J{static castAsNonUtf8Char(i,a=null){const l=a?a.getName():this.ISO88591;return W.decode(new Uint8Array([i]),l)}static guessEncoding(i,a){if(a!=null&&a.get(Be.CHARACTER_SET)!==void 0)return a.get(Be.CHARACTER_SET).toString();const l=i.length;let h=!0,f=!0,m=!0,x=0,A=0,v=0,R=0,P=0,B=0,q=0,$=0,ee=0,le=0,Ee=0;const Le=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Me=0;Me<l&&(h||f||m);Me++){const Re=i[Me]&255;m&&(x>0?(Re&128)===0?m=!1:x--:(Re&128)!==0&&((Re&64)===0?m=!1:(x++,(Re&32)===0?A++:(x++,(Re&16)===0?v++:(x++,(Re&8)===0?R++:m=!1))))),h&&(Re>127&&Re<160?h=!1:Re>159&&(Re<192||Re===215||Re===247)&&Ee++),f&&(P>0?Re<64||Re===127||Re>252?f=!1:P--:Re===128||Re===160||Re>239?f=!1:Re>160&&Re<224?(B++,$=0,q++,q>ee&&(ee=q)):Re>127?(P++,q=0,$++,$>le&&(le=$)):(q=0,$=0))}return m&&x>0&&(m=!1),f&&P>0&&(f=!1),m&&(Le||A+v+R>0)?J.UTF8:f&&(J.ASSUME_SHIFT_JIS||ee>=3||le>=3)?J.SHIFT_JIS:h&&f?ee===2&&B===2||Ee*10>=l?J.SHIFT_JIS:J.ISO88591:h?J.ISO88591:f?J.SHIFT_JIS:m?J.UTF8:J.PLATFORM_DEFAULT_ENCODING}static format(i,...a){let l=-1;function h(m,x,A,v,R,P){if(m==="%%")return"%";if(a[++l]===void 0)return;m=v?parseInt(v.substr(1)):void 0;let B=R?parseInt(R.substr(1)):void 0,q;switch(P){case"s":q=a[l];break;case"c":q=a[l][0];break;case"f":q=parseFloat(a[l]).toFixed(m);break;case"p":q=parseFloat(a[l]).toPrecision(m);break;case"e":q=parseFloat(a[l]).toExponential(m);break;case"x":q=parseInt(a[l]).toString(B||16);break;case"d":q=parseFloat(parseInt(a[l],B||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let $=parseInt(A),ee=A&&A[0]+""=="0"?"0":" ";for(;q.length<$;)q=x!==void 0?q+ee:ee+q;return q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,h)}static getBytes(i,a){return W.encode(i,a)}static getCharCode(i,a=0){return i.charCodeAt(a)}static getCharAt(i){return String.fromCharCode(i)}}J.SHIFT_JIS=V.SJIS.getName(),J.GB2312="GB2312",J.ISO88591=V.ISO8859_1.getName(),J.EUC_JP="EUC_JP",J.UTF8=V.UTF8.getName(),J.PLATFORM_DEFAULT_ENCODING=J.UTF8,J.ASSUME_SHIFT_JIS=!1;class Y{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=J.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,a,l){for(let h=a;a<a+l;h++)this.append(i[h]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+1)}substring(i,a){return this.value.substring(i,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+a.length)}}class Ze{constructor(i,a,l,h){if(this.width=i,this.height=a,this.rowSize=l,this.bits=h,a==null&&(a=i),this.height=a,i<1||a<1)throw new I("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const a=i.length,l=i[0].length,h=new Ze(l,a);for(let f=0;f<a;f++){const m=i[f];for(let x=0;x<l;x++)m[x]&&h.set(x,f)}return h}static parseFromString(i,a,l){if(i===null)throw new I("stringRepresentation cannot be null");const h=new Array(i.length);let f=0,m=0,x=-1,A=0,v=0;for(;v<i.length;)if(i.charAt(v)===`
`||i.charAt(v)==="\r"){if(f>m){if(x===-1)x=f-m;else if(f-m!==x)throw new I("row lengths do not match");m=f,A++}v++}else if(i.substring(v,v+a.length)===a)v+=a.length,h[f]=!0,f++;else if(i.substring(v,v+l.length)===l)v+=l.length,h[f]=!1,f++;else throw new I("illegal character encountered: "+i.substring(v));if(f>m){if(x===-1)x=f-m;else if(f-m!==x)throw new I("row lengths do not match");A++}const R=new Ze(x,A);for(let P=0;P<f;P++)h[P]&&R.set(Math.floor(P%x),Math.floor(P/x));return R}get(i,a){const l=a*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new I("input matrix dimensions do not match");const a=new ve(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let f=0,m=this.height;f<m;f++){const x=f*l,A=i.getRow(f,a).getBitArray();for(let v=0;v<l;v++)h[x+v]^=A[v]}}clear(){const i=this.bits,a=i.length;for(let l=0;l<a;l++)i[l]=0}setRegion(i,a,l,h){if(a<0||i<0)throw new I("Left and top must be nonnegative");if(h<1||l<1)throw new I("Height and width must be at least 1");const f=i+l,m=a+h;if(m>this.height||f>this.width)throw new I("The region must fit inside the matrix");const x=this.rowSize,A=this.bits;for(let v=a;v<m;v++){const R=v*x;for(let P=i;P<f;P++)A[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(i,a){a==null||a.getSize()<this.width?a=new ve(this.width):a.clear();const l=this.rowSize,h=this.bits,f=i*l;for(let m=0;m<l;m++)a.setBulk(m*32,h[f+m]);return a}setRow(i,a){K.arraycopy(a.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),a=this.getHeight();let l=new ve(i),h=new ve(i);for(let f=0,m=Math.floor((a+1)/2);f<m;f++)l=this.getRow(f,l),h=this.getRow(a-1-f,h),l.reverse(),h.reverse(),this.setRow(f,h),this.setRow(a-1-f,l)}getEnclosingRectangle(){const i=this.width,a=this.height,l=this.rowSize,h=this.bits;let f=i,m=a,x=-1,A=-1;for(let v=0;v<a;v++)for(let R=0;R<l;R++){const P=h[v*l+R];if(P!==0){if(v<m&&(m=v),v>A&&(A=v),R*32<f){let B=0;for(;(P<<31-B&4294967295)===0;)B++;R*32+B<f&&(f=R*32+B)}if(R*32+31>x){let B=31;for(;!(P>>>B);)B--;R*32+B>x&&(x=R*32+B)}}}return x<f||A<m?null:Int32Array.from([f,m,x-f+1,A-m+1])}getTopLeftOnBit(){const i=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const h=l/i;let f=l%i*32;const m=a[l];let x=0;for(;(m<<31-x&4294967295)===0;)x++;return f+=x,Int32Array.from([f,h])}getBottomRightOnBit(){const i=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/i);let f=Math.floor(l%i)*32;const m=a[l];let x=31;for(;!(m>>>x);)x--;return f+=x,Int32Array.from([f,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Ze))return!1;const a=i;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&ge.equals(this.bits,a.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+ge.hashCode(this.bits),i}toString(i="X ",a="  ",l=`
`){return this.buildToString(i,a,l)}buildToString(i,a,l){let h=new Y;for(let f=0,m=this.height;f<m;f++){for(let x=0,A=this.width;x<A;x++)h.append(this.get(x,f)?i:a);h.append(l)}return h.toString()}clone(){return new Ze(this.width,this.height,this.rowSize,this.bits.slice())}}class fe extends _{static getNotFoundInstance(){return new fe}}fe.kind="NotFoundException";class me extends X{constructor(i){super(i),this.luminances=me.EMPTY,this.buckets=new Int32Array(me.LUMINANCE_BUCKETS)}getBlackRow(i,a){const l=this.getLuminanceSource(),h=l.getWidth();a==null||a.getSize()<h?a=new ve(h):a.clear(),this.initArrays(h);const f=l.getRow(i,this.luminances),m=this.buckets;for(let A=0;A<h;A++)m[(f[A]&255)>>me.LUMINANCE_SHIFT]++;const x=me.estimateBlackPoint(m);if(h<3)for(let A=0;A<h;A++)(f[A]&255)<x&&a.set(A);else{let A=f[0]&255,v=f[1]&255;for(let R=1;R<h-1;R++){const P=f[R+1]&255;(v*4-A-P)/2<x&&a.set(R),A=v,v=P}}return a}getBlackMatrix(){const i=this.getLuminanceSource(),a=i.getWidth(),l=i.getHeight(),h=new Ze(a,l);this.initArrays(a);const f=this.buckets;for(let A=1;A<5;A++){const v=Math.floor(l*A/5),R=i.getRow(v,this.luminances),P=Math.floor(a*4/5);for(let B=Math.floor(a/5);B<P;B++){const q=R[B]&255;f[q>>me.LUMINANCE_SHIFT]++}}const m=me.estimateBlackPoint(f),x=i.getMatrix();for(let A=0;A<l;A++){const v=A*a;for(let R=0;R<a;R++)(x[v+R]&255)<m&&h.set(R,A)}return h}createBinarizer(i){return new me(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const a=this.buckets;for(let l=0;l<me.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(i){const a=i.length;let l=0,h=0,f=0;for(let R=0;R<a;R++)i[R]>f&&(h=R,f=i[R]),i[R]>l&&(l=i[R]);let m=0,x=0;for(let R=0;R<a;R++){const P=R-h,B=i[R]*P*P;B>x&&(m=R,x=B)}if(h>m){const R=h;h=m,m=R}if(m-h<=a/16)throw new fe;let A=m-1,v=-1;for(let R=m-1;R>h;R--){const P=R-h,B=P*P*(m-R)*(l-i[R]);B>v&&(A=R,v=B)}return A<<me.LUMINANCE_SHIFT}}me.LUMINANCE_BITS=5,me.LUMINANCE_SHIFT=8-me.LUMINANCE_BITS,me.LUMINANCE_BUCKETS=1<<me.LUMINANCE_BITS,me.EMPTY=Uint8ClampedArray.from([0]);class we extends me{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),a=i.getWidth(),l=i.getHeight();if(a>=we.MINIMUM_DIMENSION&&l>=we.MINIMUM_DIMENSION){const h=i.getMatrix();let f=a>>we.BLOCK_SIZE_POWER;(a&we.BLOCK_SIZE_MASK)!==0&&f++;let m=l>>we.BLOCK_SIZE_POWER;(l&we.BLOCK_SIZE_MASK)!==0&&m++;const x=we.calculateBlackPoints(h,f,m,a,l),A=new Ze(a,l);we.calculateThresholdForBlock(h,f,m,a,l,x,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new we(i)}static calculateThresholdForBlock(i,a,l,h,f,m,x){const A=f-we.BLOCK_SIZE,v=h-we.BLOCK_SIZE;for(let R=0;R<l;R++){let P=R<<we.BLOCK_SIZE_POWER;P>A&&(P=A);const B=we.cap(R,2,l-3);for(let q=0;q<a;q++){let $=q<<we.BLOCK_SIZE_POWER;$>v&&($=v);const ee=we.cap(q,2,a-3);let le=0;for(let Le=-2;Le<=2;Le++){const Me=m[B+Le];le+=Me[ee-2]+Me[ee-1]+Me[ee]+Me[ee+1]+Me[ee+2]}const Ee=le/25;we.thresholdBlock(i,$,P,Ee,h,x)}}}static cap(i,a,l){return i<a?a:i>l?l:i}static thresholdBlock(i,a,l,h,f,m){for(let x=0,A=l*f+a;x<we.BLOCK_SIZE;x++,A+=f)for(let v=0;v<we.BLOCK_SIZE;v++)(i[A+v]&255)<=h&&m.set(a+v,l+x)}static calculateBlackPoints(i,a,l,h,f){const m=f-we.BLOCK_SIZE,x=h-we.BLOCK_SIZE,A=new Array(l);for(let v=0;v<l;v++){A[v]=new Int32Array(a);let R=v<<we.BLOCK_SIZE_POWER;R>m&&(R=m);for(let P=0;P<a;P++){let B=P<<we.BLOCK_SIZE_POWER;B>x&&(B=x);let q=0,$=255,ee=0;for(let Ee=0,Le=R*h+B;Ee<we.BLOCK_SIZE;Ee++,Le+=h){for(let Me=0;Me<we.BLOCK_SIZE;Me++){const Re=i[Le+Me]&255;q+=Re,Re<$&&($=Re),Re>ee&&(ee=Re)}if(ee-$>we.MIN_DYNAMIC_RANGE)for(Ee++,Le+=h;Ee<we.BLOCK_SIZE;Ee++,Le+=h)for(let Me=0;Me<we.BLOCK_SIZE;Me++)q+=i[Le+Me]&255}let le=q>>we.BLOCK_SIZE_POWER*2;if(ee-$<=we.MIN_DYNAMIC_RANGE&&(le=$/2,v>0&&P>0)){const Ee=(A[v-1][P]+2*A[v][P-1]+A[v-1][P-1])/4;$<Ee&&(le=Ee)}A[v][P]=le}}return A}}we.BLOCK_SIZE_POWER=3,we.BLOCK_SIZE=1<<we.BLOCK_SIZE_POWER,we.BLOCK_SIZE_MASK=we.BLOCK_SIZE-1,we.MINIMUM_DIMENSION=we.BLOCK_SIZE*5,we.MIN_DYNAMIC_RANGE=24;class qe{constructor(i,a){this.width=i,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,a,l,h){throw new ne("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ne("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ne("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let a=new Y;for(let l=0;l<this.height;l++){const h=this.getRow(l,i);for(let f=0;f<this.width;f++){const m=h[f]&255;let x;m<64?x="#":m<128?x="+":m<192?x=".":x=" ",a.append(x)}a.append(`
`)}return a.toString()}}class ot extends qe{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,a){const l=this.delegate.getRow(i,a),h=this.getWidth();for(let f=0;f<h;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let h=0;h<a;h++)l[h]=255-(i[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,a,l,h){return new ot(this.delegate.crop(i,a,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ot(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ot(this.delegate.rotateCounterClockwise45())}}class ft extends qe{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=ft.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const a=i.getContext("2d").getImageData(0,0,i.width,i.height);return ft.toGrayscaleBuffer(a.data,i.width,i.height)}static toGrayscaleBuffer(i,a,l){const h=new Uint8ClampedArray(a*l);for(let f=0,m=0,x=i.length;f<x;f+=4,m++){let A;if(i[f+3]===0)A=255;else{const R=i[f],P=i[f+1],B=i[f+2];A=306*R+601*P+117*B+512>>10}h[m]=A}return h}getRow(i,a){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth(),h=i*l;return a===null?a=this.buffer.slice(h,h+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(h,h+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,a,l,h){return super.crop(i,a,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const a=this.getTempCanvasElement(),l=a.getContext("2d"),h=i*ft.DEGREE_TO_RADIANS,f=this.canvas.width,m=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(h))*f+Math.abs(Math.sin(h))*m),A=Math.ceil(Math.abs(Math.sin(h))*f+Math.abs(Math.cos(h))*m);return a.width=x,a.height=A,l.translate(x/2,A/2),l.rotate(h),l.drawImage(this.canvas,f/-2,m/-2),this.buffer=ft.makeBufferFromCanvasImageData(a),this}invert(){return new ot(this)}}ft.DEGREE_TO_RADIANS=Math.PI/180;class ie{constructor(i,a,l){this.deviceId=i,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ae=(globalThis||Ih||self||window||void 0)&&(globalThis||Ih||self||window||void 0).__awaiter||function(L,i,a,l){function h(f){return f instanceof a?f:new a(function(m){m(f)})}return new(a||(a=Promise))(function(f,m){function x(R){try{v(l.next(R))}catch(P){m(P)}}function A(R){try{v(l.throw(R))}catch(P){m(P)}}function v(R){R.done?f(R.value):h(R.value).then(x,A)}v((l=l.apply(L,i||[])).next())})};class ke{constructor(i,a=500,l){this.reader=i,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return Ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of i){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const f=l.deviceId||l.id,m=l.label||`Video device ${a.length+1}`,x=l.groupId,A={deviceId:f,label:m,kind:h,groupId:x};a.push(A)}return a})}getVideoInputDevices(){return Ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new ie(a.deviceId,a.label))})}findDeviceById(i){return Ae(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,a){return Ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,a)})}decodeOnceFromVideoDevice(i,a){return Ae(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,a)})}decodeOnceFromConstraints(i,a){return Ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(i,a){return Ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,a,l){return Ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,a,l)})}decodeFromVideoDevice(i,a,l){return Ae(this,void 0,void 0,function*(){let h;i?h={deviceId:{exact:i}}:h={facingMode:"environment"};const f={video:h};return yield this.decodeFromConstraints(f,a,l)})}decodeFromConstraints(i,a,l){return Ae(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(h,a,l)})}decodeFromStream(i,a,l){return Ae(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(i,a);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,a){return Ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((a,l)=>this.playVideoOnLoad(i,()=>a()))}playVideoOnLoad(i,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",a),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return Ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,a){const l=document.getElementById(i);if(!l)throw new C(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new C(`element with id '${i}' must be an ${a} element`);return l}decodeFromImage(i,a){if(!i&&!a)throw new C("either imageElement with a src set or an url must be provided");return a&&!i?this.decodeFromImageUrl(a):this.decodeFromImageElement(i)}decodeFromVideo(i,a){if(!i&&!a)throw new C("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,a,l){if(i===void 0&&a===void 0)throw new C("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new C("An image element must be provided.");this.reset();const a=this.prepareImageElement(i);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(i){const a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(i,a){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(i){if(!i)throw new C("A video element must be provided.");this.reset();const a=this.prepareVideoElement(i);return this.videoElement=a,a}decodeFromImageUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=i,l}decodeFromVideoUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=i,l}decodeFromVideoUrlContinuously(i,a){if(!i)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,a);return l.src=i,h}_decodeOnLoadImage(i){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(a,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return Ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,a){return Ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,a)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let a;return typeof i>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(a=i),a}prepareVideoElement(i){let a;return!i&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(a=i),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(i,a=!0,l=!0){this._stopAsyncDecode=!1;const h=(f,m)=>{if(this._stopAsyncDecode){m(new fe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(i);f(x)}catch(x){const A=a&&x instanceof fe,R=(x instanceof k||x instanceof F)&&l;if(A||R)return setTimeout(h,this._timeBetweenDecodingAttempts,f,m);m(x)}};return new Promise((f,m)=>h(f,m))}decodeContinuously(i,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(i);a(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){a(null,h);const f=h instanceof k||h instanceof F,m=h instanceof fe;(f||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const a=this.createBinaryBitmap(i);return this.decodeBitmap(a)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,a,l){a||(a={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(i,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const a=this.getCaptureCanvas(i),l=new ft(a),h=new we(l);return new M(h)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const a=this.createCaptureCanvas(i);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,h;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,h=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,h=i.naturalHeight||i.height)),a.style.width=l+"px",a.style.height=h+"px",a.width=l,a.height=h,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,a){try{i.srcObject=a}catch{i.src=URL.createObjectURL(a)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Ue{constructor(i,a,l=a==null?0:8*a.length,h,f,m=K.currentTimeMillis()){this.text=i,this.rawBytes=a,this.numBits=l,this.resultPoints=h,this.format=f,this.timestamp=m,this.text=i,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=h,this.format=f,this.resultMetadata=null,m==null?this.timestamp=K.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,a)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const a=this.resultPoints;if(a===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(a.length+i.length);K.arraycopy(a,0,l,0,a.length),K.arraycopy(i,0,l,a.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var tt;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(tt||(tt={}));var Oe=tt,pt;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(pt||(pt={}));var yt=pt;class Jt{constructor(i,a,l,h,f=-1,m=-1){this.rawBytes=i,this.text=a,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=m,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class yi{exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}static addOrSubtract(i,a){return i^a}}class Pn{constructor(i,a){if(a.length===0)throw new I;this.field=i;const l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),K.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(i===1){l=0;for(let m=0,x=a.length;m!==x;m++){const A=a[m];l=yi.addOrSubtract(l,A)}return l}l=a[0];const h=a.length,f=this.field;for(let m=1;m<h;m++)l=yi.addOrSubtract(f.multiply(i,l),a[m]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,l=i.coefficients;if(a.length>l.length){const m=a;a=l,l=m}let h=new Int32Array(l.length);const f=l.length-a.length;K.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=yi.addOrSubtract(a[m-f],l[m]);return new Pn(this.field,h)}multiply(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,h=i.coefficients,f=h.length,m=new Int32Array(l+f-1),x=this.field;for(let A=0;A<l;A++){const v=a[A];for(let R=0;R<f;R++)m[A+R]=yi.addOrSubtract(m[A+R],x.multiply(v,h[R]))}return new Pn(x,m)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const a=this.coefficients.length,l=this.field,h=new Int32Array(a),f=this.coefficients;for(let m=0;m<a;m++)h[m]=l.multiply(f[m],i);return new Pn(l,h)}multiplyByMonomial(i,a){if(i<0)throw new I;if(a===0)return this.field.getZero();const l=this.coefficients,h=l.length,f=new Int32Array(h+i),m=this.field;for(let x=0;x<h;x++)f[x]=m.multiply(l[x],a);return new Pn(m,f)}divide(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new I("Divide by 0");const a=this.field;let l=a.getZero(),h=this;const f=i.getCoefficient(i.getDegree()),m=a.inverse(f);for(;h.getDegree()>=i.getDegree()&&!h.isZero();){const x=h.getDegree()-i.getDegree(),A=a.multiply(h.getCoefficient(h.getDegree()),m),v=i.multiplyByMonomial(x,A),R=a.buildMonomial(x,A);l=l.addOrSubtract(R),h=h.addOrSubtract(v)}return[l,h]}toString(){let i="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),a===0||l!==1){const h=this.field.log(l);h===0?i+="1":h===1?i+="a":(i+="a^",i+=h)}a!==0&&(a===1?i+="x":(i+="x^",i+=a))}}return i}}class nr extends _{}nr.kind="ArithmeticException";class _t extends yi{constructor(i,a,l){super(),this.primitive=i,this.size=a,this.generatorBase=l;const h=new Int32Array(a);let f=1;for(let x=0;x<a;x++)h[x]=f,f*=2,f>=a&&(f^=i,f&=a-1);this.expTable=h;const m=new Int32Array(a);for(let x=0;x<a-1;x++)m[h[x]]=x;this.logTable=m,this.zero=new Pn(this,Int32Array.from([0])),this.one=new Pn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new I;if(a===0)return this.zero;const l=new Int32Array(i+1);return l[0]=a,new Pn(this,l)}inverse(i){if(i===0)throw new nr;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Q.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}_t.AZTEC_DATA_12=new _t(4201,4096,1),_t.AZTEC_DATA_10=new _t(1033,1024,1),_t.AZTEC_DATA_6=new _t(67,64,1),_t.AZTEC_PARAM=new _t(19,16,1),_t.QR_CODE_FIELD_256=new _t(285,256,0),_t.DATA_MATRIX_FIELD_256=new _t(301,256,1),_t.AZTEC_DATA_8=_t.DATA_MATRIX_FIELD_256,_t.MAXICODE_FIELD_64=_t.AZTEC_DATA_6;class zn extends _{}zn.kind="ReedSolomonException";class _i extends _{}_i.kind="IllegalStateException";class Ri{constructor(i){this.field=i}decode(i,a){const l=this.field,h=new Pn(l,i),f=new Int32Array(a);let m=!0;for(let q=0;q<a;q++){const $=h.evaluateAt(l.exp(q+l.getGeneratorBase()));f[f.length-1-q]=$,$!==0&&(m=!1)}if(m)return;const x=new Pn(l,f),A=this.runEuclideanAlgorithm(l.buildMonomial(a,1),x,a),v=A[0],R=A[1],P=this.findErrorLocations(v),B=this.findErrorMagnitudes(R,P);for(let q=0;q<P.length;q++){const $=i.length-1-l.log(P[q]);if($<0)throw new zn("Bad error location");i[$]=_t.addOrSubtract(i[$],B[q])}}runEuclideanAlgorithm(i,a,l){if(i.getDegree()<a.getDegree()){const q=i;i=a,a=q}const h=this.field;let f=i,m=a,x=h.getZero(),A=h.getOne();for(;m.getDegree()>=(l/2|0);){let q=f,$=x;if(f=m,x=A,f.isZero())throw new zn("r_{i-1} was zero");m=q;let ee=h.getZero();const le=f.getCoefficient(f.getDegree()),Ee=h.inverse(le);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){const Le=m.getDegree()-f.getDegree(),Me=h.multiply(m.getCoefficient(m.getDegree()),Ee);ee=ee.addOrSubtract(h.buildMonomial(Le,Me)),m=m.addOrSubtract(f.multiplyByMonomial(Le,Me))}if(A=ee.multiply(x).addOrSubtract($),m.getDegree()>=f.getDegree())throw new _i("Division algorithm failed to reduce polynomial?")}const v=A.getCoefficient(0);if(v===0)throw new zn("sigmaTilde(0) was zero");const R=h.inverse(v),P=A.multiplyScalar(R),B=m.multiplyScalar(R);return[P,B]}findErrorLocations(i){const a=i.getDegree();if(a===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(a);let h=0;const f=this.field;for(let m=1;m<f.getSize()&&h<a;m++)i.evaluateAt(m)===0&&(l[h]=f.inverse(m),h++);if(h!==a)throw new zn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,a){const l=a.length,h=new Int32Array(l),f=this.field;for(let m=0;m<l;m++){const x=f.inverse(a[m]);let A=1;for(let v=0;v<l;v++)if(m!==v){const R=f.multiply(a[v],x),P=(R&1)===0?R|1:R&-2;A=f.multiply(A,P)}h[m]=f.multiply(i.evaluateAt(x),f.inverse(A)),f.getGeneratorBase()!==0&&(h[m]=f.multiply(h[m],x))}return h}}var Tn;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(Tn||(Tn={}));class Bt{decode(i){this.ddata=i;let a=i.getBits(),l=this.extractBits(a),h=this.correctBits(l),f=Bt.convertBoolArrayToByteArray(h),m=Bt.getEncodedData(h),x=new Jt(f,m,null,null);return x.setNumBits(h.length),x}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let a=i.length,l=Tn.UPPER,h=Tn.UPPER,f="",m=0;for(;m<a;)if(h===Tn.BINARY){if(a-m<5)break;let x=Bt.readCode(i,m,5);if(m+=5,x===0){if(a-m<11)break;x=Bt.readCode(i,m,11)+31,m+=11}for(let A=0;A<x;A++){if(a-m<8){m=a;break}const v=Bt.readCode(i,m,8);f+=J.castAsNonUtf8Char(v),m+=8}h=l}else{let x=h===Tn.DIGIT?4:5;if(a-m<x)break;let A=Bt.readCode(i,m,x);m+=x;let v=Bt.getCharacter(h,A);v.startsWith("CTRL_")?(l=h,h=Bt.getTable(v.charAt(5)),v.charAt(6)==="L"&&(l=h)):(f+=v,h=l)}return f}static getTable(i){switch(i){case"L":return Tn.LOWER;case"P":return Tn.PUNCT;case"M":return Tn.MIXED;case"D":return Tn.DIGIT;case"B":return Tn.BINARY;case"U":default:return Tn.UPPER}}static getCharacter(i,a){switch(i){case Tn.UPPER:return Bt.UPPER_TABLE[a];case Tn.LOWER:return Bt.LOWER_TABLE[a];case Tn.MIXED:return Bt.MIXED_TABLE[a];case Tn.PUNCT:return Bt.PUNCT_TABLE[a];case Tn.DIGIT:return Bt.DIGIT_TABLE[a];default:throw new _i("Bad table")}}correctBits(i){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=_t.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=_t.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=_t.AZTEC_DATA_10):(l=12,a=_t.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),f=i.length/l;if(f<h)throw new F;let m=i.length%l,x=new Int32Array(f);for(let B=0;B<f;B++,m+=l)x[B]=Bt.readCode(i,m,l);try{new Ri(a).decode(x,f-h)}catch(B){throw new F(B)}let A=(1<<l)-1,v=0;for(let B=0;B<h;B++){let q=x[B];if(q===0||q===A)throw new F;(q===1||q===A-1)&&v++}let R=new Array(h*l-v),P=0;for(let B=0;B<h;B++){let q=x[B];if(q===1||q===A-1)R.fill(q>1,P,P+l-1),P+=l-1;else for(let $=l-1;$>=0;--$)R[P++]=(q&1<<$)!==0}return R}extractBits(i){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(a?11:14)+l*4,f=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,a));if(a)for(let x=0;x<f.length;x++)f[x]=x;else{let x=h+1+2*Q.truncDivision(Q.truncDivision(h,2)-1,15),A=h/2,v=Q.truncDivision(x,2);for(let R=0;R<A;R++){let P=R+Q.truncDivision(R,15);f[A-R-1]=v-P-1,f[A+R]=v+P+1}}for(let x=0,A=0;x<l;x++){let v=(l-x)*4+(a?9:12),R=x*2,P=h-1-R;for(let B=0;B<v;B++){let q=B*2;for(let $=0;$<2;$++)m[A+q+$]=i.get(f[R+$],f[R+B]),m[A+2*v+q+$]=i.get(f[R+B],f[P-$]),m[A+4*v+q+$]=i.get(f[P-$],f[P-B]),m[A+6*v+q+$]=i.get(f[P-B],f[R+$])}A+=v*8}return m}static readCode(i,a,l){let h=0;for(let f=a;f<a+l;f++)h<<=1,i[f]&&(h|=1);return h}static readByte(i,a){let l=i.length-a;return l>=8?Bt.readCode(i,a,8):Bt.readCode(i,a,l)<<8-l}static convertBoolArrayToByteArray(i){let a=new Uint8Array((i.length+7)/8);for(let l=0;l<a.length;l++)a[l]=Bt.readByte(i,8*l);return a}totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}Bt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Bt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Bt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Bt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Bt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Qe{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,a,l,h){const f=i-l,m=a-h;return Math.sqrt(f*f+m*m)}static sum(i){let a=0;for(let l=0,h=i.length;l!==h;l++){const f=i[l];a+=f}return a}}class pn{static floatToIntBits(i){return i}}pn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class je{constructor(i,a){this.x=i,this.y=a}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof je){const a=i;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*pn.floatToIntBits(this.x)+pn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const a=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),h=this.distance(i[0],i[2]);let f,m,x;if(l>=a&&l>=h?(m=i[0],f=i[1],x=i[2]):h>=l&&h>=a?(m=i[1],f=i[0],x=i[2]):(m=i[2],f=i[0],x=i[1]),this.crossProductZ(f,m,x)<0){const A=f;f=x,x=A}i[0]=f,i[1]=m,i[2]=x}static distance(i,a){return Qe.distance(i.x,i.y,a.x,a.y)}static crossProductZ(i,a,l){const h=a.x,f=a.y;return(l.x-h)*(i.y-f)-(l.y-f)*(i.x-h)}}class qi{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class ps extends qi{constructor(i,a,l,h,f){super(i,a),this.compact=l,this.nbDatablocks=h,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class xn{constructor(i,a,l,h){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),a==null&&(a=xn.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),h==null&&(h=i.getHeight()/2|0);const f=a/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=h-f,this.downInit=h+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new fe}detect(){let i=this.leftInit,a=this.rightInit,l=this.upInit,h=this.downInit,f=!1,m=!0,x=!1,A=!1,v=!1,R=!1,P=!1;const B=this.width,q=this.height;for(;m;){m=!1;let $=!0;for(;($||!A)&&a<B;)$=this.containsBlackPoint(l,h,a,!1),$?(a++,m=!0,A=!0):A||a++;if(a>=B){f=!0;break}let ee=!0;for(;(ee||!v)&&h<q;)ee=this.containsBlackPoint(i,a,h,!0),ee?(h++,m=!0,v=!0):v||h++;if(h>=q){f=!0;break}let le=!0;for(;(le||!R)&&i>=0;)le=this.containsBlackPoint(l,h,i,!1),le?(i--,m=!0,R=!0):R||i--;if(i<0){f=!0;break}let Ee=!0;for(;(Ee||!P)&&l>=0;)Ee=this.containsBlackPoint(i,a,l,!0),Ee?(l--,m=!0,P=!0):P||l--;if(l<0){f=!0;break}m&&(x=!0)}if(!f&&x){const $=a-i;let ee=null;for(let Me=1;ee===null&&Me<$;Me++)ee=this.getBlackPointOnSegment(i,h-Me,i+Me,h);if(ee==null)throw new fe;let le=null;for(let Me=1;le===null&&Me<$;Me++)le=this.getBlackPointOnSegment(i,l+Me,i+Me,l);if(le==null)throw new fe;let Ee=null;for(let Me=1;Ee===null&&Me<$;Me++)Ee=this.getBlackPointOnSegment(a,l+Me,a-Me,l);if(Ee==null)throw new fe;let Le=null;for(let Me=1;Le===null&&Me<$;Me++)Le=this.getBlackPointOnSegment(a,h-Me,a-Me,h);if(Le==null)throw new fe;return this.centerEdges(Le,ee,Ee,le)}else throw new fe}getBlackPointOnSegment(i,a,l,h){const f=Qe.round(Qe.distance(i,a,l,h)),m=(l-i)/f,x=(h-a)/f,A=this.image;for(let v=0;v<f;v++){const R=Qe.round(i+v*m),P=Qe.round(a+v*x);if(A.get(R,P))return new je(R,P)}return null}centerEdges(i,a,l,h){const f=i.getX(),m=i.getY(),x=a.getX(),A=a.getY(),v=l.getX(),R=l.getY(),P=h.getX(),B=h.getY(),q=xn.CORR;return f<this.width/2?[new je(P-q,B+q),new je(x+q,A+q),new je(v-q,R-q),new je(f+q,m-q)]:[new je(P+q,B+q),new je(x+q,A-q),new je(v-q,R+q),new je(f-q,m-q)]}containsBlackPoint(i,a,l,h){const f=this.image;if(h){for(let m=i;m<=a;m++)if(f.get(m,l))return!0}else for(let m=i;m<=a;m++)if(f.get(l,m))return!0;return!1}}xn.INIT_SIZE=10,xn.CORR=1;class mr{static checkAndNudgePoints(i,a){const l=i.getWidth(),h=i.getHeight();let f=!0;for(let m=0;m<a.length&&f;m+=2){const x=Math.floor(a[m]),A=Math.floor(a[m+1]);if(x<-1||x>l||A<-1||A>h)throw new fe;f=!1,x===-1?(a[m]=0,f=!0):x===l&&(a[m]=l-1,f=!0),A===-1?(a[m+1]=0,f=!0):A===h&&(a[m+1]=h-1,f=!0)}f=!0;for(let m=a.length-2;m>=0&&f;m-=2){const x=Math.floor(a[m]),A=Math.floor(a[m+1]);if(x<-1||x>l||A<-1||A>h)throw new fe;f=!1,x===-1?(a[m]=0,f=!0):x===l&&(a[m]=l-1,f=!0),A===-1?(a[m+1]=0,f=!0):A===h&&(a[m+1]=h-1,f=!0)}}}class ui{constructor(i,a,l,h,f,m,x,A,v){this.a11=i,this.a21=a,this.a31=l,this.a12=h,this.a22=f,this.a32=m,this.a13=x,this.a23=A,this.a33=v}static quadrilateralToQuadrilateral(i,a,l,h,f,m,x,A,v,R,P,B,q,$,ee,le){const Ee=ui.quadrilateralToSquare(i,a,l,h,f,m,x,A);return ui.squareToQuadrilateral(v,R,P,B,q,$,ee,le).times(Ee)}transformPoints(i){const a=i.length,l=this.a11,h=this.a12,f=this.a13,m=this.a21,x=this.a22,A=this.a23,v=this.a31,R=this.a32,P=this.a33;for(let B=0;B<a;B+=2){const q=i[B],$=i[B+1],ee=f*q+A*$+P;i[B]=(l*q+m*$+v)/ee,i[B+1]=(h*q+x*$+R)/ee}}transformPointsWithValues(i,a){const l=this.a11,h=this.a12,f=this.a13,m=this.a21,x=this.a22,A=this.a23,v=this.a31,R=this.a32,P=this.a33,B=i.length;for(let q=0;q<B;q++){const $=i[q],ee=a[q],le=f*$+A*ee+P;i[q]=(l*$+m*ee+v)/le,a[q]=(h*$+x*ee+R)/le}}static squareToQuadrilateral(i,a,l,h,f,m,x,A){const v=i-l+f-x,R=a-h+m-A;if(v===0&&R===0)return new ui(l-i,f-l,i,h-a,m-h,a,0,0,1);{const P=l-f,B=x-f,q=h-m,$=A-m,ee=P*$-B*q,le=(v*$-B*R)/ee,Ee=(P*R-v*q)/ee;return new ui(l-i+le*l,x-i+Ee*x,i,h-a+le*h,A-a+Ee*A,a,le,Ee,1)}}static quadrilateralToSquare(i,a,l,h,f,m,x,A){return ui.squareToQuadrilateral(i,a,l,h,f,m,x,A).buildAdjoint()}buildAdjoint(){return new ui(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new ui(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Yr extends mr{sampleGrid(i,a,l,h,f,m,x,A,v,R,P,B,q,$,ee,le,Ee,Le,Me){const Re=ui.quadrilateralToQuadrilateral(h,f,m,x,A,v,R,P,B,q,$,ee,le,Ee,Le,Me);return this.sampleGridWithTransform(i,a,l,Re)}sampleGridWithTransform(i,a,l,h){if(a<=0||l<=0)throw new fe;const f=new Ze(a,l),m=new Float32Array(2*a);for(let x=0;x<l;x++){const A=m.length,v=x+.5;for(let R=0;R<A;R+=2)m[R]=R/2+.5,m[R+1]=v;h.transformPoints(m),mr.checkAndNudgePoints(i,m);try{for(let R=0;R<A;R+=2)i.get(Math.floor(m[R]),Math.floor(m[R+1]))&&f.set(R/2,x)}catch{throw new fe}}return f}}class si{static setGridSampler(i){si.gridSampler=i}static getInstance(){return si.gridSampler}}si.gridSampler=new Yr;class Qn{constructor(i,a){this.x=i,this.y=a}toResultPoint(){return new je(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Cs{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(i){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new ps(h,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new fe;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],a),this.sampleLine(i[1],i[2],a),this.sampleLine(i[2],i[3],a),this.sampleLine(i[3],i[0],a)]);this.shift=this.getRotation(l,a);let h=0;for(let m=0;m<4;m++){let x=l[(this.shift+m)%4];this.compact?(h<<=7,h+=x>>1&127):(h<<=10,h+=(x>>2&992)+(x>>1&31))}let f=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(i,a){let l=0;i.forEach((h,f,m)=>{let x=(h>>a-2<<1)+(h&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(Q.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new fe}getCorrectedParameterData(i,a){let l,h;a?(l=7,h=2):(l=10,h=4);let f=l-h,m=new Int32Array(l);for(let A=l-1;A>=0;--A)m[A]=i&15,i>>=4;try{new Ri(_t.AZTEC_PARAM).decode(m,f)}catch{throw new fe}let x=0;for(let A=0;A<h;A++)x=(x<<4)+m[A];return x}getBullsEyeCorners(i){let a=i,l=i,h=i,f=i,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(a,m,1,-1),B=this.getFirstDifferent(l,m,1,1),q=this.getFirstDifferent(h,m,-1,1),$=this.getFirstDifferent(f,m,-1,-1);if(this.nbCenterLayers>2){let ee=this.distancePoint($,P)*this.nbCenterLayers/(this.distancePoint(f,a)*(this.nbCenterLayers+2));if(ee<.75||ee>1.25||!this.isWhiteOrBlackRectangle(P,B,q,$))break}a=P,l=B,h=q,f=$,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new fe;this.compact=this.nbCenterLayers===5;let x=new je(a.getX()+.5,a.getY()-.5),A=new je(l.getX()+.5,l.getY()+.5),v=new je(h.getX()-.5,h.getY()+.5),R=new je(f.getX()-.5,f.getY()-.5);return this.expandSquare([x,A,v,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,a,l,h;try{let x=new xn(this.image).detect();i=x[0],a=x[1],l=x[2],h=x[3]}catch{let A=this.image.getWidth()/2,v=this.image.getHeight()/2;i=this.getFirstDifferent(new Qn(A+7,v-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Qn(A+7,v+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Qn(A-7,v+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Qn(A-7,v-7),!1,-1,-1).toResultPoint()}let f=Qe.round((i.getX()+h.getX()+a.getX()+l.getX())/4),m=Qe.round((i.getY()+h.getY()+a.getY()+l.getY())/4);try{let x=new xn(this.image,15,f,m).detect();i=x[0],a=x[1],l=x[2],h=x[3]}catch{i=this.getFirstDifferent(new Qn(f+7,m-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Qn(f+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Qn(f-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Qn(f-7,m-7),!1,-1,-1).toResultPoint()}return f=Qe.round((i.getX()+h.getX()+a.getX()+l.getX())/4),m=Qe.round((i.getY()+h.getY()+a.getY()+l.getY())/4),new Qn(f,m)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,a,l,h,f){let m=si.getInstance(),x=this.getDimension(),A=x/2-this.nbCenterLayers,v=x/2+this.nbCenterLayers;return m.sampleGrid(i,x,x,A,A,v,A,v,v,A,v,a.getX(),a.getY(),l.getX(),l.getY(),h.getX(),h.getY(),f.getX(),f.getY())}sampleLine(i,a,l){let h=0,f=this.distanceResultPoint(i,a),m=f/l,x=i.getX(),A=i.getY(),v=m*(a.getX()-i.getX())/f,R=m*(a.getY()-i.getY())/f;for(let P=0;P<l;P++)this.image.get(Qe.round(x+P*v),Qe.round(A+P*R))&&(h|=1<<l-P-1);return h}isWhiteOrBlackRectangle(i,a,l,h){let f=3;i=new Qn(i.getX()-f,i.getY()+f),a=new Qn(a.getX()-f,a.getY()-f),l=new Qn(l.getX()+f,l.getY()-f),h=new Qn(h.getX()+f,h.getY()+f);let m=this.getColor(h,i);if(m===0)return!1;let x=this.getColor(i,a);return x!==m||(x=this.getColor(a,l),x!==m)?!1:(x=this.getColor(l,h),x===m)}getColor(i,a){let l=this.distancePoint(i,a),h=(a.getX()-i.getX())/l,f=(a.getY()-i.getY())/l,m=0,x=i.getX(),A=i.getY(),v=this.image.get(i.getX(),i.getY()),R=Math.ceil(l);for(let B=0;B<R;B++)x+=h,A+=f,this.image.get(Qe.round(x),Qe.round(A))!==v&&m++;let P=m/l;return P>.1&&P<.9?0:P<=.1===v?1:-1}getFirstDifferent(i,a,l,h){let f=i.getX()+l,m=i.getY()+h;for(;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l,m+=h;for(f-=l,m-=h;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l;for(f-=l;this.isValid(f,m)&&this.image.get(f,m)===a;)m+=h;return m-=h,new Qn(f,m)}expandSquare(i,a,l){let h=l/(2*a),f=i[0].getX()-i[2].getX(),m=i[0].getY()-i[2].getY(),x=(i[0].getX()+i[2].getX())/2,A=(i[0].getY()+i[2].getY())/2,v=new je(x+h*f,A+h*m),R=new je(x-h*f,A-h*m);f=i[1].getX()-i[3].getX(),m=i[1].getY()-i[3].getY(),x=(i[1].getX()+i[3].getX())/2,A=(i[1].getY()+i[3].getY())/2;let P=new je(x+h*f,A+h*m),B=new je(x-h*f,A-h*m);return[v,P,R,B]}isValid(i,a){return i>=0&&i<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(i){let a=Qe.round(i.getX()),l=Qe.round(i.getY());return this.isValid(a,l)}distancePoint(i,a){return Qe.distance(i.getX(),i.getY(),a.getX(),a.getY())}distanceResultPoint(i,a){return Qe.distance(i.getX(),i.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Q.truncDivision(this.nbLayers-4,8)+1)+15}}class xs{decode(i,a=null){let l=null,h=new Cs(i.getBlackMatrix()),f=null,m=null;try{let R=h.detectMirror(!1);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new Bt().decode(R)}catch(R){l=R}if(m==null)try{let R=h.detectMirror(!0);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new Bt().decode(R)}catch(R){throw l??R}let x=new Ue(m.getText(),m.getRawBytes(),m.getNumBits(),f,Oe.AZTEC,K.currentTimeMillis()),A=m.getByteSegments();A!=null&&x.putMetadata(yt.BYTE_SEGMENTS,A);let v=m.getECLevel();return v!=null&&x.putMetadata(yt.ERROR_CORRECTION_LEVEL,v),x}reportFoundResultPoints(i,a){if(i!=null){let l=i.get(Be.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((h,f,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class Sa extends ke{constructor(i=500){super(new xs,i)}}class Xt{decode(i,a){try{return this.doDecode(i,a)}catch{if(a&&a.get(Be.TRY_HARDER)===!0&&i.isRotateSupported()){const f=i.rotateCounterClockwise(),m=this.doDecode(f,a),x=m.getResultMetadata();let A=270;x!==null&&x.get(yt.ORIENTATION)===!0&&(A=A+x.get(yt.ORIENTATION)%360),m.putMetadata(yt.ORIENTATION,A);const v=m.getResultPoints();if(v!==null){const R=f.getHeight();for(let P=0;P<v.length;P++)v[P]=new je(R-v[P].getY()-1,v[P].getX())}return m}else throw new fe}}reset(){}doDecode(i,a){const l=i.getWidth(),h=i.getHeight();let f=new ve(l);const m=a&&a.get(Be.TRY_HARDER)===!0,x=Math.max(1,h>>(m?8:5));let A;m?A=h:A=15;const v=Math.trunc(h/2);for(let R=0;R<A;R++){const P=Math.trunc((R+1)/2),B=(R&1)===0,q=v+x*(B?P:-P);if(q<0||q>=h)break;try{f=i.getBlackRow(q,f)}catch{continue}for(let $=0;$<2;$++){if($===1&&(f.reverse(),a&&a.get(Be.NEED_RESULT_POINT_CALLBACK)===!0)){const ee=new Map;a.forEach((le,Ee)=>ee.set(Ee,le)),ee.delete(Be.NEED_RESULT_POINT_CALLBACK),a=ee}try{const ee=this.decodeRow(q,f,a);if($===1){ee.putMetadata(yt.ORIENTATION,180);const le=ee.getResultPoints();le!==null&&(le[0]=new je(l-le[0].getX()-1,le[0].getY()),le[1]=new je(l-le[1].getX()-1,le[1].getY()))}return ee}catch{}}}throw new fe}static recordPattern(i,a,l){const h=l.length;for(let v=0;v<h;v++)l[v]=0;const f=i.getSize();if(a>=f)throw new fe;let m=!i.get(a),x=0,A=a;for(;A<f;){if(i.get(A)!==m)l[x]++;else{if(++x===h)break;l[x]=1,m=!m}A++}if(!(x===h||x===h-1&&A===f))throw new fe}static recordPatternInReverse(i,a,l){let h=l.length,f=i.get(a);for(;a>0&&h>=0;)i.get(--a)!==f&&(h--,f=!f);if(h>=0)throw new fe;Xt.recordPattern(i,a+1,l)}static patternMatchVariance(i,a,l){const h=i.length;let f=0,m=0;for(let v=0;v<h;v++)f+=i[v],m+=a[v];if(f<m)return Number.POSITIVE_INFINITY;const x=f/m;l*=x;let A=0;for(let v=0;v<h;v++){const R=i[v],P=a[v]*x,B=R>P?R-P:P-R;if(B>l)return Number.POSITIVE_INFINITY;A+=B}return A/f}}class De extends Xt{static findStartPattern(i){const a=i.getSize(),l=i.getNextSet(0);let h=0,f=Int32Array.from([0,0,0,0,0,0]),m=l,x=!1;const A=6;for(let v=l;v<a;v++)if(i.get(v)!==x)f[h]++;else{if(h===A-1){let R=De.MAX_AVG_VARIANCE,P=-1;for(let B=De.CODE_START_A;B<=De.CODE_START_C;B++){const q=Xt.patternMatchVariance(f,De.CODE_PATTERNS[B],De.MAX_INDIVIDUAL_VARIANCE);q<R&&(R=q,P=B)}if(P>=0&&i.isRange(Math.max(0,m-(v-m)/2),m,!1))return Int32Array.from([m,v,P]);m+=f[0]+f[1],f=f.slice(2,f.length-1),f[h-1]=0,f[h]=0,h--}else h++;f[h]=1,x=!x}throw new fe}static decodeCode(i,a,l){Xt.recordPattern(i,l,a);let h=De.MAX_AVG_VARIANCE,f=-1;for(let m=0;m<De.CODE_PATTERNS.length;m++){const x=De.CODE_PATTERNS[m],A=this.patternMatchVariance(a,x,De.MAX_INDIVIDUAL_VARIANCE);A<h&&(h=A,f=m)}if(f>=0)return f;throw new fe}decodeRow(i,a,l){const h=l&&l.get(Be.ASSUME_GS1)===!0,f=De.findStartPattern(a),m=f[2];let x=0;const A=new Uint8Array(20);A[x++]=m;let v;switch(m){case De.CODE_START_A:v=De.CODE_CODE_A;break;case De.CODE_START_B:v=De.CODE_CODE_B;break;case De.CODE_START_C:v=De.CODE_CODE_C;break;default:throw new F}let R=!1,P=!1,B="",q=f[0],$=f[1];const ee=Int32Array.from([0,0,0,0,0,0]);let le=0,Ee=0,Le=m,Me=0,Re=!0,vt=!1,ut=!1;for(;!R;){const ta=P;switch(P=!1,le=Ee,Ee=De.decodeCode(a,ee,$),A[x++]=Ee,Ee!==De.CODE_STOP&&(Re=!0),Ee!==De.CODE_STOP&&(Me++,Le+=Me*Ee),q=$,$+=ee.reduce((vu,rc)=>vu+rc,0),Ee){case De.CODE_START_A:case De.CODE_START_B:case De.CODE_START_C:throw new F}switch(v){case De.CODE_CODE_A:if(Ee<64)ut===vt?B+=String.fromCharCode(32+Ee):B+=String.fromCharCode(32+Ee+128),ut=!1;else if(Ee<96)ut===vt?B+=String.fromCharCode(Ee-64):B+=String.fromCharCode(Ee+64),ut=!1;else switch(Ee!==De.CODE_STOP&&(Re=!1),Ee){case De.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_A:!vt&&ut?(vt=!0,ut=!1):vt&&ut?(vt=!1,ut=!1):ut=!0;break;case De.CODE_SHIFT:P=!0,v=De.CODE_CODE_B;break;case De.CODE_CODE_B:v=De.CODE_CODE_B;break;case De.CODE_CODE_C:v=De.CODE_CODE_C;break;case De.CODE_STOP:R=!0;break}break;case De.CODE_CODE_B:if(Ee<96)ut===vt?B+=String.fromCharCode(32+Ee):B+=String.fromCharCode(32+Ee+128),ut=!1;else switch(Ee!==De.CODE_STOP&&(Re=!1),Ee){case De.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_B:!vt&&ut?(vt=!0,ut=!1):vt&&ut?(vt=!1,ut=!1):ut=!0;break;case De.CODE_SHIFT:P=!0,v=De.CODE_CODE_A;break;case De.CODE_CODE_A:v=De.CODE_CODE_A;break;case De.CODE_CODE_C:v=De.CODE_CODE_C;break;case De.CODE_STOP:R=!0;break}break;case De.CODE_CODE_C:if(Ee<100)Ee<10&&(B+="0"),B+=Ee;else switch(Ee!==De.CODE_STOP&&(Re=!1),Ee){case De.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case De.CODE_CODE_A:v=De.CODE_CODE_A;break;case De.CODE_CODE_B:v=De.CODE_CODE_B;break;case De.CODE_STOP:R=!0;break}break}ta&&(v=v===De.CODE_CODE_A?De.CODE_CODE_B:De.CODE_CODE_A)}const Jn=$-q;if($=a.getNextUnset($),!a.isRange($,Math.min(a.getSize(),$+($-q)/2),!1))throw new fe;if(Le-=Me*le,Le%103!==le)throw new k;const wr=B.length;if(wr===0)throw new fe;wr>0&&Re&&(v===De.CODE_CODE_C?B=B.substring(0,wr-2):B=B.substring(0,wr-1));const Bi=(f[1]+f[0])/2,hn=q+Jn/2,bi=A.length,hr=new Uint8Array(bi);for(let ta=0;ta<bi;ta++)hr[ta]=A[ta];const Pa=[new je(Bi,i),new je(hn,i)];return new Ue(B,hr,0,Pa,Oe.CODE_128,new Date().getTime())}}De.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],De.MAX_AVG_VARIANCE=.25,De.MAX_INDIVIDUAL_VARIANCE=.7,De.CODE_SHIFT=98,De.CODE_CODE_C=99,De.CODE_CODE_B=100,De.CODE_CODE_A=101,De.CODE_FNC_1=102,De.CODE_FNC_2=97,De.CODE_FNC_3=96,De.CODE_FNC_4_A=101,De.CODE_FNC_4_B=100,De.CODE_START_A=103,De.CODE_START_B=104,De.CODE_START_C=105,De.CODE_STOP=106;class Kt extends Xt{constructor(i=!1,a=!1){super(),this.usingCheckDigit=i,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,a,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let f=Kt.findAsteriskPattern(a,h),m=a.getNextSet(f[1]),x=a.getSize(),A,v;do{Kt.recordPattern(a,m,h);let ee=Kt.toNarrowWidePattern(h);if(ee<0)throw new fe;A=Kt.patternToChar(ee),this.decodeRowResult+=A,v=m;for(let le of h)m+=le;m=a.getNextSet(m)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ee of h)R+=ee;let P=m-v-R;if(m!==x&&P*2<R)throw new fe;if(this.usingCheckDigit){let ee=this.decodeRowResult.length-1,le=0;for(let Ee=0;Ee<ee;Ee++)le+=Kt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ee));if(this.decodeRowResult.charAt(ee)!==Kt.ALPHABET_STRING.charAt(le%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,ee)}if(this.decodeRowResult.length===0)throw new fe;let B;this.extendedMode?B=Kt.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let q=(f[1]+f[0])/2,$=v+R/2;return new Ue(B,null,0,[new je(q,i),new je($,i)],Oe.CODE_39,new Date().getTime())}static findAsteriskPattern(i,a){let l=i.getSize(),h=i.getNextSet(0),f=0,m=h,x=!1,A=a.length;for(let v=h;v<l;v++)if(i.get(v)!==x)a[f]++;else{if(f===A-1){if(this.toNarrowWidePattern(a)===Kt.ASTERISK_ENCODING&&i.isRange(Math.max(0,m-Math.floor((v-m)/2)),m,!1))return[m,v];m+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,x=!x}throw new fe}static toNarrowWidePattern(i){let a=i.length,l=0,h;do{let f=2147483647;for(let A of i)A<f&&A>l&&(f=A);l=f,h=0;let m=0,x=0;for(let A=0;A<a;A++){let v=i[A];v>l&&(x|=1<<a-1-A,h++,m+=v)}if(h===3){for(let A=0;A<a&&h>0;A++){let v=i[A];if(v>l&&(h--,v*2>=m))return-1}return x}}while(h>3);return-1}static patternToChar(i){for(let a=0;a<Kt.CHARACTER_ENCODINGS.length;a++)if(Kt.CHARACTER_ENCODINGS[a]===i)return Kt.ALPHABET_STRING.charAt(a);if(i===Kt.ASTERISK_ENCODING)return"*";throw new fe}static decodeExtended(i){let a=i.length,l="";for(let h=0;h<a;h++){let f=i.charAt(h);if(f==="+"||f==="$"||f==="%"||f==="/"){let m=i.charAt(h+1),x="\0";switch(f){case"+":if(m>="A"&&m<="Z")x=String.fromCharCode(m.charCodeAt(0)+32);else throw new F;break;case"$":if(m>="A"&&m<="Z")x=String.fromCharCode(m.charCodeAt(0)-64);else throw new F;break;case"%":if(m>="A"&&m<="E")x=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")x=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")x=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")x=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")x="\0";else if(m==="V")x="@";else if(m==="W")x="`";else if(m==="X"||m==="Y"||m==="Z")x="";else throw new F;break;case"/":if(m>="A"&&m<="O")x=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")x=":";else throw new F;break}l+=x,h++}else l+=f}return l}}Kt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Kt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Kt.ASTERISK_ENCODING=148;class it extends Xt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,a,l){let h=this.decodeStart(a),f=this.decodeEnd(a),m=new Y;it.decodeMiddle(a,h[1],f[0],m);let x=m.toString(),A=null;l!=null&&(A=l.get(Be.ALLOWED_LENGTHS)),A==null&&(A=it.DEFAULT_ALLOWED_LENGTHS);let v=x.length,R=!1,P=0;for(let $ of A){if(v===$){R=!0;break}$>P&&(P=$)}if(!R&&v>P&&(R=!0),!R)throw new F;const B=[new je(h[1],i),new je(f[0],i)];return new Ue(x,null,0,B,Oe.ITF,new Date().getTime())}static decodeMiddle(i,a,l,h){let f=new Int32Array(10),m=new Int32Array(5),x=new Int32Array(5);for(f.fill(0),m.fill(0),x.fill(0);a<l;){Xt.recordPattern(i,a,f);for(let v=0;v<5;v++){let R=2*v;m[v]=f[R],x[v]=f[R+1]}let A=it.decodeDigit(m);h.append(A.toString()),A=this.decodeDigit(x),h.append(A.toString()),f.forEach(function(v){a+=v})}}decodeStart(i){let a=it.skipWhiteSpace(i),l=it.findGuardPattern(i,a,it.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let h=a-1;l>0&&h>=0&&!i.get(h);h--)l--;if(l!==0)throw new fe}static skipWhiteSpace(i){const a=i.getSize(),l=i.getNextSet(0);if(l===a)throw new fe;return l}decodeEnd(i){i.reverse();try{let a=it.skipWhiteSpace(i),l;try{l=it.findGuardPattern(i,a,it.END_PATTERN_REVERSED[0])}catch(f){f instanceof fe&&(l=it.findGuardPattern(i,a,it.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let h=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-h,l}finally{i.reverse()}}static findGuardPattern(i,a,l){let h=l.length,f=new Int32Array(h),m=i.getSize(),x=!1,A=0,v=a;f.fill(0);for(let R=a;R<m;R++)if(i.get(R)!==x)f[A]++;else{if(A===h-1){if(Xt.patternMatchVariance(f,l,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return[v,R];v+=f[0]+f[1],K.arraycopy(f,2,f,0,A-1),f[A-1]=0,f[A]=0,A--}else A++;f[A]=1,x=!x}throw new fe}static decodeDigit(i){let a=it.MAX_AVG_VARIANCE,l=-1,h=it.PATTERNS.length;for(let f=0;f<h;f++){let m=it.PATTERNS[f],x=Xt.patternMatchVariance(i,m,it.MAX_INDIVIDUAL_VARIANCE);x<a?(a=x,l=f):x===a&&(l=-1)}if(l>=0)return l%10;throw new fe}}it.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],it.MAX_AVG_VARIANCE=.38,it.MAX_INDIVIDUAL_VARIANCE=.5,it.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],it.START_PATTERN=Int32Array.from([1,1,1,1]),it.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class dn extends Xt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let a=!1,l,h=0,f=Int32Array.from([0,0,0]);for(;!a;){f=Int32Array.from([0,0,0]),l=dn.findGuardPattern(i,h,!1,this.START_END_PATTERN,f);let m=l[0];h=l[1];let x=m-(h-m);x>=0&&(a=i.isRange(x,m,!1))}return l}static checkChecksum(i){return dn.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let l=parseInt(i.charAt(a-1),10);return dn.getStandardUPCEANChecksum(i.substring(0,a-1))===l}static getStandardUPCEANChecksum(i){let a=i.length,l=0;for(let h=a-1;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}return(1e3-l)%10}static decodeEnd(i,a){return dn.findGuardPattern(i,a,!1,dn.START_END_PATTERN,new Int32Array(dn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,a,l,h){return this.findGuardPattern(i,a,l,h,new Int32Array(h.length))}static findGuardPattern(i,a,l,h,f){let m=i.getSize();a=l?i.getNextUnset(a):i.getNextSet(a);let x=0,A=a,v=h.length,R=l;for(let P=a;P<m;P++)if(i.get(P)!==R)f[x]++;else{if(x===v-1){if(Xt.patternMatchVariance(f,h,dn.MAX_INDIVIDUAL_VARIANCE)<dn.MAX_AVG_VARIANCE)return Int32Array.from([A,P]);A+=f[0]+f[1];let B=f.slice(2,f.length-1);for(let q=0;q<x-1;q++)f[q]=B[q];f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,R=!R}throw new fe}static decodeDigit(i,a,l,h){this.recordPattern(i,l,a);let f=this.MAX_AVG_VARIANCE,m=-1,x=h.length;for(let A=0;A<x;A++){let v=h[A],R=Xt.patternMatchVariance(a,v,dn.MAX_INDIVIDUAL_VARIANCE);R<f&&(f=R,m=A)}if(m>=0)return m;throw new fe}}dn.MAX_AVG_VARIANCE=.48,dn.MAX_INDIVIDUAL_VARIANCE=.7,dn.START_END_PATTERN=Int32Array.from([1,1,1]),dn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),dn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),dn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class pr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),x=pr.parseExtensionString(m),A=[new je((l[0]+l[1])/2,i),new je(f,i)],v=new Ue(m,null,0,A,Oe.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&v.putAllMetadata(x),v}decodeMiddle(i,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=a[1],x=0;for(let v=0;v<5&&m<f;v++){let R=dn.decodeDigit(i,h,m,dn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<4-v),v!==4&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==5)throw new fe;let A=this.determineCheckDigit(x);if(pr.extensionChecksum(l.toString())!==A)throw new fe;return m}static extensionChecksum(i){let a=i.length,l=0;for(let h=a-2;h>=0;h-=2)l+=i.charAt(h).charCodeAt(0)-48;l*=3;for(let h=a-1;h>=0;h-=2)l+=i.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let a=0;a<10;a++)if(i===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new fe}static parseExtensionString(i){if(i.length!==5)return null;let a=pr.parseExtension5String(i);return a==null?null:new Map([[yt.SUGGESTED_PRICE,a]])}static parseExtension5String(i){let a;switch(i.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(i.substring(1)),h=(l/100).toString(),f=l%100,m=f<10?"0"+f:f.toString();return a+h+"."+m}}class Ss{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),x=Ss.parseExtensionString(m),A=[new je((l[0]+l[1])/2,i),new je(f,i)],v=new Ue(m,null,0,A,Oe.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&v.putAllMetadata(x),v}decodeMiddle(i,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=a[1],x=0;for(let A=0;A<2&&m<f;A++){let v=dn.decodeDigit(i,h,m,dn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+v%10);for(let R of h)m+=R;v>=10&&(x|=1<<1-A),A!==1&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==2)throw new fe;if(parseInt(l.toString())%4!==x)throw new fe;return m}static parseExtensionString(i){return i.length!==2?null:new Map([[yt.ISSUE_NUMBER,parseInt(i)]])}}class ir{static decodeRow(i,a,l){let h=dn.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new pr().decodeRow(i,a,h)}catch{return new Ss().decodeRow(i,a,h)}}}ir.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class At extends dn{constructor(){super(),this.decodeRowStringBuffer="",At.L_AND_G_PATTERNS=At.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let a=At.L_PATTERNS[i-10],l=new Int32Array(a.length);for(let h=0;h<a.length;h++)l[h]=a[a.length-h-1];At.L_AND_G_PATTERNS[i]=l}}decodeRow(i,a,l){let h=At.findStartGuardPattern(a),f=l==null?null:l.get(Be.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Re=new je((h[0]+h[1])/2,i);f.foundPossibleResultPoint(Re)}let m=this.decodeMiddle(a,h,this.decodeRowStringBuffer),x=m.rowOffset,A=m.resultString;if(f!=null){const Re=new je(x,i);f.foundPossibleResultPoint(Re)}let v=this.decodeEnd(a,x);if(f!=null){const Re=new je((v[0]+v[1])/2,i);f.foundPossibleResultPoint(Re)}let R=v[1],P=R+(R-v[0]);if(P>=a.getSize()||!a.isRange(R,P,!1))throw new fe;let B=A.toString();if(B.length<8)throw new F;if(!At.checkChecksum(B))throw new k;let q=(h[1]+h[0])/2,$=(v[1]+v[0])/2,ee=this.getBarcodeFormat(),le=[new je(q,i),new je($,i)],Ee=new Ue(B,null,0,le,ee,new Date().getTime()),Le=0;try{let Re=ir.decodeRow(i,a,v[1]);Ee.putMetadata(yt.UPC_EAN_EXTENSION,Re.getText()),Ee.putAllMetadata(Re.getResultMetadata()),Ee.addResultPoints(Re.getResultPoints()),Le=Re.getText().length}catch{}let Me=l==null?null:l.get(Be.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Re=!1;for(let vt in Me)if(Le.toString()===vt){Re=!0;break}if(!Re)throw new fe}return Ee}decodeEnd(i,a){return At.findGuardPattern(i,a,!1,At.START_END_PATTERN,new Int32Array(At.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return At.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let l=parseInt(i.charAt(a-1),10);return At.getStandardUPCEANChecksum(i.substring(0,a-1))===l}static getStandardUPCEANChecksum(i){let a=i.length,l=0;for(let h=a-1;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}return(1e3-l)%10}}class on extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=a[1],x=0;for(let v=0;v<6&&m<f;v++){let R=At.decodeDigit(i,h,m,At.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<5-v)}l=on.determineFirstDigit(l,x),m=At.findGuardPattern(i,m,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&m<f;v++){let R=At.decodeDigit(i,h,m,At.L_PATTERNS);l+=String.fromCharCode(48+R);for(let P of h)m+=P}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Oe.EAN_13}static determineFirstDigit(i,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new fe}}on.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class rr extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=a[1];for(let A=0;A<4&&m<f;A++){let v=At.decodeDigit(i,h,m,At.L_PATTERNS);l+=String.fromCharCode(48+v);for(let R of h)m+=R}m=At.findGuardPattern(i,m,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&m<f;A++){let v=At.decodeDigit(i,h,m,At.L_PATTERNS);l+=String.fromCharCode(48+v);for(let R of h)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Oe.EAN_8}}class sr extends At{constructor(){super(...arguments),this.ean13Reader=new on}getBarcodeFormat(){return Oe.UPC_A}decode(i,a){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,a,l))}decodeMiddle(i,a,l){return this.ean13Reader.decodeMiddle(i,a,l)}maybeReturnResult(i){let a=i.getText();if(a.charAt(0)==="0"){let l=new Ue(a.substring(1),null,null,i.getResultPoints(),Oe.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new fe}reset(){this.ean13Reader.reset()}}class Nn extends At{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,a,l){const h=this.decodeMiddleCounters.map(v=>v);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const f=i.getSize();let m=a[1],x=0;for(let v=0;v<6&&m<f;v++){const R=Nn.decodeDigit(i,h,m,Nn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<5-v)}let A=Nn.determineNumSysAndCheckDigit(l,x);return{rowOffset:m,resultString:A}}decodeEnd(i,a){return Nn.findGuardPatternWithoutCounters(i,a,!0,Nn.MIDDLE_END_PATTERN)}checkChecksum(i){return At.checkChecksum(Nn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,a){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let f=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return f+i+m}throw fe.getNotFoundInstance()}getBarcodeFormat(){return Oe.UPC_E}static convertUPCEtoUPCA(i){const a=i.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new Y;l.append(i.charAt(0));let h=a[5];switch(h){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(h),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(h);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Nn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Gs extends Xt{constructor(i){super();let a=i==null?null:i.get(Be.POSSIBLE_FORMATS),l=[];o(a)?(l.push(new on),l.push(new sr),l.push(new rr),l.push(new Nn)):(a.indexOf(Oe.EAN_13)>-1&&l.push(new on),a.indexOf(Oe.UPC_A)>-1&&l.push(new sr),a.indexOf(Oe.EAN_8)>-1&&l.push(new rr),a.indexOf(Oe.UPC_E)>-1&&l.push(new Nn)),this.readers=l}decodeRow(i,a,l){for(let h of this.readers)try{const f=h.decodeRow(i,a,l),m=f.getBarcodeFormat()===Oe.EAN_13&&f.getText().charAt(0)==="0",x=l==null?null:l.get(Be.POSSIBLE_FORMATS),A=x==null||x.includes(Oe.UPC_A);if(m&&A){const v=f.getRawBytes(),R=new Ue(f.getText().substring(1),v,v?v.length:null,f.getResultPoints(),Oe.UPC_A);return R.putAllMetadata(f.getResultMetadata()),R}return f}catch{}throw new fe}reset(){for(let i of this.readers)i.reset()}}class Hn extends Xt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,a){for(let l=0;l<a.length;l++)if(Xt.patternMatchVariance(i,a[l],Hn.MAX_INDIVIDUAL_VARIANCE)<Hn.MAX_AVG_VARIANCE)return l;throw new fe}static count(i){return Qe.sum(new Int32Array(i))}static increment(i,a){let l=0,h=a[0];for(let f=1;f<i.length;f++)a[f]>h&&(h=a[f],l=f);i[l]++}static decrement(i,a){let l=0,h=a[0];for(let f=1;f<i.length;f++)a[f]<h&&(h=a[f],l=f);i[l]--}static isFinderPattern(i){let a=i[0]+i[1],l=a+i[2]+i[3],h=a/l;if(h>=Hn.MIN_FINDER_PATTERN_RATIO&&h<=Hn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let x of i)x>m&&(m=x),x<f&&(f=x);return m<10*f}return!1}}Hn.MAX_AVG_VARIANCE=.2,Hn.MAX_INDIVIDUAL_VARIANCE=.45,Hn.MIN_FINDER_PATTERN_RATIO=9.5/12,Hn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ai{constructor(i,a){this.value=i,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Ai))return!1;const a=i;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class xr{constructor(i,a,l,h,f){this.value=i,this.startEnd=a,this.value=i,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new je(l,f)),this.resultPoints.push(new je(h,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof xr))return!1;const a=i;return this.value===a.value}hashCode(){return this.value}}class Oi{constructor(){}static getRSSvalue(i,a,l){let h=0;for(let A of i)h+=A;let f=0,m=0,x=i.length;for(let A=0;A<x-1;A++){let v;for(v=1,m|=1<<A;v<i[A];v++,m&=~(1<<A)){let R=Oi.combins(h-v-1,x-A-2);if(l&&m===0&&h-v-(x-A-1)>=x-A-1&&(R-=Oi.combins(h-v-(x-A),x-A-2)),x-A-1>1){let P=0;for(let B=h-v-(x-A-2);B>a;B--)P+=Oi.combins(h-v-B-1,x-A-3);R-=P*(x-1-A)}else h-v>a&&R--;f+=R}h-=v}return f}static combins(i,a){let l,h;i-a>a?(h=a,l=i-a):(h=i-a,l=a);let f=1,m=1;for(let x=i;x>l;x--)f*=x,m<=h&&(f/=m,m++);for(;m<=h;)f/=m,m++;return f}}class te{static buildBitArray(i){let a=i.length*2-1;i[i.length-1].getRightChar()==null&&(a-=1);let l=12*a,h=new ve(l),f=0,x=i[0].getRightChar().getValue();for(let A=11;A>=0;--A)(x&1<<A)!=0&&h.set(f),f++;for(let A=1;A<i.length;++A){let v=i[A],R=v.getLeftChar().getValue();for(let P=11;P>=0;--P)(R&1<<P)!=0&&h.set(f),f++;if(v.getRightChar()!=null){let P=v.getRightChar().getValue();for(let B=11;B>=0;--B)(P&1<<B)!=0&&h.set(f),f++}}return h}}class lt{constructor(i,a){a?this.decodedInformation=null:(this.finished=i,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class kt{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class sn extends kt{constructor(i,a){super(i),this.value=a}getValue(){return this.value}isFNC1(){return this.value===sn.FNC1}}sn.FNC1="$";class ln extends kt{constructor(i,a,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Zn extends kt{constructor(i,a,l){if(super(i),a<0||a>10||l<0||l>10)throw new F;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Zn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Zn.FNC1}isAnyFNC1(){return this.firstDigit===Zn.FNC1||this.secondDigit===Zn.FNC1}}Zn.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new fe;let a=i.substring(0,2);for(let f of Ve.TWO_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,f[2],i):Ve.processFixedAI(2,f[1],i);if(i.length<3)throw new fe;let l=i.substring(0,3);for(let f of Ve.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,f[2],i):Ve.processFixedAI(3,f[1],i);for(let f of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],i):Ve.processFixedAI(4,f[1],i);if(i.length<4)throw new fe;let h=i.substring(0,4);for(let f of Ve.FOUR_DIGIT_DATA_LENGTH)if(f[0]===h)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],i):Ve.processFixedAI(4,f[1],i);throw new fe}static processFixedAI(i,a,l){if(l.length<i)throw new fe;let h=l.substring(0,i);if(l.length<i+a)throw new fe;let f=l.substring(i,i+a),m=l.substring(i+a),x="("+h+")"+f,A=Ve.parseFieldsInGeneralPurpose(m);return A==null?x:x+A}static processVariableAI(i,a,l){let h=l.substring(0,i),f;l.length<i+a?f=l.length:f=i+a;let m=l.substring(i,f),x=l.substring(f),A="("+h+")"+m,v=Ve.parseFieldsInGeneralPurpose(x);return v==null?A:A+v}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class hi{constructor(i){this.buffer=new Y,this.information=i}decodeAllCodes(i,a){let l=a,h=null;do{let f=this.decodeGeneralPurposeField(l,h),m=Ve.parseFieldsInGeneralPurpose(f.getNewString());if(m!=null&&i.append(m),f.isRemaining()?h=""+f.getRemainingValue():h=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let a=i;a<i+3;++a)if(this.information.get(a))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(i,4);return f===0?new Zn(this.information.getSize(),Zn.FNC1,Zn.FNC1):new Zn(this.information.getSize(),f-1,Zn.FNC1)}let a=this.extractNumericValueFromBitArray(i,7),l=(a-8)/11,h=(a-8)%11;return new Zn(i+7,l,h)}extractNumericValueFromBitArray(i,a){return hi.extractNumericValueFromBitArray(this.information,i,a)}static extractNumericValueFromBitArray(i,a,l){let h=0;for(let f=0;f<l;++f)i.get(a+f)&&(h|=1<<l-f-1);return h}decodeGeneralPurposeField(i,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new ln(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new ln(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),i=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),i=a.isFinished()):(a=this.parseNumericBlock(),i=a.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let a;return i.isSecondDigitFNC1()?a=new ln(this.current.getPosition(),this.buffer.toString()):a=new ln(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new lt(!0,a)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let a=new ln(this.current.getPosition(),this.buffer.toString());return new lt(!0,a)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new lt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new ln(this.current.getPosition(),this.buffer.toString());return new lt(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new lt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new ln(this.current.getPosition(),this.buffer.toString());return new lt(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new lt(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(i,8);return h>=232&&h<253}decodeIsoIec646(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new sn(i+5,sn.FNC1);if(a>=5&&a<15)return new sn(i+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new sn(i+7,""+(l+1));if(l>=90&&l<116)return new sn(i+7,""+(l+7));let h=this.extractNumericValueFromBitArray(i,8),f;switch(h){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new F}return new sn(i+8,f)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new sn(i+5,sn.FNC1);if(a>=5&&a<15)return new sn(i+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new sn(i+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new _i("Decoding invalid alphanumeric value: "+l)}return new sn(i+6,h)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<5&&a+i<this.information.getSize();++a)if(a===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+a))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let a=i;a<i+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<4&&a+i<this.information.getSize();++a)if(this.information.get(i+a))return!1;return!0}}class en{constructor(i){this.information=i,this.generalDecoder=new hi(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ut extends en{constructor(i){super(i)}encodeCompressedGtin(i,a){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,a,l)}encodeCompressedGtinWithoutAI(i,a,l){for(let h=0;h<4;++h){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*h,10);f/100===0&&i.append("0"),f/10===0&&i.append("0"),i.append(f)}Ut.appendCheckDigit(i,l)}static appendCheckDigit(i,a){let l=0;for(let h=0;h<13;h++){let f=i.charAt(h+a).charCodeAt(0)-48;l+=(h&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),i.append(l)}}Ut.GTIN_SIZE=40;class vn extends Ut{constructor(i){super(i)}parseInformation(){let i=new Y;i.append("(01)");let a=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(vn.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,vn.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(i,vn.HEADER_SIZE+44)}}vn.HEADER_SIZE=4;class Es extends en{constructor(i){super(i)}parseInformation(){let i=new Y;return this.getGeneralDecoder().decodeAllCodes(i,Es.HEADER_SIZE)}}Es.HEADER_SIZE=5;class Ia extends Ut{constructor(i){super(i)}encodeCompressedWeight(i,a,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(i,h);let f=this.checkWeight(h),m=1e5;for(let x=0;x<5;++x)f/m===0&&i.append("0"),m/=10;i.append(f)}}class ar extends Ia{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=ar.HEADER_SIZE+Ia.GTIN_SIZE+ar.WEIGHT_SIZE)throw new fe;let i=new Y;return this.encodeCompressedGtin(i,ar.HEADER_SIZE),this.encodeCompressedWeight(i,ar.HEADER_SIZE+Ia.GTIN_SIZE,ar.WEIGHT_SIZE),i.toString()}}ar.HEADER_SIZE=5,ar.WEIGHT_SIZE=15;class il extends ar{constructor(i){super(i)}addWeightCode(i,a){i.append("(3103)")}checkWeight(i){return i}}class Xr extends ar{constructor(i){super(i)}addWeightCode(i,a){a<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Di extends Ut{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Di.HEADER_SIZE+Ut.GTIN_SIZE)throw new fe;let i=new Y;this.encodeCompressedGtin(i,Di.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Di.HEADER_SIZE+Ut.GTIN_SIZE,Di.LAST_DIGIT_SIZE);i.append("(392"),i.append(a),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Di.HEADER_SIZE+Ut.GTIN_SIZE+Di.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}Di.HEADER_SIZE=8,Di.LAST_DIGIT_SIZE=2;class Cn extends Ut{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Cn.HEADER_SIZE+Ut.GTIN_SIZE)throw new fe;let i=new Y;this.encodeCompressedGtin(i,Cn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Cn.HEADER_SIZE+Ut.GTIN_SIZE,Cn.LAST_DIGIT_SIZE);i.append("(393"),i.append(a),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Cn.HEADER_SIZE+Ut.GTIN_SIZE+Cn.LAST_DIGIT_SIZE,Cn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(Cn.HEADER_SIZE+Ut.GTIN_SIZE+Cn.LAST_DIGIT_SIZE+Cn.FIRST_THREE_DIGITS_SIZE,null);return i.append(h.getNewString()),i.toString()}}Cn.HEADER_SIZE=8,Cn.LAST_DIGIT_SIZE=2,Cn.FIRST_THREE_DIGITS_SIZE=10;class Rt extends Ia{constructor(i,a,l){super(i),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE+Rt.DATE_SIZE)throw new fe;let i=new Y;return this.encodeCompressedGtin(i,Rt.HEADER_SIZE),this.encodeCompressedWeight(i,Rt.HEADER_SIZE+Rt.GTIN_SIZE,Rt.WEIGHT_SIZE),this.encodeCompressedDate(i,Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Rt.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let h=l%32;l/=32;let f=l%12+1;l/=12;let m=l;m/10==0&&i.append("0"),i.append(m),f/10==0&&i.append("0"),i.append(f),h/10==0&&i.append("0"),i.append(h)}addWeightCode(i,a){i.append("("),i.append(this.firstAIdigits),i.append(a/1e5),i.append(")")}checkWeight(i){return i%1e5}}Rt.HEADER_SIZE=8,Rt.WEIGHT_SIZE=20,Rt.DATE_SIZE=16;function Yi(L){try{if(L.get(1))return new vn(L);if(!L.get(2))return new Es(L);switch(hi.extractNumericValueFromBitArray(L,1,4)){case 4:return new il(L);case 5:return new Xr(L)}switch(hi.extractNumericValueFromBitArray(L,1,5)){case 12:return new Di(L);case 13:return new Cn(L)}switch(hi.extractNumericValueFromBitArray(L,1,7)){case 56:return new Rt(L,"310","11");case 57:return new Rt(L,"320","11");case 58:return new Rt(L,"310","13");case 59:return new Rt(L,"320","13");case 60:return new Rt(L,"310","15");case 61:return new Rt(L,"320","15");case 62:return new Rt(L,"310","17");case 63:return new Rt(L,"320","17")}}catch(i){throw console.log(i),new _i("unknown decoder: "+L)}}class wi{constructor(i,a,l,h){this.leftchar=i,this.rightchar=a,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,a){return i instanceof wi?wi.equalsOrNull(i.leftchar,a.leftchar)&&wi.equalsOrNull(i.rightchar,a.rightchar)&&wi.equalsOrNull(i.finderpattern,a.finderpattern):!1}static equalsOrNull(i,a){return i===null?a===null:wi.equals(i,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Bn{constructor(i,a,l){this.pairs=i,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,a){return i instanceof Bn?this.checkEqualitity(i,a)&&i.wasReversed===a.wasReversed:!1}checkEqualitity(i,a){if(!i||!a)return;let l;return i.forEach((h,f)=>{a.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ie extends Hn{constructor(i){super(...arguments),this.pairs=new Array(Ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,a,l){this.pairs.length=0,this.startFromEven=!1;try{return Ie.constructResult(this.decodeRow2pairs(i,a))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Ie.constructResult(this.decodeRow2pairs(i,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,i))}catch(f){if(f instanceof fe){if(!this.pairs.length)throw new fe;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(i,!1),h){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new fe}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),a}checkRows(i,a){for(let l=a;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of i)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!Ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(i);f.push(h);try{return this.checkRows(f,l+1)}catch(m){this.verbose&&console.log(m)}}throw new fe}static isValidSequence(i){for(let a of Ie.FINDER_PATTERN_SEQUENCES){if(i.length>a.length)continue;let l=!0;for(let h=0;h<i.length;h++)if(i[h].getFinderPattern().getValue()!=a[h]){l=!1;break}if(l)return!0}return!1}storeRow(i,a){let l=0,h=!1,f=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>i){f=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}f||h||Ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Bn(this.pairs,i,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,a){for(let l of a)if(l.getPairs().length!==i.length){for(let h of l.getPairs())for(let f of i)if(wi.equals(h,f))break}}static isPartialRow(i,a){for(let l of a){let h=!0;for(let f of i){let m=!1;for(let x of l.getPairs())if(f.equals(x)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(i){let a=te.buildBitArray(i),h=Yi(a).parseInformation(),f=i[0].getFinderPattern().getResultPoints(),m=i[i.length-1].getFinderPattern().getResultPoints(),x=[f[0],f[1],m[0],m[1]];return new Ue(h,null,null,x,Oe.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),a=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),f=2;for(let x=1;x<this.pairs.size();++x){let A=this.pairs.get(x);h+=A.getLeftChar().getChecksumPortion(),f++;let v=A.getRightChar();v!=null&&(h+=v.getChecksumPortion(),f++)}return h%=211,211*(f-4)+h==a.getValue()}static getNextSecondBar(i,a){let l;return i.get(a)?(l=i.getNextUnset(a),l=i.getNextSet(l)):(l=i.getNextSet(a),l=i.getNextUnset(l)),l}retrieveNextPair(i,a,l){let h=a.length%2==0;this.startFromEven&&(h=!h);let f,m=!0,x=-1;do this.findNextPair(i,a,x),f=this.parseFoundFinderPattern(i,l,h),f==null?x=Ie.getNextSecondBar(i,this.startEnd[0]):m=!1;while(m);let A=this.decodeDataCharacter(i,f,h,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new fe;let v;try{v=this.decodeDataCharacter(i,f,h,!1)}catch(R){v=null,this.verbose&&console.log(R)}return new wi(A,v,f,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,a,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m;l>=0?m=l:this.isEmptyPair(a)?m=0:m=a[a.length-1].getFinderPattern().getStartEnd()[1];let x=a.length%2!=0;this.startFromEven&&(x=!x);let A=!1;for(;m<f&&(A=!i.get(m),!!A);)m++;let v=0,R=m;for(let P=m;P<f;P++)if(i.get(P)!=A)h[v]++;else{if(v==3){if(x&&Ie.reverseCounters(h),Ie.isFinderPattern(h)){this.startEnd[0]=R,this.startEnd[1]=P;return}x&&Ie.reverseCounters(h),R+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,v--}else v++;h[v]=1,A=!A}throw new fe}static reverseCounters(i){let a=i.length;for(let l=0;l<a/2;++l){let h=i[l];i[l]=i[a-l-1],i[a-l-1]=h}}parseFoundFinderPattern(i,a,l){let h,f,m;if(l){let v=this.startEnd[0]-1;for(;v>=0&&!i.get(v);)v--;v++,h=this.startEnd[0]-v,f=v,m=this.startEnd[1]}else f=this.startEnd[0],m=i.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let x=this.getDecodeFinderCounters();K.arraycopy(x,0,x,1,x.length-1),x[0]=h;let A;try{A=this.parseFinderValue(x,Ie.FINDER_PATTERNS)}catch{return null}return new xr(A,[f,m],f,m,a)}decodeDataCharacter(i,a,l,h){let f=this.getDataCharacterCounters();for(let hn=0;hn<f.length;hn++)f[hn]=0;if(h)Ie.recordPatternInReverse(i,a.getStartEnd()[0],f);else{Ie.recordPattern(i,a.getStartEnd()[1],f);for(let hn=0,bi=f.length-1;hn<bi;hn++,bi--){let hr=f[hn];f[hn]=f[bi],f[bi]=hr}}let m=17,x=Qe.sum(new Int32Array(f))/m,A=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(x-A)/A>.3)throw new fe;let v=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let hn=0;hn<f.length;hn++){let bi=1*f[hn]/x,hr=bi+.5;if(hr<1){if(bi<.3)throw new fe;hr=1}else if(hr>8){if(bi>8.7)throw new fe;hr=8}let Pa=hn/2;(hn&1)==0?(v[Pa]=hr,P[Pa]=bi-hr):(R[Pa]=hr,B[Pa]=bi-hr)}this.adjustOddEvenCounts(m);let q=4*a.getValue()+(l?0:2)+(h?0:1)-1,$=0,ee=0;for(let hn=v.length-1;hn>=0;hn--){if(Ie.isNotA1left(a,l,h)){let bi=Ie.WEIGHTS[q][2*hn];ee+=v[hn]*bi}$+=v[hn]}let le=0;for(let hn=R.length-1;hn>=0;hn--)if(Ie.isNotA1left(a,l,h)){let bi=Ie.WEIGHTS[q][2*hn+1];le+=R[hn]*bi}let Ee=ee+le;if(($&1)!=0||$>13||$<4)throw new fe;let Le=(13-$)/2,Me=Ie.SYMBOL_WIDEST[Le],Re=9-Me,vt=Oi.getRSSvalue(v,Me,!0),ut=Oi.getRSSvalue(R,Re,!1),Jn=Ie.EVEN_TOTAL_SUBSET[Le],wr=Ie.GSUM[Le],Bi=vt*Jn+ut+wr;return new Ai(Bi,Ee)}static isNotA1left(i,a,l){return!(i.getValue()==0&&a&&l)}adjustOddEvenCounts(i){let a=Qe.sum(new Int32Array(this.getOddCounts())),l=Qe.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1;a>13?f=!0:a<4&&(h=!0);let m=!1,x=!1;l>13?x=!0:l<4&&(m=!0);let A=a+l-i,v=(a&1)==1,R=(l&1)==0;if(A==1)if(v){if(R)throw new fe;f=!0}else{if(!R)throw new fe;x=!0}else if(A==-1)if(v){if(R)throw new fe;h=!0}else{if(!R)throw new fe;m=!0}else if(A==0){if(v){if(!R)throw new fe;a<l?(h=!0,x=!0):(f=!0,m=!0)}else if(R)throw new fe}else throw new fe;if(h){if(f)throw new fe;Ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(x)throw new fe;Ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ie.SYMBOL_WIDEST=[7,5,4,3,1],Ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ie.GSUM=[0,348,1388,2948,3988],Ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ie.FINDER_PAT_A=0,Ie.FINDER_PAT_B=1,Ie.FINDER_PAT_C=2,Ie.FINDER_PAT_D=3,Ie.FINDER_PAT_E=4,Ie.FINDER_PAT_F=5,Ie.FINDER_PATTERN_SEQUENCES=[[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_C,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_C],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F]],Ie.MAX_PAIRS=11;class Ao extends Ai{constructor(i,a,l){super(i,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class $t extends Hn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,a,l){const h=this.decodePair(a,!1,i,l);$t.addOrTally(this.possibleLeftPairs,h),a.reverse();let f=this.decodePair(a,!0,i,l);$t.addOrTally(this.possibleRightPairs,f),a.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&$t.checkChecksum(m,x))return $t.constructResult(m,x)}throw new fe}static addOrTally(i,a){if(a==null)return;let l=!1;for(let h of i)if(h.getValue()===a.getValue()){h.incrementCount(),l=!0;break}l||i.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,a){let l=4537077*i.getValue()+a.getValue(),h=new String(l).toString(),f=new Y;for(let v=13-h.length;v>0;v--)f.append("0");f.append(h);let m=0;for(let v=0;v<13;v++){let R=f.charAt(v).charCodeAt(0)-48;m+=(v&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),f.append(m.toString());let x=i.getFinderPattern().getResultPoints(),A=a.getFinderPattern().getResultPoints();return new Ue(f.toString(),null,0,[x[0],x[1],A[0],A[1]],Oe.RSS_14,new Date().getTime())}static checkChecksum(i,a){let l=(i.getChecksumPortion()+16*a.getChecksumPortion())%79,h=9*i.getFinderPattern().getValue()+a.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(i,a,l,h){try{let f=this.findFinderPattern(i,a),m=this.parseFoundFinderPattern(i,l,a,f),x=h==null?null:h.get(Be.NEED_RESULT_POINT_CALLBACK);if(x!=null){let R=(f[0]+f[1])/2;a&&(R=i.getSize()-1-R),x.foundPossibleResultPoint(new je(R,l))}let A=this.decodeDataCharacter(i,m,!0),v=this.decodeDataCharacter(i,m,!1);return new Ao(1597*A.getValue()+v.getValue(),A.getChecksumPortion()+4*v.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(i,a,l){let h=this.getDataCharacterCounters();for(let le=0;le<h.length;le++)h[le]=0;if(l)Xt.recordPatternInReverse(i,a.getStartEnd()[0],h);else{Xt.recordPattern(i,a.getStartEnd()[1]+1,h);for(let le=0,Ee=h.length-1;le<Ee;le++,Ee--){let Le=h[le];h[le]=h[Ee],h[Ee]=Le}}let f=l?16:15,m=Qe.sum(new Int32Array(h))/f,x=this.getOddCounts(),A=this.getEvenCounts(),v=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let le=0;le<h.length;le++){let Ee=h[le]/m,Le=Math.floor(Ee+.5);Le<1?Le=1:Le>8&&(Le=8);let Me=Math.floor(le/2);(le&1)===0?(x[Me]=Le,v[Me]=Ee-Le):(A[Me]=Le,R[Me]=Ee-Le)}this.adjustOddEvenCounts(l,f);let P=0,B=0;for(let le=x.length-1;le>=0;le--)B*=9,B+=x[le],P+=x[le];let q=0,$=0;for(let le=A.length-1;le>=0;le--)q*=9,q+=A[le],$+=A[le];let ee=B+3*q;if(l){if((P&1)!==0||P>12||P<4)throw new fe;let le=(12-P)/2,Ee=$t.OUTSIDE_ODD_WIDEST[le],Le=9-Ee,Me=Oi.getRSSvalue(x,Ee,!1),Re=Oi.getRSSvalue(A,Le,!0),vt=$t.OUTSIDE_EVEN_TOTAL_SUBSET[le],ut=$t.OUTSIDE_GSUM[le];return new Ai(Me*vt+Re+ut,ee)}else{if(($&1)!==0||$>10||$<4)throw new fe;let le=(10-$)/2,Ee=$t.INSIDE_ODD_WIDEST[le],Le=9-Ee,Me=Oi.getRSSvalue(x,Ee,!0),Re=Oi.getRSSvalue(A,Le,!1),vt=$t.INSIDE_ODD_TOTAL_SUBSET[le],ut=$t.INSIDE_GSUM[le];return new Ai(Re*vt+Me+ut,ee)}}findFinderPattern(i,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=i.getSize(),f=!1,m=0;for(;m<h&&(f=!i.get(m),a!==f);)m++;let x=0,A=m;for(let v=m;v<h;v++)if(i.get(v)!==f)l[x]++;else{if(x===3){if(Hn.isFinderPattern(l))return[A,v];A+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,f=!f}throw new fe}parseFoundFinderPattern(i,a,l,h){let f=i.get(h[0]),m=h[0]-1;for(;m>=0&&f!==i.get(m);)m--;m++;const x=h[0]-m,A=this.getDecodeFinderCounters(),v=new Int32Array(A.length);K.arraycopy(A,0,v,1,A.length-1),v[0]=x;const R=this.parseFinderValue(v,$t.FINDER_PATTERNS);let P=m,B=h[1];return l&&(P=i.getSize()-1-P,B=i.getSize()-1-B),new xr(R,[m,h[1]],P,B,a)}adjustOddEvenCounts(i,a){let l=Qe.sum(new Int32Array(this.getOddCounts())),h=Qe.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1,x=!1,A=!1;i?(l>12?m=!0:l<4&&(f=!0),h>12?A=!0:h<4&&(x=!0)):(l>11?m=!0:l<5&&(f=!0),h>10?A=!0:h<4&&(x=!0));let v=l+h-a,R=(l&1)===(i?1:0),P=(h&1)===1;if(v===1)if(R){if(P)throw new fe;m=!0}else{if(!P)throw new fe;A=!0}else if(v===-1)if(R){if(P)throw new fe;f=!0}else{if(!P)throw new fe;x=!0}else if(v===0){if(R){if(!P)throw new fe;l<h?(f=!0,A=!0):(m=!0,x=!0)}else if(P)throw new fe}else throw new fe;if(f){if(m)throw new fe;Hn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Hn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(A)throw new fe;Hn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&Hn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],$t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],$t.OUTSIDE_GSUM=[0,161,961,2015,2715],$t.INSIDE_GSUM=[0,336,1036,1516],$t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],$t.INSIDE_ODD_WIDEST=[2,4,6,8],$t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Mi extends Xt{constructor(i,a){super(),this.readers=[],this.verbose=a===!0;const l=i?i.get(Be.POSSIBLE_FORMATS):null,h=i&&i.get(Be.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Oe.EAN_13)||l.includes(Oe.UPC_A)||l.includes(Oe.EAN_8)||l.includes(Oe.UPC_E))&&this.readers.push(new Gs(i)),l.includes(Oe.CODE_39)&&this.readers.push(new Kt(h)),l.includes(Oe.CODE_128)&&this.readers.push(new De),l.includes(Oe.ITF)&&this.readers.push(new it),l.includes(Oe.RSS_14)&&this.readers.push(new $t),l.includes(Oe.RSS_EXPANDED)&&this.readers.push(new Ie(this.verbose))):(this.readers.push(new Gs(i)),this.readers.push(new Kt),this.readers.push(new Gs(i)),this.readers.push(new De),this.readers.push(new it),this.readers.push(new $t),this.readers.push(new Ie(this.verbose)))}decodeRow(i,a,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(i,a,l)}catch{}throw new fe}reset(){this.readers.forEach(i=>i.reset())}}class wo extends ke{constructor(i=500,a){super(new Mi(a),i,a)}}class Vt{constructor(i,a,l){this.ecCodewords=i,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ot{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Tt{constructor(i,a,l,h,f,m){this.versionNumber=i,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=f,this.ecBlocks=m;let x=0;const A=m.getECCodewords(),v=m.getECBlocks();for(let R of v)x+=R.getCount()*(R.getDataCodewords()+A);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,a){if((i&1)!==0||(a&1)!==0)throw new F;for(let l of Tt.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===a)return l;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Tt(1,10,10,8,8,new Vt(5,new Ot(1,3))),new Tt(2,12,12,10,10,new Vt(7,new Ot(1,5))),new Tt(3,14,14,12,12,new Vt(10,new Ot(1,8))),new Tt(4,16,16,14,14,new Vt(12,new Ot(1,12))),new Tt(5,18,18,16,16,new Vt(14,new Ot(1,18))),new Tt(6,20,20,18,18,new Vt(18,new Ot(1,22))),new Tt(7,22,22,20,20,new Vt(20,new Ot(1,30))),new Tt(8,24,24,22,22,new Vt(24,new Ot(1,36))),new Tt(9,26,26,24,24,new Vt(28,new Ot(1,44))),new Tt(10,32,32,14,14,new Vt(36,new Ot(1,62))),new Tt(11,36,36,16,16,new Vt(42,new Ot(1,86))),new Tt(12,40,40,18,18,new Vt(48,new Ot(1,114))),new Tt(13,44,44,20,20,new Vt(56,new Ot(1,144))),new Tt(14,48,48,22,22,new Vt(68,new Ot(1,174))),new Tt(15,52,52,24,24,new Vt(42,new Ot(2,102))),new Tt(16,64,64,14,14,new Vt(56,new Ot(2,140))),new Tt(17,72,72,16,16,new Vt(36,new Ot(4,92))),new Tt(18,80,80,18,18,new Vt(48,new Ot(4,114))),new Tt(19,88,88,20,20,new Vt(56,new Ot(4,144))),new Tt(20,96,96,22,22,new Vt(68,new Ot(4,174))),new Tt(21,104,104,24,24,new Vt(56,new Ot(6,136))),new Tt(22,120,120,18,18,new Vt(68,new Ot(6,175))),new Tt(23,132,132,20,20,new Vt(62,new Ot(8,163))),new Tt(24,144,144,22,22,new Vt(62,new Ot(8,156),new Ot(2,155))),new Tt(25,8,18,6,16,new Vt(7,new Ot(1,5))),new Tt(26,8,32,6,14,new Vt(11,new Ot(1,10))),new Tt(27,12,26,10,24,new Vt(14,new Ot(1,16))),new Tt(28,12,36,10,16,new Vt(18,new Ot(1,22))),new Tt(29,16,36,14,16,new Vt(24,new Ot(1,32))),new Tt(30,16,48,14,22,new Vt(28,new Ot(1,49)))]}}Tt.VERSIONS=Tt.buildVersions();class Is{constructor(i){const a=i.getHeight();if(a<8||a>144||(a&1)!==0)throw new F;this.version=Is.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Ze(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const a=i.getHeight(),l=i.getWidth();return Tt.getVersionForDimensions(a,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,h=0;const f=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let x=!1,A=!1,v=!1,R=!1;do if(l===f&&h===0&&!x)i[a++]=this.readCorner1(f,m)&255,l-=2,h+=2,x=!0;else if(l===f-2&&h===0&&(m&3)!==0&&!A)i[a++]=this.readCorner2(f,m)&255,l-=2,h+=2,A=!0;else if(l===f+4&&h===2&&(m&7)===0&&!v)i[a++]=this.readCorner3(f,m)&255,l-=2,h+=2,v=!0;else if(l===f-2&&h===0&&(m&7)===4&&!R)i[a++]=this.readCorner4(f,m)&255,l-=2,h+=2,R=!0;else{do l<f&&h>=0&&!this.readMappingMatrix.get(h,l)&&(i[a++]=this.readUtah(l,h,f,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(i[a++]=this.readUtah(l,h,f,m)&255),l+=2,h-=2;while(l<f&&h>=0);l+=3,h+=1}while(l<f||h<m);if(a!==this.version.getTotalCodewords())throw new F;return i}readModule(i,a,l,h){return i<0&&(i+=l,a+=4-(l+4&7)),a<0&&(a+=h,i+=4-(h+4&7)),this.readMappingMatrix.set(a,i),this.mappingBitMatrix.get(a,i)}readUtah(i,a,l,h){let f=0;return this.readModule(i-2,a-2,l,h)&&(f|=1),f<<=1,this.readModule(i-2,a-1,l,h)&&(f|=1),f<<=1,this.readModule(i-1,a-2,l,h)&&(f|=1),f<<=1,this.readModule(i-1,a-1,l,h)&&(f|=1),f<<=1,this.readModule(i-1,a,l,h)&&(f|=1),f<<=1,this.readModule(i,a-2,l,h)&&(f|=1),f<<=1,this.readModule(i,a-1,l,h)&&(f|=1),f<<=1,this.readModule(i,a,l,h)&&(f|=1),f}readCorner1(i,a){let l=0;return this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,1,i,a)&&(l|=1),l<<=1,this.readModule(i-1,2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(2,a-1,i,a)&&(l|=1),l<<=1,this.readModule(3,a-1,i,a)&&(l|=1),l}readCorner2(i,a){let l=0;return this.readModule(i-3,0,i,a)&&(l|=1),l<<=1,this.readModule(i-2,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(0,a-4,i,a)&&(l|=1),l<<=1,this.readModule(0,a-3,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l}readCorner3(i,a){let l=0;return this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(0,a-3,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-3,i,a)&&(l|=1),l<<=1,this.readModule(1,a-2,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l}readCorner4(i,a){let l=0;return this.readModule(i-3,0,i,a)&&(l|=1),l<<=1,this.readModule(i-2,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(2,a-1,i,a)&&(l|=1),l<<=1,this.readModule(3,a-1,i,a)&&(l|=1),l}extractDataRegion(i){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==a)throw new I("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),m=a/h|0,x=l/f|0,A=m*h,v=x*f,R=new Ze(v,A);for(let P=0;P<m;++P){const B=P*h;for(let q=0;q<x;++q){const $=q*f;for(let ee=0;ee<h;++ee){const le=P*(h+2)+1+ee,Ee=B+ee;for(let Le=0;Le<f;++Le){const Me=q*(f+2)+1+Le;if(i.get(Me,le)){const Re=$+Le;R.set(Re,Ee)}}}}}return R}}class Li{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a){const l=a.getECBlocks();let h=0;const f=l.getECBlocks();for(let ee of f)h+=ee.getCount();const m=new Array(h);let x=0;for(let ee of f)for(let le=0;le<ee.getCount();le++){const Ee=ee.getDataCodewords(),Le=l.getECCodewords()+Ee;m[x++]=new Li(Ee,new Uint8Array(Le))}const v=m[0].codewords.length-l.getECCodewords(),R=v-1;let P=0;for(let ee=0;ee<R;ee++)for(let le=0;le<x;le++)m[le].codewords[ee]=i[P++];const B=a.getVersionNumber()===24,q=B?8:x;for(let ee=0;ee<q;ee++)m[ee].codewords[v-1]=i[P++];const $=m[0].codewords.length;for(let ee=v;ee<$;ee++)for(let le=0;le<x;le++){const Ee=B?(le+8)%x:le,Le=B&&Ee>7?ee-1:ee;m[Ee].codewords[Le]=i[P++]}if(P!==i.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class kn{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new I(""+i);let a=0,l=this.bitOffset,h=this.byteOffset;const f=this.bytes;if(l>0){const m=8-l,x=i<m?i:m,A=m-x,v=255>>8-x<<A;a=(f[h]&v)>>A,i-=x,l+=x,l===8&&(l=0,h++)}if(i>0){for(;i>=8;)a=a<<8|f[h]&255,h++,i-=8;if(i>0){const m=8-i,x=255>>m<<m;a=a<<i|(f[h]&x)>>m,l+=i}}return this.bitOffset=l,this.byteOffset=h,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var St;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(St||(St={}));class Pi{static decode(i){const a=new kn(i),l=new Y,h=new Y,f=new Array;let m=St.ASCII_ENCODE;do if(m===St.ASCII_ENCODE)m=this.decodeAsciiSegment(a,l,h);else{switch(m){case St.C40_ENCODE:this.decodeC40Segment(a,l);break;case St.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case St.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case St.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case St.BASE256_ENCODE:this.decodeBase256Segment(a,l,f);break;default:throw new F}m=St.ASCII_ENCODE}while(m!==St.PAD_ENCODE&&a.available()>0);return h.length()>0&&l.append(h.toString()),new Jt(i,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(i,a,l){let h=!1;do{let f=i.readBits(8);if(f===0)throw new F;if(f<=128)return h&&(f+=128),a.append(String.fromCharCode(f-1)),St.ASCII_ENCODE;if(f===129)return St.PAD_ENCODE;if(f<=229){const m=f-130;m<10&&a.append("0"),a.append(""+m)}else switch(f){case 230:return St.C40_ENCODE;case 231:return St.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return St.ANSIX12_ENCODE;case 239:return St.TEXT_ENCODE;case 240:return St.EDIFACT_ENCODE;case 241:break;default:if(f!==254||i.available()!==0)throw new F;break}}while(i.available()>0);return St.ASCII_ENCODE}static decodeC40Segment(i,a){let l=!1;const h=[];let f=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),h);for(let x=0;x<3;x++){const A=h[x];switch(f){case 0:if(A<3)f=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[A];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else throw new F;break;case 1:l?(a.append(String.fromCharCode(A+128)),l=!1):a.append(String.fromCharCode(A)),f=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[A];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else switch(A){case 27:a.append("");break;case 30:l=!0;break;default:throw new F}f=0;break;case 3:l?(a.append(String.fromCharCode(A+224)),l=!1):a.append(String.fromCharCode(A+96)),f=0;break;default:throw new F}}}while(i.available()>0)}static decodeTextSegment(i,a){let l=!1,h=[],f=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),h);for(let x=0;x<3;x++){const A=h[x];switch(f){case 0:if(A<3)f=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[A];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else throw new F;break;case 1:l?(a.append(String.fromCharCode(A+128)),l=!1):a.append(String.fromCharCode(A)),f=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[A];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else switch(A){case 27:a.append("");break;case 30:l=!0;break;default:throw new F}f=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[A];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v),f=0}else throw new F;break;default:throw new F}}}while(i.available()>0)}static decodeAnsiX12Segment(i,a){const l=[];do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),l);for(let f=0;f<3;f++){const m=l[f];switch(m){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(m<14)a.append(String.fromCharCode(m+44));else if(m<40)a.append(String.fromCharCode(m+51));else throw new F;break}}}while(i.available()>0)}static parseTwoBytes(i,a,l){let h=(i<<8)+a-1,f=Math.floor(h/1600);l[0]=f,h-=f*1600,f=Math.floor(h/40),l[1]=f,l[2]=h-f*40}static decodeEdifactSegment(i,a){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let h=i.readBits(6);if(h===31){const f=8-i.getBitOffset();f!==8&&i.readBits(f);return}(h&32)===0&&(h|=64),a.append(String.fromCharCode(h))}}while(i.available()>0)}static decodeBase256Segment(i,a,l){let h=1+i.getByteOffset();const f=this.unrandomize255State(i.readBits(8),h++);let m;if(f===0?m=i.available()/8|0:f<250?m=f:m=250*(f-249)+this.unrandomize255State(i.readBits(8),h++),m<0)throw new F;const x=new Uint8Array(m);for(let A=0;A<m;A++){if(i.available()<8)throw new F;x[A]=this.unrandomize255State(i.readBits(8),h++)}l.push(x);try{a.append(W.decode(x,J.ISO88591))}catch(A){throw new _i("Platform does not support required encoding: "+A.message)}}static unrandomize255State(i,a){const l=149*a%255+1,h=i-l;return h>=0?h:h+256}}Pi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Pi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Pi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Pi.TEXT_SHIFT2_SET_CHARS=Pi.C40_SHIFT2_SET_CHARS,Pi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class bo{constructor(){this.rsDecoder=new Ri(_t.DATA_MATRIX_FIELD_256)}decode(i){const a=new Is(i),l=a.getVersion(),h=a.readCodewords(),f=Li.getDataBlocks(h,l);let m=0;for(let v of f)m+=v.getNumDataCodewords();const x=new Uint8Array(m),A=f.length;for(let v=0;v<A;v++){const R=f[v],P=R.getCodewords(),B=R.getNumDataCodewords();this.correctErrors(P,B);for(let q=0;q<B;q++)x[q*A+v]=P[q]}return Pi.decode(x)}correctErrors(i,a){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-a)}catch{throw new k}for(let h=0;h<a;h++)i[h]=l[h]}}class rt{constructor(i){this.image=i,this.rectangleDetector=new xn(this.image)}detect(){const i=this.rectangleDetector.detect();let a=this.detectSolid1(i);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new fe;a=this.shiftToModuleCenter(a);const l=a[0],h=a[1],f=a[2],m=a[3];let x=this.transitionsBetween(l,m)+1,A=this.transitionsBetween(f,m)+1;(x&1)===1&&(x+=1),(A&1)===1&&(A+=1),4*x<7*A&&4*A<7*x&&(x=A=Math.max(x,A));let v=rt.sampleGrid(this.image,l,h,f,m,x,A);return new qi(v,[l,h,f,m])}static shiftPoint(i,a,l){let h=(a.getX()-i.getX())/(l+1),f=(a.getY()-i.getY())/(l+1);return new je(i.getX()+h,i.getY()+f)}static moveAway(i,a,l){let h=i.getX(),f=i.getY();return h<a?h-=1:h+=1,f<l?f-=1:f+=1,new je(h,f)}detectSolid1(i){let a=i[0],l=i[1],h=i[3],f=i[2],m=this.transitionsBetween(a,l),x=this.transitionsBetween(l,h),A=this.transitionsBetween(h,f),v=this.transitionsBetween(f,a),R=m,P=[f,a,l,h];return R>x&&(R=x,P[0]=a,P[1]=l,P[2]=h,P[3]=f),R>A&&(R=A,P[0]=l,P[1]=h,P[2]=f,P[3]=a),R>v&&(P[0]=h,P[1]=f,P[2]=a,P[3]=l),P}detectSolid2(i){let a=i[0],l=i[1],h=i[2],f=i[3],m=this.transitionsBetween(a,f),x=rt.shiftPoint(l,h,(m+1)*4),A=rt.shiftPoint(h,l,(m+1)*4),v=this.transitionsBetween(x,a),R=this.transitionsBetween(A,f);return v<R?(i[0]=a,i[1]=l,i[2]=h,i[3]=f):(i[0]=l,i[1]=h,i[2]=f,i[3]=a),i}correctTopRight(i){let a=i[0],l=i[1],h=i[2],f=i[3],m=this.transitionsBetween(a,f),x=this.transitionsBetween(l,f),A=rt.shiftPoint(a,l,(x+1)*4),v=rt.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(A,f),x=this.transitionsBetween(v,f);let R=new je(f.getX()+(h.getX()-l.getX())/(m+1),f.getY()+(h.getY()-l.getY())/(m+1)),P=new je(f.getX()+(a.getX()-l.getX())/(x+1),f.getY()+(a.getY()-l.getY())/(x+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let B=this.transitionsBetween(A,R)+this.transitionsBetween(v,R),q=this.transitionsBetween(A,P)+this.transitionsBetween(v,P);return B>q?R:P}shiftToModuleCenter(i){let a=i[0],l=i[1],h=i[2],f=i[3],m=this.transitionsBetween(a,f)+1,x=this.transitionsBetween(h,f)+1,A=rt.shiftPoint(a,l,x*4),v=rt.shiftPoint(h,l,m*4);m=this.transitionsBetween(A,f)+1,x=this.transitionsBetween(v,f)+1,(m&1)===1&&(m+=1),(x&1)===1&&(x+=1);let R=(a.getX()+l.getX()+h.getX()+f.getX())/4,P=(a.getY()+l.getY()+h.getY()+f.getY())/4;a=rt.moveAway(a,R,P),l=rt.moveAway(l,R,P),h=rt.moveAway(h,R,P),f=rt.moveAway(f,R,P);let B,q;return A=rt.shiftPoint(a,l,x*4),A=rt.shiftPoint(A,f,m*4),B=rt.shiftPoint(l,a,x*4),B=rt.shiftPoint(B,h,m*4),v=rt.shiftPoint(h,f,x*4),v=rt.shiftPoint(v,l,m*4),q=rt.shiftPoint(f,h,x*4),q=rt.shiftPoint(q,a,m*4),[A,B,v,q]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,a,l,h,f,m,x){return si.getInstance().sampleGrid(i,m,x,.5,.5,m-.5,.5,m-.5,x-.5,.5,x-.5,a.getX(),a.getY(),f.getX(),f.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(i,a){let l=Math.trunc(i.getX()),h=Math.trunc(i.getY()),f=Math.trunc(a.getX()),m=Math.trunc(a.getY()),x=Math.abs(m-h)>Math.abs(f-l);if(x){let ee=l;l=h,h=ee,ee=f,f=m,m=ee}let A=Math.abs(f-l),v=Math.abs(m-h),R=-A/2,P=h<m?1:-1,B=l<f?1:-1,q=0,$=this.image.get(x?h:l,x?l:h);for(let ee=l,le=h;ee!==f;ee+=B){let Ee=this.image.get(x?le:ee,x?ee:le);if(Ee!==$&&(q++,$=Ee),R+=v,R>0){if(le===m)break;le+=P,R-=A}}return q}}class Xi{constructor(){this.decoder=new bo}decode(i,a=null){let l,h;if(a!=null&&a.has(Be.PURE_BARCODE)){const v=Xi.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(v),h=Xi.NO_POINTS}else{const v=new rt(i.getBlackMatrix()).detect();l=this.decoder.decode(v.getBits()),h=v.getPoints()}const f=l.getRawBytes(),m=new Ue(l.getText(),f,8*f.length,h,Oe.DATA_MATRIX,K.currentTimeMillis()),x=l.getByteSegments();x!=null&&m.putMetadata(yt.BYTE_SEGMENTS,x);const A=l.getECLevel();return A!=null&&m.putMetadata(yt.ERROR_CORRECTION_LEVEL,A),m}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(a==null||l==null)throw new fe;const h=this.moduleSize(a,i);let f=a[1];const m=l[1];let x=a[0];const v=(l[0]-x+1)/h,R=(m-f+1)/h;if(v<=0||R<=0)throw new fe;const P=h/2;f+=P,x+=P;const B=new Ze(v,R);for(let q=0;q<R;q++){const $=f+q*h;for(let ee=0;ee<v;ee++)i.get(x+ee*h,$)&&B.set(ee,q)}return B}static moduleSize(i,a){const l=a.getWidth();let h=i[0];const f=i[1];for(;h<l&&a.get(h,f);)h++;if(h===l)throw new fe;const m=h-i[0];if(m===0)throw new fe;return m}}Xi.NO_POINTS=[];class Kr extends ke{constructor(i=500){super(new Xi,i)}}var Er;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})(Er||(Er={}));class wt{constructor(i,a,l){this.value=i,this.stringValue=a,this.bits=l,wt.FOR_BITS.set(l,this),wt.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return wt.L;case"M":return wt.M;case"Q":return wt.Q;case"H":return wt.H;default:throw new C(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof wt))return!1;const a=i;return this.value===a.value}static forBits(i){if(i<0||i>=wt.FOR_BITS.size)throw new I;return wt.FOR_BITS.get(i)}}wt.FOR_BITS=new Map,wt.FOR_VALUE=new Map,wt.L=new wt(Er.L,"L",1),wt.M=new wt(Er.M,"M",0),wt.Q=new wt(Er.Q,"Q",3),wt.H=new wt(Er.H,"H",2);class Gn{constructor(i){this.errorCorrectionLevel=wt.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,a){return Q.bitCount(i^a)}static decodeFormatInformation(i,a){const l=Gn.doDecodeFormatInformation(i,a);return l!==null?l:Gn.doDecodeFormatInformation(i^Gn.FORMAT_INFO_MASK_QR,a^Gn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,a){let l=Number.MAX_SAFE_INTEGER,h=0;for(const f of Gn.FORMAT_INFO_DECODE_LOOKUP){const m=f[0];if(m===i||m===a)return new Gn(f[1]);let x=Gn.numBitsDiffering(i,m);x<l&&(h=f[1],l=x),i!==a&&(x=Gn.numBitsDiffering(a,m),x<l&&(h=f[1],l=x))}return l<=3?new Gn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Gn))return!1;const a=i;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Gn.FORMAT_INFO_MASK_QR=21522,Gn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ce{constructor(i,...a){this.ecCodewordsPerBlock=i,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const a=this.ecBlocks;for(const l of a)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(i,a,...l){this.versionNumber=i,this.alignmentPatternCenters=a,this.ecBlocks=l;let h=0;const f=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const x of m)h+=x.getCount()*(x.getDataCodewords()+f);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new F;try{return this.getVersionForNumber((i-17)/4)}catch{throw new F}}static getVersionForNumber(i){if(i<1||i>40)throw new I;return Ye.VERSIONS[i-1]}static decodeVersionInformation(i){let a=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<Ye.VERSION_DECODE_INFO.length;h++){const f=Ye.VERSION_DECODE_INFO[h];if(f===i)return Ye.getVersionForNumber(h+7);const m=Gn.numBitsDiffering(i,f);m<a&&(l=h+7,a=m)}return a<=3?Ye.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),a=new Ze(i);a.setRegion(0,0,9,9),a.setRegion(i-8,0,8,9),a.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const f=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||a.setRegion(this.alignmentPatternCenters[m]-2,f,5,5)}return a.setRegion(6,9,1,i-17),a.setRegion(9,6,i-17,1),this.versionNumber>6&&(a.setRegion(i-11,0,3,6),a.setRegion(0,i-11,6,3)),a}toString(){return""+this.versionNumber}}Ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ye.VERSIONS=[new Ye(1,new Int32Array(0),new ce(7,new H(1,19)),new ce(10,new H(1,16)),new ce(13,new H(1,13)),new ce(17,new H(1,9))),new Ye(2,Int32Array.from([6,18]),new ce(10,new H(1,34)),new ce(16,new H(1,28)),new ce(22,new H(1,22)),new ce(28,new H(1,16))),new Ye(3,Int32Array.from([6,22]),new ce(15,new H(1,55)),new ce(26,new H(1,44)),new ce(18,new H(2,17)),new ce(22,new H(2,13))),new Ye(4,Int32Array.from([6,26]),new ce(20,new H(1,80)),new ce(18,new H(2,32)),new ce(26,new H(2,24)),new ce(16,new H(4,9))),new Ye(5,Int32Array.from([6,30]),new ce(26,new H(1,108)),new ce(24,new H(2,43)),new ce(18,new H(2,15),new H(2,16)),new ce(22,new H(2,11),new H(2,12))),new Ye(6,Int32Array.from([6,34]),new ce(18,new H(2,68)),new ce(16,new H(4,27)),new ce(24,new H(4,19)),new ce(28,new H(4,15))),new Ye(7,Int32Array.from([6,22,38]),new ce(20,new H(2,78)),new ce(18,new H(4,31)),new ce(18,new H(2,14),new H(4,15)),new ce(26,new H(4,13),new H(1,14))),new Ye(8,Int32Array.from([6,24,42]),new ce(24,new H(2,97)),new ce(22,new H(2,38),new H(2,39)),new ce(22,new H(4,18),new H(2,19)),new ce(26,new H(4,14),new H(2,15))),new Ye(9,Int32Array.from([6,26,46]),new ce(30,new H(2,116)),new ce(22,new H(3,36),new H(2,37)),new ce(20,new H(4,16),new H(4,17)),new ce(24,new H(4,12),new H(4,13))),new Ye(10,Int32Array.from([6,28,50]),new ce(18,new H(2,68),new H(2,69)),new ce(26,new H(4,43),new H(1,44)),new ce(24,new H(6,19),new H(2,20)),new ce(28,new H(6,15),new H(2,16))),new Ye(11,Int32Array.from([6,30,54]),new ce(20,new H(4,81)),new ce(30,new H(1,50),new H(4,51)),new ce(28,new H(4,22),new H(4,23)),new ce(24,new H(3,12),new H(8,13))),new Ye(12,Int32Array.from([6,32,58]),new ce(24,new H(2,92),new H(2,93)),new ce(22,new H(6,36),new H(2,37)),new ce(26,new H(4,20),new H(6,21)),new ce(28,new H(7,14),new H(4,15))),new Ye(13,Int32Array.from([6,34,62]),new ce(26,new H(4,107)),new ce(22,new H(8,37),new H(1,38)),new ce(24,new H(8,20),new H(4,21)),new ce(22,new H(12,11),new H(4,12))),new Ye(14,Int32Array.from([6,26,46,66]),new ce(30,new H(3,115),new H(1,116)),new ce(24,new H(4,40),new H(5,41)),new ce(20,new H(11,16),new H(5,17)),new ce(24,new H(11,12),new H(5,13))),new Ye(15,Int32Array.from([6,26,48,70]),new ce(22,new H(5,87),new H(1,88)),new ce(24,new H(5,41),new H(5,42)),new ce(30,new H(5,24),new H(7,25)),new ce(24,new H(11,12),new H(7,13))),new Ye(16,Int32Array.from([6,26,50,74]),new ce(24,new H(5,98),new H(1,99)),new ce(28,new H(7,45),new H(3,46)),new ce(24,new H(15,19),new H(2,20)),new ce(30,new H(3,15),new H(13,16))),new Ye(17,Int32Array.from([6,30,54,78]),new ce(28,new H(1,107),new H(5,108)),new ce(28,new H(10,46),new H(1,47)),new ce(28,new H(1,22),new H(15,23)),new ce(28,new H(2,14),new H(17,15))),new Ye(18,Int32Array.from([6,30,56,82]),new ce(30,new H(5,120),new H(1,121)),new ce(26,new H(9,43),new H(4,44)),new ce(28,new H(17,22),new H(1,23)),new ce(28,new H(2,14),new H(19,15))),new Ye(19,Int32Array.from([6,30,58,86]),new ce(28,new H(3,113),new H(4,114)),new ce(26,new H(3,44),new H(11,45)),new ce(26,new H(17,21),new H(4,22)),new ce(26,new H(9,13),new H(16,14))),new Ye(20,Int32Array.from([6,34,62,90]),new ce(28,new H(3,107),new H(5,108)),new ce(26,new H(3,41),new H(13,42)),new ce(30,new H(15,24),new H(5,25)),new ce(28,new H(15,15),new H(10,16))),new Ye(21,Int32Array.from([6,28,50,72,94]),new ce(28,new H(4,116),new H(4,117)),new ce(26,new H(17,42)),new ce(28,new H(17,22),new H(6,23)),new ce(30,new H(19,16),new H(6,17))),new Ye(22,Int32Array.from([6,26,50,74,98]),new ce(28,new H(2,111),new H(7,112)),new ce(28,new H(17,46)),new ce(30,new H(7,24),new H(16,25)),new ce(24,new H(34,13))),new Ye(23,Int32Array.from([6,30,54,78,102]),new ce(30,new H(4,121),new H(5,122)),new ce(28,new H(4,47),new H(14,48)),new ce(30,new H(11,24),new H(14,25)),new ce(30,new H(16,15),new H(14,16))),new Ye(24,Int32Array.from([6,28,54,80,106]),new ce(30,new H(6,117),new H(4,118)),new ce(28,new H(6,45),new H(14,46)),new ce(30,new H(11,24),new H(16,25)),new ce(30,new H(30,16),new H(2,17))),new Ye(25,Int32Array.from([6,32,58,84,110]),new ce(26,new H(8,106),new H(4,107)),new ce(28,new H(8,47),new H(13,48)),new ce(30,new H(7,24),new H(22,25)),new ce(30,new H(22,15),new H(13,16))),new Ye(26,Int32Array.from([6,30,58,86,114]),new ce(28,new H(10,114),new H(2,115)),new ce(28,new H(19,46),new H(4,47)),new ce(28,new H(28,22),new H(6,23)),new ce(30,new H(33,16),new H(4,17))),new Ye(27,Int32Array.from([6,34,62,90,118]),new ce(30,new H(8,122),new H(4,123)),new ce(28,new H(22,45),new H(3,46)),new ce(30,new H(8,23),new H(26,24)),new ce(30,new H(12,15),new H(28,16))),new Ye(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new H(3,117),new H(10,118)),new ce(28,new H(3,45),new H(23,46)),new ce(30,new H(4,24),new H(31,25)),new ce(30,new H(11,15),new H(31,16))),new Ye(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new H(7,116),new H(7,117)),new ce(28,new H(21,45),new H(7,46)),new ce(30,new H(1,23),new H(37,24)),new ce(30,new H(19,15),new H(26,16))),new Ye(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new H(5,115),new H(10,116)),new ce(28,new H(19,47),new H(10,48)),new ce(30,new H(15,24),new H(25,25)),new ce(30,new H(23,15),new H(25,16))),new Ye(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new H(13,115),new H(3,116)),new ce(28,new H(2,46),new H(29,47)),new ce(30,new H(42,24),new H(1,25)),new ce(30,new H(23,15),new H(28,16))),new Ye(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new H(17,115)),new ce(28,new H(10,46),new H(23,47)),new ce(30,new H(10,24),new H(35,25)),new ce(30,new H(19,15),new H(35,16))),new Ye(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new H(17,115),new H(1,116)),new ce(28,new H(14,46),new H(21,47)),new ce(30,new H(29,24),new H(19,25)),new ce(30,new H(11,15),new H(46,16))),new Ye(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new H(13,115),new H(6,116)),new ce(28,new H(14,46),new H(23,47)),new ce(30,new H(44,24),new H(7,25)),new ce(30,new H(59,16),new H(1,17))),new Ye(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new H(12,121),new H(7,122)),new ce(28,new H(12,47),new H(26,48)),new ce(30,new H(39,24),new H(14,25)),new ce(30,new H(22,15),new H(41,16))),new Ye(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new H(6,121),new H(14,122)),new ce(28,new H(6,47),new H(34,48)),new ce(30,new H(46,24),new H(10,25)),new ce(30,new H(2,15),new H(64,16))),new Ye(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new H(17,122),new H(4,123)),new ce(28,new H(29,46),new H(14,47)),new ce(30,new H(49,24),new H(10,25)),new ce(30,new H(24,15),new H(46,16))),new Ye(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new H(4,122),new H(18,123)),new ce(28,new H(13,46),new H(32,47)),new ce(30,new H(48,24),new H(14,25)),new ce(30,new H(42,15),new H(32,16))),new Ye(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new H(20,117),new H(4,118)),new ce(28,new H(40,47),new H(7,48)),new ce(30,new H(43,24),new H(22,25)),new ce(30,new H(10,15),new H(67,16))),new Ye(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new H(19,118),new H(6,119)),new ce(28,new H(18,47),new H(31,48)),new ce(30,new H(34,24),new H(34,25)),new ce(30,new H(20,15),new H(61,16)))];var qn;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(qn||(qn={}));class ai{constructor(i,a){this.value=i,this.isMasked=a}unmaskBitMatrix(i,a){for(let l=0;l<a;l++)for(let h=0;h<a;h++)this.isMasked(l,h)&&i.flip(h,l)}}ai.values=new Map([[qn.DATA_MASK_000,new ai(qn.DATA_MASK_000,(L,i)=>(L+i&1)===0)],[qn.DATA_MASK_001,new ai(qn.DATA_MASK_001,(L,i)=>(L&1)===0)],[qn.DATA_MASK_010,new ai(qn.DATA_MASK_010,(L,i)=>i%3===0)],[qn.DATA_MASK_011,new ai(qn.DATA_MASK_011,(L,i)=>(L+i)%3===0)],[qn.DATA_MASK_100,new ai(qn.DATA_MASK_100,(L,i)=>(Math.floor(L/2)+Math.floor(i/3)&1)===0)],[qn.DATA_MASK_101,new ai(qn.DATA_MASK_101,(L,i)=>L*i%6===0)],[qn.DATA_MASK_110,new ai(qn.DATA_MASK_110,(L,i)=>L*i%6<3)],[qn.DATA_MASK_111,new ai(qn.DATA_MASK_111,(L,i)=>(L+i+L*i%3&1)===0)]]);class Ki{constructor(i){const a=i.getHeight();if(a<21||(a&3)!==1)throw new F;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let f=0;f<6;f++)i=this.copyBit(f,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let f=5;f>=0;f--)i=this.copyBit(8,f,i);const a=this.bitMatrix.getHeight();let l=0;const h=a-7;for(let f=a-1;f>=h;f--)l=this.copyBit(8,f,l);for(let f=a-8;f<a;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=Gn.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),a=Math.floor((i-17)/4);if(a<=6)return Ye.getVersionForNumber(a);let l=0;const h=i-11;for(let m=5;m>=0;m--)for(let x=i-9;x>=h;x--)l=this.copyBit(x,m,l);let f=Ye.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;l=0;for(let m=5;m>=0;m--)for(let x=i-9;x>=h;x--)l=this.copyBit(m,x,l);if(f=Ye.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;throw new F}copyBit(i,a,l){return(this.isMirror?this.bitMatrix.get(a,i):this.bitMatrix.get(i,a))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),a=this.readVersion(),l=ai.values.get(i.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const f=a.buildFunctionPattern();let m=!0;const x=new Uint8Array(a.getTotalCodewords());let A=0,v=0,R=0;for(let P=h-1;P>0;P-=2){P===6&&P--;for(let B=0;B<h;B++){const q=m?h-1-B:B;for(let $=0;$<2;$++)f.get(P-$,q)||(R++,v<<=1,this.bitMatrix.get(P-$,q)&&(v|=1),R===8&&(x[A++]=v,R=0,v=0))}m=!m}if(A!==a.getTotalCodewords())throw new F;return x}remask(){if(this.parsedFormatInfo===null)return;const i=ai.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,a)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let a=0,l=i.getWidth();a<l;a++)for(let h=a+1,f=i.getHeight();h<f;h++)i.get(a,h)!==i.get(h,a)&&(i.flip(h,a),i.flip(a,h))}}class Na{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a,l){if(i.length!==a.getTotalCodewords())throw new I;const h=a.getECBlocksForLevel(l);let f=0;const m=h.getECBlocks();for(const $ of m)f+=$.getCount();const x=new Array(f);let A=0;for(const $ of m)for(let ee=0;ee<$.getCount();ee++){const le=$.getDataCodewords(),Ee=h.getECCodewordsPerBlock()+le;x[A++]=new Na(le,new Uint8Array(Ee))}const v=x[0].codewords.length;let R=x.length-1;for(;R>=0&&x[R].codewords.length!==v;)R--;R++;const P=v-h.getECCodewordsPerBlock();let B=0;for(let $=0;$<P;$++)for(let ee=0;ee<A;ee++)x[ee].codewords[$]=i[B++];for(let $=R;$<A;$++)x[$].codewords[P]=i[B++];const q=x[0].codewords.length;for(let $=P;$<q;$++)for(let ee=0;ee<A;ee++){const le=ee<R?$:$+1;x[ee].codewords[le]=i[B++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ci;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(Ci||(Ci={}));class We{constructor(i,a,l,h){this.value=i,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=h,We.FOR_BITS.set(h,this),We.FOR_VALUE.set(i,this)}static forBits(i){const a=We.FOR_BITS.get(i);if(a===void 0)throw new I;return a}getCharacterCountBits(i){const a=i.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof We))return!1;const a=i;return this.value===a.value}toString(){return this.stringValue}}We.FOR_BITS=new Map,We.FOR_VALUE=new Map,We.TERMINATOR=new We(Ci.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),We.NUMERIC=new We(Ci.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),We.ALPHANUMERIC=new We(Ci.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),We.STRUCTURED_APPEND=new We(Ci.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),We.BYTE=new We(Ci.BYTE,"BYTE",Int32Array.from([8,16,16]),4),We.ECI=new We(Ci.ECI,"ECI",Int32Array.from([0,0,0]),7),We.KANJI=new We(Ci.KANJI,"KANJI",Int32Array.from([8,10,12]),8),We.FNC1_FIRST_POSITION=new We(Ci.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),We.FNC1_SECOND_POSITION=new We(Ci.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),We.HANZI=new We(Ci.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class cn{static decode(i,a,l,h){const f=new kn(i);let m=new Y;const x=new Array;let A=-1,v=-1;try{let R=null,P=!1,B;do{if(f.available()<4)B=We.TERMINATOR;else{const q=f.readBits(4);B=We.forBits(q)}switch(B){case We.TERMINATOR:break;case We.FNC1_FIRST_POSITION:case We.FNC1_SECOND_POSITION:P=!0;break;case We.STRUCTURED_APPEND:if(f.available()<16)throw new F;A=f.readBits(8),v=f.readBits(8);break;case We.ECI:const q=cn.parseECIValue(f);if(R=V.getCharacterSetECIByValue(q),R===null)throw new F;break;case We.HANZI:const $=f.readBits(4),ee=f.readBits(B.getCharacterCountBits(a));$===cn.GB2312_SUBSET&&cn.decodeHanziSegment(f,m,ee);break;default:const le=f.readBits(B.getCharacterCountBits(a));switch(B){case We.NUMERIC:cn.decodeNumericSegment(f,m,le);break;case We.ALPHANUMERIC:cn.decodeAlphanumericSegment(f,m,le,P);break;case We.BYTE:cn.decodeByteSegment(f,m,le,R,x,h);break;case We.KANJI:cn.decodeKanjiSegment(f,m,le);break;default:throw new F}break}}while(B!==We.TERMINATOR)}catch{throw new F}return new Jt(i,m.toString(),x.length===0?null:x,l===null?null:l.toString(),A,v)}static decodeHanziSegment(i,a,l){if(l*13>i.available())throw new F;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=i.readBits(13);let x=m/96<<8&4294967295|m%96;x<959?x+=41377:x+=42657,h[f]=x>>8&255,h[f+1]=x&255,f+=2,l--}try{a.append(W.decode(h,J.GB2312))}catch(m){throw new F(m)}}static decodeKanjiSegment(i,a,l){if(l*13>i.available())throw new F;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=i.readBits(13);let x=m/192<<8&4294967295|m%192;x<7936?x+=33088:x+=49472,h[f]=x>>8,h[f+1]=x,f+=2,l--}try{a.append(W.decode(h,J.SHIFT_JIS))}catch(m){throw new F(m)}}static decodeByteSegment(i,a,l,h,f,m){if(8*l>i.available())throw new F;const x=new Uint8Array(l);for(let v=0;v<l;v++)x[v]=i.readBits(8);let A;h===null?A=J.guessEncoding(x,m):A=h.getName();try{a.append(W.decode(x,A))}catch(v){throw new F(v)}f.push(x)}static toAlphaNumericChar(i){if(i>=cn.ALPHANUMERIC_CHARS.length)throw new F;return cn.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,a,l,h){const f=a.length();for(;l>1;){if(i.available()<11)throw new F;const m=i.readBits(11);a.append(cn.toAlphaNumericChar(Math.floor(m/45))),a.append(cn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(i.available()<6)throw new F;a.append(cn.toAlphaNumericChar(i.readBits(6)))}if(h)for(let m=f;m<a.length();m++)a.charAt(m)==="%"&&(m<a.length()-1&&a.charAt(m+1)==="%"?a.deleteCharAt(m+1):a.setCharAt(m,""))}static decodeNumericSegment(i,a,l){for(;l>=3;){if(i.available()<10)throw new F;const h=i.readBits(10);if(h>=1e3)throw new F;a.append(cn.toAlphaNumericChar(Math.floor(h/100))),a.append(cn.toAlphaNumericChar(Math.floor(h/10)%10)),a.append(cn.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(i.available()<7)throw new F;const h=i.readBits(7);if(h>=100)throw new F;a.append(cn.toAlphaNumericChar(Math.floor(h/10))),a.append(cn.toAlphaNumericChar(h%10))}else if(l===1){if(i.available()<4)throw new F;const h=i.readBits(4);if(h>=10)throw new F;a.append(cn.toAlphaNumericChar(h))}}static parseECIValue(i){const a=i.readBits(8);if((a&128)===0)return a&127;if((a&192)===128){const l=i.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=i.readBits(16);return(a&31)<<16&4294967295|l}throw new F}}cn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",cn.GB2312_SUBSET=1;class To{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const a=i[0];i[0]=i[2],i[2]=a}}class Ns{constructor(){this.rsDecoder=new Ri(_t.QR_CODE_FIELD_256)}decodeBooleanArray(i,a){return this.decodeBitMatrix(Ze.parseFromBooleanArray(i),a)}decodeBitMatrix(i,a){const l=new Ki(i);let h=null;try{return this.decodeBitMatrixParser(l,a)}catch(f){h=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,a);return f.setOther(new To(!0)),f}catch(f){throw h!==null?h:f}}decodeBitMatrixParser(i,a){const l=i.readVersion(),h=i.readFormatInformation().getErrorCorrectionLevel(),f=i.readCodewords(),m=Na.getDataBlocks(f,l,h);let x=0;for(const R of m)x+=R.getNumDataCodewords();const A=new Uint8Array(x);let v=0;for(const R of m){const P=R.getCodewords(),B=R.getNumDataCodewords();this.correctErrors(P,B);for(let q=0;q<B;q++)A[v++]=P[q]}return cn.decode(A,l,h,a)}correctErrors(i,a){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-a)}catch{throw new k}for(let h=0;h<a;h++)i[h]=l[h]}}class Rs extends je{constructor(i,a,l){super(i,a),this.estimatedModuleSize=l}aboutEquals(i,a,l){if(Math.abs(a-this.getY())<=i&&Math.abs(l-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,a,l){const h=(this.getX()+a)/2,f=(this.getY()+i)/2,m=(this.estimatedModuleSize+l)/2;return new Rs(h,f,m)}}class Wi{constructor(i,a,l,h,f,m,x){this.image=i,this.startX=a,this.startY=l,this.width=h,this.height=f,this.moduleSize=m,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,a=this.height,l=this.width,h=i+l,f=this.startY+a/2,m=new Int32Array(3),x=this.image;for(let A=0;A<a;A++){const v=f+((A&1)===0?Math.floor((A+1)/2):-Math.floor((A+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=i;for(;R<h&&!x.get(R,v);)R++;let P=0;for(;R<h;){if(x.get(R,v))if(P===1)m[1]++;else if(P===2){if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,v,R);if(B!==null)return B}m[0]=m[2],m[1]=1,m[2]=0,P=1}else m[++P]++;else P===1&&P++,m[P]++;R++}if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,v,h);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new fe}static centerFromEnd(i,a){return a-i[2]-i[1]/2}foundPatternCross(i){const a=this.moduleSize,l=a/2;for(let h=0;h<3;h++)if(Math.abs(a-i[h])>=l)return!1;return!0}crossCheckVertical(i,a,l,h){const f=this.image,m=f.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let A=i;for(;A>=0&&f.get(a,A)&&x[1]<=l;)x[1]++,A--;if(A<0||x[1]>l)return NaN;for(;A>=0&&!f.get(a,A)&&x[0]<=l;)x[0]++,A--;if(x[0]>l)return NaN;for(A=i+1;A<m&&f.get(a,A)&&x[1]<=l;)x[1]++,A++;if(A===m||x[1]>l)return NaN;for(;A<m&&!f.get(a,A)&&x[2]<=l;)x[2]++,A++;if(x[2]>l)return NaN;const v=x[0]+x[1]+x[2];return 5*Math.abs(v-h)>=2*h?NaN:this.foundPatternCross(x)?Wi.centerFromEnd(x,A):NaN}handlePossibleCenter(i,a,l){const h=i[0]+i[1]+i[2],f=Wi.centerFromEnd(i,l),m=this.crossCheckVertical(a,f,2*i[1],h);if(!isNaN(m)){const x=(i[0]+i[1]+i[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(x,m,f))return v.combineEstimate(m,f,x);const A=new Rs(f,m,x);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class qs extends je{constructor(i,a,l,h){super(i,a),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,a,l){if(Math.abs(a-this.getY())<=i&&Math.abs(l-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,a,l){const h=this.count+1,f=(this.count*this.getX()+a)/h,m=(this.count*this.getY()+i)/h,x=(this.count*this.estimatedModuleSize+l)/h;return new qs(f,m,x,h)}}class yr{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class An{constructor(i,a){this.image=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const a=i!=null&&i.get(Be.TRY_HARDER)!==void 0,l=i!=null&&i.get(Be.PURE_BARCODE)!==void 0,h=this.image,f=h.getHeight(),m=h.getWidth();let x=Math.floor(3*f/(4*An.MAX_MODULES));(x<An.MIN_SKIP||a)&&(x=An.MIN_SKIP);let A=!1;const v=new Int32Array(5);for(let P=x-1;P<f&&!A;P+=x){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let B=0;for(let q=0;q<m;q++)if(h.get(q,P))(B&1)===1&&B++,v[B]++;else if((B&1)===0)if(B===4)if(An.foundPatternCross(v)){if(this.handlePossibleCenter(v,P,q,l)===!0)if(x=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const ee=this.findRowSkip();ee>v[2]&&(P+=ee-v[2]-x,q=m-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,B=3;continue}B=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,B=3;else v[++B]++;else v[B]++;An.foundPatternCross(v)&&this.handlePossibleCenter(v,P,m,l)===!0&&(x=v[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return je.orderBestPatterns(R),new yr(R)}static centerFromEnd(i,a){return a-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let a=0;for(let f=0;f<5;f++){const m=i[f];if(m===0)return!1;a+=m}if(a<7)return!1;const l=a/7,h=l/2;return Math.abs(l-i[0])<h&&Math.abs(l-i[1])<h&&Math.abs(3*l-i[2])<3*h&&Math.abs(l-i[3])<h&&Math.abs(l-i[4])<h}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,a,l,h){const f=this.getCrossCheckStateCount();let m=0;const x=this.image;for(;i>=m&&a>=m&&x.get(a-m,i-m);)f[2]++,m++;if(i<m||a<m)return!1;for(;i>=m&&a>=m&&!x.get(a-m,i-m)&&f[1]<=l;)f[1]++,m++;if(i<m||a<m||f[1]>l)return!1;for(;i>=m&&a>=m&&x.get(a-m,i-m)&&f[0]<=l;)f[0]++,m++;if(f[0]>l)return!1;const A=x.getHeight(),v=x.getWidth();for(m=1;i+m<A&&a+m<v&&x.get(a+m,i+m);)f[2]++,m++;if(i+m>=A||a+m>=v)return!1;for(;i+m<A&&a+m<v&&!x.get(a+m,i+m)&&f[3]<l;)f[3]++,m++;if(i+m>=A||a+m>=v||f[3]>=l)return!1;for(;i+m<A&&a+m<v&&x.get(a+m,i+m)&&f[4]<l;)f[4]++,m++;if(f[4]>=l)return!1;const R=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(R-h)<2*h&&An.foundPatternCross(f)}crossCheckVertical(i,a,l,h){const f=this.image,m=f.getHeight(),x=this.getCrossCheckStateCount();let A=i;for(;A>=0&&f.get(a,A);)x[2]++,A--;if(A<0)return NaN;for(;A>=0&&!f.get(a,A)&&x[1]<=l;)x[1]++,A--;if(A<0||x[1]>l)return NaN;for(;A>=0&&f.get(a,A)&&x[0]<=l;)x[0]++,A--;if(x[0]>l)return NaN;for(A=i+1;A<m&&f.get(a,A);)x[2]++,A++;if(A===m)return NaN;for(;A<m&&!f.get(a,A)&&x[3]<l;)x[3]++,A++;if(A===m||x[3]>=l)return NaN;for(;A<m&&f.get(a,A)&&x[4]<l;)x[4]++,A++;if(x[4]>=l)return NaN;const v=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(v-h)>=2*h?NaN:An.foundPatternCross(x)?An.centerFromEnd(x,A):NaN}crossCheckHorizontal(i,a,l,h){const f=this.image,m=f.getWidth(),x=this.getCrossCheckStateCount();let A=i;for(;A>=0&&f.get(A,a);)x[2]++,A--;if(A<0)return NaN;for(;A>=0&&!f.get(A,a)&&x[1]<=l;)x[1]++,A--;if(A<0||x[1]>l)return NaN;for(;A>=0&&f.get(A,a)&&x[0]<=l;)x[0]++,A--;if(x[0]>l)return NaN;for(A=i+1;A<m&&f.get(A,a);)x[2]++,A++;if(A===m)return NaN;for(;A<m&&!f.get(A,a)&&x[3]<l;)x[3]++,A++;if(A===m||x[3]>=l)return NaN;for(;A<m&&f.get(A,a)&&x[4]<l;)x[4]++,A++;if(x[4]>=l)return NaN;const v=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(v-h)>=h?NaN:An.foundPatternCross(x)?An.centerFromEnd(x,A):NaN}handlePossibleCenter(i,a,l,h){const f=i[0]+i[1]+i[2]+i[3]+i[4];let m=An.centerFromEnd(i,l),x=this.crossCheckVertical(a,Math.floor(m),i[2],f);if(!isNaN(x)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(x),i[2],f),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(x),Math.floor(m),i[2],f)))){const A=f/7;let v=!1;const R=this.possibleCenters;for(let P=0,B=R.length;P<B;P++){const q=R[P];if(q.aboutEquals(A,x,m)){R[P]=q.combineEstimate(x,m,A),v=!0;break}}if(!v){const P=new qs(m,x,A);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=An.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,a=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=An.CENTER_QUORUM&&(i++,a+=m.getEstimatedModuleSize());if(i<3)return!1;const h=a/l;let f=0;for(const m of this.possibleCenters)f+=Math.abs(m.getEstimatedModuleSize()-h);return f<=.05*a}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new fe;const a=this.possibleCenters;let l;if(i>3){let h=0,f=0;for(const A of this.possibleCenters){const v=A.getEstimatedModuleSize();h+=v,f+=v*v}l=h/i;let m=Math.sqrt(f/i-l*l);a.sort((A,v)=>{const R=Math.abs(v.getEstimatedModuleSize()-l),P=Math.abs(A.getEstimatedModuleSize()-l);return R<P?-1:R>P?1:0});const x=Math.max(.2*l,m);for(let A=0;A<a.length&&a.length>3;A++){const v=a[A];Math.abs(v.getEstimatedModuleSize()-l)>x&&(a.splice(A,1),A--)}}if(a.length>3){let h=0;for(const f of a)h+=f.getEstimatedModuleSize();l=h/a.length,a.sort((f,m)=>{if(m.getCount()===f.getCount()){const x=Math.abs(m.getEstimatedModuleSize()-l),A=Math.abs(f.getEstimatedModuleSize()-l);return x<A?1:x>A?-1:0}else return m.getCount()-f.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}An.CENTER_QUORUM=2,An.MIN_SKIP=3,An.MAX_MODULES=57;class Qi{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(Be.NEED_RESULT_POINT_CALLBACK);const l=new An(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const a=i.getTopLeft(),l=i.getTopRight(),h=i.getBottomLeft(),f=this.calculateModuleSize(a,l,h);if(f<1)throw new fe("No pattern found in proccess finder.");const m=Qi.computeDimension(a,l,h,f),x=Ye.getProvisionalVersionForDimension(m),A=x.getDimensionForVersion()-7;let v=null;if(x.getAlignmentPatternCenters().length>0){const q=l.getX()-a.getX()+h.getX(),$=l.getY()-a.getY()+h.getY(),ee=1-3/A,le=Math.floor(a.getX()+ee*(q-a.getX())),Ee=Math.floor(a.getY()+ee*($-a.getY()));for(let Le=4;Le<=16;Le<<=1)try{v=this.findAlignmentInRegion(f,le,Ee,Le);break}catch(Me){if(!(Me instanceof fe))throw Me}}const R=Qi.createTransform(a,l,h,v,m),P=Qi.sampleGrid(this.image,R,m);let B;return v===null?B=[h,a,l]:B=[h,a,l,v],new qi(P,B)}static createTransform(i,a,l,h,f){const m=f-3.5;let x,A,v,R;return h!==null?(x=h.getX(),A=h.getY(),v=m-3,R=v):(x=a.getX()-i.getX()+l.getX(),A=a.getY()-i.getY()+l.getY(),v=m,R=m),ui.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,v,R,3.5,m,i.getX(),i.getY(),a.getX(),a.getY(),x,A,l.getX(),l.getY())}static sampleGrid(i,a,l){return si.getInstance().sampleGridWithTransform(i,l,l,a)}static computeDimension(i,a,l,h){const f=Qe.round(je.distance(i,a)/h),m=Qe.round(je.distance(i,l)/h);let x=Math.floor((f+m)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new fe("Dimensions could be not found.")}return x}calculateModuleSize(i,a,l){return(this.calculateModuleSizeOneWay(i,a)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(a.getX()),Math.floor(a.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(i,a,l,h){let f=this.sizeOfBlackWhiteBlackRun(i,a,l,h),m=1,x=i-(l-i);x<0?(m=i/(i-x),x=0):x>=this.image.getWidth()&&(m=(this.image.getWidth()-1-i)/(x-i),x=this.image.getWidth()-1);let A=Math.floor(a-(h-a)*m);return m=1,A<0?(m=a/(a-A),A=0):A>=this.image.getHeight()&&(m=(this.image.getHeight()-1-a)/(A-a),A=this.image.getHeight()-1),x=Math.floor(i+(x-i)*m),f+=this.sizeOfBlackWhiteBlackRun(i,a,x,A),f-1}sizeOfBlackWhiteBlackRun(i,a,l,h){const f=Math.abs(h-a)>Math.abs(l-i);if(f){let q=i;i=a,a=q,q=l,l=h,h=q}const m=Math.abs(l-i),x=Math.abs(h-a);let A=-m/2;const v=i<l?1:-1,R=a<h?1:-1;let P=0;const B=l+v;for(let q=i,$=a;q!==B;q+=v){const ee=f?$:q,le=f?q:$;if(P===1===this.image.get(ee,le)){if(P===2)return Qe.distance(q,$,i,a);P++}if(A+=x,A>0){if($===h)break;$+=R,A-=m}}return P===2?Qe.distance(l+v,h,i,a):NaN}findAlignmentInRegion(i,a,l,h){const f=Math.floor(h*i),m=Math.max(0,a-f),x=Math.min(this.image.getWidth()-1,a+f);if(x-m<i*3)throw new fe("Alignment top exceeds estimated module size.");const A=Math.max(0,l-f),v=Math.min(this.image.getHeight()-1,l+f);if(v-A<i*3)throw new fe("Alignment bottom exceeds estimated module size.");return new Wi(this.image,m,A,x-m,v-A,i,this.resultPointCallback).find()}}class Zi{constructor(){this.decoder=new Ns}getDecoder(){return this.decoder}decode(i,a){let l,h;if(a!=null&&a.get(Be.PURE_BARCODE)!==void 0){const A=Zi.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(A,a),h=Zi.NO_POINTS}else{const A=new Qi(i.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(A.getBits(),a),h=A.getPoints()}l.getOther()instanceof To&&l.getOther().applyMirroredCorrection(h);const f=new Ue(l.getText(),l.getRawBytes(),void 0,h,Oe.QR_CODE,void 0),m=l.getByteSegments();m!==null&&f.putMetadata(yt.BYTE_SEGMENTS,m);const x=l.getECLevel();return x!==null&&f.putMetadata(yt.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(f.putMetadata(yt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(yt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(a===null||l===null)throw new fe;const h=this.moduleSize(a,i);let f=a[1],m=l[1],x=a[0],A=l[0];if(x>=A||f>=m)throw new fe;if(m-f!==A-x&&(A=x+(m-f),A>=i.getWidth()))throw new fe;const v=Math.round((A-x+1)/h),R=Math.round((m-f+1)/h);if(v<=0||R<=0)throw new fe;if(R!==v)throw new fe;const P=Math.floor(h/2);f+=P,x+=P;const B=x+Math.floor((v-1)*h)-A;if(B>0){if(B>P)throw new fe;x-=B}const q=f+Math.floor((R-1)*h)-m;if(q>0){if(q>P)throw new fe;f-=q}const $=new Ze(v,R);for(let ee=0;ee<R;ee++){const le=f+Math.floor(ee*h);for(let Ee=0;Ee<v;Ee++)i.get(x+Math.floor(Ee*h),le)&&$.set(Ee,ee)}return $}static moduleSize(i,a){const l=a.getHeight(),h=a.getWidth();let f=i[0],m=i[1],x=!0,A=0;for(;f<h&&m<l;){if(x!==a.get(f,m)){if(++A===5)break;x=!x}f++,m++}if(f===h||m===l)throw new fe;return(f-i[0])/7}}Zi.NO_POINTS=new Array;class Je{PDF417Common(){}static getBitCountSum(i){return Qe.sum(i)}static toIntArray(i){if(i==null||!i.length)return Je.EMPTY_INT_ARRAY;const a=new Int32Array(i.length);let l=0;for(const h of i)a[l++]=h;return a}static getCodeword(i){const a=ge.binarySearch(Je.SYMBOL_TABLE,i&262143);return a<0?-1:(Je.CODEWORD_TABLE[a]-1)%Je.NUMBER_OF_CODEWORDS}}Je.NUMBER_OF_CODEWORDS=929,Je.MAX_CODEWORDS_IN_BARCODE=Je.NUMBER_OF_CODEWORDS-1,Je.MIN_ROWS_IN_BARCODE=3,Je.MAX_ROWS_IN_BARCODE=90,Je.MODULES_IN_CODEWORD=17,Je.MODULES_IN_STOP_PATTERN=18,Je.BARS_IN_MODULE=8,Je.EMPTY_INT_ARRAY=new Int32Array([]),Je.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Je.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Os{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class nt{static detectMultiple(i,a,l){let h=i.getBlackMatrix(),f=nt.detect(l,h);return f.length||(h=h.clone(),h.rotate180(),f=nt.detect(l,h)),new Os(h,f)}static detect(i,a){const l=new Array;let h=0,f=0,m=!1;for(;h<a.getHeight();){const x=nt.findVertices(a,h,f);if(x[0]==null&&x[3]==null){if(!m)break;m=!1,f=0;for(const A of l)A[1]!=null&&(h=Math.trunc(Math.max(h,A[1].getY()))),A[3]!=null&&(h=Math.max(h,Math.trunc(A[3].getY())));h+=nt.ROW_STEP;continue}if(m=!0,l.push(x),!i)break;x[2]!=null?(f=Math.trunc(x[2].getX()),h=Math.trunc(x[2].getY())):(f=Math.trunc(x[4].getX()),h=Math.trunc(x[4].getY()))}return l}static findVertices(i,a,l){const h=i.getHeight(),f=i.getWidth(),m=new Array(8);return nt.copyToResult(m,nt.findRowsWithPattern(i,h,f,a,l,nt.START_PATTERN),nt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),a=Math.trunc(m[4].getY())),nt.copyToResult(m,nt.findRowsWithPattern(i,h,f,a,l,nt.STOP_PATTERN),nt.INDEXES_STOP_PATTERN),m}static copyToResult(i,a,l){for(let h=0;h<l.length;h++)i[l[h]]=a[h]}static findRowsWithPattern(i,a,l,h,f,m){const x=new Array(4);let A=!1;const v=new Int32Array(m.length);for(;h<a;h+=nt.ROW_STEP){let P=nt.findGuardPattern(i,f,h,l,!1,m,v);if(P!=null){for(;h>0;){const B=nt.findGuardPattern(i,f,--h,l,!1,m,v);if(B!=null)P=B;else{h++;break}}x[0]=new je(P[0],h),x[1]=new je(P[1],h),A=!0;break}}let R=h+1;if(A){let P=0,B=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;R<a;R++){const q=nt.findGuardPattern(i,B[0],R,l,!1,m,v);if(q!=null&&Math.abs(B[0]-q[0])<nt.MAX_PATTERN_DRIFT&&Math.abs(B[1]-q[1])<nt.MAX_PATTERN_DRIFT)B=q,P=0;else{if(P>nt.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,x[2]=new je(B[0],R),x[3]=new je(B[1],R)}return R-h<nt.BARCODE_MIN_HEIGHT&&ge.fill(x,null),x}static findGuardPattern(i,a,l,h,f,m,x){ge.fillWithin(x,0,x.length,0);let A=a,v=0;for(;i.get(A,l)&&A>0&&v++<nt.MAX_PIXEL_DRIFT;)A--;let R=A,P=0,B=m.length;for(let q=f;R<h;R++)if(i.get(R,l)!==q)x[P]++;else{if(P===B-1){if(nt.patternMatchVariance(x,m,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return new Int32Array([A,R]);A+=x[0]+x[1],K.arraycopy(x,2,x,0,P-1),x[P-1]=0,x[P]=0,P--}else P++;x[P]=1,q=!q}return P===B-1&&nt.patternMatchVariance(x,m,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE?new Int32Array([A,R-1]):null}static patternMatchVariance(i,a,l){let h=i.length,f=0,m=0;for(let v=0;v<h;v++)f+=i[v],m+=a[v];if(f<m)return 1/0;let x=f/m;l*=x;let A=0;for(let v=0;v<h;v++){let R=i[v],P=a[v]*x,B=R>P?R-P:P-R;if(B>l)return 1/0;A+=B}return A/f}}nt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),nt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),nt.MAX_AVG_VARIANCE=.42,nt.MAX_INDIVIDUAL_VARIANCE=.8,nt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),nt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),nt.MAX_PIXEL_DRIFT=3,nt.MAX_PATTERN_DRIFT=5,nt.SKIPPED_ROW_COUNT_MAX=25,nt.ROW_STEP=5,nt.BARCODE_MIN_HEIGHT=10;class un{constructor(i,a){if(a.length===0)throw new I;this.field=i;let l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),K.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let h=0;for(let f of this.coefficients)h=this.field.add(h,f);return h}let a=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)a=this.field.add(this.field.multiply(i,a),this.coefficients[h]);return a}add(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,l=i.coefficients;if(a.length>l.length){let m=a;a=l,l=m}let h=new Int32Array(l.length),f=l.length-a.length;K.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=this.field.add(a[m-f],l[m]);return new un(this.field,h)}subtract(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof un?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new un(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,h=i.coefficients,f=h.length,m=new Int32Array(l+f-1);for(let x=0;x<l;x++){let A=a[x];for(let v=0;v<f;v++)m[x+v]=this.field.add(m[x+v],this.field.multiply(A,h[v]))}return new un(this.field,m)}negative(){let i=this.coefficients.length,a=new Int32Array(i);for(let l=0;l<i;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new un(this.field,a)}multiplyScalar(i){if(i===0)return new un(this.field,new Int32Array([0]));if(i===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let h=0;h<a;h++)l[h]=this.field.multiply(this.coefficients[h],i);return new un(this.field,l)}multiplyByMonomial(i,a){if(i<0)throw new I;if(a===0)return new un(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+i);for(let f=0;f<l;f++)h[f]=this.field.multiply(this.coefficients[f],a);return new un(this.field,h)}toString(){let i=new Y;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(a===0||l!==1)&&i.append(l),a!==0&&(a===1?i.append("x"):(i.append("x^"),i.append(a))))}return i.toString()}}class Ys{add(i,a){return(i+a)%this.modulus}subtract(i,a){return(this.modulus+i-a)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}inverse(i){if(i===0)throw new nr;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class tn extends Ys{constructor(i,a){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let h=0;h<i;h++)this.expTable[h]=l,l=l*a%i;for(let h=0;h<i-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new un(this,new Int32Array([0])),this.one=new un(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new I;if(a===0)return this.zero;let l=new Int32Array(i+1);return l[0]=a,new un(this,l)}}tn.PDF417_GF=new tn(Je.NUMBER_OF_CODEWORDS,3);class Dr{constructor(){this.field=tn.PDF417_GF}decode(i,a,l){let h=new un(this.field,i),f=new Int32Array(a),m=!1;for(let $=a;$>0;$--){let ee=h.evaluateAt(this.field.exp($));f[a-$]=ee,ee!==0&&(m=!0)}if(!m)return 0;let x=this.field.getOne();if(l!=null)for(const $ of l){let ee=this.field.exp(i.length-1-$),le=new un(this.field,new Int32Array([this.field.subtract(0,ee),1]));x=x.multiply(le)}let A=new un(this.field,f),v=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),A,a),R=v[0],P=v[1],B=this.findErrorLocations(R),q=this.findErrorMagnitudes(P,R,B);for(let $=0;$<B.length;$++){let ee=i.length-1-this.field.log(B[$]);if(ee<0)throw k.getChecksumInstance();i[ee]=this.field.subtract(i[ee],q[$])}return B.length}runEuclideanAlgorithm(i,a,l){if(i.getDegree()<a.getDegree()){let B=i;i=a,a=B}let h=i,f=a,m=this.field.getZero(),x=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let B=h,q=m;if(h=f,m=x,h.isZero())throw k.getChecksumInstance();f=B;let $=this.field.getZero(),ee=h.getCoefficient(h.getDegree()),le=this.field.inverse(ee);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){let Ee=f.getDegree()-h.getDegree(),Le=this.field.multiply(f.getCoefficient(f.getDegree()),le);$=$.add(this.field.buildMonomial(Ee,Le)),f=f.subtract(h.multiplyByMonomial(Ee,Le))}x=$.multiply(m).subtract(q).negative()}let A=x.getCoefficient(0);if(A===0)throw k.getChecksumInstance();let v=this.field.inverse(A),R=x.multiply(v),P=f.multiply(v);return[R,P]}findErrorLocations(i){let a=i.getDegree(),l=new Int32Array(a),h=0;for(let f=1;f<this.field.getSize()&&h<a;f++)i.evaluateAt(f)===0&&(l[h]=this.field.inverse(f),h++);if(h!==a)throw k.getChecksumInstance();return l}findErrorMagnitudes(i,a,l){let h=a.getDegree(),f=new Int32Array(h);for(let v=1;v<=h;v++)f[h-v]=this.field.multiply(v,a.getCoefficient(v));let m=new un(this.field,f),x=l.length,A=new Int32Array(x);for(let v=0;v<x;v++){let R=this.field.inverse(l[v]),P=this.field.subtract(0,i.evaluateAt(R)),B=this.field.inverse(m.evaluateAt(R));A[v]=this.field.multiply(P,B)}return A}}class Mr{constructor(i,a,l,h,f){i instanceof Mr?this.constructor_2(i):this.constructor_1(i,a,l,h,f)}constructor_1(i,a,l,h,f){const m=a==null||l==null,x=h==null||f==null;if(m&&x)throw new fe;m?(a=new je(0,h.getY()),l=new je(0,f.getY())):x&&(h=new je(i.getWidth()-1,a.getY()),f=new je(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=a,this.bottomLeft=l,this.topRight=h,this.bottomRight=f,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),f.getX())),this.minY=Math.trunc(Math.min(a.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,a){return i==null?a:a==null?i:new Mr(i.image,i.topLeft,i.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(i,a,l){let h=this.topLeft,f=this.bottomLeft,m=this.topRight,x=this.bottomRight;if(i>0){let A=l?this.topLeft:this.topRight,v=Math.trunc(A.getY()-i);v<0&&(v=0);let R=new je(A.getX(),v);l?h=R:m=R}if(a>0){let A=l?this.bottomLeft:this.bottomRight,v=Math.trunc(A.getY()+a);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let R=new je(A.getX(),v);l?f=R:x=R}return new Mr(this.image,h,f,m,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xs{constructor(i,a,l,h){this.columnCount=i,this.errorCorrectionLevel=h,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ys{constructor(){this.buffer=""}static form(i,a){let l=-1;function h(m,x,A,v,R,P){if(m==="%%")return"%";if(a[++l]===void 0)return;m=v?parseInt(v.substr(1)):void 0;let B=R?parseInt(R.substr(1)):void 0,q;switch(P){case"s":q=a[l];break;case"c":q=a[l][0];break;case"f":q=parseFloat(a[l]).toFixed(m);break;case"p":q=parseFloat(a[l]).toPrecision(m);break;case"e":q=parseFloat(a[l]).toExponential(m);break;case"x":q=parseInt(a[l]).toString(B||16);break;case"d":q=parseFloat(parseInt(a[l],B||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let $=parseInt(A),ee=A&&A[0]+""=="0"?"0":" ";for(;q.length<$;)q=x!==void 0?q+ee:ee+q;return q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,h)}format(i,...a){this.buffer+=ys.form(i,a)}toString(){return this.buffer}}class Lr{constructor(i){this.boundingBox=new Mr(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let a=this.getCodeword(i);if(a!=null)return a;for(let l=1;l<Lr.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(i)-l;if(h>=0&&(a=this.codewords[h],a!=null)||(h=this.imageRowToCodewordIndex(i)+l,h<this.codewords.length&&(a=this.codewords[h],a!=null)))return a}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,a){this.codewords[this.imageRowToCodewordIndex(i)]=a}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new ys;let a=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",a++);continue}i.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return i.toString()}}Lr.MAX_NEARBY_DISTANCE=5;class or{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let a=this.values.get(i);a==null&&(a=0),a++,this.values.set(i,a)}getValue(){let i=-1,a=new Array;for(const[l,h]of this.values.entries()){const f={getKey:()=>l,getValue:()=>h};f.getValue()>i?(i=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===i&&a.push(f.getKey())}return Je.toIntArray(a)}getConfidence(i){return this.values.get(i)}}class _r extends Lr{constructor(i,a){super(i),this._isLeft=a}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,i);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.imageRowToCodewordIndex(Math.trunc(f.getY())),A=-1,v=1,R=0;for(let P=m;P<x;P++){if(a[P]==null)continue;let B=a[P],q=B.getRowNumber()-A;if(q===0)R++;else if(q===1)v=Math.max(v,R),R=1,A=B.getRowNumber();else if(q<0||B.getRowNumber()>=i.getRowCount()||q>P)a[P]=null;else{let $;v>2?$=(v-2)*q:$=q;let ee=$>=P;for(let le=1;le<=$&&!ee;le++)ee=a[P-le]!=null;ee?a[P]=null:(A=B.getRowNumber(),R=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let a=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=a.length)continue;a[h]++}return a}adjustIncompleteIndicatorColumnRowNumbers(i){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.getCodewords(),A=-1;for(let v=f;v<m;v++){if(x[v]==null)continue;let R=x[v];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-A;P===0||(P===1?A=R.getRowNumber():R.getRowNumber()>=i.getRowCount()?x[v]=null:A=R.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),a=new or,l=new or,h=new or,f=new or;for(let x of i){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let A=x.getValue()%30,v=x.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:l.setValue(A*3+1);break;case 1:f.setValue(A/3),h.setValue(A%3);break;case 2:a.setValue(A+1);break}}if(a.getValue().length===0||l.getValue().length===0||h.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<Je.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>Je.MAX_ROWS_IN_BARCODE)return null;let m=new Xs(a.getValue()[0],l.getValue()[0],h.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,m),m}removeIncorrectCodewords(i,a){for(let l=0;l<i.length;l++){let h=i[l];if(i[l]==null)continue;let f=h.getValue()%30,m=h.getRowNumber();if(m>a.getRowCount()){i[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:f*3+1!==a.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(f/3)!==a.getErrorCorrectionLevel()||f%3!==a.getRowCountLowerPart())&&(i[l]=null);break;case 2:f+1!==a.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Yn{constructor(i,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=Je.MAX_CODEWORDS_IN_BARCODE,a;do a=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(a,h,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&a[l]!=null&&i[l].getRowNumber()===a[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let f=this.detectionResultColumns[h].getCodewords()[l];f!=null&&(f.setRowNumber(i[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=this.barcodeColumnCount+1;m>0&&f<this.ADJUST_ROW_NUMBER_SKIP;m--){let x=this.detectionResultColumns[m].getCodewords()[l];x!=null&&(f=Yn.adjustRowNumberIfValid(h,f,x),x.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=1;m<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;m++){let x=this.detectionResultColumns[m].getCodewords()[l];x!=null&&(f=Yn.adjustRowNumberIfValid(h,f,x),x.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),a=0):++a),a}adjustRowNumbers(i,a,l){if(!this.detectionResultColumns[i-1])return;let h=l[a],f=this.detectionResultColumns[i-1].getCodewords(),m=f;this.detectionResultColumns[i+1]!=null&&(m=this.detectionResultColumns[i+1].getCodewords());let x=new Array(14);x[2]=f[a],x[3]=m[a],a>0&&(x[0]=l[a-1],x[4]=f[a-1],x[5]=m[a-1]),a>1&&(x[8]=l[a-2],x[10]=f[a-2],x[11]=m[a-2]),a<l.length-1&&(x[1]=l[a+1],x[6]=f[a+1],x[7]=m[a+1]),a<l.length-2&&(x[9]=l[a+2],x[12]=f[a+2],x[13]=m[a+2]);for(let A of x)if(Yn.adjustRowNumber(h,A))return}static adjustRowNumber(i,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===i.getBucket()?(i.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,a){this.detectionResultColumns[i]=a}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new ys;for(let l=0;l<i.getCodewords().length;l++){a.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){a.format("    |   ");continue}let f=this.detectionResultColumns[h].getCodewords()[l];if(f==null){a.format("    |   ");continue}a.format(" %3d|%3d",f.getRowNumber(),f.getValue())}a.format("%n")}return a.toString()}}class lr{constructor(i,a,l,h){this.rowNumber=lr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==lr.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}lr.BARCODE_ROW_UNKNOWN=-1;class Rn{static initialize(){for(let i=0;i<Je.SYMBOL_TABLE.length;i++){let a=Je.SYMBOL_TABLE[i],l=a&1;for(let h=0;h<Je.BARS_IN_MODULE;h++){let f=0;for(;(a&1)===l;)f+=1,a>>=1;l=a&1,Rn.RATIOS_TABLE[i]||(Rn.RATIOS_TABLE[i]=new Array(Je.BARS_IN_MODULE)),Rn.RATIOS_TABLE[i][Je.BARS_IN_MODULE-h-1]=Math.fround(f/Je.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let a=Rn.getDecodedCodewordValue(Rn.sampleBitCounts(i));return a!==-1?a:Rn.getClosestDecodedValue(i)}static sampleBitCounts(i){let a=Qe.sum(i),l=new Int32Array(Je.BARS_IN_MODULE),h=0,f=0;for(let m=0;m<Je.MODULES_IN_CODEWORD;m++){let x=a/(2*Je.MODULES_IN_CODEWORD)+m*a/Je.MODULES_IN_CODEWORD;f+i[h]<=x&&(f+=i[h],h++),l[h]++}return l}static getDecodedCodewordValue(i){let a=Rn.getBitValue(i);return Je.getCodeword(a)===-1?-1:a}static getBitValue(i){let a=0;for(let l=0;l<i.length;l++)for(let h=0;h<i[l];h++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(i){let a=Qe.sum(i),l=new Array(Je.BARS_IN_MODULE);if(a>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(i[m]/a);let h=pn.MAX_VALUE,f=-1;this.bSymbolTableReady||Rn.initialize();for(let m=0;m<Rn.RATIOS_TABLE.length;m++){let x=0,A=Rn.RATIOS_TABLE[m];for(let v=0;v<Je.BARS_IN_MODULE;v++){let R=Math.fround(A[v]-l[v]);if(x+=Math.fround(R*R),x>=h)break}x<h&&(h=x,f=Je.SYMBOL_TABLE[m])}return f}}Rn.bSymbolTableReady=!1,Rn.RATIOS_TABLE=new Array(Je.SYMBOL_TABLE.length).map(L=>new Array(Je.BARS_IN_MODULE));class _s{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Ra{static parseLong(i,a=void 0){return parseInt(i,a)}}class As extends _{}As.kind="NullPointerException";class Oa{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,a,l){if(i==null)throw new As;if(a<0||a>i.length||l<0||a+l>i.length||a+l<0)throw new z;if(l===0)return;for(let h=0;h<l;h++)this.write(i[a+h])}flush(){}close(){}}class Wr extends _{}class Da extends Oa{constructor(i=32){if(super(),this.count=0,i<0)throw new I("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new Wr;l=Q.MAX_VALUE}this.buf=ge.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,a,l){if(a<0||a>i.length||l<0||a+l-i.length>0)throw new z;this.ensureCapacity(this.count+l),K.arraycopy(i,a,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ge.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Wt;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Wt||(Wt={}));function Ds(){if(typeof window<"u")return window.BigInt||null;if(typeof Ih<"u")return Ih.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ks;function Pr(L){if(typeof Ks>"u"&&(Ks=Ds()),Ks===null)throw new Error("BigInt is not supported!");return Ks(L)}function Ws(){let L=[];L[0]=Pr(1);let i=Pr(900);L[1]=i;for(let a=2;a<16;a++)L[a]=L[a-1]*i;return L}class pe{static decode(i,a){let l=new Y(""),h=V.ISO8859_1;l.enableDecoding(h);let f=1,m=i[f++],x=new _s;for(;f<i[0];){switch(m){case pe.TEXT_COMPACTION_MODE_LATCH:f=pe.textCompaction(i,f,l);break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:f=pe.byteCompaction(m,i,h,f,l);break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[f++]);break;case pe.NUMERIC_COMPACTION_MODE_LATCH:f=pe.numericCompaction(i,f,l);break;case pe.ECI_CHARSET:V.getCharacterSetECIByValue(i[f++]);break;case pe.ECI_GENERAL_PURPOSE:f+=2;break;case pe.ECI_USER_DEFINED:f++;break;case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=pe.decodeMacroBlock(i,f,x);break;case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:throw new F;default:f--,f=pe.textCompaction(i,f,l);break}if(f<i.length)m=i[f++];else throw F.getFormatInstance()}if(l.length()===0)throw F.getFormatInstance();let A=new Jt(null,l.toString(),null,a);return A.setOther(x),A}static decodeMacroBlock(i,a,l){if(a+pe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw F.getFormatInstance();let h=new Int32Array(pe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<pe.NUMBER_OF_SEQUENCE_CODEWORDS;x++,a++)h[x]=i[a];l.setSegmentIndex(Q.parseInt(pe.decodeBase900toBase10(h,pe.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new Y;a=pe.textCompaction(i,a,f),l.setFileId(f.toString());let m=-1;for(i[a]===pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=a+1);a<i[0];)switch(i[a]){case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,i[a]){case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new Y;a=pe.textCompaction(i,a+1,x),l.setFileName(x.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new Y;a=pe.textCompaction(i,a+1,A),l.setSender(A.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new Y;a=pe.textCompaction(i,a+1,v),l.setAddressee(v.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new Y;a=pe.numericCompaction(i,a+1,R),l.setSegmentCount(Q.parseInt(R.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Y;a=pe.numericCompaction(i,a+1,P),l.setTimestamp(Ra.parseLong(P.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new Y;a=pe.numericCompaction(i,a+1,B),l.setChecksum(Q.parseInt(B.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new Y;a=pe.numericCompaction(i,a+1,q),l.setFileSize(Ra.parseLong(q.toString()));break;default:throw F.getFormatInstance()}break;case pe.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(m!==-1){let x=a-m;l.isLastSegment()&&x--,l.setOptionalData(ge.copyOfRange(i,m,m+x))}return a}static textCompaction(i,a,l){let h=new Int32Array((i[0]-a)*2),f=new Int32Array((i[0]-a)*2),m=0,x=!1;for(;a<i[0]&&!x;){let A=i[a++];if(A<pe.TEXT_COMPACTION_MODE_LATCH)h[m]=A/30,h[m+1]=A%30,m+=2;else switch(A){case pe.TEXT_COMPACTION_MODE_LATCH:h[m++]=pe.TEXT_COMPACTION_MODE_LATCH;break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:a--,x=!0;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=i[a++],f[m]=A,m++;break}}return pe.decodeTextCompaction(h,f,m,l),a}static decodeTextCompaction(i,a,l,h){let f=Wt.ALPHA,m=Wt.ALPHA,x=0;for(;x<l;){let A=i[x],v="";switch(f){case Wt.ALPHA:if(A<26)v=String.fromCharCode(65+A);else switch(A){case 26:v=" ";break;case pe.LL:f=Wt.LOWER;break;case pe.ML:f=Wt.MIXED;break;case pe.PS:m=f,f=Wt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case pe.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break;case Wt.LOWER:if(A<26)v=String.fromCharCode(97+A);else switch(A){case 26:v=" ";break;case pe.AS:m=f,f=Wt.ALPHA_SHIFT;break;case pe.ML:f=Wt.MIXED;break;case pe.PS:m=f,f=Wt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case pe.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break;case Wt.MIXED:if(A<pe.PL)v=pe.MIXED_CHARS[A];else switch(A){case pe.PL:f=Wt.PUNCT;break;case 26:v=" ";break;case pe.LL:f=Wt.LOWER;break;case pe.AL:f=Wt.ALPHA;break;case pe.PS:m=f,f=Wt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case pe.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break;case Wt.PUNCT:if(A<pe.PAL)v=pe.PUNCT_CHARS[A];else switch(A){case pe.PAL:f=Wt.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case pe.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break;case Wt.ALPHA_SHIFT:if(f=m,A<26)v=String.fromCharCode(65+A);else switch(A){case 26:v=" ";break;case pe.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break;case Wt.PUNCT_SHIFT:if(f=m,A<pe.PAL)v=pe.PUNCT_CHARS[A];else switch(A){case pe.PAL:f=Wt.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case pe.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break}v!==""&&h.append(v),x++}}static byteCompaction(i,a,l,h,f){let m=new Da,x=0,A=0,v=!1;switch(i){case pe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=a[h++];for(;h<a[0]&&!v;)switch(R[x++]=P,A=900*A+P,P=a[h++],P){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:h--,v=!0;break;default:if(x%5===0&&x>0){for(let B=0;B<6;++B)m.write(Number(Pr(A)>>Pr(8*(5-B))));A=0,x=0}break}h===a[0]&&P<pe.TEXT_COMPACTION_MODE_LATCH&&(R[x++]=P);for(let B=0;B<x;B++)m.write(R[B]);break;case pe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<a[0]&&!v;){let B=a[h++];if(B<pe.TEXT_COMPACTION_MODE_LATCH)x++,A=900*A+B;else switch(B){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:h--,v=!0;break}if(x%5===0&&x>0){for(let q=0;q<6;++q)m.write(Number(Pr(A)>>Pr(8*(5-q))));A=0,x=0}}break}return f.append(W.decode(m.toByteArray(),l)),h}static numericCompaction(i,a,l){let h=0,f=!1,m=new Int32Array(pe.MAX_NUMERIC_CODEWORDS);for(;a<i[0]&&!f;){let x=i[a++];if(a===i[0]&&(f=!0),x<pe.TEXT_COMPACTION_MODE_LATCH)m[h]=x,h++;else switch(x){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:a--,f=!0;break}(h%pe.MAX_NUMERIC_CODEWORDS===0||x===pe.NUMERIC_COMPACTION_MODE_LATCH||f)&&h>0&&(l.append(pe.decodeBase900toBase10(m,h)),h=0)}return a}static decodeBase900toBase10(i,a){let l=Pr(0);for(let f=0;f<a;f++)l+=pe.EXP900[a-f-1]*Pr(i[f]);let h=l.toString();if(h.charAt(0)!=="1")throw new F;return h.substring(1)}}pe.TEXT_COMPACTION_MODE_LATCH=900,pe.BYTE_COMPACTION_MODE_LATCH=901,pe.NUMERIC_COMPACTION_MODE_LATCH=902,pe.BYTE_COMPACTION_MODE_LATCH_6=924,pe.ECI_USER_DEFINED=925,pe.ECI_GENERAL_PURPOSE=926,pe.ECI_CHARSET=927,pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pe.MACRO_PDF417_TERMINATOR=922,pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pe.MAX_NUMERIC_CODEWORDS=15,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pe.PL=25,pe.LL=27,pe.AS=27,pe.ML=28,pe.AL=28,pe.PS=29,pe.PAL=29,pe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,pe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",pe.EXP900=Ds()?Ws():[],pe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class dt{constructor(){}static decode(i,a,l,h,f,m,x){let A=new Mr(i,a,l,h,f),v=null,R=null,P;for(let $=!0;;$=!1){if(a!=null&&(v=dt.getRowIndicatorColumn(i,A,a,!0,m,x)),h!=null&&(R=dt.getRowIndicatorColumn(i,A,h,!1,m,x)),P=dt.merge(v,R),P==null)throw fe.getNotFoundInstance();let ee=P.getBoundingBox();if($&&ee!=null&&(ee.getMinY()<A.getMinY()||ee.getMaxY()>A.getMaxY()))A=ee;else break}P.setBoundingBox(A);let B=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,v),P.setDetectionResultColumn(B,R);let q=v!=null;for(let $=1;$<=B;$++){let ee=q?$:B-$;if(P.getDetectionResultColumn(ee)!==void 0)continue;let le;ee===0||ee===B?le=new _r(A,ee===0):le=new Lr(A),P.setDetectionResultColumn(ee,le);let Ee=-1,Le=Ee;for(let Me=A.getMinY();Me<=A.getMaxY();Me++){if(Ee=dt.getStartColumn(P,ee,Me,q),Ee<0||Ee>A.getMaxX()){if(Le===-1)continue;Ee=Le}let Re=dt.detectCodeword(i,A.getMinX(),A.getMaxX(),q,Ee,Me,m,x);Re!=null&&(le.setCodeword(Me,Re),Le=Ee,m=Math.min(m,Re.getWidth()),x=Math.max(x,Re.getWidth()))}}return dt.createDecoderResult(P)}static merge(i,a){if(i==null&&a==null)return null;let l=dt.getBarcodeMetadata(i,a);if(l==null)return null;let h=Mr.merge(dt.adjustBoundingBox(i),dt.adjustBoundingBox(a));return new Yn(l,h)}static adjustBoundingBox(i){if(i==null)return null;let a=i.getRowHeights();if(a==null)return null;let l=dt.getMax(a),h=0;for(let x of a)if(h+=l-x,x>0)break;let f=i.getCodewords();for(let x=0;h>0&&f[x]==null;x++)h--;let m=0;for(let x=a.length-1;x>=0&&(m+=l-a[x],!(a[x]>0));x--);for(let x=f.length-1;m>0&&f[x]==null;x--)m--;return i.getBoundingBox().addMissingRows(h,m,i.isLeft())}static getMax(i){let a=-1;for(let l of i)a=Math.max(a,l);return a}static getBarcodeMetadata(i,a){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let h;return a==null||(h=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(i,a,l,h,f,m){let x=new _r(a,h);for(let A=0;A<2;A++){let v=A===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let P=Math.trunc(Math.trunc(l.getY()));P<=a.getMaxY()&&P>=a.getMinY();P+=v){let B=dt.detectCodeword(i,0,i.getWidth(),h,R,P,f,m);B!=null&&(x.setCodeword(P,B),h?R=B.getStartX():R=B.getEndX())}}return x}static adjustCodewordCount(i,a){let l=a[0][1],h=l.getValue(),f=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-dt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(h.length===0){if(f<1||f>Je.MAX_CODEWORDS_IN_BARCODE)throw fe.getNotFoundInstance();l.setValue(f)}else h[0]!==f&&l.setValue(f)}static createDecoderResult(i){let a=dt.createBarcodeMatrix(i);dt.adjustCodewordCount(i,a);let l=new Array,h=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),f=[],m=new Array;for(let A=0;A<i.getBarcodeRowCount();A++)for(let v=0;v<i.getBarcodeColumnCount();v++){let R=a[A][v+1].getValue(),P=A*i.getBarcodeColumnCount()+v;R.length===0?l.push(P):R.length===1?h[P]=R[0]:(m.push(P),f.push(R))}let x=new Array(f.length);for(let A=0;A<x.length;A++)x[A]=f[A];return dt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),h,Je.toIntArray(l),Je.toIntArray(m),x)}static createDecoderResultFromAmbiguousValues(i,a,l,h,f){let m=new Int32Array(h.length),x=100;for(;x-- >0;){for(let A=0;A<m.length;A++)a[h[A]]=f[A][m[A]];try{return dt.decodeCodewords(a,i,l)}catch(A){if(!(A instanceof k))throw A}if(m.length===0)throw k.getChecksumInstance();for(let A=0;A<m.length;A++)if(m[A]<f[A].length-1){m[A]++;break}else if(m[A]=0,A===m.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(i){let a=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let h=0;h<a.length;h++)for(let f=0;f<a[h].length;f++)a[h][f]=new or;let l=0;for(let h of i.getDetectionResultColumns()){if(h!=null){for(let f of h.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=0){if(m>=a.length)continue;a[m][l].setValue(f.getValue())}}}l++}return a}static isValidBarcodeColumn(i,a){return a>=0&&a<=i.getBarcodeColumnCount()+1}static getStartColumn(i,a,l,h){let f=h?1:-1,m=null;if(dt.isValidBarcodeColumn(i,a-f)&&(m=i.getDetectionResultColumn(a-f).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=i.getDetectionResultColumn(a).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(dt.isValidBarcodeColumn(i,a-f)&&(m=i.getDetectionResultColumn(a-f).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let x=0;for(;dt.isValidBarcodeColumn(i,a-f);){a-=f;for(let A of i.getDetectionResultColumn(a).getCodewords())if(A!=null)return(h?A.getEndX():A.getStartX())+f*x*(A.getEndX()-A.getStartX());x++}return h?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,a,l,h,f,m,x,A){f=dt.adjustCodewordStartColumn(i,a,l,h,f,m);let v=dt.getModuleBitCount(i,a,l,h,f,m);if(v==null)return null;let R,P=Qe.sum(v);if(h)R=f+P;else{for(let $=0;$<v.length/2;$++){let ee=v[$];v[$]=v[v.length-1-$],v[v.length-1-$]=ee}R=f,f=R-P}if(!dt.checkCodewordSkew(P,x,A))return null;let B=Rn.getDecodedValue(v),q=Je.getCodeword(B);return q===-1?null:new lr(f,R,dt.getCodewordBucketNumber(B),q)}static getModuleBitCount(i,a,l,h,f,m){let x=f,A=new Int32Array(8),v=0,R=h?1:-1,P=h;for(;(h?x<l:x>=a)&&v<A.length;)i.get(x,m)===P?(A[v]++,x+=R):(v++,P=!P);return v===A.length||x===(h?l:a)&&v===A.length-1?A:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,a,l,h,f,m){let x=f,A=h?-1:1;for(let v=0;v<2;v++){for(;(h?x>=a:x<l)&&h===i.get(x,m);){if(Math.abs(f-x)>dt.CODEWORD_SKEW_SIZE)return f;x+=A}A=-A,h=!h}return x}static checkCodewordSkew(i,a,l){return a-dt.CODEWORD_SKEW_SIZE<=i&&i<=l+dt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,a,l){if(i.length===0)throw F.getFormatInstance();let h=1<<a+1,f=dt.correctErrors(i,l,h);dt.verifyCodewordCount(i,h);let m=pe.decode(i,""+a);return m.setErrorsCorrected(f),m.setErasures(l.length),m}static correctErrors(i,a,l){if(a!=null&&a.length>l/2+dt.MAX_ERRORS||l<0||l>dt.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return dt.errorCorrection.decode(i,l,a)}static verifyCodewordCount(i,a){if(i.length<4)throw F.getFormatInstance();let l=i[0];if(l>i.length)throw F.getFormatInstance();if(l===0)if(a<i.length)i[0]=i.length-a;else throw F.getFormatInstance()}static getBitCountForCodeword(i){let a=new Int32Array(8),l=0,h=a.length-1;for(;!((i&1)!==l&&(l=i&1,h--,h<0));)a[h]++,i>>=1;return a}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return dt.getCodewordBucketNumber(dt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let a=new ys;for(let l=0;l<i.length;l++){a.format("Row %2d: ",l);for(let h=0;h<i[l].length;h++){let f=i[l][h];f.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}a.format("%n")}return a.toString()}}dt.CODEWORD_SKEW_SIZE=2,dt.MAX_ERRORS=3,dt.MAX_EC_CODEWORDS=512,dt.errorCorrection=new Dr;class Un{decode(i,a=null){let l=Un.decode(i,a,!1);if(l==null||l.length===0||l[0]==null)throw fe.getNotFoundInstance();return l[0]}decodeMultiple(i,a=null){try{return Un.decode(i,a,!0)}catch(l){throw l instanceof F||l instanceof k?fe.getNotFoundInstance():l}}static decode(i,a,l){const h=new Array,f=nt.detectMultiple(i,a,l);for(const m of f.getPoints()){const x=dt.decode(f.getBits(),m[4],m[5],m[6],m[7],Un.getMinCodewordWidth(m),Un.getMaxCodewordWidth(m)),A=new Ue(x.getText(),x.getRawBytes(),void 0,m,Oe.PDF_417);A.putMetadata(yt.ERROR_CORRECTION_LEVEL,x.getECLevel());const v=x.getOther();v!=null&&A.putMetadata(yt.PDF417_EXTRA_METADATA,v),h.push(A)}return h.map(m=>m)}static getMaxWidth(i,a){return i==null||a==null?0:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMinWidth(i,a){return i==null||a==null?Q.MAX_VALUE:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Un.getMaxWidth(i[0],i[4]),Un.getMaxWidth(i[6],i[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.max(Un.getMaxWidth(i[1],i[5]),Un.getMaxWidth(i[7],i[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Un.getMinWidth(i[0],i[4]),Un.getMinWidth(i[6],i[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.min(Un.getMinWidth(i[1],i[5]),Un.getMinWidth(i[7],i[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))}reset(){}}class Qs extends _{}Qs.kind="ReaderException";class vo{constructor(i,a){this.verbose=i===!0,a&&this.setHints(a)}decode(i,a){return a&&this.setHints(a),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const a=!o(i)&&i.get(Be.TRY_HARDER)===!0,l=o(i)?null:i.get(Be.POSSIBLE_FORMATS),h=new Array;if(!o(l)){const f=l.some(m=>m===Oe.UPC_A||m===Oe.UPC_E||m===Oe.EAN_13||m===Oe.EAN_8||m===Oe.CODABAR||m===Oe.CODE_39||m===Oe.CODE_93||m===Oe.CODE_128||m===Oe.ITF||m===Oe.RSS_14||m===Oe.RSS_EXPANDED);f&&!a&&h.push(new Mi(i,this.verbose)),l.includes(Oe.QR_CODE)&&h.push(new Zi),l.includes(Oe.DATA_MATRIX)&&h.push(new Xi),l.includes(Oe.AZTEC)&&h.push(new xs),l.includes(Oe.PDF_417)&&h.push(new Un),f&&a&&h.push(new Mi(i,this.verbose))}h.length===0&&(a||h.push(new Mi(i,this.verbose)),h.push(new Zi),h.push(new Xi),h.push(new xs),h.push(new Un),a&&h.push(new Mi(i,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Qs("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(i,this.hints)}catch(l){if(l instanceof Qs)continue}throw new fe("No MultiFormat Readers were able to detect the code.")}}class Qr extends ke{constructor(i=null,a=500){const l=new vo;l.setHints(i),super(l,a)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class rl extends ke{constructor(i=500){super(new Un,i)}}class sl extends ke{constructor(i=500){super(new Zi,i)}}var Ma;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(Ma||(Ma={}));var Vn=Ma;class Zr{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Pn(i,Int32Array.from([1])))}buildGenerator(i){const a=this.cachedGenerators;if(i>=a.length){let l=a[a.length-1];const h=this.field;for(let f=a.length;f<=i;f++){const m=l.multiply(new Pn(h,Int32Array.from([1,h.exp(f-1+h.getGeneratorBase())])));a.push(m),l=m}}return a[i]}encode(i,a){if(a===0)throw new I("No error correction bytes");const l=i.length-a;if(l<=0)throw new I("No data bytes provided");const h=this.buildGenerator(a),f=new Int32Array(l);K.arraycopy(i,0,f,0,l);let m=new Pn(this.field,f);m=m.multiplyByMonomial(a,1);const A=m.divide(h)[1].getCoefficients(),v=a-A.length;for(let R=0;R<v;R++)i[l+R]=0;K.arraycopy(A,0,i,l+v,A.length)}}class It{constructor(){}static applyMaskPenaltyRule1(i){return It.applyMaskPenaltyRule1Internal(i,!0)+It.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let a=0;const l=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let m=0;m<f-1;m++){const x=l[m];for(let A=0;A<h-1;A++){const v=x[A];v===x[A+1]&&v===l[m+1][A]&&v===l[m+1][A+1]&&a++}}return It.N2*a}static applyMaskPenaltyRule3(i){let a=0;const l=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let m=0;m<f;m++)for(let x=0;x<h;x++){const A=l[m];x+6<h&&A[x]===1&&A[x+1]===0&&A[x+2]===1&&A[x+3]===1&&A[x+4]===1&&A[x+5]===0&&A[x+6]===1&&(It.isWhiteHorizontal(A,x-4,x)||It.isWhiteHorizontal(A,x+7,x+11))&&a++,m+6<f&&l[m][x]===1&&l[m+1][x]===0&&l[m+2][x]===1&&l[m+3][x]===1&&l[m+4][x]===1&&l[m+5][x]===0&&l[m+6][x]===1&&(It.isWhiteVertical(l,x,m-4,m)||It.isWhiteVertical(l,x,m+7,m+11))&&a++}return a*It.N3}static isWhiteHorizontal(i,a,l){a=Math.max(a,0),l=Math.min(l,i.length);for(let h=a;h<l;h++)if(i[h]===1)return!1;return!0}static isWhiteVertical(i,a,l,h){l=Math.max(l,0),h=Math.min(h,i.length);for(let f=l;f<h;f++)if(i[f][a]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let a=0;const l=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let A=0;A<f;A++){const v=l[A];for(let R=0;R<h;R++)v[R]===1&&a++}const m=i.getHeight()*i.getWidth();return Math.floor(Math.abs(a*2-m)*10/m)*It.N4}static getDataMaskBit(i,a,l){let h,f;switch(i){case 0:h=l+a&1;break;case 1:h=l&1;break;case 2:h=a%3;break;case 3:h=(l+a)%3;break;case 4:h=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:f=l*a,h=(f&1)+f%3;break;case 6:f=l*a,h=(f&1)+f%3&1;break;case 7:f=l*a,h=f%3+(l+a&1)&1;break;default:throw new I("Invalid mask pattern: "+i)}return h===0}static applyMaskPenaltyRule1Internal(i,a){let l=0;const h=a?i.getHeight():i.getWidth(),f=a?i.getWidth():i.getHeight(),m=i.getArray();for(let x=0;x<h;x++){let A=0,v=-1;for(let R=0;R<f;R++){const P=a?m[x][R]:m[R][x];P===v?A++:(A>=5&&(l+=It.N1+(A-5)),A=1,v=P)}A>=5&&(l+=It.N1+(A-5))}return l}}It.N1=3,It.N2=3,It.N3=40,It.N4=10;class Zs{constructor(i,a){this.width=i,this.height=a;const l=new Array(a);for(let h=0;h!==a;h++)l[h]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,a){return this.bytes[a][i]}getArray(){return this.bytes}setNumber(i,a,l){this.bytes[a][i]=l}setBoolean(i,a,l){this.bytes[a][i]=l?1:0}clear(i){for(const a of this.bytes)ge.fill(a,i)}equals(i){if(!(i instanceof Zs))return!1;const a=i;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,h=this.height;l<h;++l){const f=this.bytes[l],m=a.bytes[l];for(let x=0,A=this.width;x<A;++x)if(f[x]!==m[x])return!1}return!0}toString(){const i=new Y;for(let a=0,l=this.height;a<l;++a){const h=this.bytes[a];for(let f=0,m=this.width;f<m;++f)switch(h[f]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Jr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new Y;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Jr.NUM_MASK_PATTERNS}}Jr.NUM_MASK_PATTERNS=8;class Dt extends _{}Dt.kind="WriterException";class p{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,a,l,h,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(a,h,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(i,h,f)}static embedBasicPatterns(i,a){p.embedPositionDetectionPatternsAndSeparators(a),p.embedDarkDotAtLeftBottomCorner(a),p.maybeEmbedPositionAdjustmentPatterns(i,a),p.embedTimingPatterns(a)}static embedTypeInfo(i,a,l){const h=new ve;p.makeTypeInfoBits(i,a,h);for(let f=0,m=h.getSize();f<m;++f){const x=h.get(h.getSize()-1-f),A=p.TYPE_INFO_COORDINATES[f],v=A[0],R=A[1];if(l.setBoolean(v,R,x),f<8){const P=l.getWidth()-f-1;l.setBoolean(P,8,x)}else{const B=l.getHeight()-7+(f-8);l.setBoolean(8,B,x)}}}static maybeEmbedVersionInfo(i,a){if(i.getVersionNumber()<7)return;const l=new ve;p.makeVersionInfoBits(i,l);let h=17;for(let f=0;f<6;++f)for(let m=0;m<3;++m){const x=l.get(h);h--,a.setBoolean(f,a.getHeight()-11+m,x),a.setBoolean(a.getHeight()-11+m,f,x)}}static embedDataBits(i,a,l){let h=0,f=-1,m=l.getWidth()-1,x=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);x>=0&&x<l.getHeight();){for(let A=0;A<2;++A){const v=m-A;if(!p.isEmpty(l.get(v,x)))continue;let R;h<i.getSize()?(R=i.get(h),++h):R=!1,a!==255&&It.getDataMaskBit(a,v,x)&&(R=!R),l.setBoolean(v,x,R)}x+=f}f=-f,x+=f,m-=2}if(h!==i.getSize())throw new Dt("Not all bits consumed: "+h+"/"+i.getSize())}static findMSBSet(i){return 32-Q.numberOfLeadingZeros(i)}static calculateBCHCode(i,a){if(a===0)throw new I("0 polynomial");const l=p.findMSBSet(a);for(i<<=l-1;p.findMSBSet(i)>=l;)i^=a<<p.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,a,l){if(!Jr.isValidMaskPattern(a))throw new Dt("Invalid mask pattern");const h=i.getBits()<<3|a;l.appendBits(h,5);const f=p.calculateBCHCode(h,p.TYPE_INFO_POLY);l.appendBits(f,10);const m=new ve;if(m.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Dt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,a){a.appendBits(i.getVersionNumber(),6);const l=p.calculateBCHCode(i.getVersionNumber(),p.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new Dt("should not happen but we got: "+a.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let a=8;a<i.getWidth()-8;++a){const l=(a+1)%2;p.isEmpty(i.get(a,6))&&i.setNumber(a,6,l),p.isEmpty(i.get(6,a))&&i.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Dt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,a,l){for(let h=0;h<8;++h){if(!p.isEmpty(l.get(i+h,a)))throw new Dt;l.setNumber(i+h,a,0)}}static embedVerticalSeparationPattern(i,a,l){for(let h=0;h<7;++h){if(!p.isEmpty(l.get(i,a+h)))throw new Dt;l.setNumber(i,a+h,0)}}static embedPositionAdjustmentPattern(i,a,l){for(let h=0;h<5;++h){const f=p.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(i+m,a+h,f[m])}}static embedPositionDetectionPattern(i,a,l){for(let h=0;h<7;++h){const f=p.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(i+m,a+h,f[m])}}static embedPositionDetectionPatternsAndSeparators(i){const a=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,i),p.embedPositionDetectionPattern(i.getWidth()-a,0,i),p.embedPositionDetectionPattern(0,i.getWidth()-a,i);const l=8;p.embedHorizontalSeparationPattern(0,l-1,i),p.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),p.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const h=7;p.embedVerticalSeparationPattern(h,0,i),p.embedVerticalSeparationPattern(i.getHeight()-h-1,0,i),p.embedVerticalSeparationPattern(h,i.getHeight()-h,i)}static maybeEmbedPositionAdjustmentPatterns(i,a){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,h=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,m=h.length;f!==m;f++){const x=h[f];if(x>=0)for(let A=0;A!==m;A++){const v=h[A];v>=0&&p.isEmpty(a.get(v,x))&&p.embedPositionAdjustmentPattern(v-2,x-2,a)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class N{constructor(i,a){this.dataBytes=i,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(i){return It.applyMaskPenaltyRule1(i)+It.applyMaskPenaltyRule2(i)+It.applyMaskPenaltyRule3(i)+It.applyMaskPenaltyRule4(i)}static encode(i,a,l=null){let h=D.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(Vn.CHARACTER_SET)!==void 0;f&&(h=l.get(Vn.CHARACTER_SET).toString());const m=this.chooseMode(i,h),x=new ve;if(m===We.BYTE&&(f||D.DEFAULT_BYTE_MODE_ENCODING!==h)){const Me=V.getCharacterSetECIByName(h);Me!==void 0&&this.appendECI(Me,x)}this.appendModeInfo(m,x);const A=new ve;this.appendBytes(i,m,A,h);let v;if(l!==null&&l.get(Vn.QR_VERSION)!==void 0){const Me=Number.parseInt(l.get(Vn.QR_VERSION).toString(),10);v=Ye.getVersionForNumber(Me);const Re=this.calculateBitsNeeded(m,x,A,v);if(!this.willFit(Re,v,a))throw new Dt("Data too big for requested version")}else v=this.recommendVersion(a,m,x,A);const R=new ve;R.appendBitArray(x);const P=m===We.BYTE?A.getSizeInBytes():i.length;this.appendLengthInfo(P,v,m,R),R.appendBitArray(A);const B=v.getECBlocksForLevel(a),q=v.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(q,R);const $=this.interleaveWithECBytes(R,v.getTotalCodewords(),q,B.getNumBlocks()),ee=new Jr;ee.setECLevel(a),ee.setMode(m),ee.setVersion(v);const le=v.getDimensionForVersion(),Ee=new Zs(le,le),Le=this.chooseMaskPattern($,a,v,Ee);return ee.setMaskPattern(Le),p.buildMatrix($,a,v,Le,Ee),ee.setMatrix(Ee),ee}static recommendVersion(i,a,l,h){const f=this.calculateBitsNeeded(a,l,h,Ye.getVersionForNumber(1)),m=this.chooseVersion(f,i),x=this.calculateBitsNeeded(a,l,h,m);return this.chooseVersion(x,i)}static calculateBitsNeeded(i,a,l,h){return a.getSize()+i.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(i){return i<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,a=null){if(V.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(i))return We.KANJI;let l=!1,h=!1;for(let f=0,m=i.length;f<m;++f){const x=i.charAt(f);if(D.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)h=!0;else return We.BYTE}return h?We.ALPHANUMERIC:l?We.NUMERIC:We.BYTE}static isOnlyDoubleByteKanji(i){let a;try{a=W.encode(i,V.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const f=a[h]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(i,a,l,h){let f=Number.MAX_SAFE_INTEGER,m=-1;for(let x=0;x<Jr.NUM_MASK_PATTERNS;x++){p.buildMatrix(i,a,l,x,h);let A=this.calculateMaskPenalty(h);A<f&&(f=A,m=x)}return m}static chooseVersion(i,a){for(let l=1;l<=40;l++){const h=Ye.getVersionForNumber(l);if(D.willFit(i,h,a))return h}throw new Dt("Data too big")}static willFit(i,a,l){const h=a.getTotalCodewords(),m=a.getECBlocksForLevel(l).getTotalECCodewords(),x=h-m,A=(i+7)/8;return x>=A}static terminateBits(i,a){const l=i*8;if(a.getSize()>l)throw new Dt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let m=0;m<4&&a.getSize()<l;++m)a.appendBit(!1);const h=a.getSize()&7;if(h>0)for(let m=h;m<8;m++)a.appendBit(!1);const f=i-a.getSizeInBytes();for(let m=0;m<f;++m)a.appendBits((m&1)===0?236:17,8);if(a.getSize()!==l)throw new Dt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,a,l,h,f,m){if(h>=l)throw new Dt("Block ID too large");const x=i%l,A=l-x,v=Math.floor(i/l),R=v+1,P=Math.floor(a/l),B=P+1,q=v-P,$=R-B;if(q!==$)throw new Dt("EC bytes mismatch");if(l!==A+x)throw new Dt("RS blocks mismatch");if(i!==(P+q)*A+(B+$)*x)throw new Dt("Total bytes mismatch");h<A?(f[0]=P,m[0]=q):(f[0]=B,m[0]=$)}static interleaveWithECBytes(i,a,l,h){if(i.getSizeInBytes()!==l)throw new Dt("Number of bits and data bytes does not match");let f=0,m=0,x=0;const A=new Array;for(let R=0;R<h;++R){const P=new Int32Array(1),B=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(a,l,h,R,P,B);const q=P[0],$=new Uint8Array(q);i.toBytes(8*f,$,0,q);const ee=D.generateECBytes($,B[0]);A.push(new N($,ee)),m=Math.max(m,q),x=Math.max(x,ee.length),f+=P[0]}if(l!==f)throw new Dt("Data bytes does not match offset");const v=new ve;for(let R=0;R<m;++R)for(const P of A){const B=P.getDataBytes();R<B.length&&v.appendBits(B[R],8)}for(let R=0;R<x;++R)for(const P of A){const B=P.getErrorCorrectionBytes();R<B.length&&v.appendBits(B[R],8)}if(a!==v.getSizeInBytes())throw new Dt("Interleaving error: "+a+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(i,a){const l=i.length,h=new Int32Array(l+a);for(let m=0;m<l;m++)h[m]=i[m]&255;new Zr(_t.QR_CODE_FIELD_256).encode(h,a);const f=new Uint8Array(a);for(let m=0;m<a;m++)f[m]=h[l+m];return f}static appendModeInfo(i,a){a.appendBits(i.getBits(),4)}static appendLengthInfo(i,a,l,h){const f=l.getCharacterCountBits(a);if(i>=1<<f)throw new Dt(i+" is bigger than "+((1<<f)-1));h.appendBits(i,f)}static appendBytes(i,a,l,h){switch(a){case We.NUMERIC:D.appendNumericBytes(i,l);break;case We.ALPHANUMERIC:D.appendAlphanumericBytes(i,l);break;case We.BYTE:D.append8BitBytes(i,l,h);break;case We.KANJI:D.appendKanjiBytes(i,l);break;default:throw new Dt("Invalid mode: "+a)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const a=D.getDigit(i);return a>=0&&a<=9}static appendNumericBytes(i,a){const l=i.length;let h=0;for(;h<l;){const f=D.getDigit(i.charAt(h));if(h+2<l){const m=D.getDigit(i.charAt(h+1)),x=D.getDigit(i.charAt(h+2));a.appendBits(f*100+m*10+x,10),h+=3}else if(h+1<l){const m=D.getDigit(i.charAt(h+1));a.appendBits(f*10+m,7),h+=2}else a.appendBits(f,4),h++}}static appendAlphanumericBytes(i,a){const l=i.length;let h=0;for(;h<l;){const f=D.getAlphanumericCode(i.charCodeAt(h));if(f===-1)throw new Dt;if(h+1<l){const m=D.getAlphanumericCode(i.charCodeAt(h+1));if(m===-1)throw new Dt;a.appendBits(f*45+m,11),h+=2}else a.appendBits(f,6),h++}}static append8BitBytes(i,a,l){let h;try{h=W.encode(i,l)}catch(f){throw new Dt(f)}for(let f=0,m=h.length;f!==m;f++){const x=h[f];a.appendBits(x,8)}}static appendKanjiBytes(i,a){let l;try{l=W.encode(i,V.SJIS)}catch(f){throw new Dt(f)}const h=l.length;for(let f=0;f<h;f+=2){const m=l[f]&255,x=l[f+1]&255,A=m<<8&4294967295|x;let v=-1;if(A>=33088&&A<=40956?v=A-33088:A>=57408&&A<=60351&&(v=A-49472),v===-1)throw new Dt("Invalid byte sequence");const R=(v>>8)*192+(v&255);a.appendBits(R,13)}}static appendECI(i,a){a.appendBits(We.ECI.getBits(),4),a.appendBits(i.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class j{write(i,a,l,h=null){if(i.length===0)throw new I("Found empty contents");if(a<0||l<0)throw new I("Requested dimensions are too small: "+a+"x"+l);let f=wt.L,m=j.QUIET_ZONE_SIZE;h!==null&&(h.get(Vn.ERROR_CORRECTION)!==void 0&&(f=wt.fromString(h.get(Vn.ERROR_CORRECTION).toString())),h.get(Vn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Vn.MARGIN).toString(),10)));const x=D.encode(i,f,h);return this.renderResult(x,a,l,m)}writeToDom(i,a,l,h,f=null){typeof i=="string"&&(i=document.querySelector(i));const m=this.write(a,l,h,f);i&&i.appendChild(m)}renderResult(i,a,l,h){const f=i.getMatrix();if(f===null)throw new _i;const m=f.getWidth(),x=f.getHeight(),A=m+h*2,v=x+h*2,R=Math.max(a,A),P=Math.max(l,v),B=Math.min(Math.floor(R/A),Math.floor(P/v)),q=Math.floor((R-m*B)/2),$=Math.floor((P-x*B)/2),ee=this.createSVGElement(R,P);for(let le=0,Ee=$;le<x;le++,Ee+=B)for(let Le=0,Me=q;Le<m;Le++,Me+=B)if(f.get(Le,le)===1){const Re=this.createSvgRectElement(Me,Ee,B,B);ee.appendChild(Re)}return ee}createSVGElement(i,a){const l=document.createElementNS(j.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(i,a,l,h){const f=document.createElementNS(j.SVG_NS,"rect");return f.setAttributeNS(null,"x",i.toString()),f.setAttributeNS(null,"y",a.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",h.toString()),f.setAttributeNS(null,"fill","#000000"),f}}j.QUIET_ZONE_SIZE=4,j.SVG_NS="http://www.w3.org/2000/svg";class oe{encode(i,a,l,h,f){if(i.length===0)throw new I("Found empty contents");if(a!==Oe.QR_CODE)throw new I("Can only encode QR_CODE, but got "+a);if(l<0||h<0)throw new I(`Requested dimensions are too small: ${l}x${h}`);let m=wt.L,x=oe.QUIET_ZONE_SIZE;f!==null&&(f.get(Vn.ERROR_CORRECTION)!==void 0&&(m=wt.fromString(f.get(Vn.ERROR_CORRECTION).toString())),f.get(Vn.MARGIN)!==void 0&&(x=Number.parseInt(f.get(Vn.MARGIN).toString(),10)));const A=D.encode(i,m,f);return oe.renderResult(A,l,h,x)}static renderResult(i,a,l,h){const f=i.getMatrix();if(f===null)throw new _i;const m=f.getWidth(),x=f.getHeight(),A=m+h*2,v=x+h*2,R=Math.max(a,A),P=Math.max(l,v),B=Math.min(Math.floor(R/A),Math.floor(P/v)),q=Math.floor((R-m*B)/2),$=Math.floor((P-x*B)/2),ee=new Ze(R,P);for(let le=0,Ee=$;le<x;le++,Ee+=B)for(let Le=0,Me=q;Le<m;Le++,Me+=B)f.get(Le,le)===1&&ee.setRegion(Me,Ee,B,B);return ee}}oe.QUIET_ZONE_SIZE=4;class ye{encode(i,a,l,h,f){let m;switch(a){case Oe.QR_CODE:m=new oe;break;default:throw new I("No encoder available for format "+a)}return m.encode(i,a,l,h,f)}}class Pe extends qe{constructor(i,a,l,h,f,m,x,A){if(super(m,x),this.yuvData=i,this.dataWidth=a,this.dataHeight=l,this.left=h,this.top=f,h+m>a||f+x>l)throw new I("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(m,x)}getRow(i,a){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(i+this.top)*this.dataWidth+this.left;return K.arraycopy(this.yuvData,h,a,0,l),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=i*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return K.arraycopy(this.yuvData,f,h,0,l),h;for(let m=0;m<a;m++){const x=m*i;K.arraycopy(this.yuvData,f,h,x,i),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,a,l,h){return new Pe(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+a,l,h,!1)}renderThumbnail(){const i=this.getWidth()/Pe.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Pe.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*a),h=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let m=0;m<a;m++){const x=m*i;for(let A=0;A<i;A++){const v=h[f+A*Pe.THUMBNAIL_SCALE_FACTOR]&255;l[x+A]=4278190080|v*65793}f+=this.dataWidth*Pe.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Pe.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pe.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,a){const l=this.yuvData;for(let h=0,f=this.top*this.dataWidth+this.left;h<a;h++,f+=this.dataWidth){const m=f+i/2;for(let x=f,A=f+i-1;x<m;x++,A--){const v=l[x];l[x]=l[A],l[A]=v}}}invert(){return new ot(this)}}Pe.THUMBNAIL_SCALE_FACTOR=2;class ct extends qe{constructor(i,a,l,h,f,m,x){if(super(a,l),this.dataWidth=h,this.dataHeight=f,this.left=m,this.top=x,i.BYTES_PER_ELEMENT===4){const A=a*l,v=new Uint8ClampedArray(A);for(let R=0;R<A;R++){const P=i[R],B=P>>16&255,q=P>>7&510,$=P&255;v[R]=(B+q+$)/4&255}this.luminances=v}else this.luminances=i;if(h===void 0&&(this.dataWidth=a),f===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(i,a){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(i+this.top)*this.dataWidth+this.left;return K.arraycopy(this.luminances,h,a,0,l),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=i*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return K.arraycopy(this.luminances,f,h,0,l),h;for(let m=0;m<a;m++){const x=m*i;K.arraycopy(this.luminances,f,h,x,i),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,a,l,h){return new ct(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+i,this.top+a)}invert(){return new ot(this)}}class Fn extends V{static forName(i){return this.getCharacterSetECIByName(i)}}class qt{}qt.ISO_8859_1=V.ISO8859_1;class wn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class cr{static singletonList(i){return[i]}static min(i,a){return i.sort(a)[0]}}class $r{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Si extends $r{constructor(i,a,l){super(i),this.value=a,this.bitCount=l}appendTo(i,a){i.appendBits(this.value,this.bitCount)}add(i,a){return new Si(this,i,a)}addBinaryShift(i,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Si(this,i,a)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+Q.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class ur extends Si{constructor(i,a,l){super(i,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(i,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(i,a){return new ur(this,i,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Js(L,i,a){return new ur(L,i,a)}function es(L,i,a){return new Si(L,i,a)}const La=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ms=0,al=1,Ar=2,ic=3,Br=4,Co=new Si(null,0,0),$s=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Qf(L){for(let i of L)ge.fill(i,-1);return L[Ms][Br]=0,L[al][Br]=0,L[al][Ms]=28,L[ic][Br]=0,L[Ar][Br]=0,L[Ar][Ms]=15,L}const So=Qf(ge.createInt32Array(6,6));class kr{constructor(i,a,l,h){this.token=i,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,a){let l=this.bitCount,h=this.token;if(i!==this.mode){let m=$s[this.mode][i];h=es(h,m&65535,m>>16),l+=m>>16}let f=i===Ar?4:5;return h=es(h,a,f),new kr(h,i,0,l+f)}shiftAndAppend(i,a){let l=this.token,h=this.mode===Ar?4:5;return l=es(l,So[this.mode][i],h),l=es(l,a,5),new kr(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(i){let a=this.token,l=this.mode,h=this.bitCount;if(this.mode===Br||this.mode===Ar){let x=$s[l][Ms];a=es(a,x&65535,x>>16),h+=x>>16,l=Ms}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new kr(a,l,this.binaryShiftByteCount+1,h+f);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(i+1)),m}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=Js(a,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new kr(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let a=this.bitCount+($s[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?a+=kr.calculateBinaryShiftCost(i)-kr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(a+=10),a<=i.bitCount}toBitArray(i){let a=[];for(let h=this.endBinaryShift(i.length).token;h!==null;h=h.getPrevious())a.unshift(h);let l=new ve;for(const h of a)h.appendTo(l,i);return l}toString(){return J.format("%s bits=%d bytes=%d",La[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}kr.INITIAL_STATE=new kr(Co,Ms,0,0);function Tu(L){const i=J.getCharCode(" "),a=J.getCharCode("."),l=J.getCharCode(",");L[Ms][i]=1;const h=J.getCharCode("Z"),f=J.getCharCode("A");for(let B=f;B<=h;B++)L[Ms][B]=B-f+2;L[al][i]=1;const m=J.getCharCode("z"),x=J.getCharCode("a");for(let B=x;B<=m;B++)L[al][B]=B-x+2;L[Ar][i]=1;const A=J.getCharCode("9"),v=J.getCharCode("0");for(let B=v;B<=A;B++)L[Ar][B]=B-v+2;L[Ar][l]=12,L[Ar][a]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<R.length;B++)L[ic][J.getCharCode(R[B])]=B;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<P.length;B++)J.getCharCode(P[B])>0&&(L[Br][J.getCharCode(P[B])]=B);return L}const Io=Tu(ge.createInt32Array(5,256));class ea{constructor(i){this.text=i}encode(){const i=J.getCharCode(" "),a=J.getCharCode(`
`);let l=cr.singletonList(kr.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let m,x=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case J.getCharCode("\r"):m=x===a?2:0;break;case J.getCharCode("."):m=x===i?3:0;break;case J.getCharCode(","):m=x===i?4:0;break;case J.getCharCode(":"):m=x===i?5:0;break;default:m=0}m>0?(l=ea.updateStateListForPair(l,f,m),f++):l=this.updateStateListForChar(l,f)}return cr.min(l,(f,m)=>f.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,a){const l=[];for(let h of i)this.updateStateForChar(h,a,l);return ea.simplifyStates(l)}updateStateForChar(i,a,l){let h=this.text[a]&255,f=Io[i.getMode()][h]>0,m=null;for(let x=0;x<=Br;x++){let A=Io[x][h];if(A>0){if(m==null&&(m=i.endBinaryShift(a)),!f||x===i.getMode()||x===Ar){const v=m.latchAndAppend(x,A);l.push(v)}if(!f&&So[i.getMode()][x]>=0){const v=m.shiftAndAppend(x,A);l.push(v)}}}if(i.getBinaryShiftByteCount()>0||Io[i.getMode()][h]===0){let x=i.addBinaryShiftChar(a);l.push(x)}}static updateStateListForPair(i,a,l){const h=[];for(let f of i)this.updateStateForPair(f,a,l,h);return this.simplifyStates(h)}static updateStateForPair(i,a,l,h){let f=i.endBinaryShift(a);if(h.push(f.latchAndAppend(Br,l)),i.getMode()!==Br&&h.push(f.shiftAndAppend(Br,l)),l===3||l===4){let m=f.latchAndAppend(Ar,16-l).latchAndAppend(Ar,1);h.push(m)}if(i.getBinaryShiftByteCount()>0){let m=i.addBinaryShiftChar(a).addBinaryShiftChar(a+1);h.push(m)}}static simplifyStates(i){let a=[];for(const l of i){let h=!0;for(const f of a){if(f.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(f)&&(a=a.filter(m=>m!==f))}h&&a.push(l)}return a}}class Ft{constructor(){}static encodeBytes(i){return Ft.encode(i,Ft.DEFAULT_EC_PERCENT,Ft.DEFAULT_AZTEC_LAYERS)}static encode(i,a,l){let h=new ea(i).encode(),f=Q.truncDivision(h.getSize()*a,100)+11,m=h.getSize()+f,x,A,v,R,P;if(l!==Ft.DEFAULT_AZTEC_LAYERS){if(x=l<0,A=Math.abs(l),A>(x?Ft.MAX_NB_BITS_COMPACT:Ft.MAX_NB_BITS))throw new I(J.format("Illegal value %s for layers",l));v=Ft.totalBitsInLayer(A,x),R=Ft.WORD_SIZE[A];let Re=v-v%R;if(P=Ft.stuffBits(h,R),P.getSize()+f>Re)throw new I("Data to large for user specified layer");if(x&&P.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,P=null;for(let Re=0;;Re++){if(Re>Ft.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(x=Re<=3,A=x?Re+1:Re,v=Ft.totalBitsInLayer(A,x),m>v)continue;(P==null||R!==Ft.WORD_SIZE[A])&&(R=Ft.WORD_SIZE[A],P=Ft.stuffBits(h,R));let vt=v-v%R;if(!(x&&P.getSize()>R*64)&&P.getSize()+f<=vt)break}}let B=Ft.generateCheckWords(P,v,R),q=P.getSize()/R,$=Ft.generateModeMessage(x,A,q),ee=(x?11:14)+A*4,le=new Int32Array(ee),Ee;if(x){Ee=ee;for(let Re=0;Re<le.length;Re++)le[Re]=Re}else{Ee=ee+1+2*Q.truncDivision(Q.truncDivision(ee,2)-1,15);let Re=Q.truncDivision(ee,2),vt=Q.truncDivision(Ee,2);for(let ut=0;ut<Re;ut++){let Jn=ut+Q.truncDivision(ut,15);le[Re-ut-1]=vt-Jn-1,le[Re+ut]=vt+Jn+1}}let Le=new Ze(Ee);for(let Re=0,vt=0;Re<A;Re++){let ut=(A-Re)*4+(x?9:12);for(let Jn=0;Jn<ut;Jn++){let wr=Jn*2;for(let Bi=0;Bi<2;Bi++)B.get(vt+wr+Bi)&&Le.set(le[Re*2+Bi],le[Re*2+Jn]),B.get(vt+ut*2+wr+Bi)&&Le.set(le[Re*2+Jn],le[ee-1-Re*2-Bi]),B.get(vt+ut*4+wr+Bi)&&Le.set(le[ee-1-Re*2-Bi],le[ee-1-Re*2-Jn]),B.get(vt+ut*6+wr+Bi)&&Le.set(le[ee-1-Re*2-Jn],le[Re*2+Bi])}vt+=ut*8}if(Ft.drawModeMessage(Le,x,Ee,$),x)Ft.drawBullsEye(Le,Q.truncDivision(Ee,2),5);else{Ft.drawBullsEye(Le,Q.truncDivision(Ee,2),7);for(let Re=0,vt=0;Re<Q.truncDivision(ee,2)-1;Re+=15,vt+=16)for(let ut=Q.truncDivision(Ee,2)&1;ut<Ee;ut+=2)Le.set(Q.truncDivision(Ee,2)-vt,ut),Le.set(Q.truncDivision(Ee,2)+vt,ut),Le.set(ut,Q.truncDivision(Ee,2)-vt),Le.set(ut,Q.truncDivision(Ee,2)+vt)}let Me=new wn;return Me.setCompact(x),Me.setSize(Ee),Me.setLayers(A),Me.setCodeWords(q),Me.setMatrix(Le),Me}static drawBullsEye(i,a,l){for(let h=0;h<l;h+=2)for(let f=a-h;f<=a+h;f++)i.set(f,a-h),i.set(f,a+h),i.set(a-h,f),i.set(a+h,f);i.set(a-l,a-l),i.set(a-l+1,a-l),i.set(a-l,a-l+1),i.set(a+l,a-l),i.set(a+l,a-l+1),i.set(a+l,a+l-1)}static generateModeMessage(i,a,l){let h=new ve;return i?(h.appendBits(a-1,2),h.appendBits(l-1,6),h=Ft.generateCheckWords(h,28,4)):(h.appendBits(a-1,5),h.appendBits(l-1,11),h=Ft.generateCheckWords(h,40,4)),h}static drawModeMessage(i,a,l,h){let f=Q.truncDivision(l,2);if(a)for(let m=0;m<7;m++){let x=f-3+m;h.get(m)&&i.set(x,f-5),h.get(m+7)&&i.set(f+5,x),h.get(20-m)&&i.set(x,f+5),h.get(27-m)&&i.set(f-5,x)}else for(let m=0;m<10;m++){let x=f-5+m+Q.truncDivision(m,5);h.get(m)&&i.set(x,f-7),h.get(m+10)&&i.set(f+7,x),h.get(29-m)&&i.set(x,f+7),h.get(39-m)&&i.set(f-7,x)}}static generateCheckWords(i,a,l){let h=i.getSize()/l,f=new Zr(Ft.getGF(l)),m=Q.truncDivision(a,l),x=Ft.bitsToWords(i,l,m);f.encode(x,m-h);let A=a%l,v=new ve;v.appendBits(0,A);for(const R of Array.from(x))v.appendBits(R,l);return v}static bitsToWords(i,a,l){let h=new Int32Array(l),f,m;for(f=0,m=i.getSize()/a;f<m;f++){let x=0;for(let A=0;A<a;A++)x|=i.get(f*a+A)?1<<a-A-1:0;h[f]=x}return h}static getGF(i){switch(i){case 4:return _t.AZTEC_PARAM;case 6:return _t.AZTEC_DATA_6;case 8:return _t.AZTEC_DATA_8;case 10:return _t.AZTEC_DATA_10;case 12:return _t.AZTEC_DATA_12;default:throw new I("Unsupported word size "+i)}}static stuffBits(i,a){let l=new ve,h=i.getSize(),f=(1<<a)-2;for(let m=0;m<h;m+=a){let x=0;for(let A=0;A<a;A++)(m+A>=h||i.get(m+A))&&(x|=1<<a-1-A);(x&f)===f?(l.appendBits(x&f,a),m--):(x&f)===0?(l.appendBits(x|1,a),m--):l.appendBits(x,a)}return l}static totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}Ft.DEFAULT_EC_PERCENT=33,Ft.DEFAULT_AZTEC_LAYERS=0,Ft.MAX_NB_BITS=32,Ft.MAX_NB_BITS_COMPACT=4,Ft.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class No{encode(i,a,l,h){return this.encodeWithHints(i,a,l,h,null)}encodeWithHints(i,a,l,h,f){let m=qt.ISO_8859_1,x=Ft.DEFAULT_EC_PERCENT,A=Ft.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Vn.CHARACTER_SET)&&(m=Fn.forName(f.get(Vn.CHARACTER_SET).toString())),f.has(Vn.ERROR_CORRECTION)&&(x=Q.parseInt(f.get(Vn.ERROR_CORRECTION).toString())),f.has(Vn.AZTEC_LAYERS)&&(A=Q.parseInt(f.get(Vn.AZTEC_LAYERS).toString()))),No.encodeLayers(i,a,l,h,m,x,A)}static encodeLayers(i,a,l,h,f,m,x){if(a!==Oe.AZTEC)throw new I("Can only encode AZTEC, but got "+a);let A=Ft.encode(J.getBytes(i,f),m,x);return No.renderResult(A,l,h)}static renderResult(i,a,l){let h=i.getMatrix();if(h==null)throw new _i;let f=h.getWidth(),m=h.getHeight(),x=Math.max(a,f),A=Math.max(l,m),v=Math.min(x/f,A/m),R=(x-f*v)/2,P=(A-m*v)/2,B=new Ze(x,A);for(let q=0,$=P;q<m;q++,$+=v)for(let ee=0,le=R;ee<f;ee++,le+=v)h.get(ee,q)&&B.setRegion(le,$,v,v);return B}}n.AbstractExpandedDecoder=en,n.ArgumentException=C,n.ArithmeticException=nr,n.AztecCode=wn,n.AztecCodeReader=xs,n.AztecCodeWriter=No,n.AztecDecoder=Bt,n.AztecDetector=Cs,n.AztecDetectorResult=ps,n.AztecEncoder=Ft,n.AztecHighLevelEncoder=ea,n.AztecPoint=Qn,n.BarcodeFormat=Oe,n.Binarizer=X,n.BinaryBitmap=M,n.BitArray=ve,n.BitMatrix=Ze,n.BitSource=kn,n.BrowserAztecCodeReader=Sa,n.BrowserBarcodeReader=wo,n.BrowserCodeReader=ke,n.BrowserDatamatrixCodeReader=Kr,n.BrowserMultiFormatReader=Qr,n.BrowserPDF417Reader=rl,n.BrowserQRCodeReader=sl,n.BrowserQRCodeSvgWriter=j,n.CharacterSetECI=V,n.ChecksumException=k,n.Code128Reader=De,n.Code39Reader=Kt,n.DataMatrixDecodedBitStreamParser=Pi,n.DataMatrixReader=Xi,n.DecodeHintType=Be,n.DecoderResult=Jt,n.DefaultGridSampler=Yr,n.DetectorResult=qi,n.EAN13Reader=on,n.EncodeHintType=Vn,n.Exception=_,n.FormatException=F,n.GenericGF=_t,n.GenericGFPoly=Pn,n.GlobalHistogramBinarizer=me,n.GridSampler=mr,n.GridSamplerInstance=si,n.HTMLCanvasElementLuminanceSource=ft,n.HybridBinarizer=we,n.ITFReader=it,n.IllegalArgumentException=I,n.IllegalStateException=_i,n.InvertedLuminanceSource=ot,n.LuminanceSource=qe,n.MathUtils=Qe,n.MultiFormatOneDReader=Mi,n.MultiFormatReader=vo,n.MultiFormatWriter=ye,n.NotFoundException=fe,n.OneDReader=Xt,n.PDF417DecodedBitStreamParser=pe,n.PDF417DecoderErrorCorrection=Dr,n.PDF417Reader=Un,n.PDF417ResultMetadata=_s,n.PerspectiveTransform=ui,n.PlanarYUVLuminanceSource=Pe,n.QRCodeByteMatrix=Zs,n.QRCodeDataMask=ai,n.QRCodeDecodedBitStreamParser=cn,n.QRCodeDecoderErrorCorrectionLevel=wt,n.QRCodeDecoderFormatInformation=Gn,n.QRCodeEncoder=D,n.QRCodeEncoderQRCode=Jr,n.QRCodeMaskUtil=It,n.QRCodeMatrixUtil=p,n.QRCodeMode=We,n.QRCodeReader=Zi,n.QRCodeVersion=Ye,n.QRCodeWriter=oe,n.RGBLuminanceSource=ct,n.RSS14Reader=$t,n.RSSExpandedReader=Ie,n.ReaderException=Qs,n.ReedSolomonDecoder=Ri,n.ReedSolomonEncoder=Zr,n.ReedSolomonException=zn,n.Result=Ue,n.ResultMetadataType=yt,n.ResultPoint=je,n.StringUtils=J,n.UnsupportedOperationException=ne,n.VideoInputDevice=ie,n.WhiteRectangleDetector=xn,n.WriterException=Dt,n.ZXingArrays=ge,n.ZXingCharset=Fn,n.ZXingInteger=Q,n.ZXingStandardCharsets=qt,n.ZXingStringBuilder=Y,n.ZXingStringEncoding=W,n.ZXingSystem=K,n.createAbstractExpandedDecoder=Yi,Object.defineProperty(n,"__esModule",{value:!0})}))})(Kc,Kc.exports)),Kc.exports}var Mn=U8();const V8=z1(Mn),F8=cT({__proto__:null,default:V8},[Mn]);var By=(function(){function r(e,n,o){if(this.formatMap=new Map([[Ge.QR_CODE,Mn.BarcodeFormat.QR_CODE],[Ge.AZTEC,Mn.BarcodeFormat.AZTEC],[Ge.CODABAR,Mn.BarcodeFormat.CODABAR],[Ge.CODE_39,Mn.BarcodeFormat.CODE_39],[Ge.CODE_93,Mn.BarcodeFormat.CODE_93],[Ge.CODE_128,Mn.BarcodeFormat.CODE_128],[Ge.DATA_MATRIX,Mn.BarcodeFormat.DATA_MATRIX],[Ge.MAXICODE,Mn.BarcodeFormat.MAXICODE],[Ge.ITF,Mn.BarcodeFormat.ITF],[Ge.EAN_13,Mn.BarcodeFormat.EAN_13],[Ge.EAN_8,Mn.BarcodeFormat.EAN_8],[Ge.PDF_417,Mn.BarcodeFormat.PDF_417],[Ge.RSS_14,Mn.BarcodeFormat.RSS_14],[Ge.RSS_EXPANDED,Mn.BarcodeFormat.RSS_EXPANDED],[Ge.UPC_A,Mn.BarcodeFormat.UPC_A],[Ge.UPC_E,Mn.BarcodeFormat.UPC_E],[Ge.UPC_EAN_EXTENSION,Mn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!F8)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var u=this.createZXingFormats(e),d=new Map;d.set(Mn.DecodeHintType.POSSIBLE_FORMATS,u),d.set(Mn.DecodeHintType.TRY_HARDER,!1),this.hints=d}return r.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,u){try{o(n.decode(e))}catch(d){u(d)}})},r.prototype.decode=function(e){var n=new Mn.MultiFormatReader(this.verbose,this.hints),o=new Mn.HTMLCanvasElementLuminanceSource(e),u=new Mn.BinaryBitmap(new Mn.HybridBinarizer(o)),d=n.decode(u);return{text:d.text,format:zw.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,u){e.set(n,o)}),e},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createZXingFormats=function(e){for(var n=[],o=0,u=e;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return n},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r})(),j8=function(r,e,n,o){function u(d){return d instanceof n?d:new n(function(E){E(d)})}return new(n||(n=Promise))(function(d,E){function T(C){try{_(o.next(C))}catch(I){E(I)}}function b(C){try{_(o.throw(C))}catch(I){E(I)}}function _(C){C.done?d(C.value):u(C.value).then(T,b)}_((o=o.apply(r,e||[])).next())})},z8=function(r,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,E;return E={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function T(_){return function(C){return b([_,C])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(r,n)}catch(C){_=[6,C],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},ky=(function(){function r(e,n,o){if(this.formatMap=new Map([[Ge.QR_CODE,"qr_code"],[Ge.AZTEC,"aztec"],[Ge.CODABAR,"codabar"],[Ge.CODE_39,"code_39"],[Ge.CODE_93,"code_93"],[Ge.CODE_128,"code_128"],[Ge.DATA_MATRIX,"data_matrix"],[Ge.ITF,"itf"],[Ge.EAN_13,"ean_13"],[Ge.EAN_8,"ean_8"],[Ge.PDF_417,"pdf417"],[Ge.UPC_A,"upc_a"],[Ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},r.prototype.decodeAsync=function(e){return j8(this,void 0,void 0,function(){var n,o;return z8(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=u.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:zw.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,u=0,d=e;u<d.length;u++){var E=d[u],T=E.boundingBox.width*E.boundingBox.height;T>o&&(o=T,n=E)}if(!n)throw"No largest barcode found";return n},r.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,u=e;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,u){e.set(n,o)}),e},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r})(),Uy=function(r,e,n,o){function u(d){return d instanceof n?d:new n(function(E){E(d)})}return new(n||(n=Promise))(function(d,E){function T(C){try{_(o.next(C))}catch(I){E(I)}}function b(C){try{_(o.throw(C))}catch(I){E(I)}}function _(C){C.done?d(C.value):u(C.value).then(T,b)}_((o=o.apply(r,e||[])).next())})},Vy=function(r,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,E;return E={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function T(_){return function(C){return b([_,C])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(r,n)}catch(C){_=[6,C],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},H8=(function(){function r(e,n,o,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&ky.isSupported()?(this.primaryDecoder=new ky(e,o,u),this.secondaryDecoder=new By(e,o,u)):this.primaryDecoder=new By(e,o,u)}return r.prototype.decodeAsync=function(e){return Uy(this,void 0,void 0,function(){var n;return Vy(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(e){return Uy(this,void 0,void 0,function(){var n,o;return Vy(this,function(u){switch(u.label){case 0:n=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(o=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var u=o[n];e+=u}var d=e/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r})(),Ug=(function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},r(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),bf=function(r,e,n,o){function u(d){return d instanceof n?d:new n(function(E){E(d)})}return new(n||(n=Promise))(function(d,E){function T(C){try{_(o.next(C))}catch(I){E(I)}}function b(C){try{_(o.throw(C))}catch(I){E(I)}}function _(C){C.done?d(C.value):u(C.value).then(T,b)}_((o=o.apply(r,e||[])).next())})},Tf=function(r,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,E;return E={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function T(_){return function(C){return b([_,C])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(r,n)}catch(C){_=[6,C],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},Gw=(function(){function r(e,n){this.name=e,this.track=n}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},r.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},r})(),G8=(function(r){Ug(e,r);function e(n,o){return r.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var u={advanced:[o]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Gw),q8=(function(r){Ug(e,r);function e(n){return r.call(this,"zoom",n)||this}return e})(G8),Y8=(function(r){Ug(e,r);function e(n){return r.call(this,"torch",n)||this}return e})(Gw),X8=(function(){function r(e){this.track=e}return r.prototype.zoomFeature=function(){return new q8(this.track)},r.prototype.torchFeature=function(){return new Y8(this.track)},r})(),K8=(function(){function r(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return r.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},r.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,u),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(e,n,o,u){return bf(this,void 0,void 0,function(){var d,E;return Tf(this,function(T){switch(T.label){case 0:return d=new r(e,n,u),o.aspectRatio?(E={aspectRatio:o.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(E)]):[3,2];case 1:T.sent(),T.label=2;case 2:return d.setupSurface(),[2,d]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(e){return bf(this,void 0,void 0,function(){return Tf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var u=e.mediaStream.getVideoTracks(),d=u.length,E=0;e.mediaStream.getVideoTracks().forEach(function(T){e.mediaStream.removeTrack(T),T.stop(),++E,E>=d&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},r.prototype.getCapabilities=function(){return new X8(this.getFirstTrackOrFail())},r})(),W8=(function(){function r(e){this.mediaStream=e}return r.prototype.render=function(e,n,o){return bf(this,void 0,void 0,function(){return Tf(this,function(u){return[2,K8.create(e,this.mediaStream,n,o)]})})},r.create=function(e){return bf(this,void 0,void 0,function(){var n,o;return Tf(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=u.sent(),[2,new r(o)]}})})},r})(),Fy=function(r,e,n,o){function u(d){return d instanceof n?d:new n(function(E){E(d)})}return new(n||(n=Promise))(function(d,E){function T(C){try{_(o.next(C))}catch(I){E(I)}}function b(C){try{_(o.throw(C))}catch(I){E(I)}}function _(C){C.done?d(C.value):u(C.value).then(T,b)}_((o=o.apply(r,e||[])).next())})},jy=function(r,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,E;return E={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function T(_){return function(C){return b([_,C])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(r,n)}catch(C){_=[6,C],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},Q8=(function(){function r(){}return r.failIfNotSupported=function(){return Fy(this,void 0,void 0,function(){return jy(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(e){return Fy(this,void 0,void 0,function(){return jy(this,function(n){return[2,W8.create(e)]})})},r})(),Z8=function(r,e,n,o){function u(d){return d instanceof n?d:new n(function(E){E(d)})}return new(n||(n=Promise))(function(d,E){function T(C){try{_(o.next(C))}catch(I){E(I)}}function b(C){try{_(o.throw(C))}catch(I){E(I)}}function _(C){C.done?d(C.value):u(C.value).then(T,b)}_((o=o.apply(r,e||[])).next())})},J8=function(r,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,E;return E={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function T(_){return function(C){return b([_,C])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(r,n)}catch(C){_=[6,C],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},$8=(function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var e=jl.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(e=jl.insecureContextCameraQueryError()),Promise.reject(e)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},r.getCamerasFromMediaDevices=function(){return Z8(this,void 0,void 0,function(){var e,n,o,u,d,E,T;return J8(this,function(b){switch(b.label){case 0:return e=function(_){for(var C=_.getVideoTracks(),I=0,M=C;I<M.length;I++){var k=M[I];k.enabled=!1,k.stop(),_.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=b.sent(),u=[],d=0,E=o;d<E.length;d++)T=E[d],T.kind==="videoinput"&&u.push({id:T.deviceId,label:T.label});return e(n),[2,u]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(d){for(var E=[],T=0,b=d;T<b.length;T++){var _=b[T];_.kind==="video"&&E.push({id:_.id,label:_.label})}e(E)},u=MediaStreamTrack;u.getSources(o)})},r})(),ni;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(ni||(ni={}));var eR=(function(){function r(){this.state=ni.NOT_STARTED,this.onGoingTransactionNewState=ni.UNKNOWN}return r.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},r.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===ni.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ni.UNKNOWN,this.directTransition(e)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===ni.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ni.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ni.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(e){switch(this.state){case ni.UNKNOWN:throw"Transition from unknown is not allowed";case ni.NOT_STARTED:this.failIfNewStateIs(e,[ni.PAUSED]);break;case ni.SCANNING:break;case ni.PAUSED:break}},r.prototype.failIfNewStateIs=function(e,n){for(var o=0,u=n;o<u.length;o++){var d=u[o];if(e===d)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},r})(),tR=(function(){function r(e){this.stateManager=e}return r.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},r.prototype.directTransition=function(e){this.stateManager.directTransition(e)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===ni.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==ni.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ni.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===ni.PAUSED},r})(),nR=(function(){function r(){}return r.create=function(){return new tR(new eR)},r})(),iR=(function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},r(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Gr=(function(r){iR(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(L8),rR=(function(){function r(e,n){this.logger=n,this.fps=Gr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Gr.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Hw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!xa(this.qrbox)},r.create=function(e,n){return new r(e,n)},r})(),sR=(function(){function r(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new B8(this.verbose),this.qrcode=new H8(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=nR.create()}return r.prototype.start=function(e,n,o,u){var d=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var E;u?E=u:E=this.verbose?this.logger.log:function(){};var T=rR.create(n,this.logger);this.clearElement();var b=!1;T.videoConstraints&&(T.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var _=b,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Gr.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var I=this,M=this.stateManagerProxy.startTransition(ni.SCANNING);return new Promise(function(k,X){var K=_?T.videoConstraints:I.createVideoConstraints(e);if(!K){M.cancel(),X("videoConstraints should be defined");return}var z={};(!_||T.aspectRatio)&&(z.aspectRatio=T.aspectRatio);var xe={onRenderSurfaceReady:function(ge,Q){I.setupUi(ge,Q,T),I.isScanning=!0,I.foreverScan(T,o,E)}};Q8.failIfNotSupported().then(function(ge){ge.create(K).then(function(Q){return Q.render(d.element,z,xe).then(function(ve){I.renderedCamera=ve,M.execute(),k(null)}).catch(function(ve){M.cancel(),X(ve)})}).catch(function(Q){M.cancel(),X(jl.errorGettingUserMedia(Q))})}).catch(function(ge){M.cancel(),X(jl.cameraStreamingNotSupported())})})},r.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ni.PAUSED),this.showPausedState(),(xa(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(ni.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(ni.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var d=document.getElementById(Gr.SHADED_REGION_ELEMENT_ID);d&&e.element.removeChild(d)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),o(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),n.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},r.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(xa(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,d){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var E=new Image;E.onload=function(){var T=E.width,b=E.height,_=document.getElementById(o.elementId),C=_.clientWidth?_.clientWidth:Gr.DEFAULT_WIDTH,I=Math.max(_.clientHeight?_.clientHeight:b,Gr.FILE_SCAN_MIN_HEIGHT),M=o.computeCanvasDrawConfig(T,b,C,I);if(n){var k=o.createCanvasElement(C,I,"qr-canvas-visible");k.style.display="inline-block",_.appendChild(k);var X=k.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=C,X.canvas.height=I,X.drawImage(E,0,0,T,b,M.x,M.y,M.width,M.height)}var K=Gr.FILE_SCAN_HIDDEN_CANVAS_PADDING,z=Math.max(E.width,M.width),xe=Math.max(E.height,M.height),ge=z+2*K,Q=xe+2*K,ve=o.createCanvasElement(ge,Q);_.appendChild(ve);var Fe=ve.getContext("2d");if(!Fe)throw"Unable to get 2d context from canvas";Fe.canvas.width=ge,Fe.canvas.height=Q,Fe.drawImage(E,0,0,T,b,K,K,z,xe);try{o.qrcode.decodeRobustlyAsync(ve).then(function(Be){u(Ly.createFromQrcodeResult(Be))}).catch(d)}catch(Be){d("QR code parse error, error = ".concat(Be))}},E.onerror=d,E.onabort=d,E.onstalled=d,E.onsuspend=d,E.src=URL.createObjectURL(e)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return $8.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(e){if(e){if(!Hw.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(e){var n=[Ge.QR_CODE,Ge.AZTEC,Ge.CODABAR,Ge.CODE_39,Ge.CODE_93,Ge.CODE_128,Ge.DATA_MATRIX,Ge.MAXICODE,Ge.ITF,Ge.EAN_13,Ge.EAN_8,Ge.PDF_417,Ge.RSS_14,Ge.RSS_EXPANDED,Ge.UPC_A,Ge.UPC_E,Ge.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],u=0,d=e.formatsToSupport;u<d.length;u++){var E=d[u];M8(E)?o.push(E):this.logger.warn("Invalid format: ".concat(E," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},r.prototype.getUseBarCodeDetectorIfSupported=function(e){if(xa(e))return!0;if(!xa(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(xa(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return xa(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(e,n,o){var u=this,d=o.qrbox;this.validateQrboxConfig(d);var E=this.toQrdimensions(e,n,d),T=function(_){if(_<Gr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Gr.MIN_QR_BOX_SIZE,"px.")},b=function(_){return _>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),_=e),_};T(E.width),T(E.height),E.width=b(E.width)},r.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return o},r.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var u=xa(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(u);var d=this.toQrdimensions(e,n,u);d.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var E=o.isShadedBoxEnabled()&&d.height<=n,T={x:0,y:0,width:e,height:n},b=E?this.getShadedRegionBounds(e,n,d):T,_=this.createCanvasElement(b.width,b.height),C={willReadFrequently:!0},I=_.getContext("2d",C);I.canvas.width=b.width,I.canvas.height=b.height,this.element.append(_),E&&this.possiblyInsertShadingElement(this.element,e,n,d),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=I,this.canvasElement=_},r.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=jl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},r.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,Ly.createFromQrcodeResult(u)),o.possiblyUpdateShaders(!0),!0}).catch(function(u){o.possiblyUpdateShaders(!1);var d=jl.codeParseError(u);return n(d,P8.createFrom(d)),!1})},r.prototype.foreverScan=function(e,n,o){var u=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),E=d.videoWidth/d.clientWidth,T=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*E,_=this.qrRegion.height*T,C=this.qrRegion.x*E,I=this.qrRegion.y*T;this.context.drawImage(d,C,I,b,_,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,n,o)},u.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(k){!k&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(n,o).finally(function(){M()})):M()}).catch(function(k){u.logger.logError("Error happend while scanning context",k),M()})}},r.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",u={user:!0,environment:!0},d="exact",E=function(X){if(X in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(X,"'")},T=Object.keys(e);if(T.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(T.length," keys");var b=Object.keys(e)[0];if(b!==n&&b!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var _=e.facingMode;if(typeof _=="string"){if(E(_))return{facingMode:_}}else if(typeof _=="object")if(d in _){if(E(_["".concat(d)]))return{facingMode:{exact:_["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var C=typeof _;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(d in I)return{deviceId:{exact:I["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var M=typeof I;throw"Invalid type of 'deviceId' = ".concat(M)}}}var k=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},r.prototype.computeCanvasDrawConfig=function(e,n,o,u){if(e<=o&&n<=u){var d=(o-e)/2,E=(u-n)/2;return{x:d,y:E,width:e,height:n}}else{var T=e,b=n;return e>o&&(n=o/e*n,e=o),n>u&&(e=u/n*e,n=u),this.logger.log("Image downsampled from "+"".concat(T,"X").concat(b)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,u)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},r.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Gr.BORDER_SHADER_MATCH_COLOR:Gr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(e,n,o){var u=e,d=n,E=document.createElement("canvas");return E.style.width="".concat(u,"px"),E.style.height="".concat(d,"px"),E.style.display="none",E.id=xa(o)?"qr-canvas":o,E},r.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},r.prototype.possiblyInsertShadingElement=function(e,n,o,u){if(!(n-u.width<1||o-u.height<1)){var d=document.createElement("div");d.style.position="absolute";var E=(n-u.width)/2,T=(o-u.height)/2;if(d.style.borderLeft="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Gr.SHADED_REGION_ELEMENT_ID),n-u.width<11||o-u.height<11)this.hasBorderShaders=!1;else{var b=5,_=40;this.insertShaderBorders(d,_,b,-b,null,0,!0),this.insertShaderBorders(d,_,b,-b,null,0,!1),this.insertShaderBorders(d,_,b,null,-b,0,!0),this.insertShaderBorders(d,_,b,null,-b,0,!1),this.insertShaderBorders(d,b,_+b,-b,null,-b,!0),this.insertShaderBorders(d,b,_+b,null,-b,-b,!0),this.insertShaderBorders(d,b,_+b,-b,null,-b,!1),this.insertShaderBorders(d,b,_+b,null,-b,-b,!1),this.hasBorderShaders=!0}e.append(d)}},r.prototype.insertShaderBorders=function(e,n,o,u,d,E,T){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=Gr.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(o,"px"),u!==null&&(b.style.top="".concat(u,"px")),d!==null&&(b.style.bottom="".concat(d,"px")),T?b.style.left="".concat(E,"px"):b.style.right="".concat(E,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),e.appendChild(b)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(e){return 1e3/e},r})(),zy;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(zy||(zy={}));const aR=({onRefresh:r})=>{var Oi;const[e,n]=se.useState("roster"),[o,u]=se.useState(!1),[d,E]=se.useState([]),[T,b]=se.useState([]),[_,C]=se.useState([]),[I,M]=se.useState([]),[k,X]=se.useState([]),[K,z]=se.useState([]),[xe,ge]=se.useState([]),[Q,ve]=se.useState([]),[Fe,Be]=se.useState(""),[F,G]=se.useState(new Date().toISOString().substring(0,7)),[V,ne]=se.useState([]),[W,J]=se.useState(""),[Y,Ze]=se.useState(null),fe=ii.useRef(d);ii.useEffect(()=>{fe.current=d},[d]);const[me,we]=se.useState(""),[qe,ot]=se.useState(""),[ft,ie]=se.useState("normal"),[Ae,ke]=se.useState(""),[Ue,tt]=se.useState(!1),[Oe,pt]=se.useState(""),[yt,Jt]=se.useState("100"),[yi,Pn]=se.useState(""),[nr,_t]=se.useState(""),[zn,_i]=se.useState(!1),[Ri,Tn]=se.useState(""),[Bt,Qe]=se.useState(""),[pn,je]=se.useState(""),[qi,ps]=se.useState(""),[xn,mr]=se.useState(""),[ui,Yr]=se.useState(!1),[si,Qn]=se.useState(""),[Cs,xs]=se.useState(!1);se.useEffect(()=>{const te=B6(en=>{b(en.filter(vn=>vn.role===us.STUDENT&&vn.isApproved)),C(en.filter(vn=>vn.role===us.STUDENT&&!vn.isApproved));const Ut=en.filter(vn=>vn.role===us.STUDENT&&vn.isApproved);Ut.length>0&&!Oe&&pt(Ut[0].id)}),lt=cw(E),kt=ow(M),sn=aw(X),ln=O6(z),Zn=lw(ge),Ve=rw(ve),hi=nw(en=>{ne(en),en.length>0&&!qi&&ps(en[0].name)});return()=>{te(),lt(),kt(),sn(),ln(),Zn(),Ve(),hi()}},[Oe,qi]),se.useEffect(()=>{let te=null;return(async()=>{if(e==="scan")try{te=new sR("reader"),await te.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},kt=>{kt&&Sa(kt)},()=>{})}catch(kt){console.error("Unable to start scanner",kt)}})(),()=>{te&&te.isScanning&&te.stop().then(()=>{te==null||te.clear()}).catch(kt=>console.error("Failed to stop scanner",kt))}},[e]);const Sa=te=>{if(Y)return;const lt=fe.current.find(kt=>kt.qrCodeData===te&&kt.status==="pending");lt&&Ze(lt)},Xt=async te=>{const lt=W;if(!lt){alert("");return}u(!0),setTimeout(()=>{const kt=d.find(sn=>sn.qrCodeData===lt&&sn.status==="pending");kt?(Ze(kt),J("")):alert(" "),u(!1)},800)},De=async te=>{await g6(te,"completed"),Ze(null),r(),alert(" ")},Kt=async()=>{var sn;const te=parseInt(yt);if(isNaN(te)||!Oe)return;const lt=T.map(ln=>ln.id===Oe?{...ln,points:ln.points+te,totalEarned:te>0?ln.totalEarned+te:ln.totalEarned}:ln);await l6(lt),r();const kt=(sn=T.find(ln=>ln.id===Oe))==null?void 0:sn.name;alert(`  ${kt}  ${te} 
${yi}`),Jt("")},it=async te=>{await u6(te),alert("")},dn=async te=>{confirm("/")&&await h6(te)},pr=async te=>{if(te.preventDefault(),!Ri||!Bt||!pn)return;const lt={id:`prod_${Date.now()}`,name:Ri,price:parseInt(Bt),stock:parseInt(pn),category:qi,description:`${qi==="food"?"":qi==="electronic"?"":qi==="ticket"?"":""}`,imageUrl:xn||"https://images.unsplash.com/photo-1553456558-aff63285bdd1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3"};await S6(lt),Yr(!1),Tn(""),Qe(""),je(""),mr(""),ps("other"),alert("")},Ss=async te=>{window.confirm("")&&await I6(te)},ir=async te=>{if(te.preventDefault(),!me||!qe)return;const lt={id:`m_${Date.now()}`,title:me,description:"",points:parseInt(qe),type:ft,isActive:!0,maxAttempts:1,deadline:Ae?new Date(Ae).getTime():void 0};await y6(lt),tt(!1),we(""),ot(""),ie("normal"),ke(""),alert("")},At=async te=>{window.confirm("")&&await L6(te)},on=async()=>{nr&&(await N6({id:`r_${Date.now()}`,title:nr}),_t(""),_i(!1))},rr=async te=>{await R6(te)},sr=async te=>{await _6(te)},Nn=async(te,lt)=>{await sw(te,lt),alert("")},Gs=async te=>{await T6(te),alert("")},Hn=async te=>{confirm("")&&await v6(te)},Ai=d.filter(te=>{var Zn,Ve;const lt=(((Zn=te.productName)==null?void 0:Zn.toLowerCase())||"").includes(Fe.toLowerCase())||(((Ve=te.id)==null?void 0:Ve.toLowerCase())||"").includes(Fe.toLowerCase()),kt=new Date(te.timestamp),ln=`${kt.getFullYear()}-${String(kt.getMonth()+1).padStart(2,"0")}`===F;return lt&&ln}),xr=te=>Wo.reduce((lt,kt)=>te>=kt.threshold?kt:lt,Wo[0]);return S.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[S.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:S.jsxs("div",{children:[S.jsxs("h1",{className:"text-4xl font-black text-slate-800 flex items-center gap-4",children:[S.jsx("div",{className:"bg-indigo-600 p-3 rounded-2xl text-white shadow-xl shadow-indigo-100",children:S.jsx($h,{size:32})}),""]}),S.jsx("p",{className:"text-slate-500 mt-2 italic font-medium",children:""})]})}),S.jsxs("div",{className:"flex bg-white p-2 rounded-3xl border border-slate-100 shadow-md overflow-x-auto gap-2",children:[S.jsxs("button",{onClick:()=>n("roster"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="roster"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(oC,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>n("approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[S.jsx(u1,{size:18})," ",S.jsx("span",{children:""}),_.length>0&&S.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:_.length})]}),S.jsxs("button",{onClick:()=>n("points"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="points"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(_v,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>n("products"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="products"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(l1,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>n("mission_approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="mission_approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[S.jsx(o1,{size:18})," ",S.jsx("span",{children:""}),Q.filter(te=>te.status==="pending").length>0&&S.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:Q.filter(te=>te.status==="pending").length})]}),S.jsxs("button",{onClick:()=>n("scan"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="scan"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(sx,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>n("history"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="history"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(Jh,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>n("missions"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="missions"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(Wc,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>n("wishes"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="wishes"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[S.jsx(zh,{size:18})," ",S.jsx("span",{children:""}),xe.length>0&&S.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:xe.length})]})]}),e==="roster"&&S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4",children:T.map(te=>{const lt=xr(te.totalEarned);return S.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-sm hover:shadow-xl transition-all group overflow-hidden relative",children:[S.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${lt.color} opacity-5 -translate-y-12 translate-x-12 rounded-full`}),S.jsxs("div",{className:"flex flex-col items-center text-center",children:[S.jsxs("div",{className:"relative mb-6",children:[S.jsx("div",{className:`absolute inset-0 rounded-full blur-xl opacity-20 ${lt.color}`}),S.jsx("img",{src:te.avatar,className:"w-24 h-24 rounded-full border-4 border-white shadow-2xl relative z-10 object-cover",alt:te.name}),S.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl bg-white shadow-lg flex items-center justify-center text-xl z-20 border border-slate-50",children:lt.icon})]}),S.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-1",children:te.name}),S.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] font-black text-white uppercase tracking-widest mb-6 ${lt.color} shadow-sm`,children:lt.name}),S.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[S.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-50",children:[S.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:""}),S.jsx("p",{className:"text-xl font-black text-indigo-600",children:te.points.toLocaleString()})]}),S.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-2xl border border-amber-50",children:[S.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:""}),S.jsx("p",{className:"text-xl font-black text-amber-600",children:te.totalEarned.toLocaleString()})]})]})]}),S.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-50 flex justify-between items-center",children:[S.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:["ID: ",te.id.replace("user_","")]}),S.jsxs("button",{onClick:()=>{pt(te.id),n("points")},className:"text-indigo-600 font-black text-xs hover:underline flex items-center gap-1",children:[S.jsx(ax,{size:14})," "]})]})]},te.id)})}),e==="points"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[S.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-600 rounded-3xl flex items-center justify-center shadow-inner",children:S.jsx(ax,{size:40})}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:""}),S.jsx("p",{className:"text-slate-400 font-medium",children:""})]})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[S.jsxs("div",{className:"space-y-8",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),S.jsx("div",{className:"grid grid-cols-3 gap-4",children:T.map(te=>S.jsxs("button",{onClick:()=>pt(te.id),className:`flex flex-col items-center gap-3 p-4 rounded-3xl border-2 transition-all ${Oe===te.id?"border-indigo-600 bg-indigo-50 shadow-lg shadow-indigo-100":"border-slate-50 bg-slate-50/50 hover:bg-white hover:border-slate-200"}`,children:[S.jsx("img",{src:te.avatar,className:"w-12 h-12 rounded-full shadow-sm",alt:te.name}),S.jsx("span",{className:`font-black text-sm ${Oe===te.id?"text-indigo-600":"text-slate-600"}`,children:te.name})]},te.id))})]}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsxs("button",{onClick:()=>_i(!zn),className:"text-xs font-black text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[zn?S.jsx(Yo,{size:14}):S.jsx(zc,{size:14}),zn?"":""]})]}),zn?S.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-indigo-100 mb-4 animate-in zoom-in-95 duration-200",children:[S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",placeholder:" (: )",value:nr,onChange:te=>_t(te.target.value),className:"flex-1 p-3 border-2 border-slate-200 rounded-xl focus:border-indigo-600 outline-none font-bold"}),S.jsx("button",{onClick:on,className:"bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 shadow-md",children:S.jsx(zc,{size:20})})]}),S.jsx("div",{className:"mt-4 space-y-2 max-h-40 overflow-y-auto pr-2",children:K.map(te=>S.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100",children:[S.jsx("span",{className:"font-bold text-sm text-slate-700",children:te.title}),S.jsx("button",{onClick:()=>rr(te.id),className:"text-rose-500 hover:text-rose-600",children:S.jsx(Y0,{size:16})})]},te.id))})]}):S.jsxs("select",{value:yi,onChange:te=>Pn(te.target.value),className:"w-full p-5 bg-slate-50 border-2 border-transparent rounded-2xl focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none font-bold text-slate-700 shadow-inner",children:[S.jsx("option",{value:"",children:"..."}),K.length>0?K.map(te=>S.jsx("option",{value:te.title,children:te.title},te.id)):S.jsxs(S.Fragment,{children:[S.jsx("option",{children:""}),S.jsx("option",{children:""}),S.jsx("option",{children:" A++"}),S.jsx("option",{children:""})]}),S.jsx("option",{value:"other",children:""})]}),yi==="other"&&!zn&&S.jsx("input",{type:"text",placeholder:"...",value:yi==="other"?"":yi,onChange:te=>Pn(te.target.value),className:"w-full mt-4 p-5 bg-white border-2 border-indigo-200 rounded-2xl outline-none font-bold text-slate-700"})]})]}),S.jsxs("div",{className:"space-y-8",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:"number",value:yt,onChange:te=>Jt(te.target.value),className:"w-full p-8 text-5xl font-black bg-slate-50 border-2 border-transparent rounded-[2rem] focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-indigo-600 shadow-inner"}),S.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none",children:S.jsx("span",{className:"font-black text-slate-300 text-2xl uppercase tracking-tighter",children:"PTS"})})]})]}),S.jsxs("button",{onClick:Kt,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black py-8 rounded-[2rem] transition-all shadow-2xl shadow-emerald-200 flex items-center justify-center gap-4 text-2xl active:scale-95 group",children:[S.jsx(jc,{size:32,className:"group-hover:scale-125 transition-transform"}),""]})]})]})]}),e==="approval"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[S.jsx(u1,{className:"text-indigo-600"}),"",S.jsxs("span",{className:"bg-indigo-100 text-indigo-600 text-sm px-3 py-1 rounded-full",children:[_.length," "]})]}),S.jsx("div",{className:"space-y-4",children:_.length===0?S.jsx("div",{className:"text-center py-20 text-slate-400 font-bold",children:""}):_.map(te=>S.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-700 font-bold text-xl",children:te.name[0]}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-black text-lg text-slate-800",children:te.name}),S.jsx("p",{className:"text-slate-500 text-sm font-bold",children:te.grade||""})]})]}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:()=>it(te.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold transition-all shadow-lg shadow-emerald-100",children:""}),S.jsx("button",{onClick:()=>dn(te.id),className:"bg-slate-200 hover:bg-rose-500 hover:text-white text-slate-500 px-6 py-2 rounded-xl font-bold transition-all",children:""})]})]},te.id))})]}),e==="products"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[S.jsx(l1,{className:"text-indigo-600"})," "]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsxs("button",{onClick:()=>xs(!Cs),className:"bg-slate-100 text-slate-600 px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-200 transition-all border border-slate-200",children:[S.jsx(Wc,{size:18})," "]}),S.jsxs("button",{onClick:()=>Yr(!ui),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[S.jsx(zc,{size:20})," "]})]})]}),Cs&&S.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[S.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),S.jsxs("div",{className:"flex gap-4 mb-6",children:[S.jsx("input",{placeholder:" (: )",value:si,onChange:te=>Qn(te.target.value),className:"flex-1 p-3 rounded-xl border border-slate-200 font-bold outline-none"}),S.jsx("button",{onClick:()=>{si&&(m6(si),Qn(""))},className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-emerald-700",children:""})]}),S.jsx("div",{className:"flex flex-wrap gap-3",children:V.map(te=>S.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl border border-slate-200 flex items-center gap-2 shadow-sm font-bold text-slate-600",children:[te.name,S.jsx("button",{onClick:()=>p6(te.id),className:"text-slate-300 hover:text-rose-500",children:S.jsx(Yo,{size:14})})]},te.id))})]}),ui&&S.jsxs("form",{onSubmit:pr,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[S.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[S.jsx("input",{placeholder:"",value:Ri,onChange:te=>Tn(te.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsxs("select",{value:qi,onChange:te=>ps(te.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[V.map(te=>S.jsx("option",{value:te.name,children:te.name},te.id)),V.length===0&&S.jsx("option",{value:"",children:""})]}),S.jsx("input",{placeholder:" ()",value:xn,onChange:te=>mr(te.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsx("input",{placeholder:" ()",type:"number",value:Bt,onChange:te=>Qe(te.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsx("input",{placeholder:"",type:"number",value:pn,onChange:te=>je(te.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"})]}),S.jsxs("div",{className:"flex justify-end gap-2",children:[S.jsx("button",{type:"button",onClick:()=>Yr(!1),className:"px-4 py-2 text-slate-400 font-bold hover:text-slate-600",children:""}),S.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700",children:""})]})]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(te=>S.jsxs("div",{className:"border border-slate-100 rounded-[2rem] p-6 flex flex-col gap-4 group hover:shadow-xl transition-all bg-white relative",children:[S.jsxs("div",{className:"flex gap-4 items-center",children:[S.jsx("img",{src:te.imageUrl,alt:te.name,className:"w-20 h-20 rounded-2xl object-cover shadow-sm"}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h4",{className:"font-black text-slate-800 text-lg",children:te.name}),S.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:te.category}),S.jsxs("p",{className:"text-indigo-600 font-black",children:[te.price," PTS"]})]}),S.jsx("button",{onClick:()=>Ss(te.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:S.jsx(Y0,{size:18})})]}),S.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:S.jsxs("div",{className:"flex flex-col",children:[S.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter mb-1",children:""}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("input",{type:"number",defaultValue:te.stock,onBlur:lt=>Nn(te.id,parseInt(lt.target.value)||0),className:"w-16 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-black text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg ${te.stock>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:te.stock>0?"ON SALE":"SOLD OUT"})]})]})})]},te.id))})]}),e==="mission_approval"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[S.jsx(o1,{className:"text-emerald-600"}),"",S.jsxs("span",{className:"bg-emerald-100 text-emerald-600 text-sm px-3 py-1 rounded-full",children:[Q.filter(te=>te.status==="pending").length," "]})]}),S.jsx("div",{className:"space-y-6",children:Q.filter(te=>te.status==="pending").length===0?S.jsx("div",{className:"text-center py-24 text-slate-400 font-bold bg-slate-50 rounded-[3rem] border border-slate-100 border-dashed",children:""}):Q.filter(te=>te.status==="pending").map(te=>S.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center text-2xl font-black text-indigo-600 border border-slate-100",children:te.userName[0]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-black text-slate-800",children:te.userName}),S.jsxs("p",{className:"text-slate-500 font-bold flex items-center gap-2",children:["",S.jsxs("span",{className:"text-indigo-600",children:["",te.missionTitle,""]})]}),S.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-2",children:["",te.points," PTS  ",new Date(te.timestamp).toLocaleString()]})]})]}),S.jsxs("div",{className:"flex gap-4",children:[S.jsxs("button",{onClick:()=>Gs(te.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-2xl font-black transition-all shadow-xl shadow-emerald-100 flex items-center gap-2",children:[S.jsx(jc,{size:20})," "]}),S.jsx("button",{onClick:()=>Hn(te.id),className:"bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-600 px-8 py-3 rounded-2xl font-black transition-all border border-slate-200",children:""})]})]},te.id))})]}),e==="scan"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-16 border border-slate-100 text-center shadow-xl animate-in fade-in",children:[S.jsx("div",{className:"bg-indigo-50 w-32 h-32 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 text-indigo-600 shadow-inner",children:S.jsx(sx,{size:56})}),S.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight",children:"QR Code "}),S.jsx("p",{className:"text-slate-400 mb-8 font-medium max-w-md mx-auto leading-relaxed",children:" QR Code "}),S.jsx("div",{className:"max-w-md mx-auto mb-8 overflow-hidden rounded-[2rem] border-4 border-indigo-50 shadow-inner",children:S.jsx("div",{id:"reader",className:"w-full"})}),S.jsxs("div",{className:"max-w-md mx-auto mb-8",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx("div",{className:"h-px bg-slate-200 flex-1"}),S.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:""}),S.jsx("div",{className:"h-px bg-slate-200 flex-1"})]}),S.jsx("input",{type:"text",placeholder:" QR Code ...",value:W,onChange:te=>J(te.target.value),className:"w-full p-4 bg-slate-50 border-2 border-indigo-50 rounded-2xl focus:bg-white focus:border-indigo-600 outline-none font-mono text-xs text-slate-500 text-center"})]}),S.jsx("button",{onClick:()=>Xt(),disabled:o,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white px-16 py-6 rounded-[2rem] font-black transition-all shadow-2xl shadow-indigo-200 inline-flex items-center justify-center gap-4 text-xl active:scale-95",children:o?"...":""})]}),e==="history"&&S.jsxs("section",{className:"bg-white rounded-[3rem] border border-slate-100 shadow-xl overflow-hidden animate-in fade-in",children:[S.jsxs("div",{className:"p-10 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[S.jsxs("h2",{className:"font-black text-2xl text-slate-800 flex items-center gap-3",children:[S.jsx(Jh,{className:"text-indigo-600"}),""]}),S.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[S.jsx("div",{className:"relative",children:S.jsx("input",{type:"month",value:F,onChange:te=>G(te.target.value),className:"pl-5 pr-5 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm font-bold shadow-inner"})}),S.jsxs("div",{className:"relative",children:[S.jsx(Uv,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",size:20}),S.jsx("input",{type:"text",placeholder:"...",value:Fe,onChange:te=>Be(te.target.value),className:"pl-14 pr-8 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm w-full md:w-80 shadow-inner font-bold"})]})]})]}),S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full",children:[S.jsx("thead",{className:"bg-slate-50/50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""})]})}),S.jsx("tbody",{className:"divide-y divide-slate-50",children:Ai.map(te=>{var lt;try{return S.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[S.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:S.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${te.status==="completed"?"bg-emerald-100 text-emerald-700":te.status==="pending"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:te.status==="completed"?"":te.status==="pending"?"":""})}),S.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-black text-slate-800",children:((lt=T.find(kt=>kt.id===te.userId))==null?void 0:lt.name)||""}),S.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-bold text-slate-600",children:te.productName}),S.jsxs("td",{className:"px-10 py-6 whitespace-nowrap text-indigo-600 font-black",children:[te.pointsSpent," PTS"]}),S.jsx("td",{className:"px-10 py-6 whitespace-nowrap text-slate-400 text-sm font-bold",children:te.timestamp?new Date(te.timestamp).toLocaleDateString():""}),S.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:te.status==="pending"?S.jsx("button",{onClick:()=>De(te.id),className:"text-white bg-indigo-600 hover:bg-indigo-700 px-5 py-2.5 rounded-xl text-xs font-black transition-all shadow-xl shadow-indigo-100 active:scale-95",children:""}):S.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-black text-[10px] tracking-widest",children:[S.jsx(jc,{size:14})," FINISHED"]})})]},te.id)}catch(kt){return console.error("Row render error",kt),null}})})]})})]}),e==="missions"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[S.jsx(Wc,{className:"text-indigo-600"})," "]}),S.jsxs("button",{onClick:()=>tt(!Ue),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[S.jsx(zc,{size:18})," "]})]}),Ue&&S.jsxs("form",{onSubmit:ir,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[S.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[S.jsx("input",{placeholder:"",value:me,onChange:te=>we(te.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsx("input",{placeholder:"",type:"number",value:qe,onChange:te=>ot(te.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsxs("select",{value:ft,onChange:te=>ie(te.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[S.jsx("option",{value:"normal",children:""}),S.jsx("option",{value:"challenge",children:""}),S.jsx("option",{value:"hard",children:""})]}),S.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white rounded-xl border border-slate-200",children:[S.jsx(Zh,{size:18,className:"text-slate-400"}),S.jsx("input",{type:"datetime-local",value:Ae,onChange:te=>ke(te.target.value),className:"font-bold outline-none text-slate-600 w-full",placeholder:" ()"})]})]}),S.jsxs("div",{className:"flex justify-end gap-3",children:[S.jsx("button",{type:"button",onClick:()=>tt(!1),className:"px-4 py-2 rounded-xl font-bold text-slate-400 hover:bg-slate-200 transition-all",children:""}),S.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg",children:""})]})]}),S.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[k.length===0&&S.jsx("div",{className:"text-center py-12 text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-100 border-dashed",children:""}),k.map(te=>S.jsxs("div",{className:`flex flex-col md:flex-row md:items-center justify-between p-6 rounded-2xl border transition-all ${te.isActive?"bg-white border-slate-100 shadow-sm":"bg-slate-50 border-slate-100 opacity-60"}`,children:[S.jsxs("div",{className:"flex items-center gap-4 mb-4 md:mb-0",children:[S.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg shrink-0 ${te.type==="normal"?"bg-emerald-100 text-emerald-600":te.type==="challenge"?"bg-orange-100 text-orange-600":"bg-rose-100 text-rose-600"}`,children:te.type==="normal"?"N":te.type==="challenge"?"C":"H"}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[te.title,!te.isActive&&S.jsx("span",{className:"text-[10px] bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:""})]}),S.jsxs("p",{className:"text-slate-400 text-sm font-bold flex items-center gap-2",children:[S.jsxs("span",{className:"text-indigo-500",children:[te.points," PTS"]}),"  ",te.description,te.deadline&&S.jsxs("span",{className:"flex items-center gap-1 text-amber-500 ml-2",children:[S.jsx(Zh,{size:14})," ",new Date(te.deadline).toLocaleString()," "]})]})]})]}),S.jsx("button",{onClick:()=>sr(te.id),className:`px-4 py-2 rounded-xl font-black text-xs transition-all whitespace-nowrap ${te.isActive?"bg-rose-50 text-rose-600 hover:bg-rose-100":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:te.isActive?"":""})]},te.id))]})]}),e==="wishes"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[S.jsx(zh,{className:"text-pink-500"})," "]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:xe.length===0?S.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 font-bold",children:""}):xe.map(te=>{var lt;return S.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2.5rem] border border-slate-100 relative group",children:[S.jsx("button",{onClick:()=>At(te.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full text-slate-300 hover:text-rose-500 hover:shadow-md transition-all opacity-0 group-hover:opacity-100",children:S.jsx(Y0,{size:18})}),S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.jsx("img",{src:te.userAvatar,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm",alt:te.userName}),S.jsxs("div",{children:[S.jsx("h4",{className:"font-black text-slate-800",children:te.userName}),S.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:new Date(te.timestamp).toLocaleString()})]})]}),S.jsxs("h3",{className:"text-xl font-black text-slate-800 mb-2",children:["",te.itemName]}),S.jsxs("p",{className:"text-slate-500 text-sm mb-6 leading-relaxed italic",children:['"',te.description,'"']}),S.jsxs("div",{className:"flex items-center gap-2 text-pink-500 font-black text-sm",children:[S.jsx(zh,{size:16,fill:"currentColor"})," ",((lt=te.likedBy)==null?void 0:lt.length)||0," "]})]},te.id)})})]}),o&&S.jsxs("div",{className:"fixed inset-0 z-[150] bg-slate-900/95 backdrop-blur-xl flex flex-col items-center justify-center p-8",children:[S.jsxs("div",{className:"relative w-full max-w-lg aspect-square border-8 border-white/5 rounded-[5rem] overflow-hidden shadow-[0_0_100px_rgba(79,70,229,0.3)]",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-indigo-900/20 to-slate-900 flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx(Bv,{size:140,className:"mx-auto mb-10 animate-pulse text-indigo-400"}),S.jsx("p",{className:"text-3xl font-black text-white mb-4 tracking-tight",children:"..."}),S.jsx("p",{className:"text-indigo-300 font-bold tracking-widest uppercase text-xs",children:"AI Computer Vision Active"})]})}),S.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-indigo-400 shadow-[0_0_50px_rgba(129,140,248,1)] animate-scan-line"})]}),S.jsxs("button",{onClick:()=>u(!1),className:"mt-16 bg-white/5 hover:bg-white/10 text-white px-12 py-5 rounded-[2rem] font-black transition-all border border-white/10 flex items-center gap-4 text-lg backdrop-blur",children:[S.jsx(Yo,{size:24})," "]}),S.jsx("style",{children:`
            @keyframes scan-line {
              0% { top: 0% }
              100% { top: 100% }
            }
            .animate-scan-line {
              animation: scan-line 3s linear infinite;
            }
          `})]}),Y&&S.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-2xl",children:S.jsxs("div",{className:"bg-white rounded-[4rem] max-w-md w-full p-12 shadow-[0_0_80px_rgba(0,0,0,0.5)] animate-in zoom-in-95 duration-200",children:[S.jsx("div",{className:"bg-emerald-50 w-24 h-24 rounded-[2rem] flex items-center justify-center text-emerald-600 mb-10 mx-auto shadow-inner",children:S.jsx($h,{size:48})}),S.jsx("h2",{className:"text-3xl font-black text-slate-800 text-center mb-10 tracking-tight",children:""}),S.jsxs("div",{className:"bg-slate-50 rounded-[2.5rem] p-8 space-y-6 mb-12 border border-slate-100 shadow-inner",children:[S.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[S.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),S.jsx("span",{className:"font-black text-slate-800 text-xl",children:(Oi=T.find(te=>te.id===Y.userId))==null?void 0:Oi.name})]}),S.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[S.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),S.jsx("span",{className:"font-black text-slate-800 text-xl",children:Y.productName})]}),S.jsxs("div",{className:"flex justify-between items-center py-2",children:[S.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),S.jsxs("span",{className:"font-black text-indigo-600 text-2xl",children:[Y.pointsSpent," ",S.jsx("span",{className:"text-xs font-bold text-indigo-400",children:"PTS"})]})]})]}),S.jsxs("div",{className:"flex flex-col gap-4",children:[S.jsxs("button",{onClick:()=>De(Y.id),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-6 rounded-2xl transition-all shadow-2xl shadow-indigo-100 flex items-center justify-center gap-4 text-xl active:scale-95",children:[S.jsx(jc,{size:28}),""]}),S.jsx("button",{onClick:()=>Ze(null),className:"w-full bg-slate-100 text-slate-600 font-bold py-5 rounded-2xl hover:bg-slate-200 transition-all text-lg",children:""})]})]})})]})},oR=({user:r})=>{const[e,n]=se.useState([]),[o,u]=se.useState(!1),[d,E]=se.useState(""),[T,b]=se.useState("");se.useEffect(()=>{const M=lw(k=>{n(k.sort((X,K)=>K.timestamp-X.timestamp))});return()=>M()},[]);const _=async M=>{if(M.preventDefault(),!d.trim()||!T.trim())return;const k={id:`wish_${Date.now()}`,userId:r.id,userName:r.name,userAvatar:r.avatar,itemName:d,description:T,timestamp:Date.now(),likedBy:[]};await M6(k),u(!1),E(""),b("")},C=async M=>{await P6(M,r.id)},I=e.some(M=>M.userId===r.id);return S.jsxs("div",{className:"space-y-8 pb-20",children:[S.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[S.jsx(c1,{className:"text-yellow-500"}),""]}),S.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),S.jsxs("button",{onClick:()=>{I?alert(""):u(!0)},className:`px-6 py-3 rounded-2xl font-bold shadow-lg flex items-center gap-2 transition-all hover:scale-105 ${I?"bg-slate-200 text-slate-400 cursor-not-allowed":"bg-indigo-600 text-white shadow-indigo-100 hover:bg-indigo-700"}`,children:[S.jsx(zc,{size:20}),S.jsx("span",{children:I?"":""})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.map(M=>{var k,X,K,z;return S.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all flex flex-col relative overflow-hidden group",children:[S.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-yellow-50 rounded-full blur-2xl group-hover:bg-yellow-100 transition-colors"}),S.jsxs("div",{className:"flex items-center gap-3 mb-4 z-10",children:[S.jsx("img",{src:M.userAvatar,alt:M.userName,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-bold text-slate-700",children:M.userName}),S.jsx("p",{className:"text-xs text-slate-400",children:new Date(M.timestamp).toLocaleDateString()})]})]}),S.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2 z-10",children:M.itemName}),S.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 z-10",children:M.description}),S.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50 z-10",children:S.jsxs("button",{onClick:()=>C(M.id),className:`flex items-center gap-2 transition-colors group/like ${(k=M.likedBy)!=null&&k.includes(r.id)?"text-pink-500":"text-slate-400 hover:text-pink-500"}`,children:[S.jsx("div",{className:`p-2 rounded-full transition-colors ${(X=M.likedBy)!=null&&X.includes(r.id)?"bg-pink-50":"hover:bg-pink-50"}`,children:S.jsx(Zv,{size:18,className:(K=M.likedBy)!=null&&K.includes(r.id)?"fill-pink-500":""})}),S.jsxs("span",{className:"font-bold text-sm",children:[((z=M.likedBy)==null?void 0:z.length)||0," "]})]})})]},M.id)}),e.length===0&&S.jsxs("div",{className:"col-span-full py-20 text-center space-y-4",children:[S.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto text-slate-300",children:S.jsx(zh,{size:40})}),S.jsx("p",{className:"text-slate-400 font-bold",children:""})]})]}),o&&S.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:S.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-2",children:[S.jsx(c1,{className:"text-indigo-500"}),""]}),S.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:S.jsx(Yo,{size:24})})]}),S.jsxs("form",{onSubmit:_,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),S.jsx("input",{type:"text",value:d,onChange:M=>E(M.target.value),placeholder:"AirPods Pro...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all placeholder:font-medium",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),S.jsx("textarea",{value:T,onChange:M=>b(M.target.value),placeholder:"...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-medium text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all h-32 resize-none placeholder:font-medium",required:!0})]}),S.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[S.jsx(Fv,{size:24}),""]})]})]})})]})},lR=({onLogin:r})=>{const[e,n]=se.useState("student"),[o,u]=se.useState(!1),[d,E]=se.useState(""),[T,b]=se.useState(""),[_,C]=se.useState(""),[I,M]=se.useState(""),[k,X]=se.useState(""),K=async Q=>{Q.preventDefault();const Fe=(await ew()).find(Be=>Be.name===d);if(!Fe){alert("");return}if(Fe.password&&Fe.password!==T){alert("");return}if(!Fe.isApproved){alert("");return}await Wh(Fe),alert(""),r(Fe)},z=async Q=>{Q.preventDefault(),await c6(d,T,_)?(alert(""),u(!1),b("")):alert("")},xe=Q=>{Q.preventDefault(),I==="0957999"?(Wh(EE),alert(""),r(EE)):alert("")},ge=Q=>{Q.preventDefault(),k.toLowerCase()==="aaa"?(Wh(yE),alert(""),r(yE)):alert("")};return S.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white max-w-4xl w-full rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[S.jsxs("div",{className:"bg-indigo-600 p-12 text-white md:w-5/12 flex flex-col justify-between relative overflow-hidden",children:[S.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full -translate-y-1/2 translate-x-1/3 opacity-50"}),S.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-700 rounded-full translate-y-1/3 -translate-x-1/3 opacity-50"}),S.jsxs("div",{className:"relative z-10",children:[S.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-2xl flex items-center justify-center backdrop-blur-sm mb-6",children:S.jsx(u_,{size:32})}),S.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4",children:""}),S.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed",children:""})]}),S.jsx("div",{className:"relative z-10 text-sm font-medium text-indigo-200",children:" 2026 Workshop System"})]}),S.jsxs("div",{className:"p-8 md:p-12 md:w-7/12 flex flex-col",children:[!o&&S.jsxs("div",{className:"flex gap-2 mb-10 overflow-x-auto pb-2",children:[S.jsxs("button",{onClick:()=>n("student"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${e==="student"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[S.jsx(sC,{size:18})," "]}),S.jsxs("button",{onClick:()=>n("admin"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${e==="admin"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[S.jsx($h,{size:18})," "]}),S.jsxs("button",{onClick:()=>n("guest"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${e==="guest"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[S.jsx(mv,{size:18})," "]})]}),!o&&e==="student"&&S.jsxs("form",{onSubmit:K,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),S.jsx("p",{className:"text-slate-400",children:""})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"text",value:d,onChange:Q=>E(Q.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"password",value:T,onChange:Q=>b(Q.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]})]}),S.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""}),S.jsx("div",{className:"text-center",children:S.jsx("button",{type:"button",onClick:()=>u(!0),className:"text-indigo-500 font-bold hover:underline",children:""})})]}),o&&S.jsxs("form",{onSubmit:z,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),S.jsx("p",{className:"text-slate-400",children:""})]}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"text",value:d,onChange:Q=>E(Q.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"password",value:T,onChange:Q=>b(Q.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsxs("select",{value:_,onChange:Q=>C(Q.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",children:[S.jsx("option",{children:""}),S.jsx("option",{children:""}),S.jsx("option",{children:""})]})]})]}),S.jsxs("button",{type:"submit",className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-black py-4 rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2",children:[S.jsx(u1,{size:20}),""]}),S.jsx("div",{className:"text-center",children:S.jsx("button",{type:"button",onClick:()=>u(!1),className:"text-slate-400 font-bold hover:text-slate-600",children:""})})]}),!o&&e==="admin"&&S.jsxs("form",{onSubmit:xe,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),S.jsx("p",{className:"text-slate-400",children:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"password",value:I,onChange:Q=>M(Q.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),S.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]}),!o&&e==="guest"&&S.jsxs("form",{onSubmit:ge,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),S.jsx("p",{className:"text-slate-400",children:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"text",value:k,onChange:Q=>X(Q.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),S.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]})]})]})})},cR=({user:r,currentRank:e,onSwitchUser:n})=>{const o=xo(),[u,d]=se.useState(!1),E=[{path:"/",label:"",icon:Tv},{path:"/shop",label:"",icon:Hv},{path:"/wishes",label:"",icon:c1},{path:"/history",label:"",icon:Jh}];return r.role===us.ADMIN&&E.push({path:"/admin",label:"",icon:$h}),S.jsxs("nav",{className:"bg-white border-r border-slate-200 w-full md:w-64 md:fixed md:inset-y-0 h-auto md:h-full z-50 shadow-sm",children:[S.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:S.jsx(u_,{size:20})}),S.jsx("span",{className:"text-xl font-bold text-slate-800 tracking-tight",children:""})]}),S.jsx("button",{onClick:()=>d(!u),className:"md:hidden text-slate-600",children:u?S.jsx(Yo,{}):S.jsx(Rv,{})})]}),S.jsx("div",{className:`${u?"block":"hidden"} md:block p-4 space-y-2`,children:E.map(T=>{const b=T.icon,_=o.pathname===T.path;return S.jsxs(W1,{to:T.path,onClick:()=>d(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${_?"bg-indigo-50 text-indigo-700 font-bold shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(b,{size:20}),S.jsx("span",{children:T.label})]},T.path)})}),S.jsxs("div",{className:`${u?"block":"hidden"} md:block absolute bottom-0 w-full p-6 border-t border-slate-100 bg-white`,children:[S.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[S.jsx("img",{src:r.avatar,className:"w-10 h-10 rounded-full border-2 border-slate-100 object-cover",alt:"avatar"}),S.jsxs("div",{className:"overflow-hidden",children:[S.jsx("p",{className:"font-bold text-slate-800 truncate text-sm",children:r.name}),S.jsxs("div",{className:`text-[9px] px-2 py-0.5 rounded-full inline-block text-white font-black ${e.color}`,children:[e.icon," ",e.name]})]})]}),S.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 transition-colors text-xs font-bold w-full bg-indigo-50 p-2 rounded-lg justify-center mb-2",children:[S.jsx(Cv,{size:14}),S.jsx("span",{children:""})]})]})]})},uR=()=>{const[r,e]=se.useState(_E()),n=r?Wo.reduce((d,E)=>r.totalEarned>=E.threshold?E:d,Wo[0]):Wo[0],o=()=>{const d=_E();d&&e(d)},u=()=>{f6(),e(null)};return r?S.jsx(z3,{children:S.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#fbfcfd]",children:[S.jsx(cR,{user:r,currentRank:n,onSwitchUser:u}),S.jsx("main",{className:"flex-1 md:ml-64 p-4 md:p-8",children:S.jsx("div",{className:"max-w-6xl mx-auto",children:S.jsxs(E3,{children:[S.jsx(Ml,{path:"/",element:S.jsx(A8,{user:r,rank:n,onUserUpdate:o})}),S.jsx(Ml,{path:"/shop",element:S.jsx(w8,{user:r,onUserUpdate:o})}),S.jsx(Ml,{path:"/wishes",element:S.jsx(oR,{user:r})}),S.jsx(Ml,{path:"/history",element:S.jsx(D8,{user:r})}),S.jsx(Ml,{path:"/admin",element:S.jsx(aR,{onRefresh:o})})]})})})]})}):S.jsx(lR,{onLogin:e})},qw=document.getElementById("root");if(!qw)throw new Error("Could not find root element to mount to");const hR=_T.createRoot(qw);hR.render(S.jsx(ii.StrictMode,{children:S.jsx(uR,{})}));
